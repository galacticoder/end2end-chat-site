var hb=Object.defineProperty;var gb=(e,t,n)=>t in e?hb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Z=(e,t,n)=>gb(e,typeof t!="symbol"?t+"":t,n);function Ab(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Cw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pb(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var bw={exports:{}},ud={},Iw={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=Symbol.for("react.element"),mb=Symbol.for("react.portal"),yb=Symbol.for("react.fragment"),wb=Symbol.for("react.strict_mode"),vb=Symbol.for("react.profiler"),xb=Symbol.for("react.provider"),Eb=Symbol.for("react.context"),Cb=Symbol.for("react.forward_ref"),bb=Symbol.for("react.suspense"),Ib=Symbol.for("react.memo"),Sb=Symbol.for("react.lazy"),Dp=Symbol.iterator;function Bb(e){return e===null||typeof e!="object"?null:(e=Dp&&e[Dp]||e["@@iterator"],typeof e=="function"?e:null)}var Sw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bw=Object.assign,kw={};function ji(e,t,n){this.props=e,this.context=t,this.refs=kw,this.updater=n||Sw}ji.prototype.isReactComponent={};ji.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ji.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rw(){}Rw.prototype=ji.prototype;function Kg(e,t,n){this.props=e,this.context=t,this.refs=kw,this.updater=n||Sw}var $g=Kg.prototype=new Rw;$g.constructor=Kg;Bw($g,ji.prototype);$g.isPureReactComponent=!0;var Pp=Array.isArray,Tw=Object.prototype.hasOwnProperty,Vg={current:null},_w={key:!0,ref:!0,__self:!0,__source:!0};function Nw(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Tw.call(t,r)&&!_w.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];s.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Cl,type:e,key:o,ref:i,props:s,_owner:Vg.current}}function kb(e,t){return{$$typeof:Cl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cl}function Rb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Mp=/\/+/g;function tf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Rb(""+e.key):t.toString(36)}function Bc(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Cl:case mb:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+tf(i,0):r,Pp(s)?(n="",e!=null&&(n=e.replace(Mp,"$&/")+"/"),Bc(s,t,n,"",function(l){return l})):s!=null&&(Wg(s)&&(s=kb(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Mp,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Pp(e))for(var a=0;a<e.length;a++){o=e[a];var u=r+tf(o,a);i+=Bc(o,t,n,u,s)}else if(u=Bb(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=r+tf(o,a++),i+=Bc(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function jl(e,t,n){if(e==null)return e;var r=[],s=0;return Bc(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Tb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gt={current:null},kc={transition:null},_b={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:kc,ReactCurrentOwner:Vg};function Dw(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:jl,forEach:function(e,t,n){jl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jl(e,function(){t++}),t},toArray:function(e){return jl(e,function(t){return t})||[]},only:function(e){if(!Wg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=ji;ve.Fragment=yb;ve.Profiler=vb;ve.PureComponent=Kg;ve.StrictMode=wb;ve.Suspense=bb;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_b;ve.act=Dw;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bw({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Vg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Tw.call(t,u)&&!_w.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Cl,type:e.type,key:s,ref:o,props:r,_owner:i}};ve.createContext=function(e){return e={$$typeof:Eb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xb,_context:e},e.Consumer=e};ve.createElement=Nw;ve.createFactory=function(e){var t=Nw.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:Cb,render:e}};ve.isValidElement=Wg;ve.lazy=function(e){return{$$typeof:Sb,_payload:{_status:-1,_result:e},_init:Tb}};ve.memo=function(e,t){return{$$typeof:Ib,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=kc.transition;kc.transition={};try{e()}finally{kc.transition=t}};ve.unstable_act=Dw;ve.useCallback=function(e,t){return Gt.current.useCallback(e,t)};ve.useContext=function(e){return Gt.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Gt.current.useDeferredValue(e)};ve.useEffect=function(e,t){return Gt.current.useEffect(e,t)};ve.useId=function(){return Gt.current.useId()};ve.useImperativeHandle=function(e,t,n){return Gt.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return Gt.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return Gt.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return Gt.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return Gt.current.useReducer(e,t,n)};ve.useRef=function(e){return Gt.current.useRef(e)};ve.useState=function(e){return Gt.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return Gt.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return Gt.current.useTransition()};ve.version="18.3.1";Iw.exports=ve;var w=Iw.exports;const Nb=Cw(w),Pw=Ab({__proto__:null,default:Nb},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db=w,Pb=Symbol.for("react.element"),Mb=Symbol.for("react.fragment"),Qb=Object.prototype.hasOwnProperty,Fb=Db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jb={key:!0,ref:!0,__self:!0,__source:!0};function Mw(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Qb.call(t,r)&&!jb.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Pb,type:e,key:o,ref:i,props:s,_owner:Fb.current}}ud.Fragment=Mb;ud.jsx=Mw;ud.jsxs=Mw;bw.exports=ud;var c=bw.exports,Qw={exports:{}},xn={},Fw={exports:{}},jw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,D){var V=N.length;N.push(D);e:for(;0<V;){var J=V-1>>>1,te=N[J];if(0<s(te,D))N[J]=D,N[V]=te,V=J;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var D=N[0],V=N.pop();if(V!==D){N[0]=V;e:for(var J=0,te=N.length,K=te>>>1;J<K;){var P=2*(J+1)-1,j=N[P],U=P+1,L=N[U];if(0>s(j,V))U<te&&0>s(L,j)?(N[J]=L,N[U]=V,J=U):(N[J]=j,N[P]=V,J=P);else if(U<te&&0>s(L,V))N[J]=L,N[U]=V,J=U;else break e}}return D}function s(N,D){var V=N.sortIndex-D.sortIndex;return V!==0?V:N.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var u=[],l=[],d=1,g=null,h=3,A=!1,f=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var D=n(l);D!==null;){if(D.callback===null)r(l);else if(D.startTime<=N)r(l),D.sortIndex=D.expirationTime,t(u,D);else break;D=n(l)}}function E(N){if(m=!1,x(N),!f)if(n(u)!==null)f=!0,O(C);else{var D=n(l);D!==null&&X(E,D.startTime-N)}}function C(N,D){f=!1,m&&(m=!1,p(S),S=-1),A=!0;var V=h;try{for(x(D),g=n(u);g!==null&&(!(g.expirationTime>D)||N&&!B());){var J=g.callback;if(typeof J=="function"){g.callback=null,h=g.priorityLevel;var te=J(g.expirationTime<=D);D=e.unstable_now(),typeof te=="function"?g.callback=te:g===n(u)&&r(u),x(D)}else r(u);g=n(u)}if(g!==null)var K=!0;else{var P=n(l);P!==null&&X(E,P.startTime-D),K=!1}return K}finally{g=null,h=V,A=!1}}var I=!1,b=null,S=-1,k=5,R=-1;function B(){return!(e.unstable_now()-R<k)}function M(){if(b!==null){var N=e.unstable_now();R=N;var D=!0;try{D=b(!0,N)}finally{D?T():(I=!1,b=null)}}else I=!1}var T;if(typeof y=="function")T=function(){y(M)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,H=F.port2;F.port1.onmessage=M,T=function(){H.postMessage(null)}}else T=function(){v(M,0)};function O(N){b=N,I||(I=!0,T())}function X(N,D){S=v(function(){N(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){f||A||(f=!0,O(C))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(N){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var V=h;h=D;try{return N()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,D){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=h;h=N;try{return D()}finally{h=V}},e.unstable_scheduleCallback=function(N,D,V){var J=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,N){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=V+te,N={id:d++,callback:D,priorityLevel:N,startTime:V,expirationTime:te,sortIndex:-1},V>J?(N.sortIndex=V,t(l,N),n(u)===null&&N===n(l)&&(m?(p(S),S=-1):m=!0,X(E,V-J))):(N.sortIndex=te,t(u,N),f||A||(f=!0,O(C))),N},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(N){var D=h;return function(){var V=h;h=D;try{return N.apply(this,arguments)}finally{h=V}}}})(jw);Fw.exports=jw;var Lb=Fw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob=w,vn=Lb;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lw=new Set,Ga={};function To(e,t){Ci(e,t),Ci(e+"Capture",t)}function Ci(e,t){for(Ga[e]=t,e=0;e<t.length;e++)Lw.add(t[e])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=Object.prototype.hasOwnProperty,Ub=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qp={},Fp={};function Hb(e){return wh.call(Fp,e)?!0:wh.call(Qp,e)?!1:Ub.test(e)?Fp[e]=!0:(Qp[e]=!0,!1)}function zb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gb(e,t,n,r){if(t===null||typeof t>"u"||zb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Kt(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ct[e]=new Kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ct[t]=new Kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ct[e]=new Kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ct[e]=new Kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ct[e]=new Kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ct[e]=new Kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ct[e]=new Kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ct[e]=new Kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ct[e]=new Kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yg=/[\-:]([a-z])/g;function Xg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yg,Xg);Ct[t]=new Kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yg,Xg);Ct[t]=new Kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yg,Xg);Ct[t]=new Kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ct[e]=new Kt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ct[e]=new Kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jg(e,t,n,r){var s=Ct.hasOwnProperty(t)?Ct[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gb(t,n,s,r)&&(n=null),r||s===null?Hb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zr=Ob.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ll=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),qo=Symbol.for("react.fragment"),qg=Symbol.for("react.strict_mode"),vh=Symbol.for("react.profiler"),Ow=Symbol.for("react.provider"),Uw=Symbol.for("react.context"),Zg=Symbol.for("react.forward_ref"),xh=Symbol.for("react.suspense"),Eh=Symbol.for("react.suspense_list"),eA=Symbol.for("react.memo"),fs=Symbol.for("react.lazy"),Hw=Symbol.for("react.offscreen"),jp=Symbol.iterator;function qi(e){return e===null||typeof e!="object"?null:(e=jp&&e[jp]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,nf;function pa(e){if(nf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nf=t&&t[1]||""}return`
`+nf+e}var rf=!1;function sf(e,t){if(!e||rf)return"";rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var u=`
`+s[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=a);break}}}finally{rf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pa(e):""}function Kb(e){switch(e.tag){case 5:return pa(e.type);case 16:return pa("Lazy");case 13:return pa("Suspense");case 19:return pa("SuspenseList");case 0:case 2:case 15:return e=sf(e.type,!1),e;case 11:return e=sf(e.type.render,!1),e;case 1:return e=sf(e.type,!0),e;default:return""}}function Ch(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qo:return"Fragment";case Jo:return"Portal";case vh:return"Profiler";case qg:return"StrictMode";case xh:return"Suspense";case Eh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uw:return(e.displayName||"Context")+".Consumer";case Ow:return(e._context.displayName||"Context")+".Provider";case Zg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case eA:return t=e.displayName||null,t!==null?t:Ch(e.type)||"Memo";case fs:t=e._payload,e=e._init;try{return Ch(e(t))}catch{}}return null}function $b(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ch(t);case 8:return t===qg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vb(e){var t=zw(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ol(e){e._valueTracker||(e._valueTracker=Vb(e))}function Gw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zw(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Kc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bh(e,t){var n=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Lp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Qs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kw(e,t){t=t.checked,t!=null&&Jg(e,"checked",t,!1)}function Ih(e,t){Kw(e,t);var n=Qs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Sh(e,t.type,Qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Op(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Sh(e,t,n){(t!=="number"||Kc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ma=Array.isArray;function fi(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Bh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Up(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(ma(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Qs(n)}}function $w(e,t){var n=Qs(t.value),r=Qs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Hp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ul,Ww=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ul=Ul||document.createElement("div"),Ul.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ul.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ka(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wb=["Webkit","ms","Moz","O"];Object.keys(ba).forEach(function(e){Wb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ba[t]=ba[e]})});function Yw(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ba.hasOwnProperty(e)&&ba[e]?(""+t).trim():t+"px"}function Xw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Yw(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Yb=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rh(e,t){if(t){if(Yb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Th(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=null;function tA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nh=null,hi=null,gi=null;function zp(e){if(e=Sl(e)){if(typeof Nh!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Ad(t),Nh(e.stateNode,e.type,t))}}function Jw(e){hi?gi?gi.push(e):gi=[e]:hi=e}function qw(){if(hi){var e=hi,t=gi;if(gi=hi=null,zp(e),t)for(e=0;e<t.length;e++)zp(t[e])}}function Zw(e,t){return e(t)}function e1(){}var of=!1;function t1(e,t,n){if(of)return e(t,n);of=!0;try{return Zw(e,t,n)}finally{of=!1,(hi!==null||gi!==null)&&(e1(),qw())}}function $a(e,t){var n=e.stateNode;if(n===null)return null;var r=Ad(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var Dh=!1;if(Vr)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Dh=!1}function Xb(e,t,n,r,s,o,i,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(d){this.onError(d)}}var Ia=!1,$c=null,Vc=!1,Ph=null,Jb={onError:function(e){Ia=!0,$c=e}};function qb(e,t,n,r,s,o,i,a,u){Ia=!1,$c=null,Xb.apply(Jb,arguments)}function Zb(e,t,n,r,s,o,i,a,u){if(qb.apply(this,arguments),Ia){if(Ia){var l=$c;Ia=!1,$c=null}else throw Error(Y(198));Vc||(Vc=!0,Ph=l)}}function _o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function n1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gp(e){if(_o(e)!==e)throw Error(Y(188))}function eI(e){var t=e.alternate;if(!t){if(t=_o(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Gp(s),e;if(o===r)return Gp(s),t;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function r1(e){return e=eI(e),e!==null?s1(e):null}function s1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=s1(e);if(t!==null)return t;e=e.sibling}return null}var o1=vn.unstable_scheduleCallback,Kp=vn.unstable_cancelCallback,tI=vn.unstable_shouldYield,nI=vn.unstable_requestPaint,ot=vn.unstable_now,rI=vn.unstable_getCurrentPriorityLevel,nA=vn.unstable_ImmediatePriority,i1=vn.unstable_UserBlockingPriority,Wc=vn.unstable_NormalPriority,sI=vn.unstable_LowPriority,a1=vn.unstable_IdlePriority,dd=null,wr=null;function oI(e){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(dd,e,void 0,(e.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:lI,iI=Math.log,aI=Math.LN2;function lI(e){return e>>>=0,e===0?32:31-(iI(e)/aI|0)|0}var Hl=64,zl=4194304;function ya(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=ya(a):(o&=i,o!==0&&(r=ya(o)))}else i=n&~s,i!==0?r=ya(i):o!==0&&(r=ya(o));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xn(t),s=1<<n,r|=e[n],t&=~s;return r}function cI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Xn(o),a=1<<i,u=s[i];u===-1?((a&n)===0||(a&r)!==0)&&(s[i]=cI(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function Mh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function l1(){var e=Hl;return Hl<<=1,(Hl&4194240)===0&&(Hl=64),e}function af(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xn(t),e[t]=n}function dI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Xn(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function rA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Pe=0;function c1(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var u1,sA,d1,f1,h1,Qh=!1,Gl=[],bs=null,Is=null,Ss=null,Va=new Map,Wa=new Map,As=[],fI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $p(e,t){switch(e){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Va.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(t.pointerId)}}function ea(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Sl(t),t!==null&&sA(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function hI(e,t,n,r,s){switch(t){case"focusin":return bs=ea(bs,e,t,n,r,s),!0;case"dragenter":return Is=ea(Is,e,t,n,r,s),!0;case"mouseover":return Ss=ea(Ss,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Va.set(o,ea(Va.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Wa.set(o,ea(Wa.get(o)||null,e,t,n,r,s)),!0}return!1}function g1(e){var t=so(e.target);if(t!==null){var n=_o(t);if(n!==null){if(t=n.tag,t===13){if(t=n1(n),t!==null){e.blockedOn=t,h1(e.priority,function(){d1(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_h=r,n.target.dispatchEvent(r),_h=null}else return t=Sl(n),t!==null&&sA(t),e.blockedOn=n,!1;t.shift()}return!0}function Vp(e,t,n){Rc(e)&&n.delete(t)}function gI(){Qh=!1,bs!==null&&Rc(bs)&&(bs=null),Is!==null&&Rc(Is)&&(Is=null),Ss!==null&&Rc(Ss)&&(Ss=null),Va.forEach(Vp),Wa.forEach(Vp)}function ta(e,t){e.blockedOn===t&&(e.blockedOn=null,Qh||(Qh=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,gI)))}function Ya(e){function t(s){return ta(s,e)}if(0<Gl.length){ta(Gl[0],e);for(var n=1;n<Gl.length;n++){var r=Gl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(bs!==null&&ta(bs,e),Is!==null&&ta(Is,e),Ss!==null&&ta(Ss,e),Va.forEach(t),Wa.forEach(t),n=0;n<As.length;n++)r=As[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<As.length&&(n=As[0],n.blockedOn===null);)g1(n),n.blockedOn===null&&As.shift()}var Ai=Zr.ReactCurrentBatchConfig,Xc=!0;function AI(e,t,n,r){var s=Pe,o=Ai.transition;Ai.transition=null;try{Pe=1,oA(e,t,n,r)}finally{Pe=s,Ai.transition=o}}function pI(e,t,n,r){var s=Pe,o=Ai.transition;Ai.transition=null;try{Pe=4,oA(e,t,n,r)}finally{Pe=s,Ai.transition=o}}function oA(e,t,n,r){if(Xc){var s=Fh(e,t,n,r);if(s===null)mf(e,t,r,Jc,n),$p(e,r);else if(hI(s,e,t,n,r))r.stopPropagation();else if($p(e,r),t&4&&-1<fI.indexOf(e)){for(;s!==null;){var o=Sl(s);if(o!==null&&u1(o),o=Fh(e,t,n,r),o===null&&mf(e,t,r,Jc,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else mf(e,t,r,null,n)}}var Jc=null;function Fh(e,t,n,r){if(Jc=null,e=tA(r),e=so(e),e!==null)if(t=_o(e),t===null)e=null;else if(n=t.tag,n===13){if(e=n1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jc=e,null}function A1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rI()){case nA:return 1;case i1:return 4;case Wc:case sI:return 16;case a1:return 536870912;default:return 16}default:return 16}}var vs=null,iA=null,Tc=null;function p1(){if(Tc)return Tc;var e,t=iA,n=t.length,r,s="value"in vs?vs.value:vs.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return Tc=s.slice(e,1<r?1-r:void 0)}function _c(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kl(){return!0}function Wp(){return!1}function En(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Kl:Wp,this.isPropagationStopped=Wp,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),t}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aA=En(Li),Il=et({},Li,{view:0,detail:0}),mI=En(Il),lf,cf,na,fd=et({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==na&&(na&&e.type==="mousemove"?(lf=e.screenX-na.screenX,cf=e.screenY-na.screenY):cf=lf=0,na=e),lf)},movementY:function(e){return"movementY"in e?e.movementY:cf}}),Yp=En(fd),yI=et({},fd,{dataTransfer:0}),wI=En(yI),vI=et({},Il,{relatedTarget:0}),uf=En(vI),xI=et({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),EI=En(xI),CI=et({},Li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bI=En(CI),II=et({},Li,{data:0}),Xp=En(II),SI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kI[e])?!!t[e]:!1}function lA(){return RI}var TI=et({},Il,{key:function(e){if(e.key){var t=SI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_c(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?BI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lA,charCode:function(e){return e.type==="keypress"?_c(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_c(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_I=En(TI),NI=et({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jp=En(NI),DI=et({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lA}),PI=En(DI),MI=et({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),QI=En(MI),FI=et({},fd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jI=En(FI),LI=[9,13,27,32],cA=Vr&&"CompositionEvent"in window,Sa=null;Vr&&"documentMode"in document&&(Sa=document.documentMode);var OI=Vr&&"TextEvent"in window&&!Sa,m1=Vr&&(!cA||Sa&&8<Sa&&11>=Sa),qp=" ",Zp=!1;function y1(e,t){switch(e){case"keyup":return LI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zo=!1;function UI(e,t){switch(e){case"compositionend":return w1(t);case"keypress":return t.which!==32?null:(Zp=!0,qp);case"textInput":return e=t.data,e===qp&&Zp?null:e;default:return null}}function HI(e,t){if(Zo)return e==="compositionend"||!cA&&y1(e,t)?(e=p1(),Tc=iA=vs=null,Zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return m1&&t.locale!=="ko"?null:t.data;default:return null}}var zI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zI[e.type]:t==="textarea"}function v1(e,t,n,r){Jw(r),t=qc(t,"onChange"),0<t.length&&(n=new aA("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ba=null,Xa=null;function GI(e){_1(e,0)}function hd(e){var t=ni(e);if(Gw(t))return e}function KI(e,t){if(e==="change")return t}var x1=!1;if(Vr){var df;if(Vr){var ff="oninput"in document;if(!ff){var tm=document.createElement("div");tm.setAttribute("oninput","return;"),ff=typeof tm.oninput=="function"}df=ff}else df=!1;x1=df&&(!document.documentMode||9<document.documentMode)}function nm(){Ba&&(Ba.detachEvent("onpropertychange",E1),Xa=Ba=null)}function E1(e){if(e.propertyName==="value"&&hd(Xa)){var t=[];v1(t,Xa,e,tA(e)),t1(GI,t)}}function $I(e,t,n){e==="focusin"?(nm(),Ba=t,Xa=n,Ba.attachEvent("onpropertychange",E1)):e==="focusout"&&nm()}function VI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hd(Xa)}function WI(e,t){if(e==="click")return hd(t)}function YI(e,t){if(e==="input"||e==="change")return hd(t)}function XI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tr=typeof Object.is=="function"?Object.is:XI;function Ja(e,t){if(tr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wh.call(t,s)||!tr(e[s],t[s]))return!1}return!0}function rm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sm(e,t){var n=rm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rm(n)}}function C1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?C1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function b1(){for(var e=window,t=Kc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kc(e.document)}return t}function uA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JI(e){var t=b1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&C1(n.ownerDocument.documentElement,n)){if(r!==null&&uA(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=sm(n,o);var i=sm(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qI=Vr&&"documentMode"in document&&11>=document.documentMode,ei=null,jh=null,ka=null,Lh=!1;function om(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lh||ei==null||ei!==Kc(r)||(r=ei,"selectionStart"in r&&uA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ka&&Ja(ka,r)||(ka=r,r=qc(jh,"onSelect"),0<r.length&&(t=new aA("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ei)))}function $l(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ti={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},hf={},I1={};Vr&&(I1=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function gd(e){if(hf[e])return hf[e];if(!ti[e])return e;var t=ti[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in I1)return hf[e]=t[n];return e}var S1=gd("animationend"),B1=gd("animationiteration"),k1=gd("animationstart"),R1=gd("transitionend"),T1=new Map,im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(e,t){T1.set(e,t),To(t,[e])}for(var gf=0;gf<im.length;gf++){var Af=im[gf],ZI=Af.toLowerCase(),eS=Af[0].toUpperCase()+Af.slice(1);Os(ZI,"on"+eS)}Os(S1,"onAnimationEnd");Os(B1,"onAnimationIteration");Os(k1,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(R1,"onTransitionEnd");Ci("onMouseEnter",["mouseout","mouseover"]);Ci("onMouseLeave",["mouseout","mouseover"]);Ci("onPointerEnter",["pointerout","pointerover"]);Ci("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tS=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function am(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Zb(r,t,void 0,e),e.currentTarget=null}function _1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&s.isPropagationStopped())break e;am(s,a,l),o=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&s.isPropagationStopped())break e;am(s,a,l),o=u}}}if(Vc)throw e=Ph,Vc=!1,Ph=null,e}function He(e,t){var n=t[Gh];n===void 0&&(n=t[Gh]=new Set);var r=e+"__bubble";n.has(r)||(N1(t,e,2,!1),n.add(r))}function pf(e,t,n){var r=0;t&&(r|=4),N1(n,e,r,t)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function qa(e){if(!e[Vl]){e[Vl]=!0,Lw.forEach(function(n){n!=="selectionchange"&&(tS.has(n)||pf(n,!1,e),pf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vl]||(t[Vl]=!0,pf("selectionchange",!1,t))}}function N1(e,t,n,r){switch(A1(t)){case 1:var s=AI;break;case 4:s=pI;break;default:s=oA}n=s.bind(null,t,n,e),s=void 0,!Dh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function mf(e,t,n,r,s){var o=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;a!==null;){if(i=so(a),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}a=a.parentNode}}r=r.return}t1(function(){var l=o,d=tA(n),g=[];e:{var h=T1.get(e);if(h!==void 0){var A=aA,f=e;switch(e){case"keypress":if(_c(n)===0)break e;case"keydown":case"keyup":A=_I;break;case"focusin":f="focus",A=uf;break;case"focusout":f="blur",A=uf;break;case"beforeblur":case"afterblur":A=uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=wI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=PI;break;case S1:case B1:case k1:A=EI;break;case R1:A=QI;break;case"scroll":A=mI;break;case"wheel":A=jI;break;case"copy":case"cut":case"paste":A=bI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Jp}var m=(t&4)!==0,v=!m&&e==="scroll",p=m?h!==null?h+"Capture":null:h;m=[];for(var y=l,x;y!==null;){x=y;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,p!==null&&(E=$a(y,p),E!=null&&m.push(Za(y,E,x)))),v)break;y=y.return}0<m.length&&(h=new A(h,f,null,n,d),g.push({event:h,listeners:m}))}}if((t&7)===0){e:{if(h=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",h&&n!==_h&&(f=n.relatedTarget||n.fromElement)&&(so(f)||f[Wr]))break e;if((A||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,A?(f=n.relatedTarget||n.toElement,A=l,f=f?so(f):null,f!==null&&(v=_o(f),f!==v||f.tag!==5&&f.tag!==6)&&(f=null)):(A=null,f=l),A!==f)){if(m=Yp,E="onMouseLeave",p="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=Jp,E="onPointerLeave",p="onPointerEnter",y="pointer"),v=A==null?h:ni(A),x=f==null?h:ni(f),h=new m(E,y+"leave",A,n,d),h.target=v,h.relatedTarget=x,E=null,so(d)===l&&(m=new m(p,y+"enter",f,n,d),m.target=x,m.relatedTarget=v,E=m),v=E,A&&f)t:{for(m=A,p=f,y=0,x=m;x;x=Qo(x))y++;for(x=0,E=p;E;E=Qo(E))x++;for(;0<y-x;)m=Qo(m),y--;for(;0<x-y;)p=Qo(p),x--;for(;y--;){if(m===p||p!==null&&m===p.alternate)break t;m=Qo(m),p=Qo(p)}m=null}else m=null;A!==null&&lm(g,h,A,m,!1),f!==null&&v!==null&&lm(g,v,f,m,!0)}}e:{if(h=l?ni(l):window,A=h.nodeName&&h.nodeName.toLowerCase(),A==="select"||A==="input"&&h.type==="file")var C=KI;else if(em(h))if(x1)C=YI;else{C=VI;var I=$I}else(A=h.nodeName)&&A.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=WI);if(C&&(C=C(e,l))){v1(g,C,n,d);break e}I&&I(e,h,l),e==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&Sh(h,"number",h.value)}switch(I=l?ni(l):window,e){case"focusin":(em(I)||I.contentEditable==="true")&&(ei=I,jh=l,ka=null);break;case"focusout":ka=jh=ei=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,om(g,n,d);break;case"selectionchange":if(qI)break;case"keydown":case"keyup":om(g,n,d)}var b;if(cA)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Zo?y1(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(m1&&n.locale!=="ko"&&(Zo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Zo&&(b=p1()):(vs=d,iA="value"in vs?vs.value:vs.textContent,Zo=!0)),I=qc(l,S),0<I.length&&(S=new Xp(S,e,null,n,d),g.push({event:S,listeners:I}),b?S.data=b:(b=w1(n),b!==null&&(S.data=b)))),(b=OI?UI(e,n):HI(e,n))&&(l=qc(l,"onBeforeInput"),0<l.length&&(d=new Xp("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:l}),d.data=b))}_1(g,t)})}function Za(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=$a(e,n),o!=null&&r.unshift(Za(e,o,s)),o=$a(e,t),o!=null&&r.push(Za(e,o,s))),e=e.return}return r}function Qo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lm(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,s?(u=$a(n,o),u!=null&&i.unshift(Za(n,u,a))):s||(u=$a(n,o),u!=null&&i.push(Za(n,u,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var nS=/\r\n?/g,rS=/\u0000|\uFFFD/g;function cm(e){return(typeof e=="string"?e:""+e).replace(nS,`
`).replace(rS,"")}function Wl(e,t,n){if(t=cm(t),cm(e)!==t&&n)throw Error(Y(425))}function Zc(){}var Oh=null,Uh=null;function Hh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,sS=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,oS=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(e){return um.resolve(null).then(e).catch(iS)}:zh;function iS(e){setTimeout(function(){throw e})}function yf(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ya(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ya(t)}function Bs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),hr="__reactFiber$"+Oi,el="__reactProps$"+Oi,Wr="__reactContainer$"+Oi,Gh="__reactEvents$"+Oi,aS="__reactListeners$"+Oi,lS="__reactHandles$"+Oi;function so(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wr]||n[hr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dm(e);e!==null;){if(n=e[hr])return n;e=dm(e)}return t}e=n,n=e.parentNode}return null}function Sl(e){return e=e[hr]||e[Wr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ni(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Ad(e){return e[el]||null}var Kh=[],ri=-1;function Us(e){return{current:e}}function Ge(e){0>ri||(e.current=Kh[ri],Kh[ri]=null,ri--)}function Oe(e,t){ri++,Kh[ri]=e.current,e.current=t}var Fs={},Qt=Us(Fs),rn=Us(!1),yo=Fs;function bi(e,t){var n=e.type.contextTypes;if(!n)return Fs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function sn(e){return e=e.childContextTypes,e!=null}function eu(){Ge(rn),Ge(Qt)}function fm(e,t,n){if(Qt.current!==Fs)throw Error(Y(168));Oe(Qt,t),Oe(rn,n)}function D1(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Y(108,$b(e)||"Unknown",s));return et({},n,r)}function tu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fs,yo=Qt.current,Oe(Qt,e),Oe(rn,rn.current),!0}function hm(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=D1(e,t,yo),r.__reactInternalMemoizedMergedChildContext=e,Ge(rn),Ge(Qt),Oe(Qt,e)):Ge(rn),Oe(rn,n)}var Or=null,pd=!1,wf=!1;function P1(e){Or===null?Or=[e]:Or.push(e)}function cS(e){pd=!0,P1(e)}function Hs(){if(!wf&&Or!==null){wf=!0;var e=0,t=Pe;try{var n=Or;for(Pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Or=null,pd=!1}catch(s){throw Or!==null&&(Or=Or.slice(e+1)),o1(nA,Hs),s}finally{Pe=t,wf=!1}}return null}var si=[],oi=0,nu=null,ru=0,_n=[],Nn=0,wo=null,Gr=1,Kr="";function Ws(e,t){si[oi++]=ru,si[oi++]=nu,nu=e,ru=t}function M1(e,t,n){_n[Nn++]=Gr,_n[Nn++]=Kr,_n[Nn++]=wo,wo=e;var r=Gr;e=Kr;var s=32-Xn(r)-1;r&=~(1<<s),n+=1;var o=32-Xn(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Gr=1<<32-Xn(t)+s|n<<s|r,Kr=o+e}else Gr=1<<o|n<<s|r,Kr=e}function dA(e){e.return!==null&&(Ws(e,1),M1(e,1,0))}function fA(e){for(;e===nu;)nu=si[--oi],si[oi]=null,ru=si[--oi],si[oi]=null;for(;e===wo;)wo=_n[--Nn],_n[Nn]=null,Kr=_n[--Nn],_n[Nn]=null,Gr=_n[--Nn],_n[Nn]=null}var yn=null,pn=null,We=!1,Wn=null;function Q1(e,t){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function gm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yn=e,pn=Bs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yn=e,pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wo!==null?{id:Gr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yn=e,pn=null,!0):!1;default:return!1}}function $h(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vh(e){if(We){var t=pn;if(t){var n=t;if(!gm(e,t)){if($h(e))throw Error(Y(418));t=Bs(n.nextSibling);var r=yn;t&&gm(e,t)?Q1(r,n):(e.flags=e.flags&-4097|2,We=!1,yn=e)}}else{if($h(e))throw Error(Y(418));e.flags=e.flags&-4097|2,We=!1,yn=e}}}function Am(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yn=e}function Yl(e){if(e!==yn)return!1;if(!We)return Am(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hh(e.type,e.memoizedProps)),t&&(t=pn)){if($h(e))throw F1(),Error(Y(418));for(;t;)Q1(e,t),t=Bs(t.nextSibling)}if(Am(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pn=Bs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pn=null}}else pn=yn?Bs(e.stateNode.nextSibling):null;return!0}function F1(){for(var e=pn;e;)e=Bs(e.nextSibling)}function Ii(){pn=yn=null,We=!1}function hA(e){Wn===null?Wn=[e]:Wn.push(e)}var uS=Zr.ReactCurrentBatchConfig;function ra(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function Xl(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pm(e){var t=e._init;return t(e._payload)}function j1(e){function t(p,y){if(e){var x=p.deletions;x===null?(p.deletions=[y],p.flags|=16):x.push(y)}}function n(p,y){if(!e)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function r(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function s(p,y){return p=_s(p,y),p.index=0,p.sibling=null,p}function o(p,y,x){return p.index=x,e?(x=p.alternate,x!==null?(x=x.index,x<y?(p.flags|=2,y):x):(p.flags|=2,y)):(p.flags|=1048576,y)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,y,x,E){return y===null||y.tag!==6?(y=Sf(x,p.mode,E),y.return=p,y):(y=s(y,x),y.return=p,y)}function u(p,y,x,E){var C=x.type;return C===qo?d(p,y,x.props.children,E,x.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fs&&pm(C)===y.type)?(E=s(y,x.props),E.ref=ra(p,y,x),E.return=p,E):(E=jc(x.type,x.key,x.props,null,p.mode,E),E.ref=ra(p,y,x),E.return=p,E)}function l(p,y,x,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Bf(x,p.mode,E),y.return=p,y):(y=s(y,x.children||[]),y.return=p,y)}function d(p,y,x,E,C){return y===null||y.tag!==7?(y=mo(x,p.mode,E,C),y.return=p,y):(y=s(y,x),y.return=p,y)}function g(p,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Sf(""+y,p.mode,x),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ll:return x=jc(y.type,y.key,y.props,null,p.mode,x),x.ref=ra(p,null,y),x.return=p,x;case Jo:return y=Bf(y,p.mode,x),y.return=p,y;case fs:var E=y._init;return g(p,E(y._payload),x)}if(ma(y)||qi(y))return y=mo(y,p.mode,x,null),y.return=p,y;Xl(p,y)}return null}function h(p,y,x,E){var C=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:a(p,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ll:return x.key===C?u(p,y,x,E):null;case Jo:return x.key===C?l(p,y,x,E):null;case fs:return C=x._init,h(p,y,C(x._payload),E)}if(ma(x)||qi(x))return C!==null?null:d(p,y,x,E,null);Xl(p,x)}return null}function A(p,y,x,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(x)||null,a(y,p,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ll:return p=p.get(E.key===null?x:E.key)||null,u(y,p,E,C);case Jo:return p=p.get(E.key===null?x:E.key)||null,l(y,p,E,C);case fs:var I=E._init;return A(p,y,x,I(E._payload),C)}if(ma(E)||qi(E))return p=p.get(x)||null,d(y,p,E,C,null);Xl(y,E)}return null}function f(p,y,x,E){for(var C=null,I=null,b=y,S=y=0,k=null;b!==null&&S<x.length;S++){b.index>S?(k=b,b=null):k=b.sibling;var R=h(p,b,x[S],E);if(R===null){b===null&&(b=k);break}e&&b&&R.alternate===null&&t(p,b),y=o(R,y,S),I===null?C=R:I.sibling=R,I=R,b=k}if(S===x.length)return n(p,b),We&&Ws(p,S),C;if(b===null){for(;S<x.length;S++)b=g(p,x[S],E),b!==null&&(y=o(b,y,S),I===null?C=b:I.sibling=b,I=b);return We&&Ws(p,S),C}for(b=r(p,b);S<x.length;S++)k=A(b,p,S,x[S],E),k!==null&&(e&&k.alternate!==null&&b.delete(k.key===null?S:k.key),y=o(k,y,S),I===null?C=k:I.sibling=k,I=k);return e&&b.forEach(function(B){return t(p,B)}),We&&Ws(p,S),C}function m(p,y,x,E){var C=qi(x);if(typeof C!="function")throw Error(Y(150));if(x=C.call(x),x==null)throw Error(Y(151));for(var I=C=null,b=y,S=y=0,k=null,R=x.next();b!==null&&!R.done;S++,R=x.next()){b.index>S?(k=b,b=null):k=b.sibling;var B=h(p,b,R.value,E);if(B===null){b===null&&(b=k);break}e&&b&&B.alternate===null&&t(p,b),y=o(B,y,S),I===null?C=B:I.sibling=B,I=B,b=k}if(R.done)return n(p,b),We&&Ws(p,S),C;if(b===null){for(;!R.done;S++,R=x.next())R=g(p,R.value,E),R!==null&&(y=o(R,y,S),I===null?C=R:I.sibling=R,I=R);return We&&Ws(p,S),C}for(b=r(p,b);!R.done;S++,R=x.next())R=A(b,p,S,R.value,E),R!==null&&(e&&R.alternate!==null&&b.delete(R.key===null?S:R.key),y=o(R,y,S),I===null?C=R:I.sibling=R,I=R);return e&&b.forEach(function(M){return t(p,M)}),We&&Ws(p,S),C}function v(p,y,x,E){if(typeof x=="object"&&x!==null&&x.type===qo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ll:e:{for(var C=x.key,I=y;I!==null;){if(I.key===C){if(C=x.type,C===qo){if(I.tag===7){n(p,I.sibling),y=s(I,x.props.children),y.return=p,p=y;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fs&&pm(C)===I.type){n(p,I.sibling),y=s(I,x.props),y.ref=ra(p,I,x),y.return=p,p=y;break e}n(p,I);break}else t(p,I);I=I.sibling}x.type===qo?(y=mo(x.props.children,p.mode,E,x.key),y.return=p,p=y):(E=jc(x.type,x.key,x.props,null,p.mode,E),E.ref=ra(p,y,x),E.return=p,p=E)}return i(p);case Jo:e:{for(I=x.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(p,y.sibling),y=s(y,x.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else t(p,y);y=y.sibling}y=Bf(x,p.mode,E),y.return=p,p=y}return i(p);case fs:return I=x._init,v(p,y,I(x._payload),E)}if(ma(x))return f(p,y,x,E);if(qi(x))return m(p,y,x,E);Xl(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(p,y.sibling),y=s(y,x),y.return=p,p=y):(n(p,y),y=Sf(x,p.mode,E),y.return=p,p=y),i(p)):n(p,y)}return v}var Si=j1(!0),L1=j1(!1),su=Us(null),ou=null,ii=null,gA=null;function AA(){gA=ii=ou=null}function pA(e){var t=su.current;Ge(su),e._currentValue=t}function Wh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function pi(e,t){ou=e,gA=ii=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(tn=!0),e.firstContext=null)}function jn(e){var t=e._currentValue;if(gA!==e)if(e={context:e,memoizedValue:t,next:null},ii===null){if(ou===null)throw Error(Y(308));ii=e,ou.dependencies={lanes:0,firstContext:e}}else ii=ii.next=e;return t}var oo=null;function mA(e){oo===null?oo=[e]:oo.push(e)}function O1(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,mA(t)):(n.next=s.next,s.next=n),t.interleaved=n,Yr(e,r)}function Yr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var hs=!1;function yA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $r(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ks(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ie&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Yr(e,n)}return s=r.interleaved,s===null?(t.next=t,mA(r)):(t.next=s.next,s.next=t),r.interleaved=t,Yr(e,n)}function Nc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rA(e,n)}}function mm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function iu(e,t,n,r){var s=e.updateQueue;hs=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,l=u.next;u.next=null,i===null?o=l:i.next=l,i=u;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=u))}if(o!==null){var g=s.baseState;i=0,d=l=u=null,a=o;do{var h=a.lane,A=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:A,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,A=n,m.tag){case 1:if(f=m.payload,typeof f=="function"){g=f.call(A,g,h);break e}g=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,h=typeof f=="function"?f.call(A,g,h):f,h==null)break e;g=et({},g,h);break e;case 2:hs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else A={eventTime:A,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(l=d=A,u=g):d=d.next=A,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(u=g),s.baseState=u,s.firstBaseUpdate=l,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);xo|=i,e.lanes=i,e.memoizedState=g}}function ym(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Bl={},vr=Us(Bl),tl=Us(Bl),nl=Us(Bl);function io(e){if(e===Bl)throw Error(Y(174));return e}function wA(e,t){switch(Oe(nl,t),Oe(tl,e),Oe(vr,Bl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kh(t,e)}Ge(vr),Oe(vr,t)}function Bi(){Ge(vr),Ge(tl),Ge(nl)}function H1(e){io(nl.current);var t=io(vr.current),n=kh(t,e.type);t!==n&&(Oe(tl,e),Oe(vr,n))}function vA(e){tl.current===e&&(Ge(vr),Ge(tl))}var qe=Us(0);function au(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vf=[];function xA(){for(var e=0;e<vf.length;e++)vf[e]._workInProgressVersionPrimary=null;vf.length=0}var Dc=Zr.ReactCurrentDispatcher,xf=Zr.ReactCurrentBatchConfig,vo=0,Ze=null,ct=null,ht=null,lu=!1,Ra=!1,rl=0,dS=0;function St(){throw Error(Y(321))}function EA(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tr(e[n],t[n]))return!1;return!0}function CA(e,t,n,r,s,o){if(vo=o,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dc.current=e===null||e.memoizedState===null?AS:pS,e=n(r,s),Ra){o=0;do{if(Ra=!1,rl=0,25<=o)throw Error(Y(301));o+=1,ht=ct=null,t.updateQueue=null,Dc.current=mS,e=n(r,s)}while(Ra)}if(Dc.current=cu,t=ct!==null&&ct.next!==null,vo=0,ht=ct=Ze=null,lu=!1,t)throw Error(Y(300));return e}function bA(){var e=rl!==0;return rl=0,e}function ur(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ze.memoizedState=ht=e:ht=ht.next=e,ht}function Ln(){if(ct===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=ht===null?Ze.memoizedState:ht.next;if(t!==null)ht=t,ct=e;else{if(e===null)throw Error(Y(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ht===null?Ze.memoizedState=ht=e:ht=ht.next=e}return ht}function sl(e,t){return typeof t=="function"?t(e):t}function Ef(e){var t=Ln(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=ct,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,u=null,l=o;do{var d=l.lane;if((vo&d)===d)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var g={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=g,i=r):u=u.next=g,Ze.lanes|=d,xo|=d}l=l.next}while(l!==null&&l!==o);u===null?i=r:u.next=a,tr(r,t.memoizedState)||(tn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Ze.lanes|=o,xo|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cf(e){var t=Ln(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);tr(o,t.memoizedState)||(tn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function z1(){}function G1(e,t){var n=Ze,r=Ln(),s=t(),o=!tr(r.memoizedState,s);if(o&&(r.memoizedState=s,tn=!0),r=r.queue,IA(V1.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,ol(9,$1.bind(null,n,r,s,t),void 0,null),At===null)throw Error(Y(349));(vo&30)!==0||K1(n,t,s)}return s}function K1(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $1(e,t,n,r){t.value=n,t.getSnapshot=r,W1(t)&&Y1(e)}function V1(e,t,n){return n(function(){W1(t)&&Y1(e)})}function W1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tr(e,n)}catch{return!0}}function Y1(e){var t=Yr(e,1);t!==null&&Jn(t,e,1,-1)}function wm(e){var t=ur();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:e},t.queue=e,e=e.dispatch=gS.bind(null,Ze,e),[t.memoizedState,e]}function ol(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function X1(){return Ln().memoizedState}function Pc(e,t,n,r){var s=ur();Ze.flags|=e,s.memoizedState=ol(1|t,n,void 0,r===void 0?null:r)}function md(e,t,n,r){var s=Ln();r=r===void 0?null:r;var o=void 0;if(ct!==null){var i=ct.memoizedState;if(o=i.destroy,r!==null&&EA(r,i.deps)){s.memoizedState=ol(t,n,o,r);return}}Ze.flags|=e,s.memoizedState=ol(1|t,n,o,r)}function vm(e,t){return Pc(8390656,8,e,t)}function IA(e,t){return md(2048,8,e,t)}function J1(e,t){return md(4,2,e,t)}function q1(e,t){return md(4,4,e,t)}function Z1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ev(e,t,n){return n=n!=null?n.concat([e]):null,md(4,4,Z1.bind(null,t,e),n)}function SA(){}function tv(e,t){var n=Ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&EA(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function nv(e,t){var n=Ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&EA(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function rv(e,t,n){return(vo&21)===0?(e.baseState&&(e.baseState=!1,tn=!0),e.memoizedState=n):(tr(n,t)||(n=l1(),Ze.lanes|=n,xo|=n,e.baseState=!0),t)}function fS(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var r=xf.transition;xf.transition={};try{e(!1),t()}finally{Pe=n,xf.transition=r}}function sv(){return Ln().memoizedState}function hS(e,t,n){var r=Ts(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ov(e))iv(t,n);else if(n=O1(e,t,n,r),n!==null){var s=zt();Jn(n,e,r,s),av(n,t,r)}}function gS(e,t,n){var r=Ts(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ov(e))iv(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,tr(a,i)){var u=t.interleaved;u===null?(s.next=s,mA(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=O1(e,t,s,r),n!==null&&(s=zt(),Jn(n,e,r,s),av(n,t,r))}}function ov(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function iv(e,t){Ra=lu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function av(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rA(e,n)}}var cu={readContext:jn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},AS={readContext:jn,useCallback:function(e,t){return ur().memoizedState=[e,t===void 0?null:t],e},useContext:jn,useEffect:vm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Pc(4194308,4,Z1.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pc(4,2,e,t)},useMemo:function(e,t){var n=ur();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ur();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=hS.bind(null,Ze,e),[r.memoizedState,e]},useRef:function(e){var t=ur();return e={current:e},t.memoizedState=e},useState:wm,useDebugValue:SA,useDeferredValue:function(e){return ur().memoizedState=e},useTransition:function(){var e=wm(!1),t=e[0];return e=fS.bind(null,e[1]),ur().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ze,s=ur();if(We){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),At===null)throw Error(Y(349));(vo&30)!==0||K1(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,vm(V1.bind(null,r,o,e),[e]),r.flags|=2048,ol(9,$1.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ur(),t=At.identifierPrefix;if(We){var n=Kr,r=Gr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pS={readContext:jn,useCallback:tv,useContext:jn,useEffect:IA,useImperativeHandle:ev,useInsertionEffect:J1,useLayoutEffect:q1,useMemo:nv,useReducer:Ef,useRef:X1,useState:function(){return Ef(sl)},useDebugValue:SA,useDeferredValue:function(e){var t=Ln();return rv(t,ct.memoizedState,e)},useTransition:function(){var e=Ef(sl)[0],t=Ln().memoizedState;return[e,t]},useMutableSource:z1,useSyncExternalStore:G1,useId:sv,unstable_isNewReconciler:!1},mS={readContext:jn,useCallback:tv,useContext:jn,useEffect:IA,useImperativeHandle:ev,useInsertionEffect:J1,useLayoutEffect:q1,useMemo:nv,useReducer:Cf,useRef:X1,useState:function(){return Cf(sl)},useDebugValue:SA,useDeferredValue:function(e){var t=Ln();return ct===null?t.memoizedState=e:rv(t,ct.memoizedState,e)},useTransition:function(){var e=Cf(sl)[0],t=Ln().memoizedState;return[e,t]},useMutableSource:z1,useSyncExternalStore:G1,useId:sv,unstable_isNewReconciler:!1};function Kn(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Yh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yd={isMounted:function(e){return(e=e._reactInternals)?_o(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zt(),s=Ts(e),o=$r(r,s);o.payload=t,n!=null&&(o.callback=n),t=ks(e,o,s),t!==null&&(Jn(t,e,s,r),Nc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zt(),s=Ts(e),o=$r(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ks(e,o,s),t!==null&&(Jn(t,e,s,r),Nc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zt(),r=Ts(e),s=$r(n,r);s.tag=2,t!=null&&(s.callback=t),t=ks(e,s,r),t!==null&&(Jn(t,e,r,n),Nc(t,e,r))}};function xm(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Ja(n,r)||!Ja(s,o):!0}function lv(e,t,n){var r=!1,s=Fs,o=t.contextType;return typeof o=="object"&&o!==null?o=jn(o):(s=sn(t)?yo:Qt.current,r=t.contextTypes,o=(r=r!=null)?bi(e,s):Fs),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Em(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yd.enqueueReplaceState(t,t.state,null)}function Xh(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},yA(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=jn(o):(o=sn(t)?yo:Qt.current,s.context=bi(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Yh(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yd.enqueueReplaceState(s,s.state,null),iu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ki(e,t){try{var n="",r=t;do n+=Kb(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function bf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Jh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yS=typeof WeakMap=="function"?WeakMap:Map;function cv(e,t,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){du||(du=!0,ag=r),Jh(e,t)},n}function uv(e,t,n){n=$r(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Jh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Jh(e,t),typeof r!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Cm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yS;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=NS.bind(null,e,t,n),t.then(e,e))}function bm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Im(e,t,n,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$r(-1,1),t.tag=2,ks(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var wS=Zr.ReactCurrentOwner,tn=!1;function Lt(e,t,n,r){t.child=e===null?L1(t,null,n,r):Si(t,e.child,n,r)}function Sm(e,t,n,r,s){n=n.render;var o=t.ref;return pi(t,s),r=CA(e,t,n,r,o,s),n=bA(),e!==null&&!tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xr(e,t,s)):(We&&n&&dA(t),t.flags|=1,Lt(e,t,r,s),t.child)}function Bm(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!PA(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,dv(e,t,o,r,s)):(e=jc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&s)===0){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ja,n(i,r)&&e.ref===t.ref)return Xr(e,t,s)}return t.flags|=1,e=_s(o,r),e.ref=t.ref,e.return=t,t.child=e}function dv(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Ja(o,r)&&e.ref===t.ref)if(tn=!1,t.pendingProps=r=o,(e.lanes&s)!==0)(e.flags&131072)!==0&&(tn=!0);else return t.lanes=e.lanes,Xr(e,t,s)}return qh(e,t,n,r,s)}function fv(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(li,un),un|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(li,un),un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Oe(li,un),un|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Oe(li,un),un|=r;return Lt(e,t,s,n),t.child}function hv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qh(e,t,n,r,s){var o=sn(n)?yo:Qt.current;return o=bi(t,o),pi(t,s),n=CA(e,t,n,r,o,s),r=bA(),e!==null&&!tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xr(e,t,s)):(We&&r&&dA(t),t.flags|=1,Lt(e,t,n,s),t.child)}function km(e,t,n,r,s){if(sn(n)){var o=!0;tu(t)}else o=!1;if(pi(t,s),t.stateNode===null)Mc(e,t),lv(t,n,r),Xh(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var u=i.context,l=n.contextType;typeof l=="object"&&l!==null?l=jn(l):(l=sn(n)?yo:Qt.current,l=bi(t,l));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";g||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Em(t,i,r,l),hs=!1;var h=t.memoizedState;i.state=h,iu(t,r,i,s),u=t.memoizedState,a!==r||h!==u||rn.current||hs?(typeof d=="function"&&(Yh(t,n,d,r),u=t.memoizedState),(a=hs||xm(t,n,a,r,h,u,l))?(g||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=l,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,U1(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Kn(t.type,a),i.props=l,g=t.pendingProps,h=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=jn(u):(u=sn(n)?yo:Qt.current,u=bi(t,u));var A=n.getDerivedStateFromProps;(d=typeof A=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==g||h!==u)&&Em(t,i,r,u),hs=!1,h=t.memoizedState,i.state=h,iu(t,r,i,s);var f=t.memoizedState;a!==g||h!==f||rn.current||hs?(typeof A=="function"&&(Yh(t,n,A,r),f=t.memoizedState),(l=hs||xm(t,n,l,r,h,f,u)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,f,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,f,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=u,r=l):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Zh(e,t,n,r,o,s)}function Zh(e,t,n,r,s,o){hv(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&hm(t,n,!1),Xr(e,t,o);r=t.stateNode,wS.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Si(t,e.child,null,o),t.child=Si(t,null,a,o)):Lt(e,t,a,o),t.memoizedState=r.state,s&&hm(t,n,!0),t.child}function gv(e){var t=e.stateNode;t.pendingContext?fm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fm(e,t.context,!1),wA(e,t.containerInfo)}function Rm(e,t,n,r,s){return Ii(),hA(s),t.flags|=256,Lt(e,t,n,r),t.child}var eg={dehydrated:null,treeContext:null,retryLane:0};function tg(e){return{baseLanes:e,cachePool:null,transitions:null}}function Av(e,t,n){var r=t.pendingProps,s=qe.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Oe(qe,s&1),e===null)return Vh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=i):o=xd(i,r,0,null),e=mo(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=tg(n),t.memoizedState=eg,e):BA(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return vS(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var u={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=_s(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=_s(a,o):(o=mo(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?tg(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=eg,r}return o=e.child,e=o.sibling,r=_s(o,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function BA(e,t){return t=xd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jl(e,t,n,r){return r!==null&&hA(r),Si(t,e.child,null,n),e=BA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vS(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=bf(Error(Y(422))),Jl(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=xd({mode:"visible",children:r.children},s,0,null),o=mo(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,(t.mode&1)!==0&&Si(t,e.child,null,i),t.child.memoizedState=tg(i),t.memoizedState=eg,o);if((t.mode&1)===0)return Jl(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Y(419)),r=bf(o,r,void 0),Jl(e,t,i,r)}if(a=(i&e.childLanes)!==0,tn||a){if(r=At,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|i))!==0?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Yr(e,s),Jn(r,e,s,-1))}return DA(),r=bf(Error(Y(421))),Jl(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=DS.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,pn=Bs(s.nextSibling),yn=t,We=!0,Wn=null,e!==null&&(_n[Nn++]=Gr,_n[Nn++]=Kr,_n[Nn++]=wo,Gr=e.id,Kr=e.overflow,wo=t),t=BA(t,r.children),t.flags|=4096,t)}function Tm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Wh(e.return,t,n)}function If(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function pv(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Lt(e,t,r.children,n),r=qe.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tm(e,n,t);else if(e.tag===19)Tm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oe(qe,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&au(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),If(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&au(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}If(t,!0,n,null,o);break;case"together":If(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mc(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xo|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=_s(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_s(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xS(e,t,n){switch(t.tag){case 3:gv(t),Ii();break;case 5:H1(t);break;case 1:sn(t.type)&&tu(t);break;case 4:wA(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Oe(su,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Oe(qe,qe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Av(e,t,n):(Oe(qe,qe.current&1),e=Xr(e,t,n),e!==null?e.sibling:null);Oe(qe,qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return pv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(qe,qe.current),r)break;return null;case 22:case 23:return t.lanes=0,fv(e,t,n)}return Xr(e,t,n)}var mv,ng,yv,wv;mv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ng=function(){};yv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,io(vr.current);var o=null;switch(n){case"input":s=bh(e,s),r=bh(e,r),o=[];break;case"select":s=et({},s,{value:void 0}),r=et({},r,{value:void 0}),o=[];break;case"textarea":s=Bh(e,s),r=Bh(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zc)}Rh(n,r);var i;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ga.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&He("scroll",e),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};wv=function(e,t,n,r){n!==r&&(t.flags|=4)};function sa(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ES(e,t,n){var r=t.pendingProps;switch(fA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return sn(t.type)&&eu(),Bt(t),null;case 3:return r=t.stateNode,Bi(),Ge(rn),Ge(Qt),xA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Yl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wn!==null&&(ug(Wn),Wn=null))),ng(e,t),Bt(t),null;case 5:vA(t);var s=io(nl.current);if(n=t.type,e!==null&&t.stateNode!=null)yv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return Bt(t),null}if(e=io(vr.current),Yl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hr]=t,r[el]=o,e=(t.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(s=0;s<wa.length;s++)He(wa[s],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":Lp(r,o),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},He("invalid",r);break;case"textarea":Up(r,o),He("invalid",r)}Rh(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Wl(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Wl(r.textContent,a,e),s=["children",""+a]):Ga.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&He("scroll",r)}switch(n){case"input":Ol(r),Op(r,o,!0);break;case"textarea":Ol(r),Hp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Zc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vw(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[hr]=t,e[el]=r,mv(e,t,!1,!1),t.stateNode=e;e:{switch(i=Th(n,r),n){case"dialog":He("cancel",e),He("close",e),s=r;break;case"iframe":case"object":case"embed":He("load",e),s=r;break;case"video":case"audio":for(s=0;s<wa.length;s++)He(wa[s],e);s=r;break;case"source":He("error",e),s=r;break;case"img":case"image":case"link":He("error",e),He("load",e),s=r;break;case"details":He("toggle",e),s=r;break;case"input":Lp(e,r),s=bh(e,r),He("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=et({},r,{value:void 0}),He("invalid",e);break;case"textarea":Up(e,r),s=Bh(e,r),He("invalid",e);break;default:s=r}Rh(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?Xw(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ww(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ka(e,u):typeof u=="number"&&Ka(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ga.hasOwnProperty(o)?u!=null&&o==="onScroll"&&He("scroll",e):u!=null&&Jg(e,o,u,i))}switch(n){case"input":Ol(e),Op(e,r,!1);break;case"textarea":Ol(e),Hp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Qs(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?fi(e,!!r.multiple,o,!1):r.defaultValue!=null&&fi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Zc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)wv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=io(nl.current),io(vr.current),Yl(t)){if(r=t.stateNode,n=t.memoizedProps,r[hr]=t,(o=r.nodeValue!==n)&&(e=yn,e!==null))switch(e.tag){case 3:Wl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wl(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=t,t.stateNode=r}return Bt(t),null;case 13:if(Ge(qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&pn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)F1(),Ii(),t.flags|=98560,o=!1;else if(o=Yl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Y(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[hr]=t}else Ii(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Bt(t),o=!1}else Wn!==null&&(ug(Wn),Wn=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(qe.current&1)!==0?ut===0&&(ut=3):DA())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return Bi(),ng(e,t),e===null&&qa(t.stateNode.containerInfo),Bt(t),null;case 10:return pA(t.type._context),Bt(t),null;case 17:return sn(t.type)&&eu(),Bt(t),null;case 19:if(Ge(qe),o=t.memoizedState,o===null)return Bt(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)sa(o,!1);else{if(ut!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=au(e),i!==null){for(t.flags|=128,sa(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(qe,qe.current&1|2),t.child}e=e.sibling}o.tail!==null&&ot()>Ri&&(t.flags|=128,r=!0,sa(o,!1),t.lanes=4194304)}else{if(!r)if(e=au(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!We)return Bt(t),null}else 2*ot()-o.renderingStartTime>Ri&&n!==1073741824&&(t.flags|=128,r=!0,sa(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ot(),t.sibling=null,n=qe.current,Oe(qe,r?n&1|2:n&1),t):(Bt(t),null);case 22:case 23:return NA(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(un&1073741824)!==0&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function CS(e,t){switch(fA(t),t.tag){case 1:return sn(t.type)&&eu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bi(),Ge(rn),Ge(Qt),xA(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return vA(t),null;case 13:if(Ge(qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Ii()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ge(qe),null;case 4:return Bi(),null;case 10:return pA(t.type._context),null;case 22:case 23:return NA(),null;case 24:return null;default:return null}}var ql=!1,Pt=!1,bS=typeof WeakSet=="function"?WeakSet:Set,re=null;function ai(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(e,t,r)}else n.current=null}function rg(e,t,n){try{n()}catch(r){rt(e,t,r)}}var _m=!1;function IS(e,t){if(Oh=Xc,e=b1(),uA(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,l=0,d=0,g=e,h=null;t:for(;;){for(var A;g!==n||s!==0&&g.nodeType!==3||(a=i+s),g!==o||r!==0&&g.nodeType!==3||(u=i+r),g.nodeType===3&&(i+=g.nodeValue.length),(A=g.firstChild)!==null;)h=g,g=A;for(;;){if(g===e)break t;if(h===n&&++l===s&&(a=i),h===o&&++d===r&&(u=i),(A=g.nextSibling)!==null)break;g=h,h=g.parentNode}g=A}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uh={focusedElem:e,selectionRange:n},Xc=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var f=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,v=f.memoizedState,p=t.stateNode,y=p.getSnapshotBeforeUpdate(t.elementType===t.type?m:Kn(t.type,m),v);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(E){rt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return f=_m,_m=!1,f}function Ta(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&rg(t,n,o)}s=s.next}while(s!==r)}}function wd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vv(e){var t=e.alternate;t!==null&&(e.alternate=null,vv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hr],delete t[el],delete t[Gh],delete t[aS],delete t[lS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xv(e){return e.tag===5||e.tag===3||e.tag===4}function Nm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function og(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zc));else if(r!==4&&(e=e.child,e!==null))for(og(e,t,n),e=e.sibling;e!==null;)og(e,t,n),e=e.sibling}function ig(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ig(e,t,n),e=e.sibling;e!==null;)ig(e,t,n),e=e.sibling}var wt=null,$n=!1;function es(e,t,n){for(n=n.child;n!==null;)Ev(e,t,n),n=n.sibling}function Ev(e,t,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(dd,n)}catch{}switch(n.tag){case 5:Pt||ai(n,t);case 6:var r=wt,s=$n;wt=null,es(e,t,n),wt=r,$n=s,wt!==null&&($n?(e=wt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&($n?(e=wt,n=n.stateNode,e.nodeType===8?yf(e.parentNode,n):e.nodeType===1&&yf(e,n),Ya(e)):yf(wt,n.stateNode));break;case 4:r=wt,s=$n,wt=n.stateNode.containerInfo,$n=!0,es(e,t,n),wt=r,$n=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&((o&2)!==0||(o&4)!==0)&&rg(n,t,i),s=s.next}while(s!==r)}es(e,t,n);break;case 1:if(!Pt&&(ai(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rt(n,t,a)}es(e,t,n);break;case 21:es(e,t,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,es(e,t,n),Pt=r):es(e,t,n);break;default:es(e,t,n)}}function Dm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new bS),t.forEach(function(r){var s=PS.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,$n=!1;break e;case 3:wt=a.stateNode.containerInfo,$n=!0;break e;case 4:wt=a.stateNode.containerInfo,$n=!0;break e}a=a.return}if(wt===null)throw Error(Y(160));Ev(o,i,s),wt=null,$n=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(l){rt(s,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cv(t,e),t=t.sibling}function Cv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gn(t,e),ar(e),r&4){try{Ta(3,e,e.return),wd(3,e)}catch(m){rt(e,e.return,m)}try{Ta(5,e,e.return)}catch(m){rt(e,e.return,m)}}break;case 1:Gn(t,e),ar(e),r&512&&n!==null&&ai(n,n.return);break;case 5:if(Gn(t,e),ar(e),r&512&&n!==null&&ai(n,n.return),e.flags&32){var s=e.stateNode;try{Ka(s,"")}catch(m){rt(e,e.return,m)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Kw(s,o),Th(a,i);var l=Th(a,o);for(i=0;i<u.length;i+=2){var d=u[i],g=u[i+1];d==="style"?Xw(s,g):d==="dangerouslySetInnerHTML"?Ww(s,g):d==="children"?Ka(s,g):Jg(s,d,g,l)}switch(a){case"input":Ih(s,o);break;case"textarea":$w(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?fi(s,!!o.multiple,A,!1):h!==!!o.multiple&&(o.defaultValue!=null?fi(s,!!o.multiple,o.defaultValue,!0):fi(s,!!o.multiple,o.multiple?[]:"",!1))}s[el]=o}catch(m){rt(e,e.return,m)}}break;case 6:if(Gn(t,e),ar(e),r&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(m){rt(e,e.return,m)}}break;case 3:if(Gn(t,e),ar(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(t.containerInfo)}catch(m){rt(e,e.return,m)}break;case 4:Gn(t,e),ar(e);break;case 13:Gn(t,e),ar(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(TA=ot())),r&4&&Dm(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Pt=(l=Pt)||d,Gn(t,e),Pt=l):Gn(t,e),ar(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!d&&(e.mode&1)!==0)for(re=e,d=e.child;d!==null;){for(g=re=d;re!==null;){switch(h=re,A=h.child,h.tag){case 0:case 11:case 14:case 15:Ta(4,h,h.return);break;case 1:ai(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){rt(r,n,m)}}break;case 5:ai(h,h.return);break;case 22:if(h.memoizedState!==null){Mm(g);continue}}A!==null?(A.return=h,re=A):Mm(g)}d=d.sibling}e:for(d=null,g=e;;){if(g.tag===5){if(d===null){d=g;try{s=g.stateNode,l?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=g.stateNode,u=g.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Yw("display",i))}catch(m){rt(e,e.return,m)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=l?"":g.memoizedProps}catch(m){rt(e,e.return,m)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Gn(t,e),ar(e),r&4&&Dm(e);break;case 21:break;default:Gn(t,e),ar(e)}}function ar(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xv(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ka(s,""),r.flags&=-33);var o=Nm(e);ig(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Nm(e);og(e,a,i);break;default:throw Error(Y(161))}}catch(u){rt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function SS(e,t,n){re=e,bv(e)}function bv(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var s=re,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||ql;if(!i){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Pt;a=ql;var l=Pt;if(ql=i,(Pt=u)&&!l)for(re=s;re!==null;)i=re,u=i.child,i.tag===22&&i.memoizedState!==null?Qm(s):u!==null?(u.return=i,re=u):Qm(s);for(;o!==null;)re=o,bv(o),o=o.sibling;re=s,ql=a,Pt=l}Pm(e)}else(s.subtreeFlags&8772)!==0&&o!==null?(o.return=s,re=o):Pm(e)}}function Pm(e){for(;re!==null;){var t=re;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Pt||wd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Kn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ym(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ym(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var d=l.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Ya(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Pt||t.flags&512&&sg(t)}catch(h){rt(t,t.return,h)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function Mm(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function Qm(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{wd(4,t)}catch(u){rt(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){rt(t,s,u)}}var o=t.return;try{sg(t)}catch(u){rt(t,o,u)}break;case 5:var i=t.return;try{sg(t)}catch(u){rt(t,i,u)}}}catch(u){rt(t,t.return,u)}if(t===e){re=null;break}var a=t.sibling;if(a!==null){a.return=t.return,re=a;break}re=t.return}}var BS=Math.ceil,uu=Zr.ReactCurrentDispatcher,kA=Zr.ReactCurrentOwner,Qn=Zr.ReactCurrentBatchConfig,Ie=0,At=null,at=null,Et=0,un=0,li=Us(0),ut=0,il=null,xo=0,vd=0,RA=0,_a=null,Jt=null,TA=0,Ri=1/0,Lr=null,du=!1,ag=null,Rs=null,Zl=!1,xs=null,fu=0,Na=0,lg=null,Qc=-1,Fc=0;function zt(){return(Ie&6)!==0?ot():Qc!==-1?Qc:Qc=ot()}function Ts(e){return(e.mode&1)===0?1:(Ie&2)!==0&&Et!==0?Et&-Et:uS.transition!==null?(Fc===0&&(Fc=l1()),Fc):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:A1(e.type)),e)}function Jn(e,t,n,r){if(50<Na)throw Na=0,lg=null,Error(Y(185));bl(e,n,r),((Ie&2)===0||e!==At)&&(e===At&&((Ie&2)===0&&(vd|=n),ut===4&&ps(e,Et)),on(e,r),n===1&&Ie===0&&(t.mode&1)===0&&(Ri=ot()+500,pd&&Hs()))}function on(e,t){var n=e.callbackNode;uI(e,t);var r=Yc(e,e===At?Et:0);if(r===0)n!==null&&Kp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kp(n),t===1)e.tag===0?cS(Fm.bind(null,e)):P1(Fm.bind(null,e)),oS(function(){(Ie&6)===0&&Hs()}),n=null;else{switch(c1(r)){case 1:n=nA;break;case 4:n=i1;break;case 16:n=Wc;break;case 536870912:n=a1;break;default:n=Wc}n=Nv(n,Iv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Iv(e,t){if(Qc=-1,Fc=0,(Ie&6)!==0)throw Error(Y(327));var n=e.callbackNode;if(mi()&&e.callbackNode!==n)return null;var r=Yc(e,e===At?Et:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=hu(e,r);else{t=r;var s=Ie;Ie|=2;var o=Bv();(At!==e||Et!==t)&&(Lr=null,Ri=ot()+500,po(e,t));do try{TS();break}catch(a){Sv(e,a)}while(!0);AA(),uu.current=o,Ie=s,at!==null?t=0:(At=null,Et=0,t=ut)}if(t!==0){if(t===2&&(s=Mh(e),s!==0&&(r=s,t=cg(e,s))),t===1)throw n=il,po(e,0),ps(e,r),on(e,ot()),n;if(t===6)ps(e,r);else{if(s=e.current.alternate,(r&30)===0&&!kS(s)&&(t=hu(e,r),t===2&&(o=Mh(e),o!==0&&(r=o,t=cg(e,o))),t===1))throw n=il,po(e,0),ps(e,r),on(e,ot()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:Ys(e,Jt,Lr);break;case 3:if(ps(e,r),(r&130023424)===r&&(t=TA+500-ot(),10<t)){if(Yc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){zt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=zh(Ys.bind(null,e,Jt,Lr),t);break}Ys(e,Jt,Lr);break;case 4:if(ps(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Xn(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BS(r/1960))-r,10<r){e.timeoutHandle=zh(Ys.bind(null,e,Jt,Lr),r);break}Ys(e,Jt,Lr);break;case 5:Ys(e,Jt,Lr);break;default:throw Error(Y(329))}}}return on(e,ot()),e.callbackNode===n?Iv.bind(null,e):null}function cg(e,t){var n=_a;return e.current.memoizedState.isDehydrated&&(po(e,t).flags|=256),e=hu(e,t),e!==2&&(t=Jt,Jt=n,t!==null&&ug(t)),e}function ug(e){Jt===null?Jt=e:Jt.push.apply(Jt,e)}function kS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!tr(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ps(e,t){for(t&=~RA,t&=~vd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xn(t),r=1<<n;e[n]=-1,t&=~r}}function Fm(e){if((Ie&6)!==0)throw Error(Y(327));mi();var t=Yc(e,0);if((t&1)===0)return on(e,ot()),null;var n=hu(e,t);if(e.tag!==0&&n===2){var r=Mh(e);r!==0&&(t=r,n=cg(e,r))}if(n===1)throw n=il,po(e,0),ps(e,t),on(e,ot()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ys(e,Jt,Lr),on(e,ot()),null}function _A(e,t){var n=Ie;Ie|=1;try{return e(t)}finally{Ie=n,Ie===0&&(Ri=ot()+500,pd&&Hs())}}function Eo(e){xs!==null&&xs.tag===0&&(Ie&6)===0&&mi();var t=Ie;Ie|=1;var n=Qn.transition,r=Pe;try{if(Qn.transition=null,Pe=1,e)return e()}finally{Pe=r,Qn.transition=n,Ie=t,(Ie&6)===0&&Hs()}}function NA(){un=li.current,Ge(li)}function po(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sS(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(fA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eu();break;case 3:Bi(),Ge(rn),Ge(Qt),xA();break;case 5:vA(r);break;case 4:Bi();break;case 13:Ge(qe);break;case 19:Ge(qe);break;case 10:pA(r.type._context);break;case 22:case 23:NA()}n=n.return}if(At=e,at=e=_s(e.current,null),Et=un=t,ut=0,il=null,RA=vd=xo=0,Jt=_a=null,oo!==null){for(t=0;t<oo.length;t++)if(n=oo[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}oo=null}return e}function Sv(e,t){do{var n=at;try{if(AA(),Dc.current=cu,lu){for(var r=Ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lu=!1}if(vo=0,ht=ct=Ze=null,Ra=!1,rl=0,kA.current=null,n===null||n.return===null){ut=1,il=t,at=null;break}e:{var o=e,i=n.return,a=n,u=t;if(t=Et,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,d=a,g=d.tag;if((d.mode&1)===0&&(g===0||g===11||g===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var A=bm(i);if(A!==null){A.flags&=-257,Im(A,i,a,o,t),A.mode&1&&Cm(o,l,t),t=A,u=l;var f=t.updateQueue;if(f===null){var m=new Set;m.add(u),t.updateQueue=m}else f.add(u);break e}else{if((t&1)===0){Cm(o,l,t),DA();break e}u=Error(Y(426))}}else if(We&&a.mode&1){var v=bm(i);if(v!==null){(v.flags&65536)===0&&(v.flags|=256),Im(v,i,a,o,t),hA(ki(u,a));break e}}o=u=ki(u,a),ut!==4&&(ut=2),_a===null?_a=[o]:_a.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=cv(o,u,t);mm(o,p);break e;case 1:a=u;var y=o.type,x=o.stateNode;if((o.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Rs===null||!Rs.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=uv(o,a,t);mm(o,E);break e}}o=o.return}while(o!==null)}Rv(n)}catch(C){t=C,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Bv(){var e=uu.current;return uu.current=cu,e===null?cu:e}function DA(){(ut===0||ut===3||ut===2)&&(ut=4),At===null||(xo&268435455)===0&&(vd&268435455)===0||ps(At,Et)}function hu(e,t){var n=Ie;Ie|=2;var r=Bv();(At!==e||Et!==t)&&(Lr=null,po(e,t));do try{RS();break}catch(s){Sv(e,s)}while(!0);if(AA(),Ie=n,uu.current=r,at!==null)throw Error(Y(261));return At=null,Et=0,ut}function RS(){for(;at!==null;)kv(at)}function TS(){for(;at!==null&&!tI();)kv(at)}function kv(e){var t=_v(e.alternate,e,un);e.memoizedProps=e.pendingProps,t===null?Rv(e):at=t,kA.current=null}function Rv(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=ES(n,t,un),n!==null){at=n;return}}else{if(n=CS(n,t),n!==null){n.flags&=32767,at=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ut=6,at=null;return}}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);ut===0&&(ut=5)}function Ys(e,t,n){var r=Pe,s=Qn.transition;try{Qn.transition=null,Pe=1,_S(e,t,n,r)}finally{Qn.transition=s,Pe=r}return null}function _S(e,t,n,r){do mi();while(xs!==null);if((Ie&6)!==0)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(dI(e,o),e===At&&(at=At=null,Et=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Zl||(Zl=!0,Nv(Wc,function(){return mi(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Qn.transition,Qn.transition=null;var i=Pe;Pe=1;var a=Ie;Ie|=4,kA.current=null,IS(e,n),Cv(n,e),JI(Uh),Xc=!!Oh,Uh=Oh=null,e.current=n,SS(n),nI(),Ie=a,Pe=i,Qn.transition=o}else e.current=n;if(Zl&&(Zl=!1,xs=e,fu=s),o=e.pendingLanes,o===0&&(Rs=null),oI(n.stateNode),on(e,ot()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(du)throw du=!1,e=ag,ag=null,e;return(fu&1)!==0&&e.tag!==0&&mi(),o=e.pendingLanes,(o&1)!==0?e===lg?Na++:(Na=0,lg=e):Na=0,Hs(),null}function mi(){if(xs!==null){var e=c1(fu),t=Qn.transition,n=Pe;try{if(Qn.transition=null,Pe=16>e?16:e,xs===null)var r=!1;else{if(e=xs,xs=null,fu=0,(Ie&6)!==0)throw Error(Y(331));var s=Ie;for(Ie|=4,re=e.current;re!==null;){var o=re,i=o.child;if((re.flags&16)!==0){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(re=l;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:Ta(8,d,o)}var g=d.child;if(g!==null)g.return=d,re=g;else for(;re!==null;){d=re;var h=d.sibling,A=d.return;if(vv(d),d===l){re=null;break}if(h!==null){h.return=A,re=h;break}re=A}}}var f=o.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}re=o}}if((o.subtreeFlags&2064)!==0&&i!==null)i.return=o,re=i;else e:for(;re!==null;){if(o=re,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Ta(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,re=p;break e}re=o.return}}var y=e.current;for(re=y;re!==null;){i=re;var x=i.child;if((i.subtreeFlags&2064)!==0&&x!==null)x.return=i,re=x;else e:for(i=y;re!==null;){if(a=re,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:wd(9,a)}}catch(C){rt(a,a.return,C)}if(a===i){re=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,re=E;break e}re=a.return}}if(Ie=s,Hs(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(dd,e)}catch{}r=!0}return r}finally{Pe=n,Qn.transition=t}}return!1}function jm(e,t,n){t=ki(n,t),t=cv(e,t,1),e=ks(e,t,1),t=zt(),e!==null&&(bl(e,1,t),on(e,t))}function rt(e,t,n){if(e.tag===3)jm(e,e,n);else for(;t!==null;){if(t.tag===3){jm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rs===null||!Rs.has(r))){e=ki(n,e),e=uv(t,e,1),t=ks(t,e,1),e=zt(),t!==null&&(bl(t,1,e),on(t,e));break}}t=t.return}}function NS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=zt(),e.pingedLanes|=e.suspendedLanes&n,At===e&&(Et&n)===n&&(ut===4||ut===3&&(Et&130023424)===Et&&500>ot()-TA?po(e,0):RA|=n),on(e,t)}function Tv(e,t){t===0&&((e.mode&1)===0?t=1:(t=zl,zl<<=1,(zl&130023424)===0&&(zl=4194304)));var n=zt();e=Yr(e,t),e!==null&&(bl(e,t,n),on(e,n))}function DS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Tv(e,n)}function PS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),Tv(e,n)}var _v;_v=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rn.current)tn=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return tn=!1,xS(e,t,n);tn=(e.flags&131072)!==0}else tn=!1,We&&(t.flags&1048576)!==0&&M1(t,ru,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mc(e,t),e=t.pendingProps;var s=bi(t,Qt.current);pi(t,n),s=CA(null,t,r,e,s,n);var o=bA();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,sn(r)?(o=!0,tu(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yA(t),s.updater=yd,t.stateNode=s,s._reactInternals=t,Xh(t,r,e,n),t=Zh(null,t,r,!0,o,n)):(t.tag=0,We&&o&&dA(t),Lt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=QS(r),e=Kn(r,e),s){case 0:t=qh(null,t,r,e,n);break e;case 1:t=km(null,t,r,e,n);break e;case 11:t=Sm(null,t,r,e,n);break e;case 14:t=Bm(null,t,r,Kn(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kn(r,s),qh(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kn(r,s),km(e,t,r,s,n);case 3:e:{if(gv(t),e===null)throw Error(Y(387));r=t.pendingProps,o=t.memoizedState,s=o.element,U1(e,t),iu(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=ki(Error(Y(423)),t),t=Rm(e,t,r,n,s);break e}else if(r!==s){s=ki(Error(Y(424)),t),t=Rm(e,t,r,n,s);break e}else for(pn=Bs(t.stateNode.containerInfo.firstChild),yn=t,We=!0,Wn=null,n=L1(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ii(),r===s){t=Xr(e,t,n);break e}Lt(e,t,r,n)}t=t.child}return t;case 5:return H1(t),e===null&&Vh(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Hh(r,s)?i=null:o!==null&&Hh(r,o)&&(t.flags|=32),hv(e,t),Lt(e,t,i,n),t.child;case 6:return e===null&&Vh(t),null;case 13:return Av(e,t,n);case 4:return wA(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Si(t,null,r,n):Lt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kn(r,s),Sm(e,t,r,s,n);case 7:return Lt(e,t,t.pendingProps,n),t.child;case 8:return Lt(e,t,t.pendingProps.children,n),t.child;case 12:return Lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Oe(su,r._currentValue),r._currentValue=i,o!==null)if(tr(o.value,i)){if(o.children===s.children&&!rn.current){t=Xr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=$r(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var d=l.pending;d===null?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Wh(o.return,n,t),a.lanes|=n;break}u=u.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Y(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Wh(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Lt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,pi(t,n),s=jn(s),r=r(s),t.flags|=1,Lt(e,t,r,n),t.child;case 14:return r=t.type,s=Kn(r,t.pendingProps),s=Kn(r.type,s),Bm(e,t,r,s,n);case 15:return dv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kn(r,s),Mc(e,t),t.tag=1,sn(r)?(e=!0,tu(t)):e=!1,pi(t,n),lv(t,r,s),Xh(t,r,s,n),Zh(null,t,r,!0,e,n);case 19:return pv(e,t,n);case 22:return fv(e,t,n)}throw Error(Y(156,t.tag))};function Nv(e,t){return o1(e,t)}function MS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(e,t,n,r){return new MS(e,t,n,r)}function PA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function QS(e){if(typeof e=="function")return PA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zg)return 11;if(e===eA)return 14}return 2}function _s(e,t){var n=e.alternate;return n===null?(n=Mn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")PA(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case qo:return mo(n.children,s,o,t);case qg:i=8,s|=8;break;case vh:return e=Mn(12,n,t,s|2),e.elementType=vh,e.lanes=o,e;case xh:return e=Mn(13,n,t,s),e.elementType=xh,e.lanes=o,e;case Eh:return e=Mn(19,n,t,s),e.elementType=Eh,e.lanes=o,e;case Hw:return xd(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ow:i=10;break e;case Uw:i=9;break e;case Zg:i=11;break e;case eA:i=14;break e;case fs:i=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Mn(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function mo(e,t,n,r){return e=Mn(7,e,r,t),e.lanes=n,e}function xd(e,t,n,r){return e=Mn(22,e,r,t),e.elementType=Hw,e.lanes=n,e.stateNode={isHidden:!1},e}function Sf(e,t,n){return e=Mn(6,e,null,t),e.lanes=n,e}function Bf(e,t,n){return t=Mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FS(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=af(0),this.expirationTimes=af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function MA(e,t,n,r,s,o,i,a,u){return e=new FS(e,t,n,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Mn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yA(o),e}function jS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Dv(e){if(!e)return Fs;e=e._reactInternals;e:{if(_o(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(sn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(sn(n))return D1(e,n,t)}return t}function Pv(e,t,n,r,s,o,i,a,u){return e=MA(n,r,!0,e,s,o,i,a,u),e.context=Dv(null),n=e.current,r=zt(),s=Ts(n),o=$r(r,s),o.callback=t??null,ks(n,o,s),e.current.lanes=s,bl(e,s,r),on(e,r),e}function Ed(e,t,n,r){var s=t.current,o=zt(),i=Ts(s);return n=Dv(n),t.context===null?t.context=n:t.pendingContext=n,t=$r(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ks(s,t,i),e!==null&&(Jn(e,s,i,o),Nc(e,s,i)),i}function gu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function QA(e,t){Lm(e,t),(e=e.alternate)&&Lm(e,t)}function LS(){return null}var Mv=typeof reportError=="function"?reportError:function(e){console.error(e)};function FA(e){this._internalRoot=e}Cd.prototype.render=FA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Ed(e,t,null,null)};Cd.prototype.unmount=FA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eo(function(){Ed(null,e,null,null)}),t[Wr]=null}};function Cd(e){this._internalRoot=e}Cd.prototype.unstable_scheduleHydration=function(e){if(e){var t=f1();e={blockedOn:null,target:e,priority:t};for(var n=0;n<As.length&&t!==0&&t<As[n].priority;n++);As.splice(n,0,e),n===0&&g1(e)}};function jA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Om(){}function OS(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var l=gu(i);o.call(l)}}var i=Pv(t,r,e,0,null,!1,!1,"",Om);return e._reactRootContainer=i,e[Wr]=i.current,qa(e.nodeType===8?e.parentNode:e),Eo(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=gu(u);a.call(l)}}var u=MA(e,0,!1,null,null,!1,!1,"",Om);return e._reactRootContainer=u,e[Wr]=u.current,qa(e.nodeType===8?e.parentNode:e),Eo(function(){Ed(t,u,n,r)}),u}function Id(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var u=gu(i);a.call(u)}}Ed(t,i,e,s)}else i=OS(n,t,e,s,r);return gu(i)}u1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ya(t.pendingLanes);n!==0&&(rA(t,n|1),on(t,ot()),(Ie&6)===0&&(Ri=ot()+500,Hs()))}break;case 13:Eo(function(){var r=Yr(e,1);if(r!==null){var s=zt();Jn(r,e,1,s)}}),QA(e,1)}};sA=function(e){if(e.tag===13){var t=Yr(e,134217728);if(t!==null){var n=zt();Jn(t,e,134217728,n)}QA(e,134217728)}};d1=function(e){if(e.tag===13){var t=Ts(e),n=Yr(e,t);if(n!==null){var r=zt();Jn(n,e,t,r)}QA(e,t)}};f1=function(){return Pe};h1=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};Nh=function(e,t,n){switch(t){case"input":if(Ih(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ad(r);if(!s)throw Error(Y(90));Gw(r),Ih(r,s)}}}break;case"textarea":$w(e,n);break;case"select":t=n.value,t!=null&&fi(e,!!n.multiple,t,!1)}};Zw=_A;e1=Eo;var US={usingClientEntryPoint:!1,Events:[Sl,ni,Ad,Jw,qw,_A]},oa={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HS={bundleType:oa.bundleType,version:oa.version,rendererPackageName:oa.rendererPackageName,rendererConfig:oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=r1(e),e===null?null:e.stateNode},findFiberByHostInstance:oa.findFiberByHostInstance||LS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{dd=ec.inject(HS),wr=ec}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=US;xn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jA(t))throw Error(Y(200));return jS(e,t,null,n)};xn.createRoot=function(e,t){if(!jA(e))throw Error(Y(299));var n=!1,r="",s=Mv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=MA(e,1,!1,null,null,n,!1,r,s),e[Wr]=t.current,qa(e.nodeType===8?e.parentNode:e),new FA(t)};xn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=r1(t),e=e===null?null:e.stateNode,e};xn.flushSync=function(e){return Eo(e)};xn.hydrate=function(e,t,n){if(!bd(t))throw Error(Y(200));return Id(null,e,t,!0,n)};xn.hydrateRoot=function(e,t,n){if(!jA(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Mv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Pv(t,null,e,1,n??null,s,!1,o,i),e[Wr]=t.current,qa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Cd(t)};xn.render=function(e,t,n){if(!bd(t))throw Error(Y(200));return Id(null,e,t,!1,n)};xn.unmountComponentAtNode=function(e){if(!bd(e))throw Error(Y(40));return e._reactRootContainer?(Eo(function(){Id(null,null,e,!1,function(){e._reactRootContainer=null,e[Wr]=null})}),!0):!1};xn.unstable_batchedUpdates=_A;xn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bd(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Id(e,t,n,!1,r)};xn.version="18.3.1-next-f1338f8080-20240426";function Qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qv)}catch(e){console.error(e)}}Qv(),Qw.exports=xn;var Sd=Qw.exports;const zS=Cw(Sd);var Fv,Um=Sd;Fv=Um.createRoot,Um.hydrateRoot;var Au=["light","dark"],LA="(prefers-color-scheme: dark)",GS=typeof window>"u",OA=w.createContext(void 0),KS={setTheme:e=>{},themes:[]},$S=()=>{var e;return(e=w.useContext(OA))!=null?e:KS},VS=e=>w.useContext(OA)?e.children:w.createElement(YS,{...e}),WS=["light","dark"],YS=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:o=WS,defaultTheme:i=n?"system":"light",attribute:a="data-theme",value:u,children:l,nonce:d})=>{let[g,h]=w.useState(()=>Hm(s,i)),[A,f]=w.useState(()=>Hm(s)),m=u?Object.values(u):o,v=w.useCallback(E=>{let C=E;if(!C)return;E==="system"&&n&&(C=zm());let I=u?u[C]:C,b=t?JS():null,S=document.documentElement;if(a==="class"?(S.classList.remove(...m),I&&S.classList.add(I)):I?S.setAttribute(a,I):S.removeAttribute(a),r){let k=Au.includes(i)?i:null,R=Au.includes(C)?C:k;S.style.colorScheme=R}b==null||b()},[]),p=w.useCallback(E=>{let C=typeof E=="function"?E(E):E;h(C);try{localStorage.setItem(s,C)}catch{}},[e]),y=w.useCallback(E=>{let C=zm(E);f(C),g==="system"&&n&&!e&&v("system")},[g,e]);w.useEffect(()=>{let E=window.matchMedia(LA);return E.addListener(y),y(E),()=>E.removeListener(y)},[y]),w.useEffect(()=>{let E=C=>{if(C.key!==s)return;let I=C.newValue||i;p(I)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[p]),w.useEffect(()=>{v(e??g)},[e,g]);let x=w.useMemo(()=>({theme:g,setTheme:p,forcedTheme:e,resolvedTheme:g==="system"?A:g,themes:n?[...o,"system"]:o,systemTheme:n?A:void 0}),[g,p,e,A,n,o]);return w.createElement(OA.Provider,{value:x},w.createElement(XS,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:s,themes:o,defaultTheme:i,attribute:a,value:u,children:l,attrs:m,nonce:d}),l)},XS=w.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:i,attrs:a,nonce:u})=>{let l=o==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(f=>`'${f}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,g=s?Au.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(f,m=!1,v=!0)=>{let p=i?i[f]:f,y=m?f+"|| ''":`'${p}'`,x="";return s&&v&&!m&&Au.includes(f)&&(x+=`d.style.colorScheme = '${f}';`),n==="class"?m||p?x+=`c.add(${y})`:x+="null":p&&(x+=`d[s](n,${y})`),x},A=e?`!function(){${d}${h(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${l})){var t='${LA}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${l?"":"else{"+h(o,!1,!1)+"}"}${g}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${g}}catch(t){}}();`;return w.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:A}})}),Hm=(e,t)=>{if(GS)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},JS=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},zm=e=>(e||(e=window.matchMedia(LA)),e.matches?"dark":"light");function jv(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=jv(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function UA(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=jv(e))&&(r&&(r+=" "),r+=t);return r}const HA="-",qS=e=>{const t=eB(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(HA);return a[0]===""&&a.length!==1&&a.shift(),Lv(a,t)||ZS(i)},getConflictingClassGroupIds:(i,a)=>{const u=n[i]||[];return a&&r[i]?[...u,...r[i]]:u}}},Lv=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Lv(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(HA);return(i=t.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId},Gm=/^\[(.+)\]$/,ZS=e=>{if(Gm.test(e)){const t=Gm.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},eB=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return nB(Object.entries(e.classGroups),n).forEach(([o,i])=>{dg(i,r,o,t)}),r},dg=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:Km(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(tB(s)){dg(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{dg(i,Km(t,o),n,r)})})},Km=(e,t)=>{let n=e;return t.split(HA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},tB=e=>e.isThemeGetter,nB=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[t+i,a])):o);return[n,s]}):e,rB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}},Ov="!",sB=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,i=a=>{const u=[];let l=0,d=0,g;for(let v=0;v<a.length;v++){let p=a[v];if(l===0){if(p===s&&(r||a.slice(v,v+o)===t)){u.push(a.slice(d,v)),d=v+o;continue}if(p==="/"){g=v;continue}}p==="["?l++:p==="]"&&l--}const h=u.length===0?a:a.substring(d),A=h.startsWith(Ov),f=A?h.substring(1):h,m=g&&g>d?g-d:void 0;return{modifiers:u,hasImportantModifier:A,baseClassName:f,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:i}):i},oB=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},iB=e=>({cache:rB(e.cacheSize),parseClassName:sB(e),...qS(e)}),aB=/\s+/,lB=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],i=e.trim().split(aB);let a="";for(let u=i.length-1;u>=0;u-=1){const l=i[u],{modifiers:d,hasImportantModifier:g,baseClassName:h,maybePostfixModifierPosition:A}=n(l);let f=!!A,m=r(f?h.substring(0,A):h);if(!m){if(!f){a=l+(a.length>0?" "+a:a);continue}if(m=r(h),!m){a=l+(a.length>0?" "+a:a);continue}f=!1}const v=oB(d).join(":"),p=g?v+Ov:v,y=p+m;if(o.includes(y))continue;o.push(y);const x=s(m,f);for(let E=0;E<x.length;++E){const C=x[E];o.push(p+C)}a=l+(a.length>0?" "+a:a)}return a};function cB(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Uv(t))&&(r&&(r+=" "),r+=n);return r}const Uv=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Uv(e[r]))&&(n&&(n+=" "),n+=t);return n};function uB(e,...t){let n,r,s,o=i;function i(u){const l=t.reduce((d,g)=>g(d),e());return n=iB(l),r=n.cache.get,s=n.cache.set,o=a,a(u)}function a(u){const l=r(u);if(l)return l;const d=lB(u,n);return s(u,d),d}return function(){return o(cB.apply(null,arguments))}}const Ue=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Hv=/^\[(?:([a-z-]+):)?(.+)\]$/i,dB=/^\d+\/\d+$/,fB=new Set(["px","full","screen"]),hB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tr=e=>yi(e)||fB.has(e)||dB.test(e),ts=e=>Ui(e,"length",IB),yi=e=>!!e&&!Number.isNaN(Number(e)),kf=e=>Ui(e,"number",yi),ia=e=>!!e&&Number.isInteger(Number(e)),yB=e=>e.endsWith("%")&&yi(e.slice(0,-1)),Ae=e=>Hv.test(e),ns=e=>hB.test(e),wB=new Set(["length","size","percentage"]),vB=e=>Ui(e,wB,zv),xB=e=>Ui(e,"position",zv),EB=new Set(["image","url"]),CB=e=>Ui(e,EB,BB),bB=e=>Ui(e,"",SB),aa=()=>!0,Ui=(e,t,n)=>{const r=Hv.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},IB=e=>gB.test(e)&&!AB.test(e),zv=()=>!1,SB=e=>pB.test(e),BB=e=>mB.test(e),kB=()=>{const e=Ue("colors"),t=Ue("spacing"),n=Ue("blur"),r=Ue("brightness"),s=Ue("borderColor"),o=Ue("borderRadius"),i=Ue("borderSpacing"),a=Ue("borderWidth"),u=Ue("contrast"),l=Ue("grayscale"),d=Ue("hueRotate"),g=Ue("invert"),h=Ue("gap"),A=Ue("gradientColorStops"),f=Ue("gradientColorStopPositions"),m=Ue("inset"),v=Ue("margin"),p=Ue("opacity"),y=Ue("padding"),x=Ue("saturate"),E=Ue("scale"),C=Ue("sepia"),I=Ue("skew"),b=Ue("space"),S=Ue("translate"),k=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",Ae,t],M=()=>[Ae,t],T=()=>["",Tr,ts],F=()=>["auto",yi,Ae],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",Ae],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[yi,Ae];return{cacheSize:500,separator:":",theme:{colors:[aa],spacing:[Tr,ts],blur:["none","",ns,Ae],brightness:J(),borderColor:[e],borderRadius:["none","","full",ns,Ae],borderSpacing:M(),borderWidth:T(),contrast:J(),grayscale:D(),hueRotate:J(),invert:D(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[yB,ts],inset:B(),margin:B(),opacity:J(),padding:M(),saturate:J(),scale:J(),sepia:D(),skew:J(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Ae]}],container:["container"],columns:[{columns:[ns]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Ae]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ia,Ae]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ae]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",ia,Ae]}],"grid-cols":[{"grid-cols":[aa]}],"col-start-end":[{col:["auto",{span:["full",ia,Ae]},Ae]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[aa]}],"row-start-end":[{row:["auto",{span:[ia,Ae]},Ae]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ae]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ae,t]}],"min-w":[{"min-w":[Ae,t,"min","max","fit"]}],"max-w":[{"max-w":[Ae,t,"none","full","min","max","fit","prose",{screen:[ns]},ns]}],h:[{h:[Ae,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ae,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ae,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ae,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ns,ts]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",kf]}],"font-family":[{font:[aa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ae]}],"line-clamp":[{"line-clamp":["none",yi,kf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Tr,Ae]}],"list-image":[{"list-image":["none",Ae]}],"list-style-type":[{list:["none","disc","decimal",Ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Tr,ts]}],"underline-offset":[{"underline-offset":["auto",Tr,Ae]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),xB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},CB]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[A]}],"gradient-via":[{via:[A]}],"gradient-to":[{to:[A]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:O()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[Tr,Ae]}],"outline-w":[{outline:[Tr,ts]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Tr,ts]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ns,bB]}],"shadow-color":[{shadow:[aa]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ns,Ae]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[g]}],saturate:[{saturate:[x]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ae]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Ae]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[ia,Ae]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Tr,ts,kf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Gv=uB(kB);function oe(...e){return Gv(UA(e))}const Zt=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:oe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Zt.displayName="Card";const hn=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:oe("flex flex-col space-y-1.5 p-6",e),...t}));hn.displayName="CardHeader";const gn=w.forwardRef(({className:e,...t},n)=>c.jsx("h3",{ref:n,className:oe("text-2xl font-semibold leading-none tracking-tight",e),...t}));gn.displayName="CardTitle";const Dn=w.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:oe("text-sm text-muted-foreground",e),...t}));Dn.displayName="CardDescription";const An=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:oe("p-6 pt-0",e),...t}));An.displayName="CardContent";const Kv=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:oe("flex items-center p-6 pt-0",e),...t}));Kv.displayName="CardFooter";function $v(...e){return Gv(UA(e))}const RB={default:"bg-gray-100 text-gray-800",destructive:"bg-red-100 text-red-800"};function pu({variant:e="default",children:t,className:n=""}){return c.jsx("div",{className:$v("p-4 rounded-md",RB[e],n),children:t})}function mu({children:e,className:t=""}){return c.jsx("p",{className:$v("text-sm",t),children:e})}function kl(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var TB=["color"],_B=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=kl(e,TB);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),NB=["color"],Vv=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=kl(e,NB);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DB=["color"],PB=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=kl(e,DB);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M1.20308 1.04312C1.00481 0.954998 0.772341 1.0048 0.627577 1.16641C0.482813 1.32802 0.458794 1.56455 0.568117 1.75196L3.92115 7.50002L0.568117 13.2481C0.458794 13.4355 0.482813 13.672 0.627577 13.8336C0.772341 13.9952 1.00481 14.045 1.20308 13.9569L14.7031 7.95693C14.8836 7.87668 15 7.69762 15 7.50002C15 7.30243 14.8836 7.12337 14.7031 7.04312L1.20308 1.04312ZM4.84553 7.10002L2.21234 2.586L13.2689 7.50002L2.21234 12.414L4.84552 7.90002H9C9.22092 7.90002 9.4 7.72094 9.4 7.50002C9.4 7.27911 9.22092 7.10002 9 7.10002H4.84553Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),MB=["color"],QB=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=kl(e,MB);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),FB=["color"],jB=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=kl(e,FB);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function LB(e){return c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[c.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),c.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}),c.jsx("circle",{cx:"12",cy:"16",r:"1"})]})}function Wv(e){return c.jsx("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})})}function tc(e){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}function OB(e){return c.jsxs("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),c.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}const $m=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Vm=UA,zA=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Vm(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(l=>{const d=n==null?void 0:n[l],g=o==null?void 0:o[l];if(d===null)return null;const h=$m(d)||$m(g);return s[l][h]}),a=n&&Object.entries(n).reduce((l,d)=>{let[g,h]=d;return h===void 0||(l[g]=h),l},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,d)=>{let{class:g,className:h,...A}=d;return Object.entries(A).every(f=>{let[m,v]=f;return Array.isArray(v)?v.includes({...o,...a}[m]):{...o,...a}[m]===v})?[...l,g,h]:l},[]);return Vm(e,i,u,n==null?void 0:n.class,n==null?void 0:n.className)},UB=zA("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function yu({className:e,variant:t,...n}){return c.jsx("div",{className:oe(UB({variant:t}),e),...n})}function Wm(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Yv(...e){return t=>{let n=!1;const r=e.map(s=>{const o=Wm(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():Wm(e[s],null)}}}}function Ft(...e){return w.useCallback(Yv(...e),e)}function GA(e){const t=zB(e),n=w.forwardRef((r,s)=>{const{children:o,...i}=r,a=w.Children.toArray(o),u=a.find(KB);if(u){const l=u.props.children,d=a.map(g=>g===u?w.Children.count(l)>1?w.Children.only(null):w.isValidElement(l)?l.props.children:null:g);return c.jsx(t,{...i,ref:s,children:w.isValidElement(l)?w.cloneElement(l,void 0,d):null})}return c.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var HB=GA("Slot");function zB(e){const t=w.forwardRef((n,r)=>{const{children:s,...o}=n;if(w.isValidElement(s)){const i=VB(s),a=$B(o,s.props);return s.type!==w.Fragment&&(a.ref=r?Yv(r,i):i),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var GB=Symbol("radix.slottable");function KB(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===GB}function $B(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const u=o(...a);return s(...a),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function VB(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const WB=zA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),he=w.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const i=r?HB:"button";return c.jsx(i,{className:oe(WB({variant:t,size:n,className:e})),ref:o,...s})});he.displayName="Button";function Mt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Hi(e,t=[]){let n=[];function r(o,i){const a=w.createContext(i),u=n.length;n=[...n,i];const l=g=>{var p;const{scope:h,children:A,...f}=g,m=((p=h==null?void 0:h[e])==null?void 0:p[u])||a,v=w.useMemo(()=>f,Object.values(f));return c.jsx(m.Provider,{value:v,children:A})};l.displayName=o+"Provider";function d(g,h){var m;const A=((m=h==null?void 0:h[e])==null?void 0:m[u])||a,f=w.useContext(A);if(f)return f;if(i!==void 0)return i;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[l,d]}const s=()=>{const o=n.map(i=>w.createContext(i));return function(a){const u=(a==null?void 0:a[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return s.scopeName=e,[r,YB(s,...t)]}function YB(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:u,scopeName:l})=>{const g=u(o)[`__scope${l}`];return{...a,...g}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var XB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tt=XB.reduce((e,t)=>{const n=GA(`Primitive.${t}`),r=w.forwardRef((s,o)=>{const{asChild:i,...a}=s,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(u,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function JB(e,t){e&&Sd.flushSync(()=>e.dispatchEvent(t))}function en(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function qB(e,t=globalThis==null?void 0:globalThis.document){const n=en(e);w.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var ZB="DismissableLayer",fg="dismissableLayer.update",ek="dismissableLayer.pointerDownOutside",tk="dismissableLayer.focusOutside",Ym,Xv=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jv=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...u}=e,l=w.useContext(Xv),[d,g]=w.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,A]=w.useState({}),f=Ft(t,b=>g(b)),m=Array.from(l.layers),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),p=m.indexOf(v),y=d?m.indexOf(d):-1,x=l.layersWithOutsidePointerEventsDisabled.size>0,E=y>=p,C=sk(b=>{const S=b.target,k=[...l.branches].some(R=>R.contains(S));!E||k||(s==null||s(b),i==null||i(b),b.defaultPrevented||a==null||a())},h),I=ok(b=>{const S=b.target;[...l.branches].some(R=>R.contains(S))||(o==null||o(b),i==null||i(b),b.defaultPrevented||a==null||a())},h);return qB(b=>{y===l.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},h),w.useEffect(()=>{if(d)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Ym=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(d)),l.layers.add(d),Xm(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Ym)}},[d,h,n,l]),w.useEffect(()=>()=>{d&&(l.layers.delete(d),l.layersWithOutsidePointerEventsDisabled.delete(d),Xm())},[d,l]),w.useEffect(()=>{const b=()=>A({});return document.addEventListener(fg,b),()=>document.removeEventListener(fg,b)},[]),c.jsx(tt.div,{...u,ref:f,style:{pointerEvents:x?E?"auto":"none":void 0,...e.style},onFocusCapture:Mt(e.onFocusCapture,I.onFocusCapture),onBlurCapture:Mt(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Mt(e.onPointerDownCapture,C.onPointerDownCapture)})});Jv.displayName=ZB;var nk="DismissableLayerBranch",rk=w.forwardRef((e,t)=>{const n=w.useContext(Xv),r=w.useRef(null),s=Ft(t,r);return w.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),c.jsx(tt.div,{...e,ref:s})});rk.displayName=nk;function sk(e,t=globalThis==null?void 0:globalThis.document){const n=en(e),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let u=function(){qv(ek,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function ok(e,t=globalThis==null?void 0:globalThis.document){const n=en(e),r=w.useRef(!1);return w.useEffect(()=>{const s=o=>{o.target&&!r.current&&qv(tk,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Xm(){const e=new CustomEvent(fg);document.dispatchEvent(e)}function qv(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?JB(s,o):s.dispatchEvent(o)}var Rf=0;function ik(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Jm()),document.body.insertAdjacentElement("beforeend",e[1]??Jm()),Rf++,()=>{Rf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Rf--}},[])}function Jm(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Tf="focusScope.autoFocusOnMount",_f="focusScope.autoFocusOnUnmount",qm={bubbles:!1,cancelable:!0},ak="FocusScope",Zv=w.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[a,u]=w.useState(null),l=en(s),d=en(o),g=w.useRef(null),h=Ft(t,m=>u(m)),A=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let m=function(x){if(A.paused||!a)return;const E=x.target;a.contains(E)?g.current=E:ds(g.current,{select:!0})},v=function(x){if(A.paused||!a)return;const E=x.relatedTarget;E!==null&&(a.contains(E)||ds(g.current,{select:!0}))},p=function(x){if(document.activeElement===document.body)for(const C of x)C.removedNodes.length>0&&ds(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const y=new MutationObserver(p);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,A.paused]),w.useEffect(()=>{if(a){e0.add(A);const m=document.activeElement;if(!a.contains(m)){const p=new CustomEvent(Tf,qm);a.addEventListener(Tf,l),a.dispatchEvent(p),p.defaultPrevented||(lk(hk(ex(a)),{select:!0}),document.activeElement===m&&ds(a))}return()=>{a.removeEventListener(Tf,l),setTimeout(()=>{const p=new CustomEvent(_f,qm);a.addEventListener(_f,d),a.dispatchEvent(p),p.defaultPrevented||ds(m??document.body,{select:!0}),a.removeEventListener(_f,d),e0.remove(A)},0)}}},[a,l,d,A]);const f=w.useCallback(m=>{if(!n&&!r||A.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,p=document.activeElement;if(v&&p){const y=m.currentTarget,[x,E]=ck(y);x&&E?!m.shiftKey&&p===E?(m.preventDefault(),n&&ds(x,{select:!0})):m.shiftKey&&p===x&&(m.preventDefault(),n&&ds(E,{select:!0})):p===y&&m.preventDefault()}},[n,r,A.paused]);return c.jsx(tt.div,{tabIndex:-1,...i,ref:h,onKeyDown:f})});Zv.displayName=ak;function lk(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ds(r,{select:t}),document.activeElement!==n)return}function ck(e){const t=ex(e),n=Zm(t,e),r=Zm(t.reverse(),e);return[n,r]}function ex(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Zm(e,t){for(const n of e)if(!uk(n,{upTo:t}))return n}function uk(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dk(e){return e instanceof HTMLInputElement&&"select"in e}function ds(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&dk(e)&&t&&e.select()}}var e0=fk();function fk(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=t0(e,t),e.unshift(t)},remove(t){var n;e=t0(e,t),(n=e[0])==null||n.resume()}}}function t0(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function hk(e){return e.filter(t=>t.tagName!=="A")}var On=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},gk=Pw[" useId ".trim().toString()]||(()=>{}),Ak=0;function pk(e){const[t,n]=w.useState(gk());return On(()=>{n(r=>r??String(Ak++))},[e]),e||(t?`radix-${t}`:"")}const mk=["top","right","bottom","left"],js=Math.min,dn=Math.max,wu=Math.round,nc=Math.floor,xr=e=>({x:e,y:e}),yk={left:"right",right:"left",bottom:"top",top:"bottom"},wk={start:"end",end:"start"};function hg(e,t,n){return dn(e,js(t,n))}function Jr(e,t){return typeof e=="function"?e(t):e}function qr(e){return e.split("-")[0]}function zi(e){return e.split("-")[1]}function KA(e){return e==="x"?"y":"x"}function $A(e){return e==="y"?"height":"width"}const vk=new Set(["top","bottom"]);function mr(e){return vk.has(qr(e))?"y":"x"}function VA(e){return KA(mr(e))}function xk(e,t,n){n===void 0&&(n=!1);const r=zi(e),s=VA(e),o=$A(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=vu(i)),[i,vu(i)]}function Ek(e){const t=vu(e);return[gg(e),t,gg(t)]}function gg(e){return e.replace(/start|end/g,t=>wk[t])}const n0=["left","right"],r0=["right","left"],Ck=["top","bottom"],bk=["bottom","top"];function Ik(e,t,n){switch(e){case"top":case"bottom":return n?t?r0:n0:t?n0:r0;case"left":case"right":return t?Ck:bk;default:return[]}}function Sk(e,t,n,r){const s=zi(e);let o=Ik(qr(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(gg)))),o}function vu(e){return e.replace(/left|right|bottom|top/g,t=>yk[t])}function Bk(e){return{top:0,right:0,bottom:0,left:0,...e}}function tx(e){return typeof e!="number"?Bk(e):{top:e,right:e,bottom:e,left:e}}function xu(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function s0(e,t,n){let{reference:r,floating:s}=e;const o=mr(t),i=VA(t),a=$A(i),u=qr(t),l=o==="y",d=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let A;switch(u){case"top":A={x:d,y:r.y-s.height};break;case"bottom":A={x:d,y:r.y+r.height};break;case"right":A={x:r.x+r.width,y:g};break;case"left":A={x:r.x-s.width,y:g};break;default:A={x:r.x,y:r.y}}switch(zi(t)){case"start":A[i]-=h*(n&&l?-1:1);break;case"end":A[i]+=h*(n&&l?-1:1);break}return A}const kk=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:g}=s0(l,r,u),h=r,A={},f=0;for(let m=0;m<a.length;m++){const{name:v,fn:p}=a[m],{x:y,y:x,data:E,reset:C}=await p({x:d,y:g,initialPlacement:r,placement:h,strategy:s,middlewareData:A,rects:l,platform:i,elements:{reference:e,floating:t}});d=y??d,g=x??g,A={...A,[v]:{...A[v],...E}},C&&f<=50&&(f++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(l=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:d,y:g}=s0(l,h,u)),m=-1)}return{x:d,y:g,placement:h,strategy:s,middlewareData:A}};async function al(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:h=!1,padding:A=0}=Jr(t,e),f=tx(A),v=a[h?g==="floating"?"reference":"floating":g],p=xu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:d,strategy:u})),y=g==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},C=xu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:x,strategy:u}):y);return{top:(p.top-C.top+f.top)/E.y,bottom:(C.bottom-p.bottom+f.bottom)/E.y,left:(p.left-C.left+f.left)/E.x,right:(C.right-p.right+f.right)/E.x}}const Rk=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:u}=t,{element:l,padding:d=0}=Jr(e,t)||{};if(l==null)return{};const g=tx(d),h={x:n,y:r},A=VA(s),f=$A(A),m=await i.getDimensions(l),v=A==="y",p=v?"top":"left",y=v?"bottom":"right",x=v?"clientHeight":"clientWidth",E=o.reference[f]+o.reference[A]-h[A]-o.floating[f],C=h[A]-o.reference[A],I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let b=I?I[x]:0;(!b||!await(i.isElement==null?void 0:i.isElement(I)))&&(b=a.floating[x]||o.floating[f]);const S=E/2-C/2,k=b/2-m[f]/2-1,R=js(g[p],k),B=js(g[y],k),M=R,T=b-m[f]-B,F=b/2-m[f]/2+S,H=hg(M,F,T),O=!u.arrow&&zi(s)!=null&&F!==H&&o.reference[f]/2-(F<M?R:B)-m[f]/2<0,X=O?F<M?F-M:F-T:0;return{[A]:h[A]+X,data:{[A]:H,centerOffset:F-H-X,...O&&{alignmentOffset:X}},reset:O}}}),Tk=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:h,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...v}=Jr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const p=qr(s),y=mr(a),x=qr(a)===a,E=await(u.isRTL==null?void 0:u.isRTL(l.floating)),C=h||(x||!m?[vu(a)]:Ek(a)),I=f!=="none";!h&&I&&C.push(...Sk(a,m,f,E));const b=[a,...C],S=await al(t,v),k=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&k.push(S[p]),g){const F=xk(s,i,E);k.push(S[F[0]],S[F[1]])}if(R=[...R,{placement:s,overflows:k}],!k.every(F=>F<=0)){var B,M;const F=(((B=o.flip)==null?void 0:B.index)||0)+1,H=b[F];if(H&&(!(g==="alignment"?y!==mr(H):!1)||R.every(N=>mr(N.placement)===y?N.overflows[0]>0:!0)))return{data:{index:F,overflows:R},reset:{placement:H}};let O=(M=R.filter(X=>X.overflows[0]<=0).sort((X,N)=>X.overflows[1]-N.overflows[1])[0])==null?void 0:M.placement;if(!O)switch(A){case"bestFit":{var T;const X=(T=R.filter(N=>{if(I){const D=mr(N.placement);return D===y||D==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(D=>D>0).reduce((D,V)=>D+V,0)]).sort((N,D)=>N[1]-D[1])[0])==null?void 0:T[0];X&&(O=X);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function o0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function i0(e){return mk.some(t=>e[t]>=0)}const _k=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Jr(e,t);switch(r){case"referenceHidden":{const o=await al(t,{...s,elementContext:"reference"}),i=o0(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:i0(i)}}}case"escaped":{const o=await al(t,{...s,altBoundary:!0}),i=o0(o,n.floating);return{data:{escapedOffsets:i,escaped:i0(i)}}}default:return{}}}}},nx=new Set(["left","top"]);async function Nk(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=qr(n),a=zi(n),u=mr(n)==="y",l=nx.has(i)?-1:1,d=o&&u?-1:1,g=Jr(t,e);let{mainAxis:h,crossAxis:A,alignmentAxis:f}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return a&&typeof f=="number"&&(A=a==="end"?f*-1:f),u?{x:A*d,y:h*l}:{x:h*l,y:A*d}}const Dk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,u=await Nk(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:o+u.y,data:{...u,placement:i}}}}},Pk=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:v=>{let{x:p,y}=v;return{x:p,y}}},...u}=Jr(e,t),l={x:n,y:r},d=await al(t,u),g=mr(qr(s)),h=KA(g);let A=l[h],f=l[g];if(o){const v=h==="y"?"top":"left",p=h==="y"?"bottom":"right",y=A+d[v],x=A-d[p];A=hg(y,A,x)}if(i){const v=g==="y"?"top":"left",p=g==="y"?"bottom":"right",y=f+d[v],x=f-d[p];f=hg(y,f,x)}const m=a.fn({...t,[h]:A,[g]:f});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:o,[g]:i}}}}}},Mk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Jr(e,t),d={x:n,y:r},g=mr(s),h=KA(g);let A=d[h],f=d[g];const m=Jr(a,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=h==="y"?"height":"width",E=o.reference[h]-o.floating[x]+v.mainAxis,C=o.reference[h]+o.reference[x]-v.mainAxis;A<E?A=E:A>C&&(A=C)}if(l){var p,y;const x=h==="y"?"width":"height",E=nx.has(qr(s)),C=o.reference[g]-o.floating[x]+(E&&((p=i.offset)==null?void 0:p[g])||0)+(E?0:v.crossAxis),I=o.reference[g]+o.reference[x]+(E?0:((y=i.offset)==null?void 0:y[g])||0)-(E?v.crossAxis:0);f<C?f=C:f>I&&(f=I)}return{[h]:A,[g]:f}}}},Qk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:u=()=>{},...l}=Jr(e,t),d=await al(t,l),g=qr(s),h=zi(s),A=mr(s)==="y",{width:f,height:m}=o.floating;let v,p;g==="top"||g==="bottom"?(v=g,p=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(p=g,v=h==="end"?"top":"bottom");const y=m-d.top-d.bottom,x=f-d.left-d.right,E=js(m-d[v],y),C=js(f-d[p],x),I=!t.middlewareData.shift;let b=E,S=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(S=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(b=y),I&&!h){const R=dn(d.left,0),B=dn(d.right,0),M=dn(d.top,0),T=dn(d.bottom,0);A?S=f-2*(R!==0||B!==0?R+B:dn(d.left,d.right)):b=m-2*(M!==0||T!==0?M+T:dn(d.top,d.bottom))}await u({...t,availableWidth:S,availableHeight:b});const k=await i.getDimensions(a.floating);return f!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function Bd(){return typeof window<"u"}function Gi(e){return rx(e)?(e.nodeName||"").toLowerCase():"#document"}function wn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sr(e){var t;return(t=(rx(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function rx(e){return Bd()?e instanceof Node||e instanceof wn(e).Node:!1}function nr(e){return Bd()?e instanceof Element||e instanceof wn(e).Element:!1}function Ir(e){return Bd()?e instanceof HTMLElement||e instanceof wn(e).HTMLElement:!1}function a0(e){return!Bd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof wn(e).ShadowRoot}const Fk=new Set(["inline","contents"]);function Rl(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=rr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Fk.has(s)}const jk=new Set(["table","td","th"]);function Lk(e){return jk.has(Gi(e))}const Ok=[":popover-open",":modal"];function kd(e){return Ok.some(t=>{try{return e.matches(t)}catch{return!1}})}const Uk=["transform","translate","scale","rotate","perspective"],Hk=["transform","translate","scale","rotate","perspective","filter"],zk=["paint","layout","strict","content"];function WA(e){const t=YA(),n=nr(e)?rr(e):e;return Uk.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Hk.some(r=>(n.willChange||"").includes(r))||zk.some(r=>(n.contain||"").includes(r))}function Gk(e){let t=Ls(e);for(;Ir(t)&&!Ti(t);){if(WA(t))return t;if(kd(t))return null;t=Ls(t)}return null}function YA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Kk=new Set(["html","body","#document"]);function Ti(e){return Kk.has(Gi(e))}function rr(e){return wn(e).getComputedStyle(e)}function Rd(e){return nr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ls(e){if(Gi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||a0(e)&&e.host||Sr(e);return a0(t)?t.host:t}function sx(e){const t=Ls(e);return Ti(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ir(t)&&Rl(t)?t:sx(t)}function ll(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=sx(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=wn(s);if(o){const a=Ag(i);return t.concat(i,i.visualViewport||[],Rl(s)?s:[],a&&n?ll(a):[])}return t.concat(s,ll(s,[],n))}function Ag(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ox(e){const t=rr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ir(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=wu(n)!==o||wu(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function XA(e){return nr(e)?e:e.contextElement}function wi(e){const t=XA(e);if(!Ir(t))return xr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=ox(t);let i=(o?wu(n.width):n.width)/r,a=(o?wu(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const $k=xr(0);function ix(e){const t=wn(e);return!YA()||!t.visualViewport?$k:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Vk(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==wn(e)?!1:t}function Co(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=XA(e);let i=xr(1);t&&(r?nr(r)&&(i=wi(r)):i=wi(e));const a=Vk(o,n,r)?ix(o):xr(0);let u=(s.left+a.x)/i.x,l=(s.top+a.y)/i.y,d=s.width/i.x,g=s.height/i.y;if(o){const h=wn(o),A=r&&nr(r)?wn(r):r;let f=h,m=Ag(f);for(;m&&r&&A!==f;){const v=wi(m),p=m.getBoundingClientRect(),y=rr(m),x=p.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,E=p.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;u*=v.x,l*=v.y,d*=v.x,g*=v.y,u+=x,l+=E,f=wn(m),m=Ag(f)}}return xu({width:d,height:g,x:u,y:l})}function Td(e,t){const n=Rd(e).scrollLeft;return t?t.left+n:Co(Sr(e)).left+n}function ax(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Td(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function Wk(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=Sr(r),a=t?kd(t.floating):!1;if(r===i||a&&o)return n;let u={scrollLeft:0,scrollTop:0},l=xr(1);const d=xr(0),g=Ir(r);if((g||!g&&!o)&&((Gi(r)!=="body"||Rl(i))&&(u=Rd(r)),Ir(r))){const A=Co(r);l=wi(r),d.x=A.x+r.clientLeft,d.y=A.y+r.clientTop}const h=i&&!g&&!o?ax(i,u):xr(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+d.x+h.x,y:n.y*l.y-u.scrollTop*l.y+d.y+h.y}}function Yk(e){return Array.from(e.getClientRects())}function Xk(e){const t=Sr(e),n=Rd(e),r=e.ownerDocument.body,s=dn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=dn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Td(e);const a=-n.scrollTop;return rr(r).direction==="rtl"&&(i+=dn(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}const l0=25;function Jk(e,t){const n=wn(e),r=Sr(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,u=0;if(s){o=s.width,i=s.height;const d=YA();(!d||d&&t==="fixed")&&(a=s.offsetLeft,u=s.offsetTop)}const l=Td(r);if(l<=0){const d=r.ownerDocument,g=d.body,h=getComputedStyle(g),A=d.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,f=Math.abs(r.clientWidth-g.clientWidth-A);f<=l0&&(o-=f)}else l<=l0&&(o+=l);return{width:o,height:i,x:a,y:u}}const qk=new Set(["absolute","fixed"]);function Zk(e,t){const n=Co(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Ir(e)?wi(e):xr(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,u=s*o.x,l=r*o.y;return{width:i,height:a,x:u,y:l}}function c0(e,t,n){let r;if(t==="viewport")r=Jk(e,n);else if(t==="document")r=Xk(Sr(e));else if(nr(t))r=Zk(t,n);else{const s=ix(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return xu(r)}function lx(e,t){const n=Ls(e);return n===t||!nr(n)||Ti(n)?!1:rr(n).position==="fixed"||lx(n,t)}function eR(e,t){const n=t.get(e);if(n)return n;let r=ll(e,[],!1).filter(a=>nr(a)&&Gi(a)!=="body"),s=null;const o=rr(e).position==="fixed";let i=o?Ls(e):e;for(;nr(i)&&!Ti(i);){const a=rr(i),u=WA(i);!u&&a.position==="fixed"&&(s=null),(o?!u&&!s:!u&&a.position==="static"&&!!s&&qk.has(s.position)||Rl(i)&&!u&&lx(e,i))?r=r.filter(d=>d!==i):s=a,i=Ls(i)}return t.set(e,r),r}function tR(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?kd(t)?[]:eR(t,this._c):[].concat(n),r],a=i[0],u=i.reduce((l,d)=>{const g=c0(t,d,s);return l.top=dn(g.top,l.top),l.right=js(g.right,l.right),l.bottom=js(g.bottom,l.bottom),l.left=dn(g.left,l.left),l},c0(t,a,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function nR(e){const{width:t,height:n}=ox(e);return{width:t,height:n}}function rR(e,t,n){const r=Ir(t),s=Sr(t),o=n==="fixed",i=Co(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const u=xr(0);function l(){u.x=Td(s)}if(r||!r&&!o)if((Gi(t)!=="body"||Rl(s))&&(a=Rd(t)),r){const A=Co(t,!0,o,t);u.x=A.x+t.clientLeft,u.y=A.y+t.clientTop}else s&&l();o&&!r&&s&&l();const d=s&&!r&&!o?ax(s,a):xr(0),g=i.left+a.scrollLeft-u.x-d.x,h=i.top+a.scrollTop-u.y-d.y;return{x:g,y:h,width:i.width,height:i.height}}function Nf(e){return rr(e).position==="static"}function u0(e,t){if(!Ir(e)||rr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Sr(e)===n&&(n=n.ownerDocument.body),n}function cx(e,t){const n=wn(e);if(kd(e))return n;if(!Ir(e)){let s=Ls(e);for(;s&&!Ti(s);){if(nr(s)&&!Nf(s))return s;s=Ls(s)}return n}let r=u0(e,t);for(;r&&Lk(r)&&Nf(r);)r=u0(r,t);return r&&Ti(r)&&Nf(r)&&!WA(r)?n:r||Gk(e)||n}const sR=async function(e){const t=this.getOffsetParent||cx,n=this.getDimensions,r=await n(e.floating);return{reference:rR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oR(e){return rr(e).direction==="rtl"}const iR={convertOffsetParentRelativeRectToViewportRelativeRect:Wk,getDocumentElement:Sr,getClippingRect:tR,getOffsetParent:cx,getElementRects:sR,getClientRects:Yk,getDimensions:nR,getScale:wi,isElement:nr,isRTL:oR};function ux(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function aR(e,t){let n=null,r;const s=Sr(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),o();const l=e.getBoundingClientRect(),{left:d,top:g,width:h,height:A}=l;if(a||t(),!h||!A)return;const f=nc(g),m=nc(s.clientWidth-(d+h)),v=nc(s.clientHeight-(g+A)),p=nc(d),x={rootMargin:-f+"px "+-m+"px "+-v+"px "+-p+"px",threshold:dn(0,js(1,u))||1};let E=!0;function C(I){const b=I[0].intersectionRatio;if(b!==u){if(!E)return i();b?i(!1,b):r=setTimeout(()=>{i(!1,1e-7)},1e3)}b===1&&!ux(l,e.getBoundingClientRect())&&i(),E=!1}try{n=new IntersectionObserver(C,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,x)}n.observe(e)}return i(!0),o}function lR(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=XA(e),d=s||o?[...l?ll(l):[],...ll(t)]:[];d.forEach(p=>{s&&p.addEventListener("scroll",n,{passive:!0}),o&&p.addEventListener("resize",n)});const g=l&&a?aR(l,n):null;let h=-1,A=null;i&&(A=new ResizeObserver(p=>{let[y]=p;y&&y.target===l&&A&&(A.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=A)==null||x.observe(t)})),n()}),l&&!u&&A.observe(l),A.observe(t));let f,m=u?Co(e):null;u&&v();function v(){const p=Co(e);m&&!ux(m,p)&&n(),m=p,f=requestAnimationFrame(v)}return n(),()=>{var p;d.forEach(y=>{s&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),g==null||g(),(p=A)==null||p.disconnect(),A=null,u&&cancelAnimationFrame(f)}}const cR=Dk,uR=Pk,dR=Tk,fR=Qk,hR=_k,d0=Rk,gR=Mk,AR=(e,t,n)=>{const r=new Map,s={platform:iR,...n},o={...s.platform,_c:r};return kk(e,t,{...s,platform:o})};var pR=typeof document<"u",mR=function(){},Lc=pR?w.useLayoutEffect:mR;function Eu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Eu(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Eu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function dx(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function f0(e,t){const n=dx(e);return Math.round(t*n)/n}function Df(e){const t=w.useRef(e);return Lc(()=>{t.current=e}),t}function yR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[d,g]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,A]=w.useState(r);Eu(h,r)||A(r);const[f,m]=w.useState(null),[v,p]=w.useState(null),y=w.useCallback(N=>{N!==I.current&&(I.current=N,m(N))},[]),x=w.useCallback(N=>{N!==b.current&&(b.current=N,p(N))},[]),E=o||f,C=i||v,I=w.useRef(null),b=w.useRef(null),S=w.useRef(d),k=u!=null,R=Df(u),B=Df(s),M=Df(l),T=w.useCallback(()=>{if(!I.current||!b.current)return;const N={placement:t,strategy:n,middleware:h};B.current&&(N.platform=B.current),AR(I.current,b.current,N).then(D=>{const V={...D,isPositioned:M.current!==!1};F.current&&!Eu(S.current,V)&&(S.current=V,Sd.flushSync(()=>{g(V)}))})},[h,t,n,B,M]);Lc(()=>{l===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,g(N=>({...N,isPositioned:!1})))},[l]);const F=w.useRef(!1);Lc(()=>(F.current=!0,()=>{F.current=!1}),[]),Lc(()=>{if(E&&(I.current=E),C&&(b.current=C),E&&C){if(R.current)return R.current(E,C,T);T()}},[E,C,T,R,k]);const H=w.useMemo(()=>({reference:I,floating:b,setReference:y,setFloating:x}),[y,x]),O=w.useMemo(()=>({reference:E,floating:C}),[E,C]),X=w.useMemo(()=>{const N={position:n,left:0,top:0};if(!O.floating)return N;const D=f0(O.floating,d.x),V=f0(O.floating,d.y);return a?{...N,transform:"translate("+D+"px, "+V+"px)",...dx(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:V}},[n,a,O.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:T,refs:H,elements:O,floatingStyles:X}),[d,T,H,O,X])}const wR=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?d0({element:r.current,padding:s}).fn(n):{}:r?d0({element:r,padding:s}).fn(n):{}}}},vR=(e,t)=>({...cR(e),options:[e,t]}),xR=(e,t)=>({...uR(e),options:[e,t]}),ER=(e,t)=>({...gR(e),options:[e,t]}),CR=(e,t)=>({...dR(e),options:[e,t]}),bR=(e,t)=>({...fR(e),options:[e,t]}),IR=(e,t)=>({...hR(e),options:[e,t]}),SR=(e,t)=>({...wR(e),options:[e,t]});var BR="Arrow",fx=w.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return c.jsx(tt.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});fx.displayName=BR;var kR=fx;function hx(e){const[t,n]=w.useState(void 0);return On(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const u=o.borderBoxSize,l=Array.isArray(u)?u[0]:u;i=l.inlineSize,a=l.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var JA="Popper",[gx,Ax]=Hi(JA),[RR,px]=gx(JA),mx=e=>{const{__scopePopper:t,children:n}=e,[r,s]=w.useState(null);return c.jsx(RR,{scope:t,anchor:r,onAnchorChange:s,children:n})};mx.displayName=JA;var yx="PopperAnchor",wx=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=px(yx,n),i=w.useRef(null),a=Ft(t,i),u=w.useRef(null);return w.useEffect(()=>{const l=u.current;u.current=(r==null?void 0:r.current)||i.current,l!==u.current&&o.onAnchorChange(u.current)}),r?null:c.jsx(tt.div,{...s,ref:a})});wx.displayName=yx;var qA="PopperContent",[TR,_R]=gx(qA),vx=w.forwardRef((e,t)=>{var L,z,$,ee,ce,se;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:u=!0,collisionBoundary:l=[],collisionPadding:d=0,sticky:g="partial",hideWhenDetached:h=!1,updatePositionStrategy:A="optimized",onPlaced:f,...m}=e,v=px(qA,n),[p,y]=w.useState(null),x=Ft(t,be=>y(be)),[E,C]=w.useState(null),I=hx(E),b=(I==null?void 0:I.width)??0,S=(I==null?void 0:I.height)??0,k=r+(o!=="center"?"-"+o:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},B=Array.isArray(l)?l:[l],M=B.length>0,T={padding:R,boundary:B.filter(DR),altBoundary:M},{refs:F,floatingStyles:H,placement:O,isPositioned:X,middlewareData:N}=yR({strategy:"fixed",placement:k,whileElementsMounted:(...be)=>lR(...be,{animationFrame:A==="always"}),elements:{reference:v.anchor},middleware:[vR({mainAxis:s+S,alignmentAxis:i}),u&&xR({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?ER():void 0,...T}),u&&CR({...T}),bR({...T,apply:({elements:be,rects:Ce,availableWidth:Be,availableHeight:ye})=>{const{width:Re,height:Qe}=Ce.reference,ne=be.floating.style;ne.setProperty("--radix-popper-available-width",`${Be}px`),ne.setProperty("--radix-popper-available-height",`${ye}px`),ne.setProperty("--radix-popper-anchor-width",`${Re}px`),ne.setProperty("--radix-popper-anchor-height",`${Qe}px`)}}),E&&SR({element:E,padding:a}),PR({arrowWidth:b,arrowHeight:S}),h&&IR({strategy:"referenceHidden",...T})]}),[D,V]=Cx(O),J=en(f);On(()=>{X&&(J==null||J())},[X,J]);const te=(L=N.arrow)==null?void 0:L.x,K=(z=N.arrow)==null?void 0:z.y,P=(($=N.arrow)==null?void 0:$.centerOffset)!==0,[j,U]=w.useState();return On(()=>{p&&U(window.getComputedStyle(p).zIndex)},[p]),c.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:X?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j,"--radix-popper-transform-origin":[(ee=N.transformOrigin)==null?void 0:ee.x,(ce=N.transformOrigin)==null?void 0:ce.y].join(" "),...((se=N.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(TR,{scope:n,placedSide:D,onArrowChange:C,arrowX:te,arrowY:K,shouldHideArrow:P,children:c.jsx(tt.div,{"data-side":D,"data-align":V,...m,ref:x,style:{...m.style,animation:X?void 0:"none"}})})})});vx.displayName=qA;var xx="PopperArrow",NR={top:"bottom",right:"left",bottom:"top",left:"right"},Ex=w.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=_R(xx,r),i=NR[o.placedSide];return c.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:c.jsx(kR,{...s,ref:n,style:{...s.style,display:"block"}})})});Ex.displayName=xx;function DR(e){return e!==null}var PR=e=>({name:"transformOrigin",options:e,fn(t){var v,p,y;const{placement:n,rects:r,middlewareData:s}=t,i=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=i?0:e.arrowWidth,u=i?0:e.arrowHeight,[l,d]=Cx(n),g={start:"0%",center:"50%",end:"100%"}[d],h=(((p=s.arrow)==null?void 0:p.x)??0)+a/2,A=(((y=s.arrow)==null?void 0:y.y)??0)+u/2;let f="",m="";return l==="bottom"?(f=i?g:`${h}px`,m=`${-u}px`):l==="top"?(f=i?g:`${h}px`,m=`${r.floating.height+u}px`):l==="right"?(f=`${-u}px`,m=i?g:`${A}px`):l==="left"&&(f=`${r.floating.width+u}px`,m=i?g:`${A}px`),{data:{x:f,y:m}}}});function Cx(e){const[t,n="center"]=e.split("-");return[t,n]}var MR=mx,bx=wx,QR=vx,FR=Ex,jR="Portal",Ix=w.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[s,o]=w.useState(!1);On(()=>o(!0),[]);const i=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?zS.createPortal(c.jsx(tt.div,{...r,ref:t}),i):null});Ix.displayName=jR;function LR(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var No=e=>{const{present:t,children:n}=e,r=OR(t),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),o=Ft(r.ref,UR(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:o}):null};No.displayName="Presence";function OR(e){const[t,n]=w.useState(),r=w.useRef(null),s=w.useRef(e),o=w.useRef("none"),i=e?"mounted":"unmounted",[a,u]=LR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const l=rc(r.current);o.current=a==="mounted"?l:"none"},[a]),On(()=>{const l=r.current,d=s.current;if(d!==e){const h=o.current,A=rc(l);e?u("MOUNT"):A==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(d&&h!==A?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),On(()=>{if(t){let l;const d=t.ownerDocument.defaultView??window,g=A=>{const m=rc(r.current).includes(CSS.escape(A.animationName));if(A.target===t&&m&&(u("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",l=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=A=>{A.target===t&&(o.current=rc(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",g),t.addEventListener("animationend",g),()=>{d.clearTimeout(l),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",g),t.removeEventListener("animationend",g)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function rc(e){return(e==null?void 0:e.animationName)||"none"}function UR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var HR=Pw[" useInsertionEffect ".trim().toString()]||On;function Sx({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,i]=zR({defaultProp:t,onChange:n}),a=e!==void 0,u=a?e:s;{const d=w.useRef(e!==void 0);w.useEffect(()=>{const g=d.current;g!==a&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const l=w.useCallback(d=>{var g;if(a){const h=GR(d)?d(e):d;h!==e&&((g=i.current)==null||g.call(i,h))}else o(d)},[a,e,o,i]);return[u,l]}function zR({defaultProp:e,onChange:t}){const[n,r]=w.useState(e),s=w.useRef(n),o=w.useRef(t);return HR(()=>{o.current=t},[t]),w.useEffect(()=>{var i;s.current!==n&&((i=o.current)==null||i.call(o,n),s.current=n)},[n,s]),[n,r,o]}function GR(e){return typeof e=="function"}var KR=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Fo=new WeakMap,sc=new WeakMap,oc={},Pf=0,Bx=function(e){return e&&(e.host||Bx(e.parentNode))},$R=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Bx(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},VR=function(e,t,n,r){var s=$R(t,Array.isArray(e)?e:[e]);oc[n]||(oc[n]=new WeakMap);var o=oc[n],i=[],a=new Set,u=new Set(s),l=function(g){!g||a.has(g)||(a.add(g),l(g.parentNode))};s.forEach(l);var d=function(g){!g||u.has(g)||Array.prototype.forEach.call(g.children,function(h){if(a.has(h))d(h);else try{var A=h.getAttribute(r),f=A!==null&&A!=="false",m=(Fo.get(h)||0)+1,v=(o.get(h)||0)+1;Fo.set(h,m),o.set(h,v),i.push(h),m===1&&f&&sc.set(h,!0),v===1&&h.setAttribute(n,"true"),f||h.setAttribute(r,"true")}catch(p){console.error("aria-hidden: cannot operate on ",h,p)}})};return d(t),a.clear(),Pf++,function(){i.forEach(function(g){var h=Fo.get(g)-1,A=o.get(g)-1;Fo.set(g,h),o.set(g,A),h||(sc.has(g)||g.removeAttribute(r),sc.delete(g)),A||g.removeAttribute(n)}),Pf--,Pf||(Fo=new WeakMap,Fo=new WeakMap,sc=new WeakMap,oc={})}},WR=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=KR(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),VR(r,s,n,"aria-hidden")):function(){return null}},gr=function(){return gr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},gr.apply(this,arguments)};function kx(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function YR(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Oc="right-scroll-bar-position",Uc="width-before-scroll-bar",XR="with-scroll-bars-hidden",JR="--removed-body-scroll-bar-size";function Mf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function qR(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var ZR=typeof window<"u"?w.useLayoutEffect:w.useEffect,h0=new WeakMap;function eT(e,t){var n=qR(null,function(r){return e.forEach(function(s){return Mf(s,r)})});return ZR(function(){var r=h0.get(n);if(r){var s=new Set(r),o=new Set(e),i=n.current;s.forEach(function(a){o.has(a)||Mf(a,null)}),o.forEach(function(a){s.has(a)||Mf(a,i)})}h0.set(n,e)},[e]),n}function tT(e){return e}function nT(e,t){t===void 0&&(t=tT);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(o),i=n}var u=function(){var d=i;i=[],d.forEach(o)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(d){i.push(d),l()},filter:function(d){return i=i.filter(d),n}}}};return s}function rT(e){e===void 0&&(e={});var t=nT(null);return t.options=gr({async:!0,ssr:!1},e),t}var Rx=function(e){var t=e.sideCar,n=kx(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,gr({},n))};Rx.isSideCarExport=!0;function sT(e,t){return e.useMedium(t),Rx}var Tx=rT(),Qf=function(){},_d=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:Qf,onWheelCapture:Qf,onTouchMoveCapture:Qf}),s=r[0],o=r[1],i=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,d=e.enabled,g=e.shards,h=e.sideCar,A=e.noRelative,f=e.noIsolation,m=e.inert,v=e.allowPinchZoom,p=e.as,y=p===void 0?"div":p,x=e.gapMode,E=kx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,I=eT([n,t]),b=gr(gr({},E),s);return w.createElement(w.Fragment,null,d&&w.createElement(C,{sideCar:Tx,removeScrollBar:l,shards:g,noRelative:A,noIsolation:f,inert:m,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:x}),i?w.cloneElement(w.Children.only(a),gr(gr({},b),{ref:I})):w.createElement(y,gr({},b,{className:u,ref:I}),a))});_d.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_d.classNames={fullWidth:Uc,zeroRight:Oc};var oT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iT(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=oT();return t&&e.setAttribute("nonce",t),e}function aT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function lT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var cT=function(){var e=0,t=null;return{add:function(n){e==0&&(t=iT())&&(aT(t,n),lT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},uT=function(){var e=cT();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},_x=function(){var e=uT(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},dT={left:0,top:0,right:0,gap:0},Ff=function(e){return parseInt(e||"",10)||0},fT=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Ff(n),Ff(r),Ff(s)]},hT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return dT;var t=fT(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},gT=_x(),vi="data-scroll-locked",AT=function(e,t,n,r){var s=e.left,o=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(XR,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(vi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Oc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Uc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Oc," .").concat(Oc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Uc," .").concat(Uc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(vi,`] {
    `).concat(JR,": ").concat(a,`px;
  }
`)},g0=function(){var e=parseInt(document.body.getAttribute(vi)||"0",10);return isFinite(e)?e:0},pT=function(){w.useEffect(function(){return document.body.setAttribute(vi,(g0()+1).toString()),function(){var e=g0()-1;e<=0?document.body.removeAttribute(vi):document.body.setAttribute(vi,e.toString())}},[])},mT=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;pT();var o=w.useMemo(function(){return hT(s)},[s]);return w.createElement(gT,{styles:AT(o,!t,s,n?"":"!important")})},pg=!1;if(typeof window<"u")try{var ic=Object.defineProperty({},"passive",{get:function(){return pg=!0,!0}});window.addEventListener("test",ic,ic),window.removeEventListener("test",ic,ic)}catch{pg=!1}var jo=pg?{passive:!1}:!1,yT=function(e){return e.tagName==="TEXTAREA"},Nx=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!yT(e)&&n[t]==="visible")},wT=function(e){return Nx(e,"overflowY")},vT=function(e){return Nx(e,"overflowX")},A0=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Dx(e,r);if(s){var o=Px(e,r),i=o[1],a=o[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},xT=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},ET=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Dx=function(e,t){return e==="v"?wT(t):vT(t)},Px=function(e,t){return e==="v"?xT(t):ET(t)},CT=function(e,t){return e==="h"&&t==="rtl"?-1:1},bT=function(e,t,n,r,s){var o=CT(e,window.getComputedStyle(t).direction),i=o*r,a=n.target,u=t.contains(a),l=!1,d=i>0,g=0,h=0;do{if(!a)break;var A=Px(e,a),f=A[0],m=A[1],v=A[2],p=m-v-o*f;(f||p)&&Dx(e,a)&&(g+=p,h+=f);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(d&&Math.abs(g)<1||!d&&Math.abs(h)<1)&&(l=!0),l},ac=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},p0=function(e){return[e.deltaX,e.deltaY]},m0=function(e){return e&&"current"in e?e.current:e},IT=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ST=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},BT=0,Lo=[];function kT(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(BT++)[0],o=w.useState(_x)[0],i=w.useRef(e);w.useEffect(function(){i.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=YR([e.lockRef.current],(e.shards||[]).map(m0),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=w.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var p=ac(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-p[0],E="deltaY"in m?m.deltaY:y[1]-p[1],C,I=m.target,b=Math.abs(x)>Math.abs(E)?"h":"v";if("touches"in m&&b==="h"&&I.type==="range")return!1;var S=A0(b,I);if(!S)return!0;if(S?C=b:(C=b==="v"?"h":"v",S=A0(b,I)),!S)return!1;if(!r.current&&"changedTouches"in m&&(x||E)&&(r.current=C),!C)return!0;var k=r.current||C;return bT(k,v,m,k==="h"?x:E)},[]),u=w.useCallback(function(m){var v=m;if(!(!Lo.length||Lo[Lo.length-1]!==o)){var p="deltaY"in v?p0(v):ac(v),y=t.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&IT(C.delta,p)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var x=(i.current.shards||[]).map(m0).filter(Boolean).filter(function(C){return C.contains(v.target)}),E=x.length>0?a(v,x[0]):!i.current.noIsolation;E&&v.cancelable&&v.preventDefault()}}},[]),l=w.useCallback(function(m,v,p,y){var x={name:m,delta:v,target:p,should:y,shadowParent:RT(p)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(E){return E!==x})},1)},[]),d=w.useCallback(function(m){n.current=ac(m),r.current=void 0},[]),g=w.useCallback(function(m){l(m.type,p0(m),m.target,a(m,e.lockRef.current))},[]),h=w.useCallback(function(m){l(m.type,ac(m),m.target,a(m,e.lockRef.current))},[]);w.useEffect(function(){return Lo.push(o),e.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:h}),document.addEventListener("wheel",u,jo),document.addEventListener("touchmove",u,jo),document.addEventListener("touchstart",d,jo),function(){Lo=Lo.filter(function(m){return m!==o}),document.removeEventListener("wheel",u,jo),document.removeEventListener("touchmove",u,jo),document.removeEventListener("touchstart",d,jo)}},[]);var A=e.removeScrollBar,f=e.inert;return w.createElement(w.Fragment,null,f?w.createElement(o,{styles:ST(s)}):null,A?w.createElement(mT,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function RT(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const TT=sT(Tx,kT);var Mx=w.forwardRef(function(e,t){return w.createElement(_d,gr({},e,{ref:t,sideCar:TT}))});Mx.classNames=_d.classNames;var Nd="Popover",[Qx,tQ]=Hi(Nd,[Ax]),Tl=Ax(),[_T,zs]=Qx(Nd),Fx=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,a=Tl(t),u=w.useRef(null),[l,d]=w.useState(!1),[g,h]=Sx({prop:r,defaultProp:s??!1,onChange:o,caller:Nd});return c.jsx(MR,{...a,children:c.jsx(_T,{scope:t,contentId:pk(),triggerRef:u,open:g,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(A=>!A),[h]),hasCustomAnchor:l,onCustomAnchorAdd:w.useCallback(()=>d(!0),[]),onCustomAnchorRemove:w.useCallback(()=>d(!1),[]),modal:i,children:n})})};Fx.displayName=Nd;var jx="PopoverAnchor",NT=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=zs(jx,n),o=Tl(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=s;return w.useEffect(()=>(i(),()=>a()),[i,a]),c.jsx(bx,{...o,...r,ref:t})});NT.displayName=jx;var Lx="PopoverTrigger",Ox=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=zs(Lx,n),o=Tl(n),i=Ft(t,s.triggerRef),a=c.jsx(tt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Kx(s.open),...r,ref:i,onClick:Mt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:c.jsx(bx,{asChild:!0,...o,children:a})});Ox.displayName=Lx;var ZA="PopoverPortal",[DT,PT]=Qx(ZA,{forceMount:void 0}),Ux=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=zs(ZA,t);return c.jsx(DT,{scope:t,forceMount:n,children:c.jsx(No,{present:n||o.open,children:c.jsx(Ix,{asChild:!0,container:s,children:r})})})};Ux.displayName=ZA;var _i="PopoverContent",Hx=w.forwardRef((e,t)=>{const n=PT(_i,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,o=zs(_i,e.__scopePopover);return c.jsx(No,{present:r||o.open,children:o.modal?c.jsx(QT,{...s,ref:t}):c.jsx(FT,{...s,ref:t})})});Hx.displayName=_i;var MT=GA("PopoverContent.RemoveScroll"),QT=w.forwardRef((e,t)=>{const n=zs(_i,e.__scopePopover),r=w.useRef(null),s=Ft(t,r),o=w.useRef(!1);return w.useEffect(()=>{const i=r.current;if(i)return WR(i)},[]),c.jsx(Mx,{as:MT,allowPinchZoom:!0,children:c.jsx(zx,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Mt(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,u=a.button===0&&a.ctrlKey===!0,l=a.button===2||u;o.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:Mt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),FT=w.forwardRef((e,t)=>{const n=zs(_i,e.__scopePopover),r=w.useRef(!1),s=w.useRef(!1);return c.jsx(zx,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var u,l;(u=e.onInteractOutside)==null||u.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((l=n.triggerRef.current)==null?void 0:l.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),zx=w.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:l,onInteractOutside:d,...g}=e,h=zs(_i,n),A=Tl(n);return ik(),c.jsx(Zv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:c.jsx(Jv,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:l,onDismiss:()=>h.onOpenChange(!1),children:c.jsx(QR,{"data-state":Kx(h.open),role:"dialog",id:h.contentId,...A,...g,ref:t,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Gx="PopoverClose",jT=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=zs(Gx,n);return c.jsx(tt.button,{type:"button",...r,ref:t,onClick:Mt(e.onClick,()=>s.onOpenChange(!1))})});jT.displayName=Gx;var LT="PopoverArrow",OT=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Tl(n);return c.jsx(FR,{...s,...r,ref:t})});OT.displayName=LT;function Kx(e){return e?"open":"closed"}var UT=Fx,HT=Ox,zT=Ux,$x=Hx;const GT=UT,KT=HT,Vx=w.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>c.jsx(zT,{children:c.jsx($x,{ref:s,align:t,sideOffset:n,className:oe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Vx.displayName=$x.displayName;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wx=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},u)=>w.createElement("svg",{ref:u,...VT,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Wx("lucide",s),...a},[...i.map(([l,d])=>w.createElement(l,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,t)=>{const n=w.forwardRef(({className:r,...s},o)=>w.createElement(WT,{ref:o,iconNode:t,className:Wx(`lucide-${$T(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=xe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=xe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=xe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=xe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=xe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=xe("MonitorOff",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=xe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=xe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=xe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=xe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=xe("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=xe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=xe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=xe("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=xe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=xe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var eE=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(eE||{}),tE=(e=>(e.AUTHENTICATION="authentication",e.AUTHORIZATION="authorization",e.VALIDATION="validation",e.CRYPTOGRAPHY="cryptography",e.NETWORK="network",e.STORAGE="storage",e.P2P="p2p",e.SYSTEM="system",e))(tE||{});const no=class no{constructor(){Z(this,"errors",[]);Z(this,"MAX_ERROR_HISTORY",1e3);Z(this,"isDevelopment",!1)}static getInstance(){return no.instance||(no.instance=new no),no.instance}handleError(t,n,r,s){const o=this.generateErrorId(),i=Date.now(),a=t instanceof Error?t.message:t,u=this.generateUserSafeMessage(n,r),l={id:o,category:n,severity:r,userMessage:u,internalMessage:a,timestamp:i,context:this.sanitizeContext(s)};return this.errors.push(l),this.errors.length>this.MAX_ERROR_HISTORY&&this.errors.shift(),this.logError(l,t),r==="critical"&&this.handleCriticalError(l),l}generateUserSafeMessage(t,n){var s;return((s={authentication:{low:"Authentication issue occurred",medium:"Authentication failed",high:"Authentication error - please try again",critical:"Authentication system unavailable"},authorization:{low:"Access denied",medium:"Insufficient permissions",high:"Authorization failed",critical:"Security violation detected"},validation:{low:"Invalid input provided",medium:"Data validation failed",high:"Invalid request format",critical:"Malformed request detected"},cryptography:{low:"Encryption issue",medium:"Cryptographic operation failed",high:"Security operation failed",critical:"Critical security error"},network:{low:"Network issue",medium:"Connection problem",high:"Network error",critical:"Network unavailable"},storage:{low:"Storage issue",medium:"Data storage failed",high:"Storage error",critical:"Storage system unavailable"},p2p:{low:"P2P connection issue",medium:"Peer connection failed",high:"P2P network error",critical:"P2P system unavailable"},system:{low:"System issue",medium:"System error occurred",high:"System malfunction",critical:"System failure"}}[t])==null?void 0:s[n])||"An error occurred"}sanitizeContext(t){if(!t)return;const n=["password","passphrase","key","secret","token","auth","private","seed","mnemonic","signature","hash"],r={};for(const[s,o]of Object.entries(t)){const i=s.toLowerCase();n.some(u=>i.includes(u))?r[s]="[REDACTED]":typeof o=="string"&&o.length>100?r[s]=o.substring(0,100)+"...[TRUNCATED]":typeof o=="object"&&o!==null?r[s]="[OBJECT]":r[s]=o}return r}logError(t,n){const r={id:t.id,category:t.category,severity:t.severity,timestamp:new Date(t.timestamp).toISOString(),context:t.context};this.isDevelopment?console.error("[SecureErrorHandler]",{...r,internalMessage:t.internalMessage,stack:n instanceof Error?n.stack:void 0}):(console.error("[SecureErrorHandler]",r),(t.severity==="critical"||t.severity==="high")&&console.error("[SecureErrorHandler-Internal]",{id:t.id,message:t.internalMessage}))}handleCriticalError(t){console.error("[CRITICAL ERROR]",{id:t.id,category:t.category,timestamp:new Date(t.timestamp).toISOString()})}generateErrorId(){const t=Date.now().toString(36),n=crypto.getRandomValues(new Uint8Array(4)),r=Array.from(n,s=>s.toString(36)).join("");return`err_${t}_${r}`}getMetrics(){const n=Date.now()-1440*60*1e3,r=this.errors.filter(i=>i.timestamp>n),s=Object.values(tE).reduce((i,a)=>(i[a]=r.filter(u=>u.category===a).length,i),{}),o=Object.values(eE).reduce((i,a)=>(i[a]=r.filter(u=>u.severity===a).length,i),{});return{totalErrors:r.length,errorsByCategory:s,errorsBySeverity:o,recentErrors:r.slice(-10)}}clearHistory(){this.errors=[]}};Z(no,"instance");let yg=no;const nE=yg.getInstance();function jf(e,t){return nE.handleError(e,"network","medium",t)}function h_(e,t){return nE.handleError(e,"system","critical",t)}let x0=null,Oo=null;const g_=async()=>typeof window<"u"&&window.electronAPI?(console.log("[TOR] Electron environment - using main process for Tor operations"),!0):(console.log("[TOR] Browser environment - Tor modules not available"),!1);class A_{constructor(t){Z(this,"config");Z(this,"socksAgent",null);Z(this,"circuitRotationTimer",null);Z(this,"stats");Z(this,"isInitialized",!1);Z(this,"connectionCallbacks",new Set);this.config={enabled:!1,socksPort:9050,controlPort:9051,host:"127.0.0.1",circuitRotationInterval:10,maxRetries:3,connectionTimeout:3e4,...t},this.stats={isConnected:!1,circuitCount:0,lastCircuitRotation:0,connectionAttempts:0,failedConnections:0,bytesTransmitted:0,bytesReceived:0}}async initialize(){if(!this.config.enabled)return console.log("[TOR] Tor networking is disabled"),!1;if(typeof window<"u"&&!window.electronAPI)return console.warn("[TOR] Tor networking requires Electron environment"),!1;console.log("[TOR] Initializing Tor network connection...");try{if(typeof window<"u"&&window.electronAPI)return console.log("[TOR] Using Electron main process for Tor operations"),this.stats.isConnected=!0,this.isInitialized=!0,console.log("[TOR] Successfully connected to Tor network via Electron"),this.notifyConnectionCallbacks(!0),!0;if(await g_(),!x0||!Oo)throw new Error("Failed to load Tor modules");const t=`socks5://${this.config.host}:${this.config.socksPort}`;if(this.socksAgent=new x0(t),await this.testTorConnection())return this.stats.isConnected=!0,this.isInitialized=!0,this.startCircuitRotation(),Oo.setTorAddress(this.config.host,this.config.socksPort),console.log("[TOR] Successfully connected to Tor network"),this.notifyConnectionCallbacks(!0),!0;throw new Error("Failed to establish Tor connection")}catch(t){return console.error("[TOR] Failed to initialize Tor connection:",t),this.stats.failedConnections++,jf(t,{context:"tor_initialization"}),this.notifyConnectionCallbacks(!1),!1}}async testTorConnection(){return new Promise(t=>{this.stats.connectionAttempts++;const n=setTimeout(()=>{console.error("[TOR] Connection test timed out"),t(!1)},this.config.connectionTimeout);Oo.get("https://check.torproject.org/api/ip",(r,s,o)=>{if(clearTimeout(n),r){console.error("[TOR] Connection test failed:",r),t(!1);return}try{const i=JSON.parse(o);i.IsTor?(console.log("[TOR] Connection verified - using Tor exit node:",i.IP),t(!0)):(console.error("[TOR] Connection test failed - not using Tor network"),t(!1))}catch(i){console.error("[TOR] Failed to parse connection test response:",i),t(!1)}})})}createTorWebSocket(t){if(!this.isInitialized||!this.socksAgent)return console.error("[TOR] Cannot create WebSocket - Tor not initialized"),null;try{if(typeof window<"u")return console.warn("[TOR] Browser WebSocket through Tor requires browser extension or proxy setup"),new WebSocket(t);const n=require("ws");return new n(t,{agent:this.socksAgent})}catch(n){return console.error("[TOR] Failed to create Tor WebSocket:",n),jf(n,{context:"tor_websocket_creation"}),null}}async makeRequest(t){if(!this.isInitialized)throw new Error("Tor network not initialized");return new Promise((n,r)=>{const s={url:t.url,method:t.method||"GET",headers:t.headers||{},body:t.body,timeout:t.timeout||this.config.connectionTimeout};Oo(s,(o,i,a)=>{if(o){this.stats.failedConnections++,r(o);return}a&&(this.stats.bytesReceived+=a.length),t.body&&(this.stats.bytesTransmitted+=t.body.length),n({response:i,body:a})})})}async rotateCircuit(){if(!this.isInitialized)return console.error("[TOR] Cannot rotate circuit - Tor not initialized"),!1;try{if(console.log("[TOR] Rotating Tor circuit..."),typeof window<"u"&&window.electronAPI){console.log("[TOR] ===== INITIATING CIRCUIT ROTATION ====="),console.log("[TOR] Using Electron API for circuit rotation");const t=await window.electronAPI.rotateTorCircuit();return console.log("[TOR] ===== CIRCUIT ROTATION RESULT ====="),console.log("[TOR] Full result:",t),t&&t.success?(this.stats.circuitCount++,this.stats.lastCircuitRotation=Date.now(),console.log("[TOR] Circuit rotated successfully via Electron"),console.log("[TOR] Rotation details:"),console.log("[TOR]   - Method Used:",t.method),console.log("[TOR]   - Before IP:",t.beforeIP),console.log("[TOR]   - After IP:",t.afterIP),console.log("[TOR]   - IP Changed:",t.ipChanged),console.log("[TOR]   - Circuit Changed:",t.circuitChanged),console.log("[TOR]   - Message:",t.message),console.log("[TOR]   - Total rotations:",this.stats.circuitCount),console.log("[TOR] CIRCUIT PATH DETAILS:"),console.log("[TOR]   Before Circuit:",t.beforeCircuit),console.log("[TOR]   After Circuit:",t.afterCircuit),t.circuitChanged?console.log("[TOR] CIRCUIT PATH CHANGED - Real rotation confirmed!"):t.ipChanged||(console.log("[TOR] Note: Same IP doesn't mean rotation failed!"),console.log("[TOR]   - Circuit path likely changed internally"),console.log("[TOR]   - Tor may reuse efficient exit nodes"),console.log("[TOR]   - Anonymity is still enhanced")),!0):(console.error("[TOR] Failed to rotate circuit via Electron"),console.error("[TOR] Error details:",t==null?void 0:t.error),!1)}return Oo&&Oo.newTorSession,console.error("[TOR] No Tor request module available for circuit rotation"),!1}catch(t){return console.error("[TOR] Circuit rotation failed:",t),jf(t,{context:"tor_circuit_rotation"}),!1}}startCircuitRotation(){this.circuitRotationTimer&&clearInterval(this.circuitRotationTimer);const t=this.config.circuitRotationInterval*60*1e3;this.circuitRotationTimer=setInterval(async()=>{await this.rotateCircuit()},t),console.log(`[TOR] Circuit rotation scheduled every ${this.config.circuitRotationInterval} minutes`)}stopCircuitRotation(){this.circuitRotationTimer&&(clearInterval(this.circuitRotationTimer),this.circuitRotationTimer=null)}getSocksAgent(){return this.socksAgent}getStats(){return{...this.stats}}isConnected(){return this.config.enabled&&this.stats.isConnected}isSupported(){return typeof window<"u"&&!!window.electronAPI}onConnectionChange(t){this.connectionCallbacks.add(t)}offConnectionChange(t){this.connectionCallbacks.delete(t)}notifyConnectionCallbacks(t){this.connectionCallbacks.forEach(n=>{try{n(t)}catch(r){console.error("[TOR] Error in connection callback:",r)}})}updateConfig(t){this.config={...this.config,...t},this.isInitialized&&t.circuitRotationInterval&&this.startCircuitRotation()}async shutdown(){console.log("[TOR] Shutting down Tor network connection..."),this.stopCircuitRotation(),this.stats.isConnected=!1,this.isInitialized=!1,this.socksAgent=null,this.notifyConnectionCallbacks(!1),console.log("[TOR] Tor network connection shut down")}}const Dt=new A_;function rE(){const[e,t]=w.useState({isConnected:!1,circuitCount:0,lastCircuitRotation:0,connectionAttempts:0,failedConnections:0,bytesTransmitted:0,bytesReceived:0}),[n,r]=w.useState(!1);w.useEffect(()=>{const i=()=>{t(Dt.getStats())};i();const a=setInterval(i,3e3);return()=>clearInterval(a)},[]),w.useEffect(()=>{const i=()=>{t(Dt.getStats())};return Dt.onConnectionChange(i),()=>Dt.offConnectionChange(i)},[]);const s=async()=>{r(!0),await Dt.rotateCircuit(),r(!1)},o=i=>{if(i===0)return"Never";const u=Date.now()-i,l=Math.floor(u/6e4);return l<1?"Just now":l<60?`${l}m ago`:`${Math.floor(l/60)}h ago`};return!Dt.isSupported()||!Dt.isConnected()?null:c.jsxs(GT,{children:[c.jsx(KT,{asChild:!0,children:c.jsx(he,{variant:"ghost",size:"sm",className:"h-8 px-2",children:c.jsxs(yu,{variant:e.isConnected?"default":"secondary",className:`flex items-center gap-1 ${e.isConnected?"bg-green-600 hover:bg-green-700":"bg-gray-600"}`,children:[c.jsx(Bu,{className:"h-3 w-3"}),c.jsx("span",{className:"hidden sm:inline",children:"Tor"})]})})}),c.jsx(Vx,{className:"w-80",align:"end",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Bu,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"font-semibold",children:"Tor Network"})]}),c.jsx(yu,{variant:e.isConnected?"default":"secondary",className:e.isConnected?"bg-green-600":"",children:e.isConnected?"Connected":"Disconnected"})]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Your connection is being routed through the Tor network for enhanced anonymity."}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Circuit Rotations"}),c.jsx("div",{className:"text-muted-foreground",children:e.circuitCount})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Last Rotation"}),c.jsx("div",{className:"text-muted-foreground",children:o(e.lastCircuitRotation)})]})]}),e.isConnected&&c.jsxs(he,{onClick:s,disabled:n,size:"sm",variant:"outline",className:"w-full flex items-center gap-2",children:[c.jsx(qx,{className:`h-4 w-4 ${n?"animate-spin":""}`}),n?"Rotating...":"Rotate Circuit"]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(Yx,{className:"h-3 w-3"}),c.jsx("span",{children:"Your IP address and location are hidden"})]})]})})]})}function p_(){return typeof window<"u"&&window.electronAPI?null:c.jsxs(pu,{className:"border-blue-200 bg-blue-50",children:[c.jsx(Bu,{className:"h-4 w-4 text-blue-600"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(mu,{className:"flex-1",children:[c.jsx("strong",{className:"text-blue-800",children:"Enhanced Privacy Available"}),c.jsx("br",{}),c.jsx("span",{className:"text-blue-700",children:"For automatic Tor network setup and maximum anonymity, download our desktop application. The web version provides end-to-end encryption but not network-level anonymity."})]}),c.jsxs("div",{className:"flex gap-2 ml-4",children:[c.jsxs(he,{variant:"outline",size:"sm",onClick:()=>window.open("https://www.torproject.org/","_blank"),className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:[c.jsx(ZT,{className:"h-3 w-3 mr-1"}),"Tor Browser"]}),c.jsxs(he,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{console.log("Download desktop app")},children:[c.jsx(bu,{className:"h-3 w-3 mr-1"}),"Desktop App"]})]})]})]})}const Fn=w.forwardRef(({className:e,type:t,...n},r)=>c.jsx("input",{type:t,className:oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Fn.displayName="Input";var m_="Label",sE=w.forwardRef((e,t)=>c.jsx(tt.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));sE.displayName=m_;var oE=sE;const y_=zA("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Le=w.forwardRef(({className:e,...t},n)=>c.jsx(oE,{ref:n,className:oe(y_(),e),...t}));Le.displayName=oE.displayName;function w_({onSubmit:e,disabled:t,authStatus:n,error:r,hasServerTrustRequest:s}){const[o,i]=w.useState(""),[a,u]=w.useState(""),[l,d]=w.useState(!1),g=o.trim().length>=3&&a.length>0,h=async A=>{if(A.preventDefault(),t||l||!g)return;const f=o.trim();if(!/^[a-zA-Z0-9_-]+$/.test(f)){console.error("Invalid username format");return}if(f.length<3||f.length>32){console.error("Username must be 3-32 characters");return}if(a.length<1||a.length>1e3){console.error("Invalid password length");return}d(!0);try{await e(f,a)}finally{d(!1)}};return c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"username",children:"Username"}),c.jsx(Fn,{id:"username",placeholder:"Enter your username",value:o,onChange:A=>i(A.target.value),disabled:t||l,required:!0,minLength:3})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"password",children:"Password"}),c.jsx(Fn,{id:"password",type:"password",placeholder:"Enter your password",value:a,onChange:A=>u(A.target.value),disabled:t||l,required:!0})]}),s&&!l&&c.jsx("p",{className:"text-amber-600 text-sm text-center",children:"Please verify the server identity before logging in"}),c.jsx(he,{type:"submit",className:"w-full",disabled:t||l||!g,children:l?n||"Logging In...":"Login to Account"})]})}function v_({onSubmit:e,disabled:t,authStatus:n,error:r,hasServerTrustRequest:s}){const[o,i]=w.useState(""),[a,u]=w.useState(""),[l,d]=w.useState(""),[g,h]=w.useState(!1),A=o.trim().length>=3,f=a.length>0,m=a===l,v=A&&f&&m,p=async y=>{if(y.preventDefault(),t||g||!v)return;const x=o.trim();if(!/^[a-zA-Z0-9_-]+$/.test(x)){console.error("Username can only contain letters, numbers, underscores, and hyphens");return}if(x.length<3||x.length>32){console.error("Username must be 3-32 characters");return}if(a.length>1e3){console.error("Password too long");return}h(!0);try{await e(x,a)}finally{h(!1)}};return c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"username",children:"Username"}),c.jsx(Fn,{id:"username",placeholder:"Choose your username",value:o,onChange:y=>i(y.target.value),disabled:t||g,required:!0,minLength:3})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"password",children:"Create Password"}),c.jsx(Fn,{id:"password",type:"password",placeholder:"Choose a password",value:a,onChange:y=>u(y.target.value),disabled:t||g,required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"confirmPassword",children:"Confirm Password"}),c.jsx(Fn,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:l,onChange:y=>d(y.target.value),disabled:t||g,required:!0}),!m&&l.length>0&&c.jsx("p",{className:"text-red-500 text-xs",children:"Passwords do not match"})]}),s&&!g&&c.jsx("p",{className:"text-amber-600 text-sm text-center",children:"Please verify the server identity before registering"}),c.jsx(he,{type:"submit",className:"w-full",disabled:t||g||!v,children:g?n||"Registering...":"Register Account"})]})}function x_({label:e,value:t,confirmValue:n,onChange:r,onConfirmChange:s,required:o=!1,minLength:i=0,strengthCheck:a=!1,warningMessage:u,disabled:l=!1}){const d=t.length>=i,g=t&&n&&t!==n;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:`${e}-main`,children:e}),c.jsx(Fn,{id:`${e}-main`,type:"password",placeholder:`Enter ${e.toLowerCase()}`,value:t,onChange:h=>r(h.target.value),required:o,minLength:i,disabled:l}),a&&!d&&t.length>0&&c.jsxs("p",{className:"text-xs text-red-500",children:[e," should be at least ",i," characters long."]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Le,{htmlFor:`${e}-confirm`,children:["Confirm ",e]}),c.jsx(Fn,{id:`${e}-confirm`,type:"password",placeholder:`Confirm ${e.toLowerCase()}`,value:n,onChange:h=>s(h.target.value),required:o,minLength:i,disabled:l}),g&&c.jsxs("p",{className:"text-xs text-red-500",children:[e,"s do not match"]}),u&&c.jsx("p",{className:"text-xs text-yellow-600",children:u})]})]})}function E_({mode:e,onSubmit:t,disabled:n,authStatus:r}){const[s,o]=w.useState(""),[i,a]=w.useState(""),[u,l]=w.useState(!1),d=s.length>=12,g=s===i,h=async A=>{if(A.preventDefault(),u)return;const f=s.trim();if(f){if(f.length<12){console.error("Passphrase must be at least 12 characters");return}if(f.length>1e3){console.error("Passphrase too long");return}if(!(e==="register"&&!g)&&d){l(!0);try{await t(f)}finally{l(!1)}}}};return c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e==="register"?c.jsx(x_,{label:"Secure Encryption Passphrase",value:s,confirmValue:i,onChange:o,onConfirmChange:a,required:!0,minLength:12,strengthCheck:!0,warningMessage:c.jsxs(c.Fragment,{children:["This passphrase encrypts all your account data. If you forget it,"," ",c.jsx("strong",{children:"you will lose access"})," to all your messages and files."]}),disabled:n||u}):c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"passphrase",children:"Secure Encryption Passphrase"}),c.jsx(Fn,{id:"passphrase",type:"password",placeholder:"Enter your encryption passphrase",value:s,onChange:A=>o(A.target.value),disabled:n||u,required:!0})]}),c.jsx(he,{type:"submit",className:"w-full",disabled:n||u||!s.trim()||e==="register"&&!g||!d,children:u?r||"Submitting Passphrase...":"Submit Passphrase"})]})}function C_({serverPassword:e,setServerPassword:t,disabled:n,authStatus:r,onSubmit:s}){return c.jsxs("form",{onSubmit:s,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"serverPassword",children:"Server Password"}),c.jsx(Fn,{id:"serverPassword",type:"password",placeholder:"Enter server password",value:e,onChange:o=>t(o.target.value),disabled:n,required:!0})]}),c.jsx(he,{type:"submit",className:"w-full",disabled:n,children:n?r||"Submitting...":"Submit Server Password"})]})}function b_({onAccountSubmit:e,onServerPasswordSubmit:t,isGeneratingKeys:n,authStatus:r,error:s,onPassphraseSubmit:o,accountAuthenticated:i,showPassphrasePrompt:a,serverTrustRequest:u,onAcceptServerTrust:l,onRejectServerTrust:d}){var E,C;const[g,h]=w.useState(""),[A,f]=w.useState(!1),[m,v]=w.useState("login"),p=async(I,b)=>{f(!0);try{await e(m,I,b)}catch(S){console.error("Account Login/Register failed",S)}finally{f(!1)}},y=async I=>{f(!0);try{await(o==null?void 0:o(I,m))}catch(b){console.error("Passphrase submission failed",b)}finally{f(!1)}},x=async I=>{if(I.preventDefault(),!(!g.trim()||A||n||!t)){f(!0);try{await t(g)}catch(b){console.error("Server password submission failed",b)}finally{f(!1)}}};return c.jsxs("div",{className:"w-full max-w-md mx-auto",children:[c.jsxs(Zt,{className:"w-full",children:[c.jsx(hn,{className:"space-y-4",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[c.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:c.jsx(LB,{className:"h-8 w-8 text-primary"})}),c.jsx(gn,{className:"text-2xl text-center",children:"end2end"}),c.jsx(Dn,{className:"text-center",children:"End-to-end encrypted messaging using X25519 + Kyber768 hybrid encryption and AES-GCM"})]}),c.jsx(rE,{})]})}),c.jsxs(An,{className:"space-y-6",children:[u&&c.jsxs("div",{className:"p-3 border rounded-md bg-amber-50 border-amber-200",children:[c.jsx("div",{className:"font-semibold mb-2",children:"Server identity changed"}),c.jsx("div",{className:"text-sm mb-2",children:"Verify the new server keys below before trusting."}),c.jsxs("div",{className:"text-xs font-mono break-all",children:[c.jsxs("div",{className:"mb-1",children:[c.jsx("span",{className:"font-semibold",children:"Old X25519:"})," ",(((E=u.pinned)==null?void 0:E.x25519PublicBase64)||"").slice(0,44),"..."]}),c.jsxs("div",{className:"mb-2",children:[c.jsx("span",{className:"font-semibold",children:"Old Kyber:"})," ",(((C=u.pinned)==null?void 0:C.kyberPublicBase64)||"").slice(0,44),"..."]}),c.jsxs("div",{className:"mb-1",children:[c.jsx("span",{className:"font-semibold",children:"New X25519:"})," ",u.newKeys.x25519PublicBase64.slice(0,44),"..."]}),c.jsxs("div",{className:"mb-3",children:[c.jsx("span",{className:"font-semibold",children:"New Kyber:"})," ",u.newKeys.kyberPublicBase64.slice(0,44),"..."]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-md bg-primary text-white",onClick:l,disabled:A||n,children:"Trust new server"}),c.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-md border",onClick:d,disabled:A||n,children:"Cancel"})]})]}),a?c.jsx(E_,{mode:m,onSubmit:y,disabled:A||n,authStatus:r}):i?c.jsx(C_,{serverPassword:g,setServerPassword:h,disabled:A||n,authStatus:r,onSubmit:x}):m==="register"?c.jsx(v_,{onSubmit:p,disabled:A||n||!!u,authStatus:r,error:s,hasServerTrustRequest:!!u}):c.jsx(w_,{onSubmit:p,disabled:A||n||!!u,authStatus:r,error:s,hasServerTrustRequest:!!u}),s&&c.jsx(pu,{variant:"destructive",children:c.jsx(mu,{children:s})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[c.jsx(OB,{className:"h-3 w-3"}),c.jsx("span",{children:"Your messages are secured with end-to-end encryption"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[c.jsx(_B,{className:"h-3 w-3"}),c.jsx("span",{children:"Only the intended recipients can read your messages"})]})]})]}),c.jsx(Kv,{className:"flex flex-col gap-2",children:!i&&!a&&c.jsx("div",{className:"text-sm text-center text-muted-foreground",children:m==="login"?c.jsxs(c.Fragment,{children:["Dont have an account?"," ",c.jsx("button",{type:"button",className:"text-primary underline",onClick:()=>v("register"),children:"Register"})]}):c.jsxs(c.Fragment,{children:["Already have an account?"," ",c.jsx("button",{type:"button",className:"text-primary underline",onClick:()=>v("login"),children:"Login"})]})})})]}),c.jsx("div",{className:"mt-4",children:c.jsx(p_,{})})]})}function I_({className:e,children:t,currentUsername:n,onAddConversation:r,onLogout:s,onActiveTabChange:o,settingsContent:i}){const[a,u]=w.useState("messages"),[l,d]=w.useState(!1),[g,h]=w.useState(""),[A,f]=w.useState(!1),[m,v]=w.useState(""),p=async()=>{const x=g.trim();if(!(!x||x===n)){f(!0),v("");try{await(r==null?void 0:r(x)),h(""),d(!1),u("messages"),o==null||o("messages")}catch(E){console.error("[UserList] Failed to add conversation:",E),v(E instanceof Error?E.message:"Failed to add user")}finally{f(!1)}}},y=x=>{x.key==="Enter"&&!A?p():x.key==="Escape"&&(d(!1),h(""),v(""))};return c.jsxs("div",{className:oe("flex flex-col justify-start items-center relative transition-all duration-500 ease-in-out w-16",e),children:[c.jsxs("article",{className:"border border-solid border-gray-300 dark:border-gray-700 w-full ease-in-out duration-500 left-0 rounded-2xl inline-block shadow-lg shadow-black/15 bg-white dark:bg-gray-900 h-full flex flex-col",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("label",{className:oe("has-[:checked]:shadow-lg relative w-full h-16 p-4 ease-in-out duration-300 border-solid border-black/10 has-[:checked]:border group flex flex-row gap-3 items-center justify-center text-black rounded-xl cursor-pointer",a==="newchat"&&"shadow-lg border border-black/10"),onClick:()=>{u("newchat"),d(!0),o==null||o("newchat")},children:[c.jsx("input",{className:"hidden peer/expand",type:"radio",name:"path",id:"newchat",checked:a==="newchat",onChange:()=>{}}),c.jsx(o_,{className:"peer-hover/expand:scale-125 peer-hover/expand:text-blue-400 peer-checked/expand:text-blue-400 text-2xl peer-checked/expand:scale-125 ease-in-out duration-300 w-6 h-6"})]}),c.jsxs("label",{className:oe("has-[:checked]:shadow-lg relative w-full h-16 p-4 ease-in-out duration-300 border-solid border-black/10 has-[:checked]:border group flex flex-row gap-3 items-center justify-center text-black rounded-xl cursor-pointer",a==="messages"&&"shadow-lg border border-black/10"),onClick:()=>{u("messages"),o==null||o("messages")},children:[c.jsx("input",{className:"hidden peer/expand",type:"radio",name:"path",id:"messages",checked:a==="messages",onChange:()=>{}}),c.jsx(t_,{className:"peer-hover/expand:scale-125 peer-hover/expand:text-blue-400 peer-checked/expand:text-blue-400 text-2xl peer-checked/expand:scale-125 ease-in-out duration-300 w-6 h-6"})]})]}),c.jsx("div",{className:"flex-1"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("label",{className:oe("has-[:checked]:shadow-lg relative w-full h-16 p-4 ease-in-out duration-300 border-solid border-black/10 has-[:checked]:border group flex flex-row gap-3 items-center justify-center text-black rounded-xl cursor-pointer",a==="settings"&&"shadow-lg border border-black/10"),onClick:()=>{u("settings"),o==null||o("settings")},children:[c.jsx("input",{className:"hidden peer/expand",type:"radio",name:"path",id:"settings",checked:a==="settings",onChange:()=>{}}),c.jsx(Su,{className:"peer-hover/expand:scale-125 peer-hover/expand:text-blue-400 peer-checked/expand:text-blue-400 text-2xl peer-checked/expand:scale-125 ease-in-out duration-300 w-6 h-6"})]}),c.jsxs("label",{className:oe("has-[:checked]:shadow-lg relative w-full h-16 p-4 ease-in-out duration-300 border-solid border-black/10 has-[:checked]:border group flex flex-row gap-3 items-center justify-center text-black rounded-xl cursor-pointer",a==="logout"&&"shadow-lg border border-black/10"),onClick:()=>{u("logout"),o==null||o("logout"),s==null||s()},children:[c.jsx("input",{className:"hidden peer/expand",type:"radio",name:"path",id:"logout",checked:a==="logout",onChange:()=>{}}),c.jsx("div",{className:"peer-hover/expand:scale-125 peer-checked/expand:scale-125 ease-in-out duration-300 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs font-medium",children:(n==null?void 0:n.charAt(0).toUpperCase())||"U"})})]})]})]}),l&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-80 shadow-xl",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Start New Conversation"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"Enter username to chat with:"}),c.jsx(Fn,{placeholder:"e.g., alice, bob, charlie...",value:g,onChange:x=>{h(x.target.value),v("")},onKeyDown:y,className:"w-full",autoFocus:!0,disabled:A}),g.trim()===n&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Cannot start conversation with yourself"}),m&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m}),A&&c.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"Validating user..."})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(he,{onClick:p,className:"flex-1",disabled:!g.trim()||g.trim()===n||A,children:A?"Validating...":"Start Chat"}),c.jsx(he,{onClick:()=>{d(!1),h(""),v(""),u("messages")},variant:"outline",className:"flex-1",disabled:A,children:"Cancel"})]}),c.jsx("div",{className:"text-xs text-gray-500",children:"You can message any username. If they're online, they'll receive your message instantly."})]})]})}),a==="messages"&&c.jsx("div",{className:"fixed left-16 top-0 h-full w-64 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-r-2xl shadow-lg shadow-black/15 z-30",children:c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Conversations"})}),c.jsx("div",{className:"flex-1 overflow-hidden",children:t})]})}),a==="settings"&&c.jsx("div",{className:"fixed left-16 top-0 h-full w-96 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-r-2xl shadow-lg shadow-black/15 z-30 overflow-y-auto",children:c.jsx("div",{className:"h-full flex flex-col",children:c.jsx("div",{className:"flex-1",children:i})})})]})}var S_=w.createContext(void 0);function B_(e){const t=w.useContext(S_);return e||t||"ltr"}function k_(e,[t,n]){return Math.min(n,Math.max(t,e))}function R_(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var tp="ScrollArea",[iE,nQ]=Hi(tp),[T_,Hn]=iE(tp),aE=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...i}=e,[a,u]=w.useState(null),[l,d]=w.useState(null),[g,h]=w.useState(null),[A,f]=w.useState(null),[m,v]=w.useState(null),[p,y]=w.useState(0),[x,E]=w.useState(0),[C,I]=w.useState(!1),[b,S]=w.useState(!1),k=Ft(t,B=>u(B)),R=B_(s);return c.jsx(T_,{scope:n,type:r,dir:R,scrollHideDelay:o,scrollArea:a,viewport:l,onViewportChange:d,content:g,onContentChange:h,scrollbarX:A,onScrollbarXChange:f,scrollbarXEnabled:C,onScrollbarXEnabledChange:I,scrollbarY:m,onScrollbarYChange:v,scrollbarYEnabled:b,onScrollbarYEnabledChange:S,onCornerWidthChange:y,onCornerHeightChange:E,children:c.jsx(tt.div,{dir:R,...i,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":p+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});aE.displayName=tp;var lE="ScrollAreaViewport",cE=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=e,i=Hn(lE,n),a=w.useRef(null),u=Ft(t,a,i.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(tt.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:c.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});cE.displayName=lE;var Br="ScrollAreaScrollbar",np=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Hn(Br,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,a=e.orientation==="horizontal";return w.useEffect(()=>(a?o(!0):i(!0),()=>{a?o(!1):i(!1)}),[a,o,i]),s.type==="hover"?c.jsx(__,{...r,ref:t,forceMount:n}):s.type==="scroll"?c.jsx(N_,{...r,ref:t,forceMount:n}):s.type==="auto"?c.jsx(uE,{...r,ref:t,forceMount:n}):s.type==="always"?c.jsx(rp,{...r,ref:t}):null});np.displayName=Br;var __=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Hn(Br,e.__scopeScrollArea),[o,i]=w.useState(!1);return w.useEffect(()=>{const a=s.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),i(!0)},d=()=>{u=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(No,{present:n||o,children:c.jsx(uE,{"data-state":o?"visible":"hidden",...r,ref:t})})}),N_=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Hn(Br,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Md(()=>u("SCROLL_END"),100),[a,u]=R_("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,s.scrollHideDelay,u]),w.useEffect(()=>{const l=s.viewport,d=o?"scrollLeft":"scrollTop";if(l){let g=l[d];const h=()=>{const A=l[d];g!==A&&(u("SCROLL"),i()),g=A};return l.addEventListener("scroll",h),()=>l.removeEventListener("scroll",h)}},[s.viewport,o,u,i]),c.jsx(No,{present:n||a!=="hidden",children:c.jsx(rp,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Mt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Mt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),uE=w.forwardRef((e,t)=>{const n=Hn(Br,e.__scopeScrollArea),{forceMount:r,...s}=e,[o,i]=w.useState(!1),a=e.orientation==="horizontal",u=Md(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?l:d)}},10);return Di(n.viewport,u),Di(n.content,u),c.jsx(No,{present:r||o,children:c.jsx(rp,{"data-state":o?"visible":"hidden",...s,ref:t})})}),rp=w.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Hn(Br,e.__scopeScrollArea),o=w.useRef(null),i=w.useRef(0),[a,u]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=AE(a.viewport,a.content),d={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function g(h,A){return j_(h,i.current,a,A)}return n==="horizontal"?c.jsx(D_,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,A=E0(h,a,s.dir);o.current.style.transform=`translate3d(${A}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=g(h,s.dir))}}):n==="vertical"?c.jsx(P_,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,A=E0(h,a);o.current.style.transform=`translate3d(0, ${A}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=g(h))}}):null}),D_=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=Hn(Br,e.__scopeScrollArea),[i,a]=w.useState(),u=w.useRef(null),l=Ft(t,u,o.onScrollbarXChange);return w.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),c.jsx(fE,{"data-orientation":"horizontal",...s,ref:l,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pd(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,g)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),mE(h,g)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Tu(i.paddingLeft),paddingEnd:Tu(i.paddingRight)}})}})}),P_=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=Hn(Br,e.__scopeScrollArea),[i,a]=w.useState(),u=w.useRef(null),l=Ft(t,u,o.onScrollbarYChange);return w.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),c.jsx(fE,{"data-orientation":"vertical",...s,ref:l,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pd(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,g)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),mE(h,g)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Tu(i.paddingTop),paddingEnd:Tu(i.paddingBottom)}})}})}),[M_,dE]=iE(Br),fE=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:d,onResize:g,...h}=e,A=Hn(Br,n),[f,m]=w.useState(null),v=Ft(t,k=>m(k)),p=w.useRef(null),y=w.useRef(""),x=A.viewport,E=r.content-r.viewport,C=en(d),I=en(u),b=Md(g,10);function S(k){if(p.current){const R=k.clientX-p.current.left,B=k.clientY-p.current.top;l({x:R,y:B})}}return w.useEffect(()=>{const k=R=>{const B=R.target;(f==null?void 0:f.contains(B))&&C(R,E)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[x,f,E,C]),w.useEffect(I,[r,I]),Di(f,b),Di(A.content,b),c.jsx(M_,{scope:n,scrollbar:f,hasThumb:s,onThumbChange:en(o),onThumbPointerUp:en(i),onThumbPositionChange:I,onThumbPointerDown:en(a),children:c.jsx(tt.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Mt(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),p.current=f.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",A.viewport&&(A.viewport.style.scrollBehavior="auto"),S(k))}),onPointerMove:Mt(e.onPointerMove,S),onPointerUp:Mt(e.onPointerUp,k=>{const R=k.target;R.hasPointerCapture(k.pointerId)&&R.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=y.current,A.viewport&&(A.viewport.style.scrollBehavior=""),p.current=null})})})}),Ru="ScrollAreaThumb",hE=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=dE(Ru,e.__scopeScrollArea);return c.jsx(No,{present:n||s.hasThumb,children:c.jsx(Q_,{ref:t,...r})})}),Q_=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,o=Hn(Ru,n),i=dE(Ru,n),{onThumbPositionChange:a}=i,u=Ft(t,g=>i.onThumbChange(g)),l=w.useRef(void 0),d=Md(()=>{l.current&&(l.current(),l.current=void 0)},100);return w.useEffect(()=>{const g=o.viewport;if(g){const h=()=>{if(d(),!l.current){const A=L_(g,a);l.current=A,a()}};return a(),g.addEventListener("scroll",h),()=>g.removeEventListener("scroll",h)}},[o.viewport,d,a]),c.jsx(tt.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Mt(e.onPointerDownCapture,g=>{const A=g.target.getBoundingClientRect(),f=g.clientX-A.left,m=g.clientY-A.top;i.onThumbPointerDown({x:f,y:m})}),onPointerUp:Mt(e.onPointerUp,i.onThumbPointerUp)})});hE.displayName=Ru;var sp="ScrollAreaCorner",gE=w.forwardRef((e,t)=>{const n=Hn(sp,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?c.jsx(F_,{...e,ref:t}):null});gE.displayName=sp;var F_=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Hn(sp,n),[o,i]=w.useState(0),[a,u]=w.useState(0),l=!!(o&&a);return Di(s.scrollbarX,()=>{var g;const d=((g=s.scrollbarX)==null?void 0:g.offsetHeight)||0;s.onCornerHeightChange(d),u(d)}),Di(s.scrollbarY,()=>{var g;const d=((g=s.scrollbarY)==null?void 0:g.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),l?c.jsx(tt.div,{...r,ref:t,style:{width:o,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Tu(e){return e?parseInt(e,10):0}function AE(e,t){const n=e/t;return isNaN(n)?0:n}function Pd(e){const t=AE(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function j_(e,t,n,r="ltr"){const s=Pd(n),o=s/2,i=t||o,a=s-i,u=n.scrollbar.paddingStart+i,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,g=r==="ltr"?[0,d]:[d*-1,0];return pE([u,l],g)(e)}function E0(e,t,n="ltr"){const r=Pd(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,i=t.content-t.viewport,a=o-r,u=n==="ltr"?[0,i]:[i*-1,0],l=k_(e,u);return pE([0,i],[0,a])(l)}function pE(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function mE(e,t){return e>0&&e<t}var L_=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function s(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,a=n.top!==o.top;(i||a)&&t(),n=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function Md(e,t){const n=en(e),r=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),w.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Di(e,t){const n=en(t);On(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var yE=aE,O_=cE,U_=gE;const op=w.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(yE,{ref:r,className:oe("relative overflow-hidden",e),...n,children:[c.jsx(O_,{className:"h-full w-full rounded-[inherit]",children:t}),c.jsx(wE,{}),c.jsx(U_,{})]}));op.displayName=yE.displayName;const wE=w.forwardRef(({className:e,orientation:t="vertical",...n},r)=>c.jsx(np,{ref:r,orientation:t,className:oe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:c.jsx(hE,{className:"relative flex-1 rounded-full bg-border"})}));wE.displayName=np.displayName;const H_=w.memo(({conversation:e,isSelected:t,onSelect:n,formatTime:r,callStatus:s})=>c.jsxs("div",{onClick:()=>n(e.username),className:oe("flex items-center gap-2 p-2 rounded cursor-pointer transition-colors",t?"bg-blue-100 border border-blue-200":"hover:bg-gray-100"),children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-medium",children:e.username.charAt(0).toUpperCase()}),e.isOnline&&c.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.username}),c.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s==="connected"&&c.jsxs("div",{className:"badge badge-success",children:[c.jsx("svg",{className:"size-[1em]",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:c.jsxs("g",{fill:"currentColor",strokeLinejoin:"miter",strokeLinecap:"butt",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeLinecap:"square",strokeMiterlimit:"10",strokeWidth:"2"}),c.jsx("polyline",{points:"7 13 10 16 17 8",fill:"none",stroke:"currentColor",strokeLinecap:"square",strokeMiterlimit:"10",strokeWidth:"2"})]})}),c.jsx("span",{className:"ml-1",children:"In Call"})]}),(s==="ringing"||s==="connecting")&&c.jsxs("div",{className:"badge badge-info",children:[c.jsx("svg",{className:"size-[1em]",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:c.jsxs("g",{fill:"currentColor",strokeLinejoin:"miter",strokeLinecap:"butt",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeLinecap:"square",strokeMiterlimit:"10",strokeWidth:"2"}),c.jsx("path",{d:"m12,17v-5.5c0-.276-.224-.5-.5-.5h-1.5",fill:"none",stroke:"currentColor",strokeLinecap:"square",strokeMiterlimit:"10",strokeWidth:"2"}),c.jsx("circle",{cx:"12",cy:"7.25",r:"1.25",fill:"currentColor",strokeWidth:"2"})]})}),c.jsx("span",{className:"ml-1",children:"Calling"})]}),e.lastMessageTime&&c.jsx("span",{className:"text-xs text-gray-500",children:r(e.lastMessageTime)})]})]}),e.lastMessage&&c.jsx("p",{className:"text-xs text-gray-600 truncate",children:e.lastMessage})]}),e.unreadCount&&e.unreadCount>0&&c.jsx("div",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.unreadCount>99?"99+":e.unreadCount})]})),z_=w.memo(function({conversations:t,selectedConversation:n,onSelectConversation:r,currentUsername:s}){const[o,i]=w.useState(null),[a,u]=w.useState(null);w.useEffect(()=>{const d=g=>{const h=g,{peer:A,status:f}=h.detail||{};typeof A=="string"&&typeof f=="string"&&(f==="ringing"||f==="connecting"||f==="connected"?(i(A),u(f)):(i(m=>m===A?null:m),u(m=>m&&m&&m?null:m)))};return window.addEventListener("ui-call-status",d),()=>window.removeEventListener("ui-call-status",d)},[]);const l=w.useMemo(()=>d=>{if(!d)return"";const h=new Date().getTime()-d.getTime(),A=Math.floor(h/6e4),f=Math.floor(h/36e5),m=Math.floor(h/864e5);return A<1?"now":A<60?`${A}m`:f<24?`${f}h`:`${m}d`},[]);return c.jsx(op,{className:"h-full",children:c.jsx("div",{className:"p-1",children:t.length===0?c.jsx("div",{className:"text-center text-gray-500 text-xs py-4",children:"No conversations yet"}):t.map(d=>c.jsx(H_,{conversation:d,isSelected:n===d.username,onSelect:r,formatTime:l,callStatus:d.username===o?a:null},d.id))})})});var vE={exports:{}},xE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pi=w;function G_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var K_=typeof Object.is=="function"?Object.is:G_,$_=Pi.useState,V_=Pi.useEffect,W_=Pi.useLayoutEffect,Y_=Pi.useDebugValue;function X_(e,t){var n=t(),r=$_({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return W_(function(){s.value=n,s.getSnapshot=t,Lf(s)&&o({inst:s})},[e,n,t]),V_(function(){return Lf(s)&&o({inst:s}),e(function(){Lf(s)&&o({inst:s})})},[e]),Y_(n),n}function Lf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!K_(e,n)}catch{return!0}}function J_(e,t){return t()}var q_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J_:X_;xE.useSyncExternalStore=Pi.useSyncExternalStore!==void 0?Pi.useSyncExternalStore:q_;vE.exports=xE;var Z_=vE.exports;function eN(){return Z_.useSyncExternalStore(tN,()=>!0,()=>!1)}function tN(){return()=>{}}var ip="Avatar",[nN,rQ]=Hi(ip),[rN,EE]=nN(ip),CE=w.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,o]=w.useState("idle");return c.jsx(rN,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:c.jsx(tt.span,{...r,ref:t})})});CE.displayName=ip;var bE="AvatarImage",IE=w.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=e,i=EE(bE,n),a=sN(r,o),u=en(l=>{s(l),i.onImageLoadingStatusChange(l)});return On(()=>{a!=="idle"&&u(a)},[a,u]),a==="loaded"?c.jsx(tt.img,{...o,ref:t,src:r}):null});IE.displayName=bE;var SE="AvatarFallback",BE=w.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,o=EE(SE,n),[i,a]=w.useState(r===void 0);return w.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(u)}},[r]),i&&o.imageLoadingStatus!=="loaded"?c.jsx(tt.span,{...s,ref:t}):null});BE.displayName=SE;function C0(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function sN(e,{referrerPolicy:t,crossOrigin:n}){const r=eN(),s=w.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[i,a]=w.useState(()=>C0(o,e));return On(()=>{a(C0(o,e))},[o,e]),On(()=>{const u=g=>()=>{a(g)};if(!o)return;const l=u("loaded"),d=u("error");return o.addEventListener("load",l),o.addEventListener("error",d),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",l),o.removeEventListener("error",d)}},[o,n,t]),i}var kE=CE,RE=IE,TE=BE;const Qd=w.forwardRef(({className:e,...t},n)=>c.jsx(kE,{ref:n,className:oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Qd.displayName=kE.displayName;const oN=w.forwardRef(({className:e,...t},n)=>c.jsx(RE,{ref:n,className:oe("aspect-square h-full w-full",e),...t}));oN.displayName=RE.displayName;const Fd=w.forwardRef(({className:e,...t},n)=>c.jsx(TE,{ref:n,className:oe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Fd.displayName=TE.displayName;function zn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function bo(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const _E=6048e5,iN=864e5;let aN={};function jd(){return aN}function cl(e,t){var a,u,l,d;const n=jd(),r=(t==null?void 0:t.weekStartsOn)??((u=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((d=(l=n.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??0,s=zn(e),o=s.getDay(),i=(o<r?7:0)+o-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function _u(e){return cl(e,{weekStartsOn:1})}function NE(e){const t=zn(e),n=t.getFullYear(),r=bo(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=_u(r),o=bo(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=_u(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function b0(e){const t=zn(e);return t.setHours(0,0,0,0),t}function I0(e){const t=zn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function lN(e,t){const n=b0(e),r=b0(t),s=+n-I0(n),o=+r-I0(r);return Math.round((s-o)/iN)}function cN(e){const t=NE(e),n=bo(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),_u(n)}function uN(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dN(e){if(!uN(e)&&typeof e!="number")return!1;const t=zn(e);return!isNaN(Number(t))}function S0(e){const t=zn(e);return t.setSeconds(0,0),t}function fN(e){const t=zn(e),n=bo(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const hN={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gN=(e,t,n)=>{let r;const s=hN[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Of(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const AN={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pN={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mN={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yN={date:Of({formats:AN,defaultWidth:"full"}),time:Of({formats:pN,defaultWidth:"full"}),dateTime:Of({formats:mN,defaultWidth:"full"})},wN={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vN=(e,t,n,r)=>wN[e];function la(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[a]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const xN={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EN={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},CN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bN={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},IN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},SN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},BN=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},kN={ordinalNumber:BN,era:la({values:xN,defaultWidth:"wide"}),quarter:la({values:EN,defaultWidth:"wide",argumentCallback:e=>e-1}),month:la({values:CN,defaultWidth:"wide"}),day:la({values:bN,defaultWidth:"wide"}),dayPeriod:la({values:IN,defaultWidth:"wide",formattingValues:SN,defaultFormattingWidth:"wide"})};function ca(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(a)?TN(a,g=>g.test(i)):RN(a,g=>g.test(i));let l;l=e.valueCallback?e.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;const d=t.slice(i.length);return{value:l,rest:d}}}function RN(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function TN(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function _N(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const a=t.slice(s.length);return{value:i,rest:a}}}const NN=/^(\d+)(th|st|nd|rd)?/i,DN=/\d+/i,PN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MN={any:[/^b/i,/^(a|c)/i]},QN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FN={any:[/1/i,/2/i,/3/i,/4/i]},jN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},LN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ON={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},UN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},GN={ordinalNumber:_N({matchPattern:NN,parsePattern:DN,valueCallback:e=>parseInt(e,10)}),era:ca({matchPatterns:PN,defaultMatchWidth:"wide",parsePatterns:MN,defaultParseWidth:"any"}),quarter:ca({matchPatterns:QN,defaultMatchWidth:"wide",parsePatterns:FN,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ca({matchPatterns:jN,defaultMatchWidth:"wide",parsePatterns:LN,defaultParseWidth:"any"}),day:ca({matchPatterns:ON,defaultMatchWidth:"wide",parsePatterns:UN,defaultParseWidth:"any"}),dayPeriod:ca({matchPatterns:HN,defaultMatchWidth:"any",parsePatterns:zN,defaultParseWidth:"any"})},KN={code:"en-US",formatDistance:gN,formatLong:yN,formatRelative:vN,localize:kN,match:GN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $N(e){const t=zn(e);return lN(t,fN(t))+1}function VN(e){const t=zn(e),n=+_u(t)-+cN(t);return Math.round(n/_E)+1}function DE(e,t){var d,g,h,A;const n=zn(e),r=n.getFullYear(),s=jd(),o=(t==null?void 0:t.firstWeekContainsDate)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??s.firstWeekContainsDate??((A=(h=s.locale)==null?void 0:h.options)==null?void 0:A.firstWeekContainsDate)??1,i=bo(e,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const a=cl(i,t),u=bo(e,0);u.setFullYear(r,0,o),u.setHours(0,0,0,0);const l=cl(u,t);return n.getTime()>=a.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function WN(e,t){var a,u,l,d;const n=jd(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(l=n.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??1,s=DE(e,t),o=bo(e,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),cl(o,t)}function YN(e,t){const n=zn(e),r=+cl(n,t)-+WN(n,t);return Math.round(r/_E)+1}function Ne(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const rs={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ne(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ne(n+1,2)},d(e,t){return Ne(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ne(e.getHours()%12||12,t.length)},H(e,t){return Ne(e.getHours(),t.length)},m(e,t){return Ne(e.getMinutes(),t.length)},s(e,t){return Ne(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ne(s,t.length)}},Uo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},B0={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return rs.y(e,t)},Y:function(e,t,n,r){const s=DE(e,r),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return Ne(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ne(o,t.length)},R:function(e,t){const n=NE(e);return Ne(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ne(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ne(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ne(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return rs.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ne(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=YN(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Ne(s,t.length)},I:function(e,t,n){const r=VN(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ne(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):rs.d(e,t)},D:function(e,t,n){const r=$N(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ne(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ne(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ne(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Ne(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Uo.noon:r===0?s=Uo.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Uo.evening:r>=12?s=Uo.afternoon:r>=4?s=Uo.morning:s=Uo.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return rs.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):rs.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ne(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ne(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):rs.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):rs.s(e,t)},S:function(e,t){return rs.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return R0(r);case"XXXX":case"XX":return Xs(r);case"XXXXX":case"XXX":default:return Xs(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return R0(r);case"xxxx":case"xx":return Xs(r);case"xxxxx":case"xxx":default:return Xs(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+k0(r,":");case"OOOO":default:return"GMT"+Xs(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+k0(r,":");case"zzzz":default:return"GMT"+Xs(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Ne(r,t.length)},T:function(e,t,n){const r=e.getTime();return Ne(r,t.length)}};function k0(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+Ne(o,2)}function R0(e,t){return e%60===0?(e>0?"-":"+")+Ne(Math.abs(e)/60,2):Xs(e,t)}function Xs(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Ne(Math.trunc(r/60),2),o=Ne(r%60,2);return n+s+t+o}const T0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},PE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},XN=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return T0(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",T0(r,t)).replace("{{time}}",PE(s,t))},JN={p:PE,P:XN},qN=/^D+$/,ZN=/^Y+$/,e3=["D","DD","YY","YYYY"];function t3(e){return qN.test(e)}function n3(e){return ZN.test(e)}function r3(e,t,n){const r=s3(e,t,n);if(console.warn(r),e3.includes(e))throw new RangeError(r)}function s3(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const o3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,i3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a3=/^'([^]*?)'?$/,l3=/''/g,c3=/[a-zA-Z]/;function ao(e,t,n){var d,g,h,A;const r=jd(),s=r.locale??KN,o=r.firstWeekContainsDate??((g=(d=r.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??1,i=r.weekStartsOn??((A=(h=r.locale)==null?void 0:h.options)==null?void 0:A.weekStartsOn)??0,a=zn(e);if(!dN(a))throw new RangeError("Invalid time value");let u=t.match(i3).map(f=>{const m=f[0];if(m==="p"||m==="P"){const v=JN[m];return v(f,s.formatLong)}return f}).join("").match(o3).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const m=f[0];if(m==="'")return{isToken:!1,value:u3(f)};if(B0[m])return{isToken:!0,value:f};if(m.match(c3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:f}});s.localize.preprocessor&&(u=s.localize.preprocessor(a,u));const l={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return u.map(f=>{if(!f.isToken)return f.value;const m=f.value;(n3(m)||t3(m))&&r3(m,t,String(e));const v=B0[m[0]];return v(a,m,s.localize,l)}).join("")}function u3(e){const t=e.match(a3);return t?t[1].replace(l3,"'"):e}function d3(e,t){const n=S0(e),r=S0(t);return+n==+r}const f3="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",h3="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",wg="numeric",vg="ascii",xg="alpha",Da="asciinumeric",va="alphanumeric",Eg="domain",ME="emoji",g3="scheme",A3="slashscheme",Uf="whitespace";function p3(e,t){return e in t||(t[e]=[]),t[e]}function lo(e,t,n){t[wg]&&(t[Da]=!0,t[va]=!0),t[vg]&&(t[Da]=!0,t[xg]=!0),t[Da]&&(t[va]=!0),t[xg]&&(t[va]=!0),t[va]&&(t[Eg]=!0),t[ME]&&(t[Eg]=!0);for(const r in t){const s=p3(r,n);s.indexOf(e)<0&&s.push(e)}}function m3(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function fn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}fn.groups={};fn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],o=t.jr[r][1];if(o&&s.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||fn.groups;let s;return t&&t.j?s=t:(s=new fn(t),n&&r&&lo(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const o=e.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(e[i]);return s.tt(e[o-1],t,n,r)},tt(e,t,n,r){r=r||fn.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const o=t;let i,a=s.go(e);if(a?(i=new fn,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new fn,o){if(r)if(i.t&&typeof i.t=="string"){const u=Object.assign(m3(i.t,r),n);lo(o,u,r)}else n&&lo(o,n,r);i.t=o}return s.j[e]=i,i}};const me=(e,t,n,r,s)=>e.ta(t,n,r,s),nt=(e,t,n,r,s)=>e.tr(t,n,r,s),_0=(e,t,n,r,s)=>e.ts(t,n,r,s),W=(e,t,n,r,s)=>e.tt(t,n,r,s),Fr="WORD",Cg="UWORD",QE="ASCIINUMERICAL",FE="ALPHANUMERICAL",ul="LOCALHOST",bg="TLD",Ig="UTLD",Hc="SCHEME",Xo="SLASH_SCHEME",ap="NUM",Sg="WS",lp="NL",Pa="OPENBRACE",Ma="CLOSEBRACE",Nu="OPENBRACKET",Du="CLOSEBRACKET",Pu="OPENPAREN",Mu="CLOSEPAREN",Qu="OPENANGLEBRACKET",Fu="CLOSEANGLEBRACKET",ju="FULLWIDTHLEFTPAREN",Lu="FULLWIDTHRIGHTPAREN",Ou="LEFTCORNERBRACKET",Uu="RIGHTCORNERBRACKET",Hu="LEFTWHITECORNERBRACKET",zu="RIGHTWHITECORNERBRACKET",Gu="FULLWIDTHLESSTHAN",Ku="FULLWIDTHGREATERTHAN",$u="AMPERSAND",Vu="APOSTROPHE",Wu="ASTERISK",gs="AT",Yu="BACKSLASH",Xu="BACKTICK",Ju="CARET",ms="COLON",cp="COMMA",qu="DOLLAR",dr="DOT",Zu="EQUALS",up="EXCLAMATION",Bn="HYPHEN",Qa="PERCENT",ed="PIPE",td="PLUS",nd="POUND",Fa="QUERY",dp="QUOTE",jE="FULLWIDTHMIDDLEDOT",fp="SEMI",fr="SLASH",ja="TILDE",rd="UNDERSCORE",LE="EMOJI",sd="SYM";var OE=Object.freeze({__proto__:null,ALPHANUMERICAL:FE,AMPERSAND:$u,APOSTROPHE:Vu,ASCIINUMERICAL:QE,ASTERISK:Wu,AT:gs,BACKSLASH:Yu,BACKTICK:Xu,CARET:Ju,CLOSEANGLEBRACKET:Fu,CLOSEBRACE:Ma,CLOSEBRACKET:Du,CLOSEPAREN:Mu,COLON:ms,COMMA:cp,DOLLAR:qu,DOT:dr,EMOJI:LE,EQUALS:Zu,EXCLAMATION:up,FULLWIDTHGREATERTHAN:Ku,FULLWIDTHLEFTPAREN:ju,FULLWIDTHLESSTHAN:Gu,FULLWIDTHMIDDLEDOT:jE,FULLWIDTHRIGHTPAREN:Lu,HYPHEN:Bn,LEFTCORNERBRACKET:Ou,LEFTWHITECORNERBRACKET:Hu,LOCALHOST:ul,NL:lp,NUM:ap,OPENANGLEBRACKET:Qu,OPENBRACE:Pa,OPENBRACKET:Nu,OPENPAREN:Pu,PERCENT:Qa,PIPE:ed,PLUS:td,POUND:nd,QUERY:Fa,QUOTE:dp,RIGHTCORNERBRACKET:Uu,RIGHTWHITECORNERBRACKET:zu,SCHEME:Hc,SEMI:fp,SLASH:fr,SLASH_SCHEME:Xo,SYM:sd,TILDE:ja,TLD:bg,UNDERSCORE:rd,UTLD:Ig,UWORD:Cg,WORD:Fr,WS:Sg});const _r=/[a-z]/,ua=new RegExp("\\p{L}","u"),Hf=new RegExp("\\p{Emoji}","u"),Nr=/\d/,zf=/\s/,N0="\r",Gf=`
`,y3="",w3="",Kf="";let lc=null,cc=null;function v3(e=[]){const t={};fn.groups=t;const n=new fn;lc==null&&(lc=D0(f3)),cc==null&&(cc=D0(h3)),W(n,"'",Vu),W(n,"{",Pa),W(n,"}",Ma),W(n,"[",Nu),W(n,"]",Du),W(n,"(",Pu),W(n,")",Mu),W(n,"<",Qu),W(n,">",Fu),W(n,"",ju),W(n,"",Lu),W(n,"",Ou),W(n,"",Uu),W(n,"",Hu),W(n,"",zu),W(n,"",Gu),W(n,"",Ku),W(n,"&",$u),W(n,"*",Wu),W(n,"@",gs),W(n,"`",Xu),W(n,"^",Ju),W(n,":",ms),W(n,",",cp),W(n,"$",qu),W(n,".",dr),W(n,"=",Zu),W(n,"!",up),W(n,"-",Bn),W(n,"%",Qa),W(n,"|",ed),W(n,"+",td),W(n,"#",nd),W(n,"?",Fa),W(n,'"',dp),W(n,"/",fr),W(n,";",fp),W(n,"~",ja),W(n,"_",rd),W(n,"\\",Yu),W(n,"",jE);const r=nt(n,Nr,ap,{[wg]:!0});nt(r,Nr,r);const s=nt(r,_r,QE,{[Da]:!0}),o=nt(r,ua,FE,{[va]:!0}),i=nt(n,_r,Fr,{[vg]:!0});nt(i,Nr,s),nt(i,_r,i),nt(s,Nr,s),nt(s,_r,s);const a=nt(n,ua,Cg,{[xg]:!0});nt(a,_r),nt(a,Nr,o),nt(a,ua,a),nt(o,Nr,o),nt(o,_r),nt(o,ua,o);const u=W(n,Gf,lp,{[Uf]:!0}),l=W(n,N0,Sg,{[Uf]:!0}),d=nt(n,zf,Sg,{[Uf]:!0});W(n,Kf,d),W(l,Gf,u),W(l,Kf,d),nt(l,zf,d),W(d,N0),W(d,Gf),nt(d,zf,d),W(d,Kf,d);const g=nt(n,Hf,LE,{[ME]:!0});W(g,"#"),nt(g,Hf,g),W(g,y3,g);const h=W(g,w3);W(h,"#"),nt(h,Hf,g);const A=[[_r,i],[Nr,s]],f=[[_r,null],[ua,a],[Nr,o]];for(let m=0;m<lc.length;m++)ss(n,lc[m],bg,Fr,A);for(let m=0;m<cc.length;m++)ss(n,cc[m],Ig,Cg,f);lo(bg,{tld:!0,ascii:!0},t),lo(Ig,{utld:!0,alpha:!0},t),ss(n,"file",Hc,Fr,A),ss(n,"mailto",Hc,Fr,A),ss(n,"http",Xo,Fr,A),ss(n,"https",Xo,Fr,A),ss(n,"ftp",Xo,Fr,A),ss(n,"ftps",Xo,Fr,A),lo(Hc,{scheme:!0,ascii:!0},t),lo(Xo,{slashscheme:!0,ascii:!0},t),e=e.sort((m,v)=>m[0]>v[0]?1:-1);for(let m=0;m<e.length;m++){const v=e[m][0],y=e[m][1]?{[g3]:!0}:{[A3]:!0};v.indexOf("-")>=0?y[Eg]=!0:_r.test(v)?Nr.test(v)?y[Da]=!0:y[vg]=!0:y[wg]=!0,_0(n,v,v,y)}return _0(n,"localhost",ul,{ascii:!0}),n.jd=new fn(sd),{start:n,tokens:Object.assign({groups:t},OE)}}function UE(e,t){const n=x3(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let a=e,u=null,l=0,d=null,g=-1,h=-1;for(;i<r&&(u=a.go(n[i]));)a=u,a.accepts()?(g=0,h=0,d=a):g>=0&&(g+=n[i].length,h++),l+=n[i].length,o+=n[i].length,i++;o-=g,i-=h,l-=g,s.push({t:d.t,v:t.slice(o-l,o),s:o-l,e:o})}return s}function x3(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(i),r+=i.length}return t}function ss(e,t,n,r,s){let o;const i=t.length;for(let a=0;a<i-1;a++){const u=t[a];e.j[u]?o=e.j[u]:(o=new fn(r),o.jr=s.slice(),e.j[u]=o),e=o}return o=new fn(n),o.jr=s.slice(),e.j[t[i-1]]=o,o}function D0(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let o=0;for(;s.indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let i=parseInt(e.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(e[r]),r++}return t}const dl={defaultProtocol:"http",events:null,format:P0,formatHref:P0,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function hp(e,t=null){let n=Object.assign({},dl);e&&(n=Object.assign(n,e instanceof hp?e.o:e));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}hp.prototype={o:dl,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:dl[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function P0(e){return e}function HE(e,t){this.t="token",this.v=e,this.tk=t}HE.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=dl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),o=this.toFormattedString(e),i={},a=e.get("className",n,t),u=e.get("target",n,t),l=e.get("rel",n,t),d=e.getObj("attributes",n,t),g=e.getObj("events",n,t);return i.href=r,a&&(i.class=a),u&&(i.target=u),l&&(i.rel=l),d&&Object.assign(i,d),{tagName:s,attributes:i,content:o,eventListeners:g}}};function Ld(e,t){class n extends HE{constructor(s,o){super(s,o),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const M0=Ld("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Q0=Ld("text"),E3=Ld("nl"),uc=Ld("url",{isLink:!0,toHref(e=dl.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==ul&&e[1].t===ms}}),In=e=>new fn(e);function C3({groups:e}){const t=e.domain.concat([$u,Wu,gs,Yu,Xu,Ju,qu,Zu,Bn,ap,Qa,ed,td,nd,fr,sd,ja,rd]),n=[Vu,ms,cp,dr,up,Qa,Fa,dp,fp,Qu,Fu,Pa,Ma,Du,Nu,Pu,Mu,ju,Lu,Ou,Uu,Hu,zu,Gu,Ku],r=[$u,Vu,Wu,Yu,Xu,Ju,qu,Zu,Bn,Pa,Ma,Qa,ed,td,nd,Fa,fr,sd,ja,rd],s=In(),o=W(s,ja);me(o,r,o),me(o,e.domain,o);const i=In(),a=In(),u=In();me(s,e.domain,i),me(s,e.scheme,a),me(s,e.slashscheme,u),me(i,r,o),me(i,e.domain,i);const l=W(i,gs);W(o,gs,l),W(a,gs,l),W(u,gs,l);const d=W(o,dr);me(d,r,o),me(d,e.domain,o);const g=In();me(l,e.domain,g),me(g,e.domain,g);const h=W(g,dr);me(h,e.domain,g);const A=In(M0);me(h,e.tld,A),me(h,e.utld,A),W(l,ul,A);const f=W(g,Bn);W(f,Bn,f),me(f,e.domain,g),me(A,e.domain,g),W(A,dr,h),W(A,Bn,f);const m=W(A,ms);me(m,e.numeric,M0);const v=W(i,Bn),p=W(i,dr);W(v,Bn,v),me(v,e.domain,i),me(p,r,o),me(p,e.domain,i);const y=In(uc);me(p,e.tld,y),me(p,e.utld,y),me(y,e.domain,i),me(y,r,o),W(y,dr,p),W(y,Bn,v),W(y,gs,l);const x=W(y,ms),E=In(uc);me(x,e.numeric,E);const C=In(uc),I=In();me(C,t,C),me(C,n,I),me(I,t,C),me(I,n,I),W(y,fr,C),W(E,fr,C);const b=W(a,ms),S=W(u,ms),k=W(S,fr),R=W(k,fr);me(a,e.domain,i),W(a,dr,p),W(a,Bn,v),me(u,e.domain,i),W(u,dr,p),W(u,Bn,v),me(b,e.domain,C),W(b,fr,C),W(b,Fa,C),me(R,e.domain,C),me(R,t,C),W(R,fr,C);const B=[[Pa,Ma],[Nu,Du],[Pu,Mu],[Qu,Fu],[ju,Lu],[Ou,Uu],[Hu,zu],[Gu,Ku]];for(let M=0;M<B.length;M++){const[T,F]=B[M],H=W(C,T);W(I,T,H),W(H,F,C);const O=In(uc);me(H,t,O);const X=In();me(H,n),me(O,t,O),me(O,n,X),me(X,t,O),me(X,n,X),W(O,F,C),W(X,F,C)}return W(s,ul,y),W(s,lp,E3),{start:s,tokens:OE}}function b3(e,t,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let a=e,u=null,l=null,d=0,g=null,h=-1;for(;s<r&&!(u=a.go(n[s].t));)i.push(n[s++]);for(;s<r&&(l=u||a.go(n[s].t));)u=null,a=l,a.accepts()?(h=0,g=a):h>=0&&h++,s++,d++;if(h<0)s-=d,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push($f(Q0,t,i)),i=[]),s-=h,d-=h;const A=g.t,f=n.slice(s-d,s);o.push($f(A,t,f))}}return i.length>0&&o.push($f(Q0,t,i)),o}function $f(e,t,n){const r=n[0].s,s=n[n.length-1].e,o=t.slice(r,s);return new e(o,n)}const Nt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function I3(){Nt.scanner=v3(Nt.customSchemes);for(let e=0;e<Nt.tokenQueue.length;e++)Nt.tokenQueue[e][1]({scanner:Nt.scanner});Nt.parser=C3(Nt.scanner.tokens);for(let e=0;e<Nt.pluginQueue.length;e++)Nt.pluginQueue[e][1]({scanner:Nt.scanner,parser:Nt.parser});return Nt.initialized=!0,Nt}function zE(e){return Nt.initialized||I3(),b3(Nt.parser.start,e,UE(Nt.scanner.start,e))}zE.scan=UE;function S3(e,t,n){const r=zE(e),s=[];for(let o=0;o<r.length;o++){const i=r[o];if(i.t==="nl"&&t.get("nl2br")){const a=`__linkify-el-${n.elementId++}`;s.push(w.createElement("br",{key:a}))}else if(!i.isLink||!t.check(i))s.push(i.toString());else{let a=t.render(i);if(!("key"in a.props)){const u=`__linkify-el-${n.elementId++}`,l=Object.assign({key:u},a.props);a=w.cloneElement(a,l)}s.push(a)}}return s}function GE(e,t,n){if(w.Children.count(e.props.children)===0)return e;const r=[];w.Children.forEach(e.props.children,i=>{typeof i=="string"?r.push.apply(r,S3(i,t,n)):w.isValidElement(i)?typeof i.type=="string"&&t.ignoreTags.indexOf(i.type.toUpperCase())>=0?r.push(i):r.push(GE(i,t,n)):r.push(i)});const s=`__linkify-el-${n.elementId++}`,o=Object.assign({key:s},e.props);return w.cloneElement(e,o,r)}const B3=e=>{let t=0;const n=({tagName:u,attributes:l,content:d})=>(l.key=`__linkify-lnk-${t++}`,l.class&&(l.className=l.class,delete l.class),w.createElement(u,l,d)),r={key:"__linkify-wrapper"};for(const u in e)u!=="options"&&u!=="as"&&u!=="tagName"&&u!=="children"&&(r[u]=e[u]);const s=new hp(e.options,n),o=e.as||e.tagName||w.Fragment||"span",i=e.children,a=w.createElement(o,r,i);return GE(a,s,{elementId:0})};function k3({content:e}){return c.jsx("div",{className:"flex items-center justify-center my-2",children:c.jsx("div",{className:"bg-muted text-muted-foreground text-xs rounded-full px-3 py-1",children:e})})}function R3({sender:e,timestamp:t,isCurrentUser:n}){return c.jsxs("div",{className:oe("flex items-start gap-2 mb-4",n?"flex-row-reverse":""),children:[c.jsx(Qd,{className:"w-8 h-8",children:c.jsx(Fd,{className:oe(n?"bg-blue-500 text-white":"bg-muted"),children:e.charAt(0).toUpperCase()})}),c.jsxs("div",{className:oe("flex flex-col min-w-0",n?"items-end":"items-start"),style:{maxWidth:"75%"},children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-sm font-medium",children:e}),c.jsx("span",{className:"text-xs text-muted-foreground",children:ao(t,"h:mm a")})]}),c.jsx("div",{className:oe("rounded-lg px-3 py-2 text-sm min-w-[5rem] whitespace-pre-wrap break-words",n?"bg-primary text-primary-foreground":"bg-muted","italic text-gray-500"),children:"Message deleted"})]})]})}const F0=["jpg","jpeg","png","gif","webp"],j0=["mp4","webm","ogg"],L0=["mp3","wav","ogg","m4a"];function dc(e,t){if(!e||typeof e!="string"||e.length>255)return!1;const r=e.replace(/[^\w.-]/g,"").toLowerCase();return t.some(s=>r.endsWith("."+s.toLowerCase()))}function Vf(e){if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(1))+" "+n[r]}function T3({message:e,isCurrentUser:t}){const{content:n,sender:r,timestamp:s,filename:o,fileSize:i}=e;return c.jsxs("div",{className:oe("flex items-start gap-2 mb-4",t?"flex-row-reverse":""),children:[c.jsx(Qd,{className:"w-8 h-8",children:c.jsx(Fd,{className:oe(t?"bg-blue-500 text-white":"bg-muted"),children:r.charAt(0).toUpperCase()})}),c.jsxs("div",{className:oe("flex flex-col",t?"items-end":"items-start"),children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-sm font-medium",children:r}),c.jsx("span",{className:"text-xs text-muted-foreground",children:ao(s,"h:mm a")})]}),dc(o||"",F0)&&c.jsx("div",{className:oe("rounded-lg px-0 py-0 text-sm max-w-[60%] break-words","bg-muted"),children:c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:n,alt:o,className:"max-w-full rounded-md"}),c.jsx("a",{href:n,download:o,className:"absolute top-2 right-2 bg-white p-1 rounded-full shadow hidden group-hover:block","aria-label":`Download ${o}`,children:c.jsx(tc,{})})]})}),dc(o||"",j0)&&c.jsx("div",{className:oe("rounded-lg text-sm max-w-[60%] break-words",t?"bg-primary text-primary-foreground":"bg-muted"),children:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("video",{controls:!0,className:"max-w-full rounded-md",children:[c.jsx("source",{src:n}),"Your browser does not support the video tag."]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"font-medium break-all ml-1 mb-1",children:o}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",Vf(i??0),")"]}),c.jsx("a",{href:n,download:o,className:"text-blue-500 hover:text-blue-700",title:"Download",children:c.jsx(tc,{className:"w-5 h-5 hover:scale-110 transition-transform duration-100 ease-in-out"})})]})]})}),dc(o||"",L0)&&c.jsx("div",{className:oe("rounded-lg mr-1 py-0 text-sm max-w-[75%] break-words",t?"bg-primary text-primary-foreground":"bg-muted"),children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("audio",{controls:!0,className:"w-full rounded-md",children:[c.jsx("source",{src:n}),"Your browser does not support the audio element."]}),c.jsxs("div",{className:"flex justify-between items-center gap-1 text-sm text-blue-500",children:[c.jsx("span",{className:"truncate max-w-[250px] ml-1",title:o,children:o}),c.jsx("a",{href:n,download:o,title:"Download","aria-label":`Download ${o}`,children:c.jsx(tc,{className:"w-5 h-5 hover:scale-110 transition-transform duration-100 ease-in-out"})})]}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",Vf(i??0),")"]})]})}),!dc(o||"",[...F0,...j0,...L0])&&c.jsx("div",{className:oe("rounded-lg px-1 py-1 text-sm max-w-[60%] break-words",t?"bg-primary text-primary-foreground":"bg-muted"),children:c.jsxs("div",{className:"flex items-start gap-2 w-full text-blue-500",children:[c.jsx(Wv,{className:"h-5 w-5 shrink-0 mt-1"}),c.jsxs("div",{className:"flex flex-col min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-center gap-2",children:[c.jsx("span",{className:"text-sm truncate max-w-[250px] w-full",title:o,children:o}),c.jsx("a",{href:n,download:o,title:"Download","aria-label":`Download ${o}`,children:c.jsx(tc,{className:"w-5 h-5 hover:scale-110 transition-transform duration-100 ease-in-out"})})]}),c.jsxs("span",{className:"text-xs text-muted-foreground leading-tight",children:["(",Vf(i??0),")"]})]})]})})]})]})}function _3({audioUrl:e,sender:t,timestamp:n,isCurrentUser:r,filename:s,originalBase64Data:o,mimeType:i}){const[a,u]=w.useState(!1),[l,d]=w.useState(0),[g,h]=w.useState(0),[A,f]=w.useState(!1),[m,v]=w.useState(null),p=w.useRef(null);w.useEffect(()=>()=>{p.current&&(p.current.pause(),p.current.removeEventListener("loadedmetadata",y),p.current.removeEventListener("timeupdate",x),p.current.removeEventListener("ended",E),p.current.removeEventListener("error",C),p.current=null)},[]);const y=()=>{p.current&&(h(p.current.duration),f(!1))},x=()=>{p.current&&d(p.current.currentTime)},E=()=>{u(!1),d(0)},C=()=>{v("Failed to load audio"),f(!1),u(!1)},I=R=>{const B=Math.floor(R/60),M=Math.floor(R%60);return`${B}:${M.toString().padStart(2,"0")}`},b=async()=>{try{if(v(null),a){p.current&&(p.current.pause(),u(!1));return}if(f(!0),!p.current){const R=new Audio(e);R.preload="metadata",p.current=R,R.addEventListener("loadedmetadata",y),R.addEventListener("timeupdate",x),R.addEventListener("ended",E),R.addEventListener("error",C)}await p.current.play(),u(!0),f(!1)}catch(R){console.error("Failed to play audio:",R),v("Failed to play audio"),f(!1),u(!1)}},S=async()=>{try{if(console.log("[VoiceMessage] Starting download for:",s,{hasOriginalBase64:!!o,audioUrl:e.substring(0,50)+"..."}),o)try{const R=o.trim().replace(/[^A-Za-z0-9+/=]/g,""),B=atob(R),M=new Uint8Array(B.length);for(let O=0;O<B.length;O++)M[O]=B.charCodeAt(O);const T=new Blob([M],{type:i||"audio/webm"}),F=URL.createObjectURL(T),H=document.createElement("a");H.href=F,H.download=s||`voice-note-${ao(n,"yyyy-MM-dd-HH-mm-ss")}.webm`,H.style.display="none",document.body.appendChild(H),H.click(),document.body.removeChild(H),setTimeout(()=>URL.revokeObjectURL(F),1e3),console.log("[VoiceMessage] Download from base64 completed successfully");return}catch(R){console.error("[VoiceMessage] Base64 download failed, falling back to blob URL:",R)}if(!e||e==="File"||e==="voice-note"){console.error("[VoiceMessage] Invalid audio URL for download:",e),alert("Cannot download voice note: Invalid audio data");return}if(e.startsWith("blob:"))try{const R=await fetch(e);if(!R.ok)throw new Error(`Failed to fetch blob data: ${R.status}`);const B=await R.blob(),M=URL.createObjectURL(B),T=document.createElement("a");T.href=M,T.download=s||`voice-note-${ao(n,"yyyy-MM-dd-HH-mm-ss")}.webm`,T.style.display="none",document.body.appendChild(T),T.click(),document.body.removeChild(T),setTimeout(()=>URL.revokeObjectURL(M),1e3),console.log("[VoiceMessage] Download from blob URL completed successfully")}catch(R){console.error("[VoiceMessage] Blob download failed:",R),alert("Cannot download voice note: Audio data is no longer available")}else{const R=document.createElement("a");R.href=e,R.download=s||`voice-note-${ao(n,"yyyy-MM-dd-HH-mm-ss")}.webm`,R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R),console.log("[VoiceMessage] Direct download completed")}}catch(R){console.error("[VoiceMessage] Download failed:",R),alert("Failed to download voice note: "+(R instanceof Error?R.message:"Unknown error"))}},k=g>0?l/g*100:0;return c.jsxs("div",{className:oe("flex items-start gap-2 mb-4",r?"flex-row-reverse":""),children:[c.jsx("div",{className:"w-9 h-9",children:c.jsx("div",{className:oe("w-9 h-9 rounded-full flex items-center justify-center text-white text-sm font-medium",r?"bg-blue-500":"bg-gray-500"),children:t.charAt(0).toUpperCase()})}),c.jsxs("div",{className:oe("flex flex-col",r?"items-end":"items-start"),children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-sm font-medium",children:t}),c.jsx("span",{className:"text-xs text-muted-foreground",children:ao(n,"h:mm a")})]}),c.jsx("div",{className:oe("rounded-lg px-4 py-3 max-w-xs",r?"bg-primary text-primary-foreground":"bg-muted"),children:m?c.jsx("div",{className:"text-red-500 text-sm",children:m}):c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(he,{onClick:b,disabled:A,variant:"ghost",size:"sm",className:oe("h-8 w-8 p-0 rounded-full",r?"hover:bg-primary-foreground/20 text-primary-foreground":"hover:bg-muted-foreground/20"),children:A?c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):a?c.jsx(Xx,{className:"w-4 h-4"}):c.jsx(Dd,{className:"w-4 h-4"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-xs font-mono",children:I(l)}),c.jsxs("span",{className:"text-xs opacity-70",children:["/ ",I(g)]})]}),c.jsx("div",{className:oe("h-1 rounded-full overflow-hidden",r?"bg-primary-foreground/30":"bg-muted-foreground/30"),children:c.jsx("div",{className:oe("h-full transition-all duration-100",r?"bg-primary-foreground":"bg-primary"),style:{width:`${k}%`}})})]}),c.jsx(he,{onClick:S,variant:"ghost",size:"sm",className:oe("h-8 w-8 p-0 rounded-full",r?"hover:bg-primary-foreground/20 text-primary-foreground":"hover:bg-muted-foreground/20"),title:"Download voice note",children:c.jsx(bu,{className:"w-3 h-3"})})]})})]})]})}function N3({receipt:e,isCurrentUser:t,className:n}){return!t||!e?null:e.read?c.jsxs("div",{className:`flex items-center gap-1 text-xs text-blue-600 ${n}`,children:[c.jsx(JT,{size:12}),c.jsx("span",{children:"Read"})]}):e.delivered?c.jsxs("div",{className:`flex items-center gap-1 text-xs text-gray-500 ${n}`,children:[c.jsx(qT,{size:12}),c.jsx("span",{children:"Delivered"})]}):c.jsx("div",{className:`flex items-center gap-1 text-xs text-gray-400 ${n}`,children:c.jsx("span",{children:"Sent"})})}function D3({message:e,onReply:t,previousMessage:n,onDelete:r,onEdit:s}){var A;const{content:o,sender:i,timestamp:a,isCurrentUser:u,isSystemMessage:l,isDeleted:d,type:g}=e,h=n&&n.sender===i&&d3(n.timestamp,a);return l?c.jsx(k3,{content:o}):d?c.jsx(R3,{sender:i,timestamp:a,isCurrentUser:u}):g==="FILE_MESSAGE"||g==="file"?((A=e.filename)==null?void 0:A.includes("voice-note"))||e.mimeType&&e.mimeType.startsWith("audio/")||e.filename&&/\.(webm|mp3|wav|ogg|m4a)$/i.test(e.filename)?c.jsx(_3,{audioUrl:e.content,sender:e.sender,timestamp:e.timestamp,isCurrentUser:u,filename:e.filename,originalBase64Data:e.originalBase64Data,mimeType:e.mimeType}):c.jsx(T3,{message:e,isCurrentUser:u}):c.jsxs("div",{className:oe("flex items-start gap-2 mb-4",u?"flex-row-reverse":""),children:[c.jsx("div",{className:oe("w-9 h-9",h?"invisible":"mb-5"),children:!h&&c.jsx(Qd,{className:"w-9 h-9",children:c.jsx(Fd,{className:oe(u?"bg-blue-500 text-white":"bg-muted"),children:i.charAt(0).toUpperCase()})})}),c.jsxs("div",{className:oe("flex flex-col min-w-0",u?"items-end":"items-start"),style:{maxWidth:"75%"},children:[!h&&c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-sm font-medium",children:i}),c.jsx("span",{className:"text-xs text-muted-foreground",children:ao(a,"h:mm a")})]}),e.replyTo&&c.jsxs("div",{className:"mb-1 p-2 border-l-2 border-blue-500 bg-blue-50 text-xs text-gray-500 rounded max-w-full truncate",children:[c.jsx("span",{className:"font-medium",children:e.replyTo.sender}),":"," ",c.jsx("span",{className:"italic",children:e.replyTo.content==="Message deleted"?"Message deleted":e.replyTo.content.slice(0,100)+(e.replyTo.content.length>100?"...":"")})]}),c.jsxs("div",{className:oe("group flex items-center gap-2",u?"flex-row-reverse":""),children:[c.jsx("div",{className:oe("rounded-lg px-3 py-2 text-sm min-w-[5rem] whitespace-pre-wrap break-words",u?"bg-primary text-primary-foreground":"bg-muted"),style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:c.jsx(B3,{options:{target:"_blank",rel:"noopener noreferrer"},children:o})}),c.jsxs("div",{className:oe("flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",u?"mr-1 flex-row-reverse":"ml-1"),children:[c.jsx("button",{onClick:()=>navigator.clipboard.writeText(o),"aria-label":"Copy message",className:"hover:text-primary",children:c.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}),c.jsx("button",{onClick:()=>t==null?void 0:t(e),"aria-label":"Reply to message",className:"hover:text-primary",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})})}),u&&!l&&c.jsx("button",{onClick:()=>r==null?void 0:r(e),"aria-label":"Delete message",className:"hover:text-destructive",children:c.jsx(jB,{className:"w-4 h-4"})}),e.isEdited&&c.jsx("span",{className:"text-xs text-muted-foreground italic",children:"(edited)"}),u&&!e.isDeleted&&c.jsx("button",{onClick:()=>s==null?void 0:s(e.content),"aria-label":"Edit message",className:"hover:text-primary",children:c.jsx(QB,{className:"w-4 h-4"})})]})]}),c.jsx(N3,{receipt:e.receipt,isCurrentUser:u,className:"mt-1"})]})]})}const mt=[];for(let e=0;e<256;++e)mt.push((e+256).toString(16).slice(1));function P3(e,t=0){return(mt[e[t+0]]+mt[e[t+1]]+mt[e[t+2]]+mt[e[t+3]]+"-"+mt[e[t+4]]+mt[e[t+5]]+"-"+mt[e[t+6]]+mt[e[t+7]]+"-"+mt[e[t+8]]+mt[e[t+9]]+"-"+mt[e[t+10]]+mt[e[t+11]]+mt[e[t+12]]+mt[e[t+13]]+mt[e[t+14]]+mt[e[t+15]]).toLowerCase()}let Wf;const M3=new Uint8Array(16);function Q3(){if(!Wf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wf=crypto.getRandomValues.bind(crypto)}return Wf(M3)}const F3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),O0={randomUUID:F3};function co(e,t,n){var s;if(O0.randomUUID&&!e)return O0.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??Q3();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,P3(r)}const j3="modulepreload",L3=function(e){return"/"+e},U0={},Bg=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=L3(u),u in U0)return;U0[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=l?"stylesheet":j3,l||(g.as="script"),g.crossOrigin="",g.href=u,a&&g.setAttribute("nonce",a),document.head.appendChild(g),l)return new Promise((h,A)=>{g.addEventListener("load",h),g.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};function O3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KE={exports:{}};const U3={},$E=Object.freeze(Object.defineProperty({__proto__:null,default:U3},Symbol.toStringTag,{value:"Module"})),H0=pb($E);(function(e,t){var n=(function(){var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return(function(o){o=o||{};var o=typeof o<"u"?o:{},i={},a;for(a in o)o.hasOwnProperty(a)&&(i[a]=o[a]);o.arguments=[],o.thisProgram="./this.program",o.quit=(function(_,Q){throw Q}),o.preRun=[],o.postRun=[];var u=!1,l=!1,d=!1,g=!1;if(u=typeof window=="object",l=typeof importScripts=="function",d=typeof process=="object"&&typeof O3=="function"&&!u&&!l,g=!u&&!d&&!l,o.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");B(typeof o.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),B(typeof o.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),B(typeof o.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),B(typeof o.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead");var h="";function A(_){return o.locateFile?o.locateFile(_,h):h+_}if(d){h=__dirname+"/";var f,m;o.read=function(Q,G){var ie;return f||(f=H0),m||(m=H0),Q=m.normalize(Q),ie=f.readFileSync(Q),G?ie:ie.toString()},o.readBinary=function(Q){var G=o.read(Q,!0);return G.buffer||(G=new Uint8Array(G)),B(G.buffer),G},process.argv.length>1&&(o.thisProgram=process.argv[1].replace(/\\/g,"/")),o.arguments=process.argv.slice(2),process.on("uncaughtException",(function(_){if(!(_ instanceof Ml))throw _})),process.on("unhandledRejection",(function(_,Q){p("node.js exiting due to unhandled promise rejection"),process.exit(1)})),o.quit=(function(_){process.exit(_)}),o.inspect=(function(){return"[Emscripten Module object]"})}else if(g)typeof read<"u"&&(o.read=function(Q){return read(Q)}),o.readBinary=function(Q){var G;return typeof readbuffer=="function"?new Uint8Array(readbuffer(Q)):(G=read(Q,"binary"),B(typeof G=="object"),G)},typeof scriptArgs<"u"?o.arguments=scriptArgs:typeof arguments<"u"&&(o.arguments=arguments),typeof quit=="function"&&(o.quit=(function(_){quit(_)}));else if(u||l)u?document.currentScript&&(h=document.currentScript.src):h=self.location.href,r&&(h=r),h.indexOf("blob:")!==0?h=h.substr(0,h.lastIndexOf("/")+1):h="",o.read=function(Q){var G=new XMLHttpRequest;return G.open("GET",Q,!1),G.send(null),G.responseText},l&&(o.readBinary=function(Q){var G=new XMLHttpRequest;return G.open("GET",Q,!1),G.responseType="arraybuffer",G.send(null),new Uint8Array(G.response)}),o.readAsync=function(Q,G,ie){var pe=new XMLHttpRequest;pe.open("GET",Q,!0),pe.responseType="arraybuffer",pe.onload=function(){if(pe.status==200||pe.status==0&&pe.response){G(pe.response);return}ie()},pe.onerror=ie,pe.send(null)},o.setWindowTitle=(function(_){document.title=_});else throw new Error("environment detection error");var v=o.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),p=o.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||v);for(a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);i=void 0;var y=16;Tp=Rp=(function(){q("cannot use the stack before compiled code is ready to run, and has provided stack access")});function x(_){B(!Me);var Q=le;return le=le+_+15&-16,B(le<dt,"not enough memory for static allocation - increase TOTAL_MEMORY"),Q}function E(_){B(bt);var Q=Ce[bt>>2],G=Q+_+15&-16;if(Ce[bt>>2]=G,G>=dt){var ie=It();if(!ie)return Ce[bt>>2]=Q,0}return Q}function C(_,Q){Q||(Q=y);var G=_=Math.ceil(_/Q)*Q;return G}function I(_){switch(_){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(_[_.length-1]==="*")return 4;if(_[0]==="i"){var Q=parseInt(_.substr(1));return B(Q%8===0),Q/8}else return 0}}}function b(_){b.shown||(b.shown={}),b.shown[_]||(b.shown[_]=1,p(_))}var S={"f64-rem":(function(_,Q){return _%Q}),debugger:(function(){debugger})};new Array(0);var k=1024,R=!1;function B(_,Q){_||q("Assertion failed: "+Q)}function M(_,Q,G,ie){switch(G=G||"i8",G.charAt(G.length-1)==="*"&&(G="i32"),G){case"i1":ce[_>>0]=Q;break;case"i8":ce[_>>0]=Q;break;case"i16":be[_>>1]=Q;break;case"i32":Ce[_>>2]=Q;break;case"i64":tempI64=[Q>>>0,(tempDouble=Q,+H2(tempDouble)>=1?tempDouble>0?(K2(+G2(tempDouble/4294967296),4294967295)|0)>>>0:~~+z2((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],Ce[_>>2]=tempI64[0],Ce[_+4>>2]=tempI64[1];break;case"float":ye[_>>2]=Q;break;case"double":Re[_>>3]=Q;break;default:q("invalid type for setValue: "+G)}}var T=0,F=2,H=4;function O(_,Q,G,ie){var pe,Se;typeof _=="number"?(pe=!0,Se=_):(pe=!1,Se=_.length);var lt=typeof Q=="string"?Q:null,de;if(G==H?de=ie:de=[typeof kp=="function"?kp:x,Rp,x,E][G===void 0?F:G](Math.max(Se,lt?1:Q.length)),pe){var bn;for(ie=de,B((de&3)==0),bn=de+(Se&-4);ie<bn;ie+=4)Ce[ie>>2]=0;for(bn=de+Se;ie<bn;)ce[ie++>>0]=0;return de}if(lt==="i8")return _.subarray||_.slice?se.set(_,de):se.set(new Uint8Array(_),de),de;for(var Wt=0,Yt,Ql,Fl;Wt<Se;){var ef=_[Wt];if(Yt=lt||Q[Wt],Yt===0){Wt++;continue}B(Yt,"Must know what type to store in allocate!"),Yt=="i64"&&(Yt="i32"),M(de+Wt,ef,Yt),Fl!==Yt&&(Ql=I(Yt),Fl=Yt),Wt+=Ql}return de}function X(_,Q){if(Q===0||!_)return"";for(var G=0,ie,pe=0;B(_+pe<dt),ie=se[_+pe>>0],G|=ie,!(ie==0&&!Q||(pe++,Q&&pe==Q)););Q||(Q=pe);var Se="";if(G<128){for(var lt=1024,de;Q>0;)de=String.fromCharCode.apply(String,se.subarray(_,_+Math.min(Q,lt))),Se=Se?Se+de:de,_+=lt,Q-=lt;return Se}return V(_)}var N=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function D(_,Q){for(var G=Q;_[G];)++G;if(G-Q>16&&_.subarray&&N)return N.decode(_.subarray(Q,G));for(var ie,pe,Se,lt,de,bn,Wt="";;){if(ie=_[Q++],!ie)return Wt;if(!(ie&128)){Wt+=String.fromCharCode(ie);continue}if(pe=_[Q++]&63,(ie&224)==192){Wt+=String.fromCharCode((ie&31)<<6|pe);continue}if(Se=_[Q++]&63,(ie&240)==224?ie=(ie&15)<<12|pe<<6|Se:(lt=_[Q++]&63,(ie&248)==240?ie=(ie&7)<<18|pe<<12|Se<<6|lt:(de=_[Q++]&63,(ie&252)==248?ie=(ie&3)<<24|pe<<18|Se<<12|lt<<6|de:(bn=_[Q++]&63,ie=(ie&1)<<30|pe<<24|Se<<18|lt<<12|de<<6|bn))),ie<65536)Wt+=String.fromCharCode(ie);else{var Yt=ie-65536;Wt+=String.fromCharCode(55296|Yt>>10,56320|Yt&1023)}}}function V(_){return D(se,_)}function J(_,Q,G,ie){if(!(ie>0))return 0;for(var pe=G,Se=G+ie-1,lt=0;lt<_.length;++lt){var de=_.charCodeAt(lt);if(de>=55296&&de<=57343){var bn=_.charCodeAt(++lt);de=65536+((de&1023)<<10)|bn&1023}if(de<=127){if(G>=Se)break;Q[G++]=de}else if(de<=2047){if(G+1>=Se)break;Q[G++]=192|de>>6,Q[G++]=128|de&63}else if(de<=65535){if(G+2>=Se)break;Q[G++]=224|de>>12,Q[G++]=128|de>>6&63,Q[G++]=128|de&63}else if(de<=2097151){if(G+3>=Se)break;Q[G++]=240|de>>18,Q[G++]=128|de>>12&63,Q[G++]=128|de>>6&63,Q[G++]=128|de&63}else if(de<=67108863){if(G+4>=Se)break;Q[G++]=248|de>>24,Q[G++]=128|de>>18&63,Q[G++]=128|de>>12&63,Q[G++]=128|de>>6&63,Q[G++]=128|de&63}else{if(G+5>=Se)break;Q[G++]=252|de>>30,Q[G++]=128|de>>24&63,Q[G++]=128|de>>18&63,Q[G++]=128|de>>12&63,Q[G++]=128|de>>6&63,Q[G++]=128|de&63}}return Q[G]=0,G-pe}function te(_){for(var Q=0,G=0;G<_.length;++G){var ie=_.charCodeAt(G);ie>=55296&&ie<=57343&&(ie=65536+((ie&1023)<<10)|_.charCodeAt(++G)&1023),ie<=127?++Q:ie<=2047?Q+=2:ie<=65535?Q+=3:ie<=2097151?Q+=4:ie<=67108863?Q+=5:Q+=6}return Q}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function K(_){return b("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),_}function P(_){var Q=/__Z[\w\d_]+/g;return _.replace(Q,(function(G){var ie=K(G);return G===ie?G:G+" ["+ie+"]"}))}function j(){var _=new Error;if(!_.stack){try{throw new Error(0)}catch(Q){_=Q}if(!_.stack)return"(no stack trace available)"}return _.stack.toString()}function U(){var _=j();return o.extraStackTrace&&(_+=`
`+o.extraStackTrace()),P(_)}var L=65536,z=16777216;function $(_,Q){return _%Q>0&&(_+=Q-_%Q),_}var ee,ce,se,be,Ce,Be,ye,Re;function Qe(_){o.buffer=ee=_}function ne(){o.HEAP8=ce=new Int8Array(ee),o.HEAP16=be=new Int16Array(ee),o.HEAP32=Ce=new Int32Array(ee),o.HEAPU8=se=new Uint8Array(ee),o.HEAPU16=new Uint16Array(ee),o.HEAPU32=Be=new Uint32Array(ee),o.HEAPF32=ye=new Float32Array(ee),o.HEAPF64=Re=new Float64Array(ee)}var ue,le,Me,ge,Te,Ye,$t,bt;ue=le=ge=Te=Ye=$t=bt=0,Me=!1;function kr(){B((Ye&3)==0),Be[(Ye>>2)-1]=34821223,Be[(Ye>>2)-2]=2310721022}function or(){if((Be[(Ye>>2)-1]!=34821223||Be[(Ye>>2)-2]!=2310721022)&&q("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+Be[(Ye>>2)-2].toString(16)+" "+Be[(Ye>>2)-1].toString(16)),Ce[0]!==1668509029)throw"Runtime error: The application has corrupted its heap memory area (address zero)!"}function _e(_){q("Stack overflow! Attempted to allocate "+_+" bytes on the stack, but stack has only "+(Ye-Tp()+_)+" bytes available!")}function Vt(){q("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+dt+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function It(){Vt()}var Mo=o.TOTAL_STACK||5242880,dt=o.TOTAL_MEMORY||545259520;dt<Mo&&p("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+dt+"! (TOTAL_STACK="+Mo+")"),B(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!==void 0&&Int32Array.prototype.set!==void 0,"JS engine does not provide full typed array support"),o.buffer?(ee=o.buffer,B(ee.byteLength===dt,"provided buffer should be "+dt+" bytes, but it is "+ee.byteLength)):(typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(B(dt%L===0),o.wasmMemory=new WebAssembly.Memory({initial:dt/L,maximum:dt/L}),ee=o.wasmMemory.buffer):ee=new ArrayBuffer(dt),B(ee.byteLength===dt),o.buffer=ee),ne();function P2(){return dt}if(Ce[0]=1668509029,be[1]=25459,se[2]!==115||se[3]!==99)throw"Runtime error: expected the system to be little-endian!";function Dl(_){for(;_.length>0;){var Q=_.shift();if(typeof Q=="function"){Q();continue}var G=Q.func;typeof G=="number"?Q.arg===void 0?o.dynCall_v(G):o.dynCall_vi(G,Q.arg):G(Q.arg===void 0?null:Q.arg)}}var bp=[],Ip=[],M2=[],Sp=[],Fe=!1;function Q2(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)O2(o.preRun.shift());Dl(bp)}function F2(){or(),!Fe&&(Fe=!0,Dl(Ip))}function j2(){or(),Dl(M2)}function L2(){if(or(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)U2(o.postRun.shift());Dl(Sp)}function O2(_){bp.unshift(_)}function U2(_){Sp.unshift(_)}B(Math.imul&&Math.fround&&Math.clz32&&Math.trunc,"this is a legacy browser, build with LEGACY_VM_SUPPORT");var H2=Math.abs,z2=Math.ceil,G2=Math.floor,K2=Math.min,Gs=0,Ks=null,Wi=null,Yi={};function $2(_){Gs++,o.monitorRunDependencies&&o.monitorRunDependencies(Gs),B(!Yi[_]),Yi[_]=1,Ks===null&&typeof setInterval<"u"&&(Ks=setInterval((function(){if(R){clearInterval(Ks),Ks=null;return}var Q=!1;for(var G in Yi)Q||(Q=!0,p("still waiting on run dependencies:")),p("dependency: "+G);Q&&p("(end of list)")}),1e4))}function V2(_){if(Gs--,o.monitorRunDependencies&&o.monitorRunDependencies(Gs),B(Yi[_]),delete Yi[_],Gs==0&&(Ks!==null&&(clearInterval(Ks),Ks=null),Wi)){var Q=Wi;Wi=null,Q()}}o.preloadedImages={},o.preloadedAudios={};var Cn={error:(function(){q("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")}),init:(function(){Cn.error()}),createDataFile:(function(){Cn.error()}),createPreloadedFile:(function(){Cn.error()}),createLazyFile:(function(){Cn.error()}),open:(function(){Cn.error()}),mkdev:(function(){Cn.error()}),registerDevice:(function(){Cn.error()}),analyzePath:(function(){Cn.error()}),loadFilesFromDB:(function(){Cn.error()}),ErrnoError:function(){Cn.error()}};o.FS_createDataFile=Cn.createDataFile,o.FS_createPreloadedFile=Cn.createPreloadedFile;var Bp="data:application/octet-stream;base64,";function Pl(_){return String.prototype.startsWith?_.startsWith(Bp):_.indexOf(Bp)===0}function W2(){var _="argon2.wast",Q="argon2.wasm",G="argon2.temp.asm.js";Pl(_)||(_=A(_)),Pl(Q)||(Q=A(Q)),Pl(G)||(G=A(G));var ie=64*1024,pe={global:null,env:null,asm2wasm:S,parent:o},Se=null;function lt(Xe){var st=o.buffer;Xe.byteLength<st.byteLength&&p("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var Xi=new Int8Array(st),an=new Int8Array(Xe);an.set(Xi),Qe(Xe),ne()}function de(Xe){return Xe}function bn(){try{if(o.wasmBinary)return new Uint8Array(o.wasmBinary);if(o.readBinary)return o.readBinary(Q);throw"both async and sync fetching of the wasm failed"}catch(Xe){q(Xe)}}function Wt(){return!o.wasmBinary&&(u||l)&&typeof fetch=="function"?fetch(Q,{credentials:"same-origin"}).then((function(Xe){if(!Xe.ok)throw"failed to load wasm binary file at '"+Q+"'";return Xe.arrayBuffer()})).catch((function(){return bn()})):new Promise((function(Xe,st){Xe(bn())}))}function Yt(Xe,st,Xi){if(typeof WebAssembly!="object")return q("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead."),p("no native wasm support detected"),!1;if(!(o.wasmMemory instanceof WebAssembly.Memory))return p("no native wasm Memory in use"),!1;st.memory=o.wasmMemory,pe.global={NaN:NaN,Infinity:1/0},pe["global.Math"]=Math,pe.env=st;function an(ir,Ji){Se=ir.exports,Se.memory&&lt(Se.memory),o.asm=Se,o.usingWasm=!0,V2("wasm-instantiate")}if($2("wasm-instantiate"),o.instantiateWasm)try{return o.instantiateWasm(pe,an)}catch(ir){return p("Module.instantiateWasm callback failed with error: "+ir),!1}var $s=o;function Rr(ir){B(o===$s,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),$s=null,an(ir.instance,ir.module)}function Np(ir){Wt().then((function(Ji){return WebAssembly.instantiate(Ji,pe)})).then(ir).catch((function(Ji){p("failed to asynchronously prepare wasm: "+Ji),q(Ji)}))}return!o.wasmBinary&&typeof WebAssembly.instantiateStreaming=="function"&&!Pl(Q)&&typeof fetch=="function"?WebAssembly.instantiateStreaming(fetch(Q,{credentials:"same-origin"}),pe).then(Rr).catch((function(ir){p("wasm streaming compile failed: "+ir),p("falling back to ArrayBuffer instantiation"),Np(Rr)})):Np(Rr),{}}o.asmPreload=o.asm;var Ql=o.reallocBuffer,Fl=(function(Xe){var st=o.usingWasm?L:z;Xe=$(Xe,st);var Xi=o.buffer,an=Xi.byteLength;if(o.usingWasm)try{var $s=o.wasmMemory.grow((Xe-an)/ie);return $s!==-1?o.buffer=o.wasmMemory.buffer:null}catch(Rr){return console.error("Module.reallocBuffer: Attempted to grow from "+an+" bytes to "+Xe+" bytes, but got error: "+Rr),null}});o.reallocBuffer=(function(Xe){return ef==="asmjs"?Ql(Xe):Fl(Xe)});var ef="";o.asm=(function(Xe,st,Xi){if(st=st,!st.table){var an=o.wasmTableSize;an===void 0&&(an=1024);var $s=o.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?$s!==void 0?st.table=new WebAssembly.Table({initial:an,maximum:$s,element:"anyfunc"}):st.table=new WebAssembly.Table({initial:an,element:"anyfunc"}):st.table=new Array(an),o.wasmTable=st.table}st.memoryBase||(st.memoryBase=o.STATIC_BASE),st.tableBase||(st.tableBase=0);var Rr;return Rr=Yt(Xe,st),B(Rr,"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: http://kripken.github.io/emscripten-site/docs/compiling/WebAssembly.html#binaryen-methods"),Rr})}W2(),ue=k,le=ue+3424,Ip.push();var Y2=3424;o.STATIC_BASE=ue,o.STATIC_BUMP=Y2;var X2=le;le+=16,B(X2%8==0);function J2(_,Q,G){return se.set(se.subarray(Q,Q+G),_),_}function q2(){}function Z2(_){return o.___errno_location?Ce[o.___errno_location()>>2]=_:p("failed to set errno from JS"),_}bt=x(4),ge=Te=C(le),Ye=ge+Mo,$t=C(Ye),Ce[bt>>2]=$t,Me=!0,B($t<dt,"TOTAL_MEMORY not big enough for stack");function eb(_,Q,G){var ie=G>0?G:te(_)+1,pe=new Array(ie),Se=J(_,pe,0,pe.length);return Q&&(pe.length=Se),pe}o.wasmTableSize=0,o.wasmMaxTableSize=0,o.asmGlobalArg={},o.asmLibraryArg={enlargeMemory:It,getTotalMemory:P2,abortOnCannotGrowMemory:Vt,abortStackOverflow:_e,___setErrNo:Z2,_emscripten_memcpy_big:J2,_pthread_join:q2,DYNAMICTOP_PTR:bt,STACKTOP:Te,STACK_MAX:Ye};var je=o.asm(o.asmGlobalArg,o.asmLibraryArg,ee),tb=je._argon2_error_message;je._argon2_error_message=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),tb.apply(null,arguments)});var nb=je._argon2_hash;je._argon2_hash=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),nb.apply(null,arguments)});var rb=je._free;je._free=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rb.apply(null,arguments)});var sb=je._malloc;je._malloc=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),sb.apply(null,arguments)});var ob=je._sbrk;je._sbrk=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ob.apply(null,arguments)});var ib=je.establishStackSpace;je.establishStackSpace=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ib.apply(null,arguments)});var ab=je.getTempRet0;je.getTempRet0=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ab.apply(null,arguments)});var lb=je.setTempRet0;je.setTempRet0=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),lb.apply(null,arguments)});var cb=je.setThrew;je.setThrew=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),cb.apply(null,arguments)});var ub=je.stackAlloc;je.stackAlloc=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ub.apply(null,arguments)});var db=je.stackRestore;je.stackRestore=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),db.apply(null,arguments)});var fb=je.stackSave;je.stackSave=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),fb.apply(null,arguments)}),o.asm=je,o._argon2_error_message=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm._argon2_error_message.apply(null,arguments)}),o._argon2_hash=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm._argon2_hash.apply(null,arguments)}),o._free=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm._free.apply(null,arguments)});var kp=o._malloc=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm._malloc.apply(null,arguments)});o._sbrk=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm._sbrk.apply(null,arguments)}),o.establishStackSpace=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm.establishStackSpace.apply(null,arguments)}),o.getTempRet0=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm.getTempRet0.apply(null,arguments)}),o.setTempRet0=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm.setTempRet0.apply(null,arguments)}),o.setThrew=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm.setThrew.apply(null,arguments)});var Rp=o.stackAlloc=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm.stackAlloc.apply(null,arguments)});o.stackRestore=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm.stackRestore.apply(null,arguments)});var Tp=o.stackSave=(function(){return B(Fe,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),B(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o.asm.stackSave.apply(null,arguments)});o.asm=je,o.intArrayFromString=eb,o.intArrayToString||(o.intArrayToString=(function(){q("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.ccall||(o.ccall=(function(){q("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.cwrap||(o.cwrap=(function(){q("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.setValue||(o.setValue=(function(){q("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.getValue||(o.getValue=(function(){q("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.allocate=O,o.getMemory||(o.getMemory=(function(){q("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.Pointer_stringify=X,o.AsciiToString||(o.AsciiToString=(function(){q("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stringToAscii||(o.stringToAscii=(function(){q("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.UTF8ArrayToString||(o.UTF8ArrayToString=(function(){q("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.UTF8ToString||(o.UTF8ToString=(function(){q("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stringToUTF8Array||(o.stringToUTF8Array=(function(){q("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stringToUTF8||(o.stringToUTF8=(function(){q("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.lengthBytesUTF8||(o.lengthBytesUTF8=(function(){q("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.UTF16ToString||(o.UTF16ToString=(function(){q("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stringToUTF16||(o.stringToUTF16=(function(){q("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.lengthBytesUTF16||(o.lengthBytesUTF16=(function(){q("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.UTF32ToString||(o.UTF32ToString=(function(){q("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stringToUTF32||(o.stringToUTF32=(function(){q("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.lengthBytesUTF32||(o.lengthBytesUTF32=(function(){q("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.allocateUTF8||(o.allocateUTF8=(function(){q("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stackTrace||(o.stackTrace=(function(){q("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.addOnPreRun||(o.addOnPreRun=(function(){q("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.addOnInit||(o.addOnInit=(function(){q("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.addOnPreMain||(o.addOnPreMain=(function(){q("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.addOnExit||(o.addOnExit=(function(){q("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.addOnPostRun||(o.addOnPostRun=(function(){q("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.writeStringToMemory||(o.writeStringToMemory=(function(){q("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.writeArrayToMemory||(o.writeArrayToMemory=(function(){q("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.writeAsciiToMemory||(o.writeAsciiToMemory=(function(){q("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.addRunDependency||(o.addRunDependency=(function(){q("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.removeRunDependency||(o.removeRunDependency=(function(){q("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.ENV||(o.ENV=(function(){q("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.FS||(o.FS=(function(){q("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.FS_createFolder||(o.FS_createFolder=(function(){q("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.FS_createPath||(o.FS_createPath=(function(){q("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.FS_createDataFile||(o.FS_createDataFile=(function(){q("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.FS_createPreloadedFile||(o.FS_createPreloadedFile=(function(){q("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.FS_createLazyFile||(o.FS_createLazyFile=(function(){q("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.FS_createLink||(o.FS_createLink=(function(){q("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.FS_createDevice||(o.FS_createDevice=(function(){q("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.FS_unlink||(o.FS_unlink=(function(){q("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")})),o.GL||(o.GL=(function(){q("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.staticAlloc||(o.staticAlloc=(function(){q("'staticAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.dynamicAlloc||(o.dynamicAlloc=(function(){q("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.warnOnce||(o.warnOnce=(function(){q("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.loadDynamicLibrary||(o.loadDynamicLibrary=(function(){q("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.loadWebAssemblyModule||(o.loadWebAssemblyModule=(function(){q("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.getLEB||(o.getLEB=(function(){q("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.getFunctionTables||(o.getFunctionTables=(function(){q("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.alignFunctionTables||(o.alignFunctionTables=(function(){q("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.registerFunctions||(o.registerFunctions=(function(){q("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.addFunction||(o.addFunction=(function(){q("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.removeFunction||(o.removeFunction=(function(){q("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.getFuncWrapper||(o.getFuncWrapper=(function(){q("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.prettyPrint||(o.prettyPrint=(function(){q("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.makeBigInt||(o.makeBigInt=(function(){q("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.dynCall||(o.dynCall=(function(){q("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.getCompilerSetting||(o.getCompilerSetting=(function(){q("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stackSave||(o.stackSave=(function(){q("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stackRestore||(o.stackRestore=(function(){q("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.stackAlloc||(o.stackAlloc=(function(){q("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.establishStackSpace||(o.establishStackSpace=(function(){q("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.print||(o.print=(function(){q("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.printErr||(o.printErr=(function(){q("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})),o.ALLOC_NORMAL=T,o.ALLOC_STACK||Object.defineProperty(o,"ALLOC_STACK",{get:(function(){q("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})}),o.ALLOC_STATIC||Object.defineProperty(o,"ALLOC_STATIC",{get:(function(){q("'ALLOC_STATIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})}),o.ALLOC_DYNAMIC||Object.defineProperty(o,"ALLOC_DYNAMIC",{get:(function(){q("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})}),o.ALLOC_NONE||Object.defineProperty(o,"ALLOC_NONE",{get:(function(){q("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")})}),o.then=(function(_){if(o.calledRun)_(o);else{var Q=o.onRuntimeInitialized;o.onRuntimeInitialized=(function(){Q&&Q(),_(o)})}return o});function Ml(_){this.name="ExitStatus",this.message="Program terminated with exit("+_+")",this.status=_}Ml.prototype=new Error,Ml.prototype.constructor=Ml,Wi=function _(){o.calledRun||Zd(),o.calledRun||(Wi=_)};function Zd(_){if(_=_||o.arguments,Gs>0||(kr(),Q2(),Gs>0)||o.calledRun)return;function Q(){o.calledRun||(o.calledRun=!0,!R&&(F2(),j2(),o.onRuntimeInitialized&&o.onRuntimeInitialized(),B(!o._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),L2()))}o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),Q()}),1)):Q(),or()}o.run=Zd;var _p=[];function q(_){o.onAbort&&o.onAbort(_),_!==void 0?(v(_),p(_),_=JSON.stringify(_)):_="",R=!0;var Q="",G="abort("+_+") at "+U()+Q;throw _p&&_p.forEach((function(ie){G=ie(G,_)})),G}if(o.abort=q,o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return o.noExitRuntime=!0,Zd(),o})})();e.exports=n})(KE);var H3=KE.exports,Od={};Od.byteLength=K3;Od.toByteArray=V3;Od.fromByteArray=X3;var Ar=[],kn=[],z3=typeof Uint8Array<"u"?Uint8Array:Array,Yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ho=0,G3=Yf.length;Ho<G3;++Ho)Ar[Ho]=Yf[Ho],kn[Yf.charCodeAt(Ho)]=Ho;kn[45]=62;kn[95]=63;function VE(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function K3(e){var t=VE(e),n=t[0],r=t[1];return(n+r)*3/4-r}function $3(e,t,n){return(t+n)*3/4-n}function V3(e){for(var t,n=VE(e),r=n[0],s=n[1],o=new z3($3(e,r,s)),i=0,a=s>0?r-4:r,u=0;u<a;u+=4)t=kn[e.charCodeAt(u)]<<18|kn[e.charCodeAt(u+1)]<<12|kn[e.charCodeAt(u+2)]<<6|kn[e.charCodeAt(u+3)],o[i++]=t>>16&255,o[i++]=t>>8&255,o[i++]=t&255;return s===2&&(t=kn[e.charCodeAt(u)]<<2|kn[e.charCodeAt(u+1)]>>4,o[i++]=t&255),s===1&&(t=kn[e.charCodeAt(u)]<<10|kn[e.charCodeAt(u+1)]<<4|kn[e.charCodeAt(u+2)]>>2,o[i++]=t>>8&255,o[i++]=t&255),o}function W3(e){return Ar[e>>18&63]+Ar[e>>12&63]+Ar[e>>6&63]+Ar[e&63]}function Y3(e,t,n){for(var r,s=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),s.push(W3(r));return s.join("")}function X3(e){for(var t,n=e.length,r=n%3,s=[],o=16383,i=0,a=n-r;i<a;i+=o)s.push(Y3(e,i,i+o>a?a:i+o));return r===1?(t=e[n-1],s.push(Ar[t>>2]+Ar[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],s.push(Ar[t>>10]+Ar[t>>4&63]+Ar[t<<2&63]+"=")),s.join("")}var J3=Od;let q3="AGFzbQEAAAABYQ5gAAF/YAF/AGADf39/AX9gAn9/AX9gAX8Bf2ACf38AYAR/f39/AX9gAn9+AGAGf39/f39/AX9gAn5/AX5gDX9/f39/f39/f39/f38Bf2ADf39/AGAEf39/fwBgAn5+AX4C7QELA2VudgZtZW1vcnkCAYBB//8BA2Vudg5EWU5BTUlDVE9QX1BUUgN/AANlbnYIU1RBQ0tUT1ADfwADZW52CVNUQUNLX01BWAN/AANlbnYNZW5sYXJnZU1lbW9yeQAAA2Vudg5nZXRUb3RhbE1lbW9yeQAAA2VudhdhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeQAAA2VudhJhYm9ydFN0YWNrT3ZlcmZsb3cAAQNlbnYLX19fc2V0RXJyTm8AAQNlbnYWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwACA2Vudg1fcHRocmVhZF9qb2luAAMDOzoJDQIFBQIEAQIEDAMEBQUFAgEFBgUHAwQLBQQGBQQFCAEBAAMBBgMLBQUEAQQGBQUFBgQKAwMBBgAEBh8GfwEjAAt/ASMBC38BIwILfwFBAAt/AUEAC38BQQALB6cBDBVfYXJnb24yX2Vycm9yX21lc3NhZ2UAOQxfYXJnb24yX2hhc2gAOgVfZnJlZQAOB19tYWxsb2MAEwVfc2JyawANE2VzdGFibGlzaFN0YWNrU3BhY2UANwtnZXRUZW1wUmV0MAApC3NldFRlbXBSZXQwACsIc2V0VGhyZXcALwpzdGFja0FsbG9jAEAMc3RhY2tSZXN0b3JlAD0Jc3RhY2tTYXZlAD8K+Z4BOhMAIABBwAAgAWuthiAAIAGtiIQLHgAgASAAfCAAQgGGQv7///8fgyABQv////8Pg358C4ACAQV/IAIEfyAARSABRXIEf0F/BSAAKQNQQgBRBH8gAEHgAGogAEHgAWoiBSgCACIDIAJqIgdBgAFLBH8gAEHgAGogA2ogAUGAASADayIGEAwaIABCgAEQHCAAIABB4ABqEBsgBUEANgIAIAEgBmohBCACIAZrIgJBgAFLBH8gB0H/fWpBgH9xIgZBgAJqIANrIQMDQCAAQoABEBwgACAEEBsgBEGAAWohBCACQYB/aiICQYABSw0ACyAHQYB+aiAGayECIAEgA2ohASAFKAIABSAEIQFBAAsFIAMLIgRqIAEgAhAMGiAFIAUoAgAgAmo2AgBBAAVBfwsLBUEACyIACw0AIAAEQCAAIAEQGQsLCQAgACABNgAAC8MDAQN/IAJBgMAATgRAIAAgASACEAUPCyAAIQQgACACaiEDIABBA3EgAUEDcUYEQANAIABBA3EEQCACRQRAIAQPCyAAIAEsAAA6AAAgAEEBaiEAIAFBAWohASACQQFrIQIMAQsLIANBfHEiAkFAaiEFA0AgACAFTARAIAAgASgCADYCACAAIAEoAgQ2AgQgACABKAIINgIIIAAgASgCDDYCDCAAIAEoAhA2AhAgACABKAIUNgIUIAAgASgCGDYCGCAAIAEoAhw2AhwgACABKAIgNgIgIAAgASgCJDYCJCAAIAEoAig2AiggACABKAIsNgIsIAAgASgCMDYCMCAAIAEoAjQ2AjQgACABKAI4NgI4IAAgASgCPDYCPCAAQUBrIQAgAUFAayEBDAELCwNAIAAgAkgEQCAAIAEoAgA2AgAgAEEEaiEAIAFBBGohAQwBCwsFIANBBGshAgNAIAAgAkgEQCAAIAEsAAA6AAAgACABLAABOgABIAAgASwAAjoAAiAAIAEsAAM6AAMgAEEEaiEAIAFBBGohAQwBCwsLA0AgACADSARAIAAgASwAADoAACAAQQFqIQAgAUEBaiEBDAELCyAEC1EBAX8gAEEASiMDKAIAIgEgAGoiACABSHEgAEEASHIEQBACGkEMEARBfw8LIwMgADYCACAAEAFKBEAQAEUEQCMDIAE2AgBBDBAEQX8PCwsgAQu+DQEIfyAARQRADwtB8BYoAgAhBCAAQXhqIgIgAEF8aigCACIDQXhxIgBqIQUCfyADQQFxBH8gAgUgAigCACEBIANBA3FFBEAPCyACIAFrIgIgBEkEQA8LIAEgAGohAEH0FigCACACRgRAIAIgBUEEaiIBKAIAIgNBA3FBA0cNAhpB6BYgADYCACABIANBfnE2AgAgAiAAQQFyNgIEIAIgAGogADYCAA8LIAFBA3YhBCABQYACSQRAIAIoAgwiASACKAIIIgNGBEBB4BZB4BYoAgBBASAEdEF/c3E2AgAFIAMgATYCDCABIAM2AggLIAIMAgsgAigCGCEHAkAgAigCDCIBIAJGBEAgAkEQaiIDQQRqIgQoAgAiAQRAIAQhAwUgAygCACIBRQRAQQAhAQwDCwsDQAJAIAFBFGoiBCgCACIGRQRAIAFBEGoiBCgCACIGRQ0BCyAEIQMgBiEBDAELCyADQQA2AgAFIAIoAggiAyABNgIMIAEgAzYCCAsLIAcEfyACKAIcIgNBAnRBkBlqIgQoAgAgAkYEQCAEIAE2AgAgAUUEQEHkFkHkFigCAEEBIAN0QX9zcTYCACACDAQLBSAHQRBqIgMgB0EUaiADKAIAIAJGGyABNgIAIAIgAUUNAxoLIAEgBzYCGCACQRBqIgQoAgAiAwRAIAEgAzYCECADIAE2AhgLIAQoAgQiAwRAIAEgAzYCFCADIAE2AhgLIAIFIAILCwsiByAFTwRADwsgBUEEaiIDKAIAIgFBAXFFBEAPCyABQQJxBEAgAyABQX5xNgIAIAIgAEEBcjYCBCAHIABqIAA2AgAgACEDBUH4FigCACAFRgRAQewWQewWKAIAIABqIgA2AgBB+BYgAjYCACACIABBAXI2AgQgAkH0FigCAEcEQA8LQfQWQQA2AgBB6BZBADYCAA8LQfQWKAIAIAVGBEBB6BZB6BYoAgAgAGoiADYCAEH0FiAHNgIAIAIgAEEBcjYCBCAHIABqIAA2AgAPCyABQXhxIABqIQMgAUEDdiEEAkAgAUGAAkkEQCAFKAIMIgAgBSgCCCIBRgRAQeAWQeAWKAIAQQEgBHRBf3NxNgIABSABIAA2AgwgACABNgIICwUgBSgCGCEIAkAgBSgCDCIAIAVGBEAgBUEQaiIBQQRqIgQoAgAiAARAIAQhAQUgASgCACIARQRAQQAhAAwDCwsDQAJAIABBFGoiBCgCACIGRQRAIABBEGoiBCgCACIGRQ0BCyAEIQEgBiEADAELCyABQQA2AgAFIAUoAggiASAANgIMIAAgATYCCAsLIAgEQCAFKAIcIgFBAnRBkBlqIgQoAgAgBUYEQCAEIAA2AgAgAEUEQEHkFkHkFigCAEEBIAF0QX9zcTYCAAwECwUgCEEQaiIBIAhBFGogASgCACAFRhsgADYCACAARQ0DCyAAIAg2AhggBUEQaiIEKAIAIgEEQCAAIAE2AhAgASAANgIYCyAEKAIEIgEEQCAAIAE2AhQgASAANgIYCwsLCyACIANBAXI2AgQgByADaiADNgIAIAJB9BYoAgBGBEBB6BYgAzYCAA8LCyADQQN2IQEgA0GAAkkEQCABQQN0QYgXaiEAQeAWKAIAIgNBASABdCIBcQR/IABBCGoiAygCAAVB4BYgAyABcjYCACAAQQhqIQMgAAshASADIAI2AgAgASACNgIMIAIgATYCCCACIAA2AgwPCyADQQh2IgAEfyADQf///wdLBH9BHwUgA0EOIAAgAEGA/j9qQRB2QQhxIgB0IgFBgOAfakEQdkEEcSIEIAByIAEgBHQiAEGAgA9qQRB2QQJxIgFyayAAIAF0QQ92aiIAQQdqdkEBcSAAQQF0cgsFQQALIgFBAnRBkBlqIQAgAiABNgIcIAJBADYCFCACQQA2AhACQEHkFigCACIEQQEgAXQiBnEEQAJAIAAoAgAiACgCBEF4cSADRgR/IAAFIANBAEEZIAFBAXZrIAFBH0YbdCEEA0AgAEEQaiAEQR92QQJ0aiIGKAIAIgEEQCAEQQF0IQQgASgCBEF4cSADRg0DIAEhAAwBCwsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAMLIQELIAFBCGoiACgCACIDIAI2AgwgACACNgIAIAIgAzYCCCACIAE2AgwgAkEANgIYBUHkFiAEIAZyNgIAIAAgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAsLQYAXQYAXKAIAQX9qIgA2AgAgAARADwtBqBohAANAIAAoAgAiAkEIaiEAIAINAAtBgBdBfzYCAAuYAgEEfyAAIAJqIQQgAUH/AXEhASACQcMATgRAA0AgAEEDcQRAIAAgAToAACAAQQFqIQAMAQsLIARBfHEiBUFAaiEGIAEgAUEIdHIgAUEQdHIgAUEYdHIhAwNAIAAgBkwEQCAAIAM2AgAgACADNgIEIAAgAzYCCCAAIAM2AgwgACADNgIQIAAgAzYCFCAAIAM2AhggACADNgIcIAAgAzYCICAAIAM2AiQgACADNgIoIAAgAzYCLCAAIAM2AjAgACADNgI0IAAgAzYCOCAAIAM2AjwgAEFAayEADAELCwNAIAAgBUgEQCAAIAM2AgAgAEEEaiEADAELCwsDQCAAIARIBEAgACABOgAAIABBAWohAAwBCwsgBCACawuBAQEDfwJAIAAiAkEDcQRAIAAhAQNAIAEsAABFDQIgAUEBaiIBIgBBA3ENAAsgASEACwNAIABBBGohASAAKAIAIgNBgIGChHhxQYCBgoR4cyADQf/9+3dqcUUEQCABIQAMAQsLIANB/wFxBEADQCAAQQFqIgAsAAANAAsLCyAAIAJrC+UOAhF/EX4jBCEJIwRBgBBqJAQjBCMFTgRAQYAQEAMLIAlBgAhqIgQgARAWIAQgABAVIAkiASAEEBYgAwRAIAEgAhAVC0EAIQADQCAEIABBBHQiA0EDdGoiCikDACAEIANBBHJBA3RqIgUpAwAiHhAIIRggBCADQQxyQQN0aiIGKQMAIBiFQSAQByEVIAYgGCAEIANBCHJBA3RqIgcpAwAgFRAIIhkgHoVBGBAHIh4QCCIaIBWFQRAQByIYNwMAIAcgGSAYEAgiFTcDACAFIBUgHoVBPxAHIh43AwAgBCADQQFyQQN0aiILKQMAIAQgA0EFckEDdGoiDCkDACIWEAghGSAEIANBDXJBA3RqIg0pAwAgGYVBIBAHIRsgGSAEIANBCXJBA3RqIggpAwAgGxAIIhwgFoVBGBAHIhYQCCIjIBuFQRAQByEZIAggHCAZEAgiGzcDACAbIBaFQT8QByEWIAQgA0ECckEDdGoiDikDACAEIANBBnJBA3RqIg8pAwAiFxAIIRwgBCADQQ5yQQN0aiIQKQMAIByFQSAQByEfIBwgBCADQQpyQQN0aiIRKQMAIB8QCCIdIBeFQRgQByIXEAgiJCAfhUEQEAchHCAdIBwQCCIgIBeFQT8QByEfIAQgA0EDckEDdGoiEikDACAEIANBB3JBA3RqIhMpAwAiIRAIIRcgBCADQQ9yQQN0aiIUKQMAIBeFQSAQByEdIBcgBCADQQtyQQN0aiIDKQMAIB0QCCIiICGFQRgQByIhEAgiJSAdhUEQEAchFyAiIBcQCCIiICGFQT8QByEdICAgGiAWEAgiGiAXhUEgEAciFxAIIiAgFoVBGBAHIRYgCiAaIBYQCCIaNwMAIBQgGiAXhUEQEAciFzcDACARICAgFxAIIhc3AwAgDCAXIBaFQT8QBzcDACAiICMgHxAIIhYgGIVBIBAHIhcQCCIaIB+FQRgQByEYIAsgFiAYEAgiFjcDACAGIBYgF4VBEBAHIhY3AwAgAyAaIBYQCCIWNwMAIA8gFiAYhUE/EAc3AwAgFSAkIB0QCCIVIBmFQSAQByIZEAgiFiAdhUEYEAchGCAOIBUgGBAIIhU3AwAgDSAVIBmFQRAQByIVNwMAIAcgFiAVEAgiFTcDACATIBUgGIVBPxAHNwMAIBsgJSAeEAgiFSAchUEgEAciGRAIIhsgHoVBGBAHIRggEiAVIBgQCCIVNwMAIBAgFSAZhUEQEAciFTcDACAIIBsgFRAIIhU3AwAgBSAVIBiFQT8QBzcDACAAQQFqIgBBCEcNAAtBACEAA0AgBCAAQQF0IgNBA3RqIgopAwAgBCADQSBqQQN0aiIFKQMAIh4QCCEYIAQgA0HgAGpBA3RqIgYpAwAgGIVBIBAHIRUgBiAYIAQgA0FAa0EDdGoiBykDACAVEAgiGSAehUEYEAciHhAIIhogFYVBEBAHIhg3AwAgByAZIBgQCCIVNwMAIAUgFSAehUE/EAciHjcDACAEIANBAXJBA3RqIgspAwAgBCADQSFqQQN0aiIMKQMAIhYQCCEZIAQgA0HhAGpBA3RqIg0pAwAgGYVBIBAHIRsgGSAEIANBwQBqQQN0aiIIKQMAIBsQCCIcIBaFQRgQByIWEAgiIyAbhUEQEAchGSAIIBwgGRAIIhs3AwAgGyAWhUE/EAchFiAEIANBEGpBA3RqIg4pAwAgBCADQTBqQQN0aiIPKQMAIhcQCCEcIAQgA0HwAGpBA3RqIhApAwAgHIVBIBAHIR8gHCAEIANB0ABqQQN0aiIRKQMAIB8QCCIdIBeFQRgQByIXEAgiJCAfhUEQEAchHCAdIBwQCCIgIBeFQT8QByEfIAQgA0ERakEDdGoiEikDACAEIANBMWpBA3RqIhMpAwAiIRAIIRcgBCADQfEAakEDdGoiFCkDACAXhUEgEAchHSAXIAQgA0HRAGpBA3RqIgMpAwAgHRAIIiIgIYVBGBAHIiEQCCIlIB2FQRAQByEXICIgFxAIIiIgIYVBPxAHIR0gICAaIBYQCCIaIBeFQSAQByIXEAgiICAWhUEYEAchFiAKIBogFhAIIho3AwAgFCAaIBeFQRAQByIXNwMAIBEgICAXEAgiFzcDACAMIBcgFoVBPxAHNwMAICIgIyAfEAgiFiAYhUEgEAciFxAIIhogH4VBGBAHIRggCyAWIBgQCCIWNwMAIAYgFiAXhUEQEAciFjcDACADIBogFhAIIhY3AwAgDyAWIBiFQT8QBzcDACAVICQgHRAIIhUgGYVBIBAHIhkQCCIWIB2FQRgQByEYIA4gFSAYEAgiFTcDACANIBUgGYVBEBAHIhU3AwAgByAWIBUQCCIVNwMAIBMgFSAYhUE/EAc3AwAgGyAlIB4QCCIVIByFQSAQByIZEAgiGyAehUEYEAchGCASIBUgGBAIIhU3AwAgECAVIBmFQRAQByIVNwMAIAggGyAVEAgiFTcDACAFIBUgGIVBPxAHNwMAIABBAWoiAEEIRw0ACyACIAEQFiACIAQQFSAJJAQLoQEBA38jBCEDIwRBQGskBCMEIwVOBEBBwAAQAwsgAyECIAAEfyABQX9qQT9LBH8gABAYQX8FIAIgAToAACACQQA6AAEgAkEBOgACIAJBAToAAyACQQRqIgFCADcAACABQgA3AAggAUIANwAQIAFCADcAGCABQgA3ACAgAUIANwAoIAFCADcAMCABQQA2ADggACACEB0LBUF/CyEEIAMkBCAEC8Q0AQ1/AkACQAJAIwQhCiMEQRBqJAQjBCMFTgRAQRAQAwsgCiEJAn8gAEH1AUkEf0HgFigCACIFQRAgAEELakF4cSAAQQtJGyICQQN2IgB2IgFBA3EEQCABQQFxQQFzIABqIgBBA3RBiBdqIgFBCGoiBCgCACICQQhqIgYoAgAiAyABRgRAQeAWIAVBASAAdEF/c3E2AgAFIAMgATYCDCAEIAM2AgALIAIgAEEDdCIAQQNyNgIEIAIgAGpBBGoiACAAKAIAQQFyNgIAIAokBCAGDwsgAkHoFigCACIHSwR/IAEEQCABIAB0QQIgAHQiAEEAIABrcnEiAEEAIABrcUF/aiIBQQx2QRBxIQAgASAAdiIBQQV2QQhxIgMgAHIgASADdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmoiA0EDdEGIF2oiAEEIaiIGKAIAIgFBCGoiCCgCACIEIABGBEBB4BYgBUEBIAN0QX9zcSIANgIABSAEIAA2AgwgBiAENgIAIAUhAAsgASACQQNyNgIEIAEgAmoiBCADQQN0IgMgAmsiBUEBcjYCBCABIANqIAU2AgAgBwRAQfQWKAIAIQMgB0EDdiICQQN0QYgXaiEBIABBASACdCICcQR/IAFBCGoiAigCAAVB4BYgACACcjYCACABQQhqIQIgAQshACACIAM2AgAgACADNgIMIAMgADYCCCADIAE2AgwLQegWIAU2AgBB9BYgBDYCACAKJAQgCA8LQeQWKAIAIgsEfyALQQAgC2txQX9qIgFBDHZBEHEhACABIAB2IgFBBXZBCHEiAyAAciABIAN2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2akECdEGQGWooAgAiAyEBIAMoAgRBeHEgAmshCANAAkAgASgCECIARQRAIAEoAhQiAEUNAQsgACIBIAMgASgCBEF4cSACayIAIAhJIgQbIQMgACAIIAQbIQgMAQsLIAMgAmoiDCADSwR/IAMoAhghCQJAIAMoAgwiACADRgRAIANBFGoiASgCACIARQRAIANBEGoiASgCACIARQRAQQAhAAwDCwsDQAJAIABBFGoiBCgCACIGRQRAIABBEGoiBCgCACIGRQ0BCyAEIQEgBiEADAELCyABQQA2AgAFIAMoAggiASAANgIMIAAgATYCCAsLAkAgCQRAIAMgAygCHCIBQQJ0QZAZaiIEKAIARgRAIAQgADYCACAARQRAQeQWIAtBASABdEF/c3E2AgAMAwsFIAlBEGoiASAJQRRqIAEoAgAgA0YbIAA2AgAgAEUNAgsgACAJNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIAMoAhQiAQRAIAAgATYCFCABIAA2AhgLCwsgCEEQSQRAIAMgCCACaiIAQQNyNgIEIAMgAGpBBGoiACAAKAIAQQFyNgIABSADIAJBA3I2AgQgDCAIQQFyNgIEIAwgCGogCDYCACAHBEBB9BYoAgAhBCAHQQN2IgFBA3RBiBdqIQBBASABdCIBIAVxBH8gAEEIaiICKAIABUHgFiABIAVyNgIAIABBCGohAiAACyEBIAIgBDYCACABIAQ2AgwgBCABNgIIIAQgADYCDAtB6BYgCDYCAEH0FiAMNgIACyAKJAQgA0EIag8FIAILBSACCwUgAgsFIABBv39LBH9BfwUgAEELaiIAQXhxIQFB5BYoAgAiBQR/IABBCHYiAAR/IAFB////B0sEf0EfBSABQQ4gACAAQYD+P2pBEHZBCHEiAHQiAkGA4B9qQRB2QQRxIgMgAHIgAiADdCIAQYCAD2pBEHZBAnEiAnJrIAAgAnRBD3ZqIgBBB2p2QQFxIABBAXRyCwVBAAshB0EAIAFrIQMCQAJAIAdBAnRBkBlqKAIAIgAEf0EAIQIgAUEAQRkgB0EBdmsgB0EfRht0IQYDQCAAKAIEQXhxIAFrIgggA0kEQCAIBH8gCCEDIAAFIAAhAkEAIQMMBAshAgsgBCAAKAIUIgQgBEUgBCAAQRBqIAZBH3ZBAnRqKAIAIgBGchshBCAGQQF0IQYgAA0ACyACBUEACyEAIAQgAHJFBEAgAUECIAd0IgBBACAAa3IgBXEiAEUNBhogAEEAIABrcUF/aiIEQQx2QRBxIQJBACEAIAQgAnYiBEEFdkEIcSIGIAJyIAQgBnYiAkECdkEEcSIEciACIAR2IgJBAXZBAnEiBHIgAiAEdiICQQF2QQFxIgRyIAIgBHZqQQJ0QZAZaigCACEECyAEBH8gACECIAQhAAwBBSAACyEEDAELIAIhBCADIQIDQAJ/IAAoAgQhDSAAKAIQIgNFBEAgACgCFCEDCyANC0F4cSABayIIIAJJIQYgCCACIAYbIQIgACAEIAYbIQQgAwR/IAMhAAwBBSACCyEDCwsgBAR/IANB6BYoAgAgAWtJBH8gBCABaiIHIARLBH8gBCgCGCEJAkAgBCgCDCIAIARGBEAgBEEUaiICKAIAIgBFBEAgBEEQaiICKAIAIgBFBEBBACEADAMLCwNAAkAgAEEUaiIGKAIAIghFBEAgAEEQaiIGKAIAIghFDQELIAYhAiAIIQAMAQsLIAJBADYCAAUgBCgCCCICIAA2AgwgACACNgIICwsCQCAJBEAgBCAEKAIcIgJBAnRBkBlqIgYoAgBGBEAgBiAANgIAIABFBEBB5BYgBUEBIAJ0QX9zcSIANgIADAMLBSAJQRBqIgIgCUEUaiACKAIAIARGGyAANgIAIABFBEAgBSEADAMLCyAAIAk2AhggBCgCECICBEAgACACNgIQIAIgADYCGAsgBCgCFCICBEAgACACNgIUIAIgADYCGAsLIAUhAAsCQCADQRBJBEAgBCADIAFqIgBBA3I2AgQgBCAAakEEaiIAIAAoAgBBAXI2AgAFIAQgAUEDcjYCBCAHIANBAXI2AgQgByADaiADNgIAIANBA3YhASADQYACSQRAIAFBA3RBiBdqIQBB4BYoAgAiAkEBIAF0IgFxBH8gAEEIaiICKAIABUHgFiACIAFyNgIAIABBCGohAiAACyEBIAIgBzYCACABIAc2AgwgByABNgIIIAcgADYCDAwCCyADQQh2IgEEfyADQf///wdLBH9BHwUgA0EOIAEgAUGA/j9qQRB2QQhxIgF0IgJBgOAfakEQdkEEcSIFIAFyIAIgBXQiAUGAgA9qQRB2QQJxIgJyayABIAJ0QQ92aiIBQQdqdkEBcSABQQF0cgsFQQALIgFBAnRBkBlqIQIgByABNgIcIAdBEGoiBUEANgIEIAVBADYCACAAQQEgAXQiBXFFBEBB5BYgACAFcjYCACACIAc2AgAgByACNgIYIAcgBzYCDCAHIAc2AggMAgsCQCACKAIAIgAoAgRBeHEgA0YEfyAABSADQQBBGSABQQF2ayABQR9GG3QhAgNAIABBEGogAkEfdkECdGoiBSgCACIBBEAgAkEBdCECIAEoAgRBeHEgA0YNAyABIQAMAQsLIAUgBzYCACAHIAA2AhggByAHNgIMIAcgBzYCCAwDCyEBCyABQQhqIgAoAgAiAiAHNgIMIAAgBzYCACAHIAI2AgggByABNgIMIAdBADYCGAsLIAokBCAEQQhqDwUgAQsFIAELBSABCwUgAQsLCwshAEHoFigCACICIABPBEBB9BYoAgAhASACIABrIgNBD0sEQEH0FiABIABqIgU2AgBB6BYgAzYCACAFIANBAXI2AgQgASACaiADNgIAIAEgAEEDcjYCBAVB6BZBADYCAEH0FkEANgIAIAEgAkEDcjYCBCABIAJqQQRqIgAgACgCAEEBcjYCAAsMAgtB7BYoAgAiAiAASwRAQewWIAIgAGsiAjYCAAwBC0G4GigCAAR/QcAaKAIABUHAGkGAIDYCAEG8GkGAIDYCAEHEGkF/NgIAQcgaQX82AgBBzBpBADYCAEGcGkEANgIAQbgaIAlBcHFB2KrVqgVzNgIAQYAgCyIBIABBL2oiBGoiBkEAIAFrIghxIgUgAE0EQAwDC0GYGigCACIBBEBBkBooAgAiAyAFaiIJIANNIAkgAUtyBEAMBAsLIABBMGohCQJAAkBBnBooAgBBBHEEQEEAIQIFAkACQAJAQfgWKAIAIgFFDQBBoBohAwNAAkAgAygCACIHIAFNBEAgByADKAIEaiABSw0BCyADKAIIIgMNAQwCCwsgBiACayAIcSICQf////8HSQRAIAIQDSIBIAMoAgAgAygCBGpGBEAgAUF/Rw0GBQwDCwVBACECCwwCC0EAEA0iAUF/RgR/QQAFQbwaKAIAIgJBf2oiAyABakEAIAJrcSABa0EAIAMgAXEbIAVqIgJBkBooAgAiBmohAyACIABLIAJB/////wdJcQR/QZgaKAIAIggEQCADIAZNIAMgCEtyBEBBACECDAULCyACEA0iAyABRg0FIAMhAQwCBUEACwshAgwBCyAJIAJLIAJB/////wdJIAFBf0dxcUUEQCABQX9GBEBBACECDAIFDAQLAAsgBCACa0HAGigCACIDakEAIANrcSIDQf////8HTw0CQQAgAmshBCADEA1Bf0YEfyAEEA0aQQAFIAMgAmohAgwDCyECC0GcGkGcGigCAEEEcjYCAAsgBUH/////B0kEQCAFEA0hAUEAEA0iAyABayIEIABBKGpLIQUgBCACIAUbIQIgAUF/RiAFQQFzciABIANJIAFBf0cgA0F/R3FxQQFzckUNAQsMAQtBkBpBkBooAgAgAmoiAzYCACADQZQaKAIASwRAQZQaIAM2AgALAkBB+BYoAgAiBQRAQaAaIQMCQAJAA0AgASADKAIAIgQgAygCBCIGakYNASADKAIIIgMNAAsMAQsgA0EEaiEIIAMoAgxBCHFFBEAgASAFSyAEIAVNcQRAIAggBiACajYCACAFQQAgBUEIaiIBa0EHcUEAIAFBB3EbIgNqIQFB7BYoAgAgAmoiBCADayECQfgWIAE2AgBB7BYgAjYCACABIAJBAXI2AgQgBSAEakEoNgIEQfwWQcgaKAIANgIADAQLCwsgAUHwFigCAEkEQEHwFiABNgIACyABIAJqIQRBoBohAwJAAkADQCADKAIAIARGDQEgAygCCCIDDQALDAELIAMoAgxBCHFFBEAgAyABNgIAIANBBGoiAyADKAIAIAJqNgIAIAFBACABQQhqIgFrQQdxQQAgAUEHcRtqIgkgAGohBiAEQQAgBEEIaiIBa0EHcUEAIAFBB3EbaiICIAlrIABrIQMgCSAAQQNyNgIEAkAgBSACRgRAQewWQewWKAIAIANqIgA2AgBB+BYgBjYCACAGIABBAXI2AgQFQfQWKAIAIAJGBEBB6BZB6BYoAgAgA2oiADYCAEH0FiAGNgIAIAYgAEEBcjYCBCAGIABqIAA2AgAMAgsgAigCBCIAQQNxQQFGBEAgAEF4cSEHIABBA3YhBQJAIABBgAJJBEAgAigCDCIAIAIoAggiAUYEQEHgFkHgFigCAEEBIAV0QX9zcTYCAAUgASAANgIMIAAgATYCCAsFIAIoAhghCAJAIAIoAgwiACACRgRAIAJBEGoiAUEEaiIFKAIAIgAEQCAFIQEFIAEoAgAiAEUEQEEAIQAMAwsLA0ACQCAAQRRqIgUoAgAiBEUEQCAAQRBqIgUoAgAiBEUNAQsgBSEBIAQhAAwBCwsgAUEANgIABSACKAIIIgEgADYCDCAAIAE2AggLCyAIRQ0BAkAgAigCHCIBQQJ0QZAZaiIFKAIAIAJGBEAgBSAANgIAIAANAUHkFkHkFigCAEEBIAF0QX9zcTYCAAwDBSAIQRBqIgEgCEEUaiABKAIAIAJGGyAANgIAIABFDQMLCyAAIAg2AhggAkEQaiIFKAIAIgEEQCAAIAE2AhAgASAANgIYCyAFKAIEIgFFDQEgACABNgIUIAEgADYCGAsLIAIgB2ohAiAHIANqIQMLIAJBBGoiACAAKAIAQX5xNgIAIAYgA0EBcjYCBCAGIANqIAM2AgAgA0EDdiEBIANBgAJJBEAgAUEDdEGIF2ohAEHgFigCACICQQEgAXQiAXEEfyAAQQhqIgIoAgAFQeAWIAIgAXI2AgAgAEEIaiECIAALIQEgAiAGNgIAIAEgBjYCDCAGIAE2AgggBiAANgIMDAILAn8gA0EIdiIABH9BHyADQf///wdLDQEaIANBDiAAIABBgP4/akEQdkEIcSIAdCIBQYDgH2pBEHZBBHEiAiAAciABIAJ0IgBBgIAPakEQdkECcSIBcmsgACABdEEPdmoiAEEHanZBAXEgAEEBdHIFQQALCyIBQQJ0QZAZaiEAIAYgATYCHCAGQRBqIgJBADYCBCACQQA2AgBB5BYoAgAiAkEBIAF0IgVxRQRAQeQWIAIgBXI2AgAgACAGNgIAIAYgADYCGCAGIAY2AgwgBiAGNgIIDAILAkAgACgCACIAKAIEQXhxIANGBH8gAAUgA0EAQRkgAUEBdmsgAUEfRht0IQIDQCAAQRBqIAJBH3ZBAnRqIgUoAgAiAQRAIAJBAXQhAiABKAIEQXhxIANGDQMgASEADAELCyAFIAY2AgAgBiAANgIYIAYgBjYCDCAGIAY2AggMAwshAQsgAUEIaiIAKAIAIgIgBjYCDCAAIAY2AgAgBiACNgIIIAYgATYCDCAGQQA2AhgLCyAKJAQgCUEIag8LC0GgGiEDA0ACQCADKAIAIgQgBU0EQCAEIAMoAgRqIgYgBUsNAQsgAygCCCEDDAELCyAGQVFqIgRBCGohAyAFIARBACADa0EHcUEAIANBB3EbaiIDIAMgBUEQaiIJSRsiA0EIaiEEQfgWIAFBACABQQhqIghrQQdxQQAgCEEHcRsiCGoiBzYCAEHsFiACQVhqIgsgCGsiCDYCACAHIAhBAXI2AgQgASALakEoNgIEQfwWQcgaKAIANgIAIANBBGoiCEEbNgIAIARBoBopAgA3AgAgBEGoGikCADcCCEGgGiABNgIAQaQaIAI2AgBBrBpBADYCAEGoGiAENgIAIANBGGohAQNAIAFBBGoiAkEHNgIAIAFBCGogBkkEQCACIQEMAQsLIAMgBUcEQCAIIAgoAgBBfnE2AgAgBSADIAVrIgRBAXI2AgQgAyAENgIAIARBA3YhAiAEQYACSQRAIAJBA3RBiBdqIQFB4BYoAgAiA0EBIAJ0IgJxBH8gAUEIaiIDKAIABUHgFiADIAJyNgIAIAFBCGohAyABCyECIAMgBTYCACACIAU2AgwgBSACNgIIIAUgATYCDAwDCyAEQQh2IgEEfyAEQf///wdLBH9BHwUgBEEOIAEgAUGA/j9qQRB2QQhxIgF0IgJBgOAfakEQdkEEcSIDIAFyIAIgA3QiAUGAgA9qQRB2QQJxIgJyayABIAJ0QQ92aiIBQQdqdkEBcSABQQF0cgsFQQALIgJBAnRBkBlqIQEgBSACNgIcIAVBADYCFCAJQQA2AgBB5BYoAgAiA0EBIAJ0IgZxRQRAQeQWIAMgBnI2AgAgASAFNgIAIAUgATYCGCAFIAU2AgwgBSAFNgIIDAMLAkAgASgCACIBKAIEQXhxIARGBH8gAQUgBEEAQRkgAkEBdmsgAkEfRht0IQMDQCABQRBqIANBH3ZBAnRqIgYoAgAiAgRAIANBAXQhAyACKAIEQXhxIARGDQMgAiEBDAELCyAGIAU2AgAgBSABNgIYIAUgBTYCDCAFIAU2AggMBAshAgsgAkEIaiIBKAIAIgMgBTYCDCABIAU2AgAgBSADNgIIIAUgAjYCDCAFQQA2AhgLBUHwFigCACIDRSABIANJcgRAQfAWIAE2AgALQaAaIAE2AgBBpBogAjYCAEGsGkEANgIAQYQXQbgaKAIANgIAQYAXQX82AgBBlBdBiBc2AgBBkBdBiBc2AgBBnBdBkBc2AgBBmBdBkBc2AgBBpBdBmBc2AgBBoBdBmBc2AgBBrBdBoBc2AgBBqBdBoBc2AgBBtBdBqBc2AgBBsBdBqBc2AgBBvBdBsBc2AgBBuBdBsBc2AgBBxBdBuBc2AgBBwBdBuBc2AgBBzBdBwBc2AgBByBdBwBc2AgBB1BdByBc2AgBB0BdByBc2AgBB3BdB0Bc2AgBB2BdB0Bc2AgBB5BdB2Bc2AgBB4BdB2Bc2AgBB7BdB4Bc2AgBB6BdB4Bc2AgBB9BdB6Bc2AgBB8BdB6Bc2AgBB/BdB8Bc2AgBB+BdB8Bc2AgBBhBhB+Bc2AgBBgBhB+Bc2AgBBjBhBgBg2AgBBiBhBgBg2AgBBlBhBiBg2AgBBkBhBiBg2AgBBnBhBkBg2AgBBmBhBkBg2AgBBpBhBmBg2AgBBoBhBmBg2AgBBrBhBoBg2AgBBqBhBoBg2AgBBtBhBqBg2AgBBsBhBqBg2AgBBvBhBsBg2AgBBuBhBsBg2AgBBxBhBuBg2AgBBwBhBuBg2AgBBzBhBwBg2AgBByBhBwBg2AgBB1BhByBg2AgBB0BhByBg2AgBB3BhB0Bg2AgBB2BhB0Bg2AgBB5BhB2Bg2AgBB4BhB2Bg2AgBB7BhB4Bg2AgBB6BhB4Bg2AgBB9BhB6Bg2AgBB8BhB6Bg2AgBB/BhB8Bg2AgBB+BhB8Bg2AgBBhBlB+Bg2AgBBgBlB+Bg2AgBBjBlBgBk2AgBBiBlBgBk2AgBB+BYgAUEAIAFBCGoiA2tBB3FBACADQQdxGyIDaiIFNgIAQewWIAJBWGoiAiADayIDNgIAIAUgA0EBcjYCBCABIAJqQSg2AgRB/BZByBooAgA2AgALC0HsFigCACIBIABLBEBB7BYgASAAayICNgIADAILC0HQGkEMNgIADAILQfgWQfgWKAIAIgEgAGoiAzYCACADIAJBAXI2AgQgASAAQQNyNgIECyAKJAQgAUEIag8LIAokBEEAC4MBAQJ/IABBAEgEfyABQS06AABBACAAayEAIAFBAWoFIAELIQIgACEBA0AgAkEBaiECIAFBCm0hAyABQQlqQRJLBEAgAyEBDAELCyACQQA6AAADQCACQX9qIgIgACAAQQptIgFBCmxrQdUWaiwAADoAACAAQQlqQRJLBEAgASEADAELCwsyAQJ/A0AgACACQQN0aiIDIAMpAwAgASACQQN0aikDAIU3AwAgAkEBaiICQYABRw0ACwsMACAAIAFBgAgQDBoLkgIBBX8jBCEEIwRBQGskBCMEIwVOBEBBwAAQAwsgBCIDQgA3AwAgA0IANwMIIANCADcDECADQgA3AxggA0IANwMgIANCADcDKCADQgA3AzAgA0IANwM4IABFIAFFcgR/QX8FIABB5AFqIgUoAgAgAksEf0F/BSAAKQNQQgBRBH8gACAAQeABaiICKAIArRAcIAAQJyAAQeAAaiACKAIAIgJqQQBBgAEgAmsQDxogACAAQeAAaiIGEBtBACECA0AgAyACQQN0aiAAIAJBA3RqKQMANwAAIAJBAWoiAkEIRw0ACyABIAMgBSgCABAMGiADQcAAEAogBkGAARAKIABBwAAQCkEABUF/CwsLIQcgBCQEIAcLDQAgAEHwARAKIAAQJwtBAQJ/IwQhAiMEQRBqJAQjBCMFTgRAQRAQAwsgAkEEaiIDIAA2AgAgAiABNgIAIAMoAgBBACACKAIAEA8aIAIkBAu/BAEHfyMEIQcjBEGAA2okBCMEIwVOBEBBgAMQAwsgB0GAAWohBiAHQUBrIQQgByIFQfACaiIIQQA2AgAgCCABNgAAIAFBwQBJBH8gBiABEBIiBUEASAR/IAUFIAYgCEEEEAkiBUEASAR/IAUFIAYgAiADEAkiAkEASAR/IAIFIAYgACABEBcLCwsFAn8gBkHAABASIglBAEgEfyAJBSAGIAhBBBAJIglBAEgEfyAJBSAGIAIgAxAJIgJBAEhFBEAgBiAEQcAAEBciAkEASEUEQCAAIAQpAAA3AAAgACAEKQAINwAIIAAgBCkAEDcAECAAIAQpABg3ABggAEEgaiEAIAUgBCkDADcDACAFIAQpAwg3AwggBSAEKQMQNwMQIAUgBCkDGDcDGCAFIAQpAyA3AyAgBSAEKQMoNwMoIAUgBCkDMDcDMCAFIAQpAzg3AzggAUFgaiIBQcAASwRAA0AgBEHAACAFQcAAQQBBABAmIgJBAEgEQCACDAcLIAAgBCkAADcAACAAIAQpAAg3AAggACAEKQAQNwAQIAAgBCkAGDcAGCAAQSBqIQAgBSAEKQMANwMAIAUgBCkDCDcDCCAFIAQpAxA3AxAgBSAEKQMYNwMYIAUgBCkDIDcDICAFIAQpAyg3AyggBSAEKQMwNwMwIAUgBCkDODcDOCABQWBqIgFBwABLDQALCyAEIAEgBUHAAEEAQQAQJiICQQBOBEAgACAEIAEQDBoLCwsgAgsLCwshCiAGQfABEAogByQEIAoLngwCEn8UfiMEIQUjBEGAAmokBCMEIwVOBEBBgAIQAwsgBUGAAWohAyAFIQIDQCADIARBA3RqIAEgBEEDdGopAAA3AwAgBEEBaiIEQRBHDQALIAIgACkDADcDACACIAApAwg3AwggAiAAKQMQNwMQIAIgACkDGDcDGCACIAApAyA3AyAgAiAAKQMoNwMoIAIgACkDMDcDMCACIAApAzg3AzggAkFAayIEQoiS853/zPmE6gA3AwAgAkHIAGoiBkK7zqqm2NDrs7t/NwMAIAJB0ABqIgdCq/DT9K/uvLc8NwMAIAJB2ABqIghC8e30+KWn/aelfzcDACACQeAAaiIJIABBQGspAwBC0YWa7/rPlIfRAIUiFDcDACACQegAaiIKIAApA0hCn9j52cKR2oKbf4UiFTcDACACQfAAaiILIAApA1BC6/qG2r+19sEfhSIWNwMAIAJB+ABqIgwgACkDWEL5wvibkaOz8NsAhSIcNwMAQQAhAUKr8NP0r+68tzwhJCACQThqIg0pAwAhFyACQRhqIg4pAwAhH0Lx7fT4paf9p6V/ISAgAkEgaiIPKQMAIRsgAikDACEYQoiS853/zPmE6gAhHSACQShqIhApAwAhGSACQQhqIhEpAwAhIUK7zqqm2NDrs7t/IR4gAkEwaiISKQMAIRogAkEQaiITKQMAISIDQCAdIBQgGyAYfCADIAFBBnRBwAhqKAIAQQN0aikDAHwiFIVBIBAHIhh8Ih0gG4VBGBAHIhsgFHwgAyABQQZ0QcQIaigCAEEDdGopAwB8IiMgGIVBEBAHIhggHXwiHSAbhUE/EAchGyAeIBUgGSAhfCADIAFBBnRByAhqKAIAQQN0aikDAHwiFIVBIBAHIhV8IiEgGYVBGBAHIhkgFHwgAyABQQZ0QcwIaigCAEEDdGopAwB8Ih4gFYVBEBAHIiUgIXwiJiAZhUE/EAchFCAkIBYgGiAifCADIAFBBnRB0AhqKAIAQQN0aikDAHwiFYVBIBAHIhZ8IhkgGoVBGBAHIhogFXwgAyABQQZ0QdQIaigCAEEDdGopAwB8IiIgFoVBEBAHIicgGXwiGSAahUE/EAchFSAgIBwgFyAffCADIAFBBnRB2AhqKAIAQQN0aikDAHwiHIVBIBAHIhZ8IhogF4VBGBAHIhcgHHwgAyABQQZ0QdwIaigCAEEDdGopAwB8Ih8gFoVBEBAHIhwgGnwiGiAXhUE/EAchFiAUICN8IAMgAUEGdEHgCGooAgBBA3RqKQMAfCIXIByFQSAQByIcIBl8IhkgFIVBGBAHIiAgF3wgAyABQQZ0QeQIaigCAEEDdGopAwB8IhQgHIVBEBAHIhwgGXwiJCAghUE/EAchGSAVIB58IAMgAUEGdEHoCGooAgBBA3RqKQMAfCIXIBiFQSAQByIgIBp8IhogFYVBGBAHIhggF3wgAyABQQZ0QewIaigCAEEDdGopAwB8IiEgIIVBEBAHIhUgGnwiICAYhUE/EAchGiAWICJ8IAMgAUEGdEHwCGooAgBBA3RqKQMAfCIXICWFQSAQByIYIB18Ih0gFoVBGBAHIh4gF3wgAyABQQZ0QfQIaigCAEEDdGopAwB8IiIgGIVBEBAHIhYgHXwiHSAehUE/EAchFyAfIBt8IAMgAUEGdEH4CGooAgBBA3RqKQMAfCIfICeFQSAQByIYICZ8Ih4gG4VBGBAHIhsgH3wgAyABQQZ0QfwIaigCAEEDdGopAwB8Ih8gGIVBEBAHIiMgHnwiHiAbhUE/EAchGyABQQFqIgFBDEcEQCAUIRggFSEUIBYhFSAjIRYMAQsLIAIgFDcDACAPIBs3AwAgCSAVNwMAIAQgHTcDACARICE3AwAgECAZNwMAIAogFjcDACAGIB43AwAgEyAiNwMAIBIgGjcDACALICM3AwAgByAkNwMAIA4gHzcDACANIBc3AwAgDCAcNwMAIAggIDcDACAAIBQgACkDAIUgAkFAaykDAIU3AwBBASEBA0AgACABQQN0aiIEIAIgAUEDdGopAwAgBCkDAIUgAiABQQhqQQN0aikDAIU3AwAgAUEBaiIBQQhHDQALIAUkBAszAgF/AX4gAEFAayICKQMAIAF8IQMgAiADNwMAIABByABqIgAgACkDACADIAFUrXw3AwALTwECfyAARSABRXIEf0F/BSAAECgDQCAAIAJBA3RqIgMgAykDACABIAJBA3RqKQAAhTcDACACQQFqIgJBCEcNAAsgACABLQAANgLkAUEACwsIACAAQQAQBgsqAQF/IAFBMGoiAyADKQMAQgF8NwMAIAIgASAAQQAQESACIAAgAEEAEBEL/wUCE38DfiMEIQsjBEGAGGokBCMEIwVOBEBBgBgQAwsgC0GAEGohDCALQYAIaiEGIAshDQJAIAAEQAJAAkACQAJAAkACQAJAAkACQCAAQSBqIgMoAgBBAWsOCgABAwMDAwMDAwIDCyABIQQgAUEIaiEFDAMLIAEoAgAEQCABIQQMBgUgAUEIaiIFLQAAQQJIBEAgASEEDAQFDAULAAsACyABKAIABEAgASEEDAUFIAFBCGoiBS0AAEEDSARAIAEhBAwDBQwECwALAAsgASEEIAEoAgAhCQwCCyANQQAQJSAGQQAQJSAGIAQoAgAiCa03AwAgBiABKAIErTcDCCAGIAUtAACtNwMQIAYgACgCDK03AxggBiAAKAIIrTcDICAGIAMoAgCtNwMoQQEhBQwBCyABIQRBAEECIAFBCGoiCSwAABshA0EAIQUMAgsgCQ0AQQBBAiABQQhqIgksAABBAEciBxshAyAHIAVBAXNyRQRAIAwgBiANEB9BAiEDCwwBC0EAIQMgAUEIaiEJCyAAQRRqIg8oAgAiCCABQQRqIhAoAgBsIANqIABBEGoiESgCACICIAktAABsaiEHIAMgAkkEQCAAQRhqIRIgAUEMaiETIABBBGohFEF/IAhBf2ogByAIcBsgB2ohAgNAIAdBf2ogAiAHIAhwQQFGGyEIIAUEfyADQf8AcSICRQRAIAwgBiANEB8LIAwgAkEDdGoFIAAoAgAgCEEKdGoLKQMAIhdCIIggEigCAK2CIBAoAgCtIhYgBCgCACAJLAAAchshFSATIAM2AgAgACABIBenIBUgFlEQNCEKIAAoAgAiAiAPKAIAIBWnbEEKdGogCkEKdGohCiACIAdBCnRqIQ4gFCgCAEEQRgRAIAIgCEEKdGogCiAOQQAQEQUgAiAIQQp0aiECIAQoAgAEQCACIAogDkEBEBEFIAIgCiAOQQAQEQsLIANBAWoiAyARKAIATw0DIAdBAWohByAIQQFqIQIgDygCACEIDAAACwALCwsgCyQEC3cBAn9BACAAQT5za0EIdkErcUErcyAAQeb/A2pBCHZB/wFxIgEgAEHBAGpxckEAIABBP3NrQQh2QS9xQS9zciAAQcz/A2pBCHYiAiAAQccAanEgAUH/AXNxciAAQcL/A2pBCHYgAEH8AWpxIAJB/wFxQf8Bc3FyC+EBAQN/IANBA24iBUECdCEEAn8CQAJAAkACQCADIAVBA2xrQQNxQQFrDgIBAAILIARBAXIhBAwCCwwBCyAEDAELIARBAmoLIgUgAUkEQCADBEBBACEBA0AgBkEIdCACLQAAciEGIAFBCGoiAUEFSwRAA0AgAEEBaiEEIAAgBiABQXpqIgF2QT9xECE6AAAgAUEFSwR/IAQhAAwBBSAECyEACwsgAkEBaiECIANBf2oiAw0ACyABBEAgACAGQQYgAWt0QT9xECE6AAAgAEEBaiEACwsgAEEAOgAABUF/IQULIAULKgEBfwNAIAAgAkEDdGogASACQQN0aikAADcDACACQQFqIgJBgAFHDQALC5cCAQF/An8gAAR/IAAoAgAEfyAAKAIEQQRJBH9BfgUgACgCCEUEQEFuIAAoAgwNBBoLIAAoAhQhASAAKAIQRQRAQW1BeiABGw8LIAFBCEkEf0F6BSAAKAIYRQRAQWwgACgCHA0FGgsgACgCIEUEQEFrIAAoAiQNBRoLIAAoAiwiAUEISQR/QXIFIAFBgICAAUsEf0FxBSABIAAoAjAiAUEDdEkEf0FyBSAAKAIoBH8gAQR/IAFB////B0sEf0FvBSAAKAI0IgEEfyABQf///wdLBH9BYwUgAEFAaygCAEUhASAAKAI8BH9BaSABDQ0FQWggAUUNDQsaQQALBUFkCwsFQXALBUF0CwsLCwsLBUF/CwVBZwsLIgALDAAgACABQYAIEA8aC6oBAQR/IwQhByMEQfABaiQEIwQjBU4EQEHwARADCyAHIQYCfyACRSADQQBHcQR/QX8FIABFIAFBf2pBP0tyBH9BfwUgBUHAAEsgBEUgBUEARyIIcXIEf0F/BSAIBH9BfyAGIAEgBCAFED5BAEgNBAVBfyAGIAEQEkEASA0ECxogBiACIAMQCUEASAR/QX8FIAYgACABEBcLCwsLCyEJIAZB8AEQCiAHJAQgCQsZACAALADoAQRAIABCfzcDWAsgAEJ/NwNQC2cAIABBQGtBAEGwARAPGiAAQYAIKQMANwMAIABBiAgpAwA3AwggAEGQCCkDADcDECAAQZgIKQMANwMYIABBoAgpAwA3AyAgAEGoCCkDADcDKCAAQbAIKQMANwMwIABBuAgpAwA3AzgLBAAjCAtWAQF/IAAEQCABIABsIQIgASAAckH//wNLBEAgAkF/IAIgAG4gAUYbIQILCyACEBMiAEUEQCAADwsgAEF8aigCAEEDcUUEQCAADwsgAEEAIAIQDxogAAsGACAAJAgL3QQBB38jBCEHIwRBIGokBCMEIwVOBEBBIBADCyAHIQQgA0EAEDwhBSACECQhAwJ/IAUEfyADBH8gAwUgAEEBaiEDIAFBf2ohBiABQQJJBH9BYQUgAEEkOwAAIAMgBRAQIgBqIQEgBiAAayEIIAYgAEsEfyADIAUgAEEBahAMGiABQQNqIQMgCEF9aiEFIAhBBEkEf0FhBSABQaTs9QE2AAAgAigCOCAEEBRBYSAFIAQQECIATQ0FGiADIAQgAEEBahAMGiADIABqIgZBA2ohASAFIABrIgBBfWohAyAAQQRJBH9BYQUgBkGk2vUBNgAAIAIoAiwgBBAUQWEgAyAEEBAiAE0NBhogASAEIABBAWoQDBogASAAaiIFQQNqIQEgAyAAayIAQX1qIQMgAEEESQR/QWEFIAVBrOj1ATYAACACKAIoIAQQFEFhIAMgBBAQIgBNDQcaIAEgBCAAQQFqEAwaIAEgAGoiBUEDaiEBIAMgAGsiAEF9aiEDIABBBEkEf0FhBSAFQazg9QE2AAAgAigCMCAEEBRBYSADIAQQECIATQ0IGiABIAQgAEEBahAMGiABIABqIgRBAWohASADIABrIgBBf2ohAyAAQQJJBH9BYQUgBEEkOwAAIAEgAyACKAIQIAIoAhQQIiIEQX9GIQAgASABIARqIAAbIQEgACADQQAgBCAAG2siAEECSXIEf0FhBSABQSQ7AAACf0FhQQAgAUEBaiAAQX9qIAIoAgAgAigCBBAiQX9GGyEJIAckBCAJCw8LCwsLCwsFQWELCwsFQWELCyEKIAckBCAKC3YBA38jBCEEIwRB0ABqJAQjBCMFTgRAQdAAEAMLIAQhAiAARSABRXIEQEFnIQMFIAAgATYCKEEAIAAgACgCDEGACBA4IgNFBEAgAiABIAAoAiAQLiACQUBrQQgQCiACIAAQMCACQcgAEApBACEDCwsgBCQEIAMLqwMBBX8jBCEHIwRBgAJqJAQjBCMFTgRAQYACEAMLIAciBEHwAWohAyAARSABRXJFBEAgBEHAABASGiADIAEoAjAQCyAEIANBBBAJGiADIAEoAgQQCyAEIANBBBAJGiADIAEoAiwQCyAEIANBBBAJGiADIAEoAigQCyAEIANBBBAJGiADIAEoAjgQCyAEIANBBBAJGiADIAIQCyAEIANBBBAJGiADIAFBDGoiAigCABALIAQgA0EEEAkaIAFBCGoiBSgCACIGBEAgBCAGIAIoAgAQCRogASgCREEBcQRAIAUoAgAgAigCABAZIAJBADYCAAsLIAMgAUEUaiICKAIAEAsgBCADQQQQCRogASgCECIFBEAgBCAFIAIoAgAQCRoLIAMgAUEcaiICKAIAEAsgBCADQQQQCRogAUEYaiIFKAIAIgYEQCAEIAYgAigCABAJGiABKAJEQQJxBEAgBSgCACACKAIAEBkgAkEANgIACwsgAyABQSRqIgIoAgAQCyAEIANBBBAJGiABKAIgIgEEQCAEIAEgAigCABAJGgsgBCAAQcAAEBcaCyAHJAQLEAAjBkUEQCAAJAYgASQHCwu6AQEHfyMEIQQjBEGACGokBCMEIwVOBEBBgAgQAwsgBCECIAFBGGoiBygCAARAIABBQGshBSAAQcQAaiEIIAFBFGohBgNAIAVBABALIAggAxALIAJBgAggAEHIABAaGiABKAIAIAYoAgAgA2xBCnRqIAIQIyAFQQEQCyACQYAIIABByAAQGhogASgCACAGKAIAIANsQQFqQQp0aiACECMgA0EBaiIDIAcoAgBJDQALCyACQYAIEAogBCQEC/wCAQ9/IwQhBSMEQSBqJAQjBCMFTgRAQSAQAwsgBUEQaiEGIAUhAwJAIABBGGoiCSgCACIBQQQQKiIEBEAgAEEIaiILKAIARQRAIAQQDkEAIQAMAgsgAEEcaiEKIANBBGohDCADQQhqIQ0gA0EMaiEOAn8CQAN/An9BACEIA0AgAQRAIAhB/wFxIQ9BACEBA0AgASAKKAIAIgJPBEAgBCABIAJrQQJ0aigCABAeDQYLIAMgBzYCACAMIAE2AgAgDSAPOgAAIA5BADYCACAGIAMpAgA3AgAgBiADKQIINwIIIAAgBhAgIAFBAWoiASAJKAIAIgJJDQALIAIhAQVBACEBCyABIAooAgBrIgIgAUkEQCACIQEDQEFfIAQgAUECdGooAgAQHg0DGiABQQFqIgEgCSgCACICSQ0ACyACIQELIAhBAWoiCEEESQ0ACyAHQQFqIgcgCygCAEkEfwwCBUEACwsLDAELQV8LIQAgBBAOBUFqIQALCyAFJAQgAAv2AQENfyMEIQUjBEEgaiQEIwQjBU4EQEEgEAMLIAVBEGohBiAFIQIgAEEIaiIJKAIABEAgAkEEaiEKIAJBCGohCyACQQxqIQwgAEEYaiINKAIAIQEDQEEAIQggASEDA0AgAQRAIAhB/wFxIQRBACEBA0AgAiAHNgIAIAogATYCACALIAQ6AAAgDEEANgIAIAYgAikCADcCACAGIAIpAgg3AgggACAGECAgAUEBaiIBIA0oAgAiA0kNAAsgAyIBIQQFIAMhAUEAIQQLIAhBAWoiCEEERwRAIAEhAyAEIQEMAQsLIAdBAWoiByAJKAIASQ0ACwsgBSQECysAIAAEfyAAKAIYBH8gACgCHEEBRgR/IAAQMkEABSAAEDELBUFnCwVBZwsLrQECA38BfgJ/IAEoAgBFIgYEQCABLAAIIgRFBEAgASgCDEF/agwCCyAAKAIQIARB/wFxbCEEBSAAKAIUIAAoAhBrIQQLIAEoAgwhBSAFQX9qIARqIAQgBUVBH3RBH3VqIAMbCyIDQX9qrSACrSIHIAd+QiCIIAOtfkIgiH0gBgR+QgAFIAEsAAgiAUEDRgR+QgAFIAAoAhAgAUH/AXFBAWpsrQsLfCAAKAIUrYKnCyoBAX8DQCAAIAJBA3RqIAEgAkEDdGopAwA3AAAgAkEBaiICQYABRw0ACwvUAQEHfyMEIQMjBEGAEGokBCMEIwVOBEBBgBAQAwsgA0GACGohAiADIQQgAEEARyABQQBHcQRAIAIgASgCACABQRRqIgYoAgBBCnRqQYB4ahAWIAFBGGoiBygCAEEBSwRAQQEhBQNAIAIgASgCACAGKAIAIghBf2ogCCAFbGpBCnRqEBUgBUEBaiIFIAcoAgBJDQALCyAEIAIQNSAAKAIAIAAoAgQgBEGACBAaGiACQYAIEAogBEGACBAKIAEoAgAiACABKAIMQQp0EAogABAOCyADJAQLCgAgACQEIAEkBQs6ACADIAJsIQACfyABBH8gAwRAQWogACADbiACRw0CGgsgASAAEBMiADYCAEEAQWogABsFQWoLCyIAC9cCAAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEFdaw4kIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAJAtB0hYMJAtBuxYMIwtBpxYMIgtBlBYMIQtB/hUMIAtB6RUMHwtB1xUMHgtBxhUMHQtBqRUMHAtBjRUMGwtB+RQMGgtB5hQMGQtBzxQMGAtBuBQMFwtBnxQMFgtBhhQMFQtB+BMMFAtB6RMMEwtBshMMEgtBgxMMEQtB0BIMEAtBmBIMDwtBgBIMDgtB3xEMDQtBuhEMDAtBmxEMCwtB+BAMCgtB4BAMCQtBzRAMCAtBvBAMBwtBqhAMBgtBmhAMBQtBihAMBAtB+A8MAwtBww8MAgtBlQ8MAQtBgg8LC50CAQN/IwQhDyMEQdAAaiQEIwQjBU4EQEHQABADCyAPIQ0CQCAIQQRJBH9BfgUgCBATIg4EfyANIA42AgAgDSAINgIEIA0gAzYCCCANIAQ2AgwgDSAFNgIQIA0gBjYCFCANQRhqIgNCADcCACADQgA3AgggDSAANgIoIA0gATYCLCANIAI2AjAgDSACNgI0IA1BADYCPCANQUBrQQA2AgAgDUEANgJEIA0gDDYCOCANIAsQOyIABEAgDiAIEAogDhAODAMLIAcEQCAHIA4gCBAMGgsgCUEARyAKQQBHcQRAIAkgCiANIAsQLARAIA4gCBAKIAkgChAKIA4QDkFhIQAMBAsLIA4gCBAKIA4QDkEABUFqCwshAAsgDyQEIAAL/gEBBn8jBCEGIwRBMGokBCMEIwVOBEBBMBADCyAGIQICfyAAECQiBAR/IAQFAkACQAJAIAEOCwAAAAEBAQEBAQEAAQsMAQtBZgwCCyAAKAIwIgRBA3QiAyAAKAIsIgUgBSADSRsgBEECdCIFbiEDIAIgACgCODYCBCACQQA2AgAgAiAAKAIoNgIIIAIgAyAFbDYCDCACIAM2AhAgAiADQQJ0NgIUIAIgBDYCGCACQRxqIgMgACgCNCIFNgIAIAIgATYCICAFIARLBEAgAyAENgIACyACIAAQLSIBBH8gAQUgAhAzIgEEfyABBSAAIAIQNkEACwsLCyEHIAYkBCAHC1IAAn8CQAJAAkACQAJAIAAOCwABAgQEBAQEBAQDBAtByA5BwA4gARsMBAtB2A5B0A4gARsMAwtB6Q5B4A4gARsMAgtB+g5B8g4gARsMAQtBAAsLBgAgACQEC/4BAQR/IwQhBiMEQcABaiQEIwQjBU4EQEHAARADCyAGQYABaiEEIAYhBQJ/IAAEfyABQX9qQT9LBEAgABAYQX8MAgsgAkUgA0F/akE/S3IEQCAAEBhBfwwCCyAEIAE6AAAgBCADOgABIARBAToAAiAEQQE6AAMgBEEEaiIBQgA3AAAgAUIANwAIIAFCADcAECABQgA3ABggAUIANwAgIAFCADcAKCABQgA3ADAgAUEANgA4IAAgBBAdQQBIBH8gABAYQX8FIAUgA2pBAEGAASADaxAPGiAFIAIgAxAMGiAAIAVBgAEQCRogBUGAARAKQQALBUF/CwshByAGJAQgBwsEACMECycBAn8jBCECIwQgAGokBCMEQQ9qQXBxJAQjBCMFTgRAIAAQAwsgAgsL4w4CAEGACAu5BQjJvPNn5glqO6fKhIWuZ7sr+JT+cvNuPPE2HV869U+l0YLmrX9SDlEfbD4rjGgFm2u9Qfur2YMfeSF+ExnN4FsAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAADgAAAAoAAAAEAAAACAAAAAkAAAAPAAAADQAAAAYAAAABAAAADAAAAAAAAAACAAAACwAAAAcAAAAFAAAAAwAAAAsAAAAIAAAADAAAAAAAAAAFAAAAAgAAAA8AAAANAAAACgAAAA4AAAADAAAABgAAAAcAAAABAAAACQAAAAQAAAAHAAAACQAAAAMAAAABAAAADQAAAAwAAAALAAAADgAAAAIAAAAGAAAABQAAAAoAAAAEAAAAAAAAAA8AAAAIAAAACQAAAAAAAAAFAAAABwAAAAIAAAAEAAAACgAAAA8AAAAOAAAAAQAAAAsAAAAMAAAABgAAAAgAAAADAAAADQAAAAIAAAAMAAAABgAAAAoAAAAAAAAACwAAAAgAAAADAAAABAAAAA0AAAAHAAAABQAAAA8AAAAOAAAAAQAAAAkAAAAMAAAABQAAAAEAAAAPAAAADgAAAA0AAAAEAAAACgAAAAAAAAAHAAAABgAAAAMAAAAJAAAAAgAAAAgAAAALAAAADQAAAAsAAAAHAAAADgAAAAwAAAABAAAAAwAAAAkAAAAFAAAAAAAAAA8AAAAEAAAACAAAAAYAAAACAAAACgAAAAYAAAAPAAAADgAAAAkAAAALAAAAAwAAAAAAAAAIAAAADAAAAAIAAAANAAAABwAAAAEAAAAEAAAACgAAAAUAAAAKAAAAAgAAAAgAAAAEAAAABwAAAAYAAAABAAAABQAAAA8AAAALAAAACQAAAA4AAAADAAAADAAAAA0AQcQNC5sJAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAADgAAAAoAAAAEAAAACAAAAAkAAAAPAAAADQAAAAYAAAABAAAADAAAAAAAAAACAAAACwAAAAcAAAAFAAAAAwAAAGFyZ29uMmQAQXJnb24yZABhcmdvbjJpAEFyZ29uMmkAYXJnb24yaWQAQXJnb24yaWQAYXJnb24ydQBBcmdvbjJ1AFVua25vd24gZXJyb3IgY29kZQBUaGUgcGFzc3dvcmQgZG9lcyBub3QgbWF0Y2ggdGhlIHN1cHBsaWVkIGhhc2gAU29tZSBvZiBlbmNvZGVkIHBhcmFtZXRlcnMgYXJlIHRvbyBsb25nIG9yIHRvbyBzaG9ydABUaHJlYWRpbmcgZmFpbHVyZQBEZWNvZGluZyBmYWlsZWQARW5jb2RpbmcgZmFpbGVkAE1pc3NpbmcgYXJndW1lbnRzAFRvbyBtYW55IHRocmVhZHMATm90IGVub3VnaCB0aHJlYWRzAE91dHB1dCBwb2ludGVyIG1pc21hdGNoAFRoZXJlIGlzIG5vIHN1Y2ggdmVyc2lvbiBvZiBBcmdvbjIAQXJnb24yX0NvbnRleHQgY29udGV4dCBpcyBOVUxMAFRoZSBhbGxvY2F0ZSBtZW1vcnkgY2FsbGJhY2sgaXMgTlVMTABUaGUgZnJlZSBtZW1vcnkgY2FsbGJhY2sgaXMgTlVMTABNZW1vcnkgYWxsb2NhdGlvbiBlcnJvcgBBc3NvY2lhdGVkIGRhdGEgcG9pbnRlciBpcyBOVUxMLCBidXQgYWQgbGVuZ3RoIGlzIG5vdCAwAFNlY3JldCBwb2ludGVyIGlzIE5VTEwsIGJ1dCBzZWNyZXQgbGVuZ3RoIGlzIG5vdCAwAFNhbHQgcG9pbnRlciBpcyBOVUxMLCBidXQgc2FsdCBsZW5ndGggaXMgbm90IDAAUGFzc3dvcmQgcG9pbnRlciBpcyBOVUxMLCBidXQgcGFzc3dvcmQgbGVuZ3RoIGlzIG5vdCAwAFRvbyBtYW55IGxhbmVzAFRvbyBmZXcgbGFuZXMATWVtb3J5IGNvc3QgaXMgdG9vIGxhcmdlAE1lbW9yeSBjb3N0IGlzIHRvbyBzbWFsbABUaW1lIGNvc3QgaXMgdG9vIGxhcmdlAFRpbWUgY29zdCBpcyB0b28gc21hbGwAU2VjcmV0IGlzIHRvbyBsb25nAFNlY3JldCBpcyB0b28gc2hvcnQAQXNzb2NpYXRlZCBkYXRhIGlzIHRvbyBsb25nAEFzc29jaWF0ZWQgZGF0YSBpcyB0b28gc2hvcnQAU2FsdCBpcyB0b28gbG9uZwBTYWx0IGlzIHRvbyBzaG9ydABQYXNzd29yZCBpcyB0b28gbG9uZwBQYXNzd29yZCBpcyB0b28gc2hvcnQAT3V0cHV0IGlzIHRvbyBsb25nAE91dHB1dCBpcyB0b28gc2hvcnQAT3V0cHV0IHBvaW50ZXIgaXMgTlVMTABPSwAwMTIzNDU2Nzg5";var Z3=J3.toByteArray(q3);if(!WebAssembly)throw new Error("WebAssembly not supported here.");var e4=H3,t4=Z3,it={printErr:console.error,setStatus:console.log,wasmBinary:t4};function n4(e){return it._argon2_hash?new Promise((t,n)=>{try{t(z0(e))}catch(r){n(r)}}):new Promise((t,n)=>{it.onRuntimeInitialized=function(){try{t(z0(e))}catch(r){n(r)}},e4(it)}).catch(t=>{console.log(t)})}function z0(e){if(!it._argon2_hash)throw new Error("Error: _argon2_hash not available");var t=e&&e.time||10,n=e&&e.mem||1024,r=e&&e.parallelism||1,s=G0(e&&e.pass||"password"),o=e&&e.pass?e.pass.length:8,i=G0(e&&e.salt||"somesalt"),a=e&&e.salt?e.salt.length:8,u=it.allocate(new Array(e&&e.hashLen||32),"i8",it.ALLOC_NORMAL),l=e&&e.hashLen||32,d=it.allocate(new Array(512),"i8",it.ALLOC_NORMAL),g=512,h=e&&e.type||0,A=19,f;try{var m=it._argon2_hash(t,n,r,s,o,i,a,u,l,d,g,h,A)}catch(I){f=I}var v;if(m===0&&!f){for(var p="",y=new Uint8Array(l),x=0;x<l;x++){var E=it.HEAP8[u+x];y[x]=E,p+=("0"+(255&E).toString(16)).slice(-2)}var C=it.Pointer_stringify(d);v={hash:y,hashHex:p,encoded:C}}else{try{f||(f=it.Pointer_stringify(it._argon2_error_message(m)))}catch{}v={message:f,code:m}}try{it._free(s),it._free(i),it._free(u),it._free(d)}catch{}if(f)throw v;return v}function G0(e){var t=e instanceof Uint8Array||e instanceof Array?e:it.intArrayFromString(e);return it.allocate(t,"i8",it.ALLOC_NORMAL)}var ci={hash:n4,types:{Argon2d:0,Argon2i:1,Argon2id:2,Argon2u:10}};class fc extends Error{constructor(t){let n;t instanceof Error?n=t.message:typeof t=="string"?n=t:n="",super(n),this.name=this.constructor.name}}const Ve=256,gt=3329,r4=62209,kg=[2285,2571,2970,1812,1493,1422,287,202,3158,622,1577,182,962,2127,1855,1468,573,2004,264,383,2500,1458,1727,3199,2648,1017,732,608,1787,411,3124,1758,1223,652,2777,1015,2036,1491,3047,1785,516,3321,3009,2663,1711,2167,126,1469,2476,3239,3058,830,107,1908,3082,2378,2931,961,1821,2604,448,2264,677,2054,2226,430,555,843,2078,871,1550,105,422,587,177,3094,3038,2869,1574,1653,3083,778,1159,3182,2552,1483,2727,1119,1739,644,2457,349,418,329,3173,3254,817,1097,603,610,1322,2044,1864,384,2114,3193,1218,1994,2455,220,2142,1670,2144,1799,2051,794,1819,2475,2459,478,3221,3021,996,991,958,1869,1522,1628],K0=[1701,1807,1460,2371,2338,2333,308,108,2851,870,854,1510,2535,1278,1530,1185,1659,1187,3109,874,1335,2111,136,1215,2945,1465,1285,2007,2719,2726,2232,2512,75,156,3e3,2911,2980,872,2685,1590,2210,602,1846,777,147,2170,2551,246,1676,1755,460,291,235,3152,2742,2907,3224,1779,2458,1251,2486,2774,2899,1103,1275,2652,1065,2881,725,1508,2368,398,951,247,1421,3222,2499,271,90,853,1860,3203,1162,1618,666,320,8,2813,1544,282,1838,1293,2314,552,2677,2106,1571,205,2918,1542,2721,2597,2312,681,130,1602,1871,829,2946,3065,1325,2756,1861,1474,1202,2367,3147,1752,2707,171,3127,3042,1907,1836,1517,359,758,1441],hc=BigInt(2**32-1),$0=BigInt(32);function s4(e,t=!1){return t?{h:Number(e&hc),l:Number(e>>$0&hc)}:{h:Number(e>>$0&hc)|0,l:Number(e&hc)|0}}function o4(e,t=!1){const n=e.length,r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:i,l:a}=s4(e[o],t);[r[o],s[o]]=[i,a]}return[r,s]}const i4=(e,t,n)=>e<<n|t>>>32-n,a4=(e,t,n)=>t<<n|e>>>32-n,l4=(e,t,n)=>t<<n-32|e>>>64-n,c4=(e,t,n)=>e<<n-32|t>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function u4(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function V0(e,t=""){if(!Number.isSafeInteger(e)||e<0){const n=t&&`"${t}" `;throw new Error(`${n}expected integer >0, got ${e}`)}}function Rg(e,t,n=""){const r=u4(e),s=e==null?void 0:e.length;if(!r||t!==void 0){const i=n&&`"${n}" `,a="",u=r?`length=${s}`:`type=${typeof e}`;throw new Error(i+"expected Uint8Array"+a+", got "+u)}return e}function W0(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function d4(e,t){Rg(e,void 0,"digestInto() output");const n=t.outputLen;if(e.length<n)throw new Error('"digestInto() output" expected to be of length >='+n)}function f4(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function WE(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const h4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function g4(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function A4(e){for(let t=0;t<e.length;t++)e[t]=g4(e[t]);return e}const Y0=h4?e=>e:A4;function YE(e,t={}){const n=(s,o)=>e(o).update(s).digest(),r=e(void 0);return n.outputLen=r.outputLen,n.blockLen=r.blockLen,n.create=s=>e(s),Object.assign(n,t),Object.freeze(n)}const Ud=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])}),p4=BigInt(0),da=BigInt(1),m4=BigInt(2),y4=BigInt(7),w4=BigInt(256),v4=BigInt(113),XE=[],JE=[],qE=[];for(let e=0,t=da,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],XE.push(2*(5*r+n)),JE.push((e+1)*(e+2)/2%64);let s=p4;for(let o=0;o<7;o++)t=(t<<da^(t>>y4)*v4)%w4,t&m4&&(s^=da<<(da<<BigInt(o))-da);qE.push(s)}const ZE=o4(qE,!0),x4=ZE[0],E4=ZE[1],X0=(e,t,n)=>n>32?l4(e,t,n):i4(e,t,n),J0=(e,t,n)=>n>32?c4(e,t,n):a4(e,t,n);function C4(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,u=(i+2)%10,l=n[u],d=n[u+1],g=X0(l,d,1)^n[a],h=J0(l,d,1)^n[a+1];for(let A=0;A<50;A+=10)e[i+A]^=g,e[i+A+1]^=h}let s=e[2],o=e[3];for(let i=0;i<24;i++){const a=JE[i],u=X0(s,o,a),l=J0(s,o,a),d=XE[i];s=e[d],o=e[d+1],e[d]=u,e[d+1]=l}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=x4[r],e[1]^=E4[r]}WE(n)}let eC=class tC{constructor(t,n,r,s=!1,o=24){if(Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pos",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"posOut",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"finished",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state32",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"blockLen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputLen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enableXOF",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"rounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,V0(r,"outputLen"),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=f4(this.state)}clone(){return this._cloneInto()}keccak(){Y0(this.state32),C4(this.state32,this.rounds),Y0(this.state32),this.posOut=0,this.pos=0}update(t){W0(this),Rg(t);const{blockLen:n,state:r}=this,s=t.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){W0(this,!1),Rg(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return V0(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(d4(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,WE(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return t||(t=new tC(n,r,s,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=i,t.destroyed=this.destroyed,t}};const nC=(e,t,n,r={})=>YE(()=>new eC(t,e,n),r),b4=nC(6,136,32,Ud(8)),I4=nC(6,72,64,Ud(10)),rC=(e,t,n,r={})=>YE((s={})=>new eC(t,e,s.dkLen===void 0?n:s.dkLen,!0),r),S4=rC(31,168,16,Ud(11)),sC=rC(31,136,32,Ud(12)),B4={},k4=R4(globalThis,B4);function R4(e,t){return new Proxy(e,{get(n,r,s){return r in t?t[r]:e[r]},set(n,r,s){return r in t&&delete t[r],e[r]=s,!0},deleteProperty(n,r){let s=!1;return r in t&&(delete t[r],s=!0),r in e&&(delete e[r],s=!0),s},ownKeys(n){const r=Reflect.ownKeys(e),s=Reflect.ownKeys(t),o=new Set(s);return[...r.filter(i=>!o.has(i)),...s]},defineProperty(n,r,s){return r in t&&delete t[r],Reflect.defineProperty(e,r,s),!0},getOwnPropertyDescriptor(n,r){return r in t?Reflect.getOwnPropertyDescriptor(t,r):Reflect.getOwnPropertyDescriptor(e,r)},has(n,r){return r in t||r in e}})}function Yn(e){return e%256}function qn(e){return e>=-32768&&e<=32767?e:e<-32768?(e=e+32769,e=e%65536,32767+e):(e=e-32768,e=e%65536,-32768+e)}function ze(e){return e%65536}function Tg(e){return e>=-2147483648&&e<=2147483647?e:e<-2147483648?(e=e+2147483649,e=e%4294967296,2147483647+e):(e=e-2147483648,e=e%4294967296,-2147483648+e)}function eo(e){return e%4294967296}function T4(e,t){if(e.length!=t.length)return 0;const n=new Uint8Array([0]);for(let s=0;s<e.length;s++)n[0]|=e[s]^t[s];const r=new Uint8Array([0]);return r[0]=~(n[0]^r[0]),r[0]&=r[0]>>4,r[0]&=r[0]>>2,r[0]&=r[0]>>1,r[0]}function _4(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}async function N4(){if(typeof k4<"u"&&globalThis.crypto!==void 0)return globalThis.crypto;try{const{webcrypto:e}=await Bg(async()=>{const{webcrypto:t}=await Promise.resolve().then(()=>$E);return{webcrypto:t}},void 0);return e}catch{throw new Error("failed to load Crypto")}}function q0(e,t,n){return sC.create({dkLen:e}).update(t).update(new Uint8Array([n])).digest()}function D4(e){let t=eo(e[0]);return t|=eo(e[1])<<8,t|=eo(e[2])<<16,t|=eo(e[3])<<24,eo(t)}class P4{constructor(){Object.defineProperty(this,"_api",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_k",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_du",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dv",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_eta1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_eta2",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_skSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pkSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_compressedUSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_compressedVSize",{enumerable:!0,configurable:!0,writable:!0,value:0})}async generateKeyPair(){await this._setup();try{const t=new Uint8Array(64);return this._api.getRandomValues(t),this._deriveKeyPair(t)}catch(t){throw new fc(t)}}async deriveKeyPair(t){await this._setup();try{if(t.byteLength!==64)throw new Error("seed must be 64 bytes in length");return this._deriveKeyPair(t)}catch(n){throw new fc(n)}}async encap(t,n){await this._setup();try{if(t.length!==384*this._k+32)throw new Error("invalid encapsulation key");const r=this._getSeed(n),[s,o]=Xf(r,Z0(t));return[this._encap(t,r,o),s]}catch(r){throw new fc(r)}}async decap(t,n){await this._setup();try{if(t.byteLength!==this._compressedUSize+this._compressedVSize)throw new Error("Invalid ct size");if(n.length!==768*this._k+96)throw new Error("Invalid decapsulation key");const r=n.subarray(0,this._skSize),s=n.subarray(this._skSize,this._skSize+this._pkSize),o=n.subarray(this._skSize+this._pkSize,this._skSize+this._pkSize+32),i=n.subarray(this._skSize+this._pkSize+32,this._skSize+this._pkSize+64),a=this._decap(t,r),[u,l]=Xf(a,o),d=M4(i,t),g=this._encap(s,a,l);return T4(t,g)===1?u:d}catch(r){throw new fc(r)}}async _setup(){this._api===void 0&&(this._api=await N4())}_getSeed(t){if(t==null){const n=new Uint8Array(32);return this._api.getRandomValues(n),n}if(t.byteLength!==32)throw new Error("seed must be 32 bytes in length");return t}_deriveKeyPair(t){const n=t.subarray(0,32),r=t.subarray(32,64),[s,o]=this._deriveCpaKeyPair(n),i=Z0(s),a=new Uint8Array(this._skSize+this._pkSize+64);return a.set(o,0),a.set(s,this._skSize),a.set(i,this._skSize+this._pkSize),a.set(r,this._skSize+this._pkSize+32),[s,a]}_deriveCpaKeyPair(t){const[n,r]=Xf(t,new Uint8Array([this._k])),s=this._sampleMatrix(n,!1),o=this._sampleNoise1(r,0,this._k),i=this._sampleNoise1(r,this._k,this._k);for(let d=0;d<this._k;d++)o[d]=gc(o[d]),o[d]=Js(o[d]),i[d]=gc(i[d]);const a=new Array(this._k);for(let d=0;d<this._k;d++)a[d]=L4(Ac(s[d],o)),a[d]=xa(a[d],i[d]),a[d]=Js(a[d]);const u=new Uint8Array(this._pkSize);for(let d=0;d<this._k;d++)u.set(Jf(a[d]),d*384);u.set(n,this._skSize);const l=new Uint8Array(this._skSize);for(let d=0;d<this._k;d++)l.set(Jf(o[d]),d*384);return[u,l]}_encap(t,n,r){const s=new Array(this._k),o=new Uint8Array(384*this._k);for(let m=0;m<this._k;m++)s[m]=ey(t.subarray(m*384,(m+1)*384)),o.set(Jf(s[m]),m*384);if(!_4(t.subarray(0,o.length),o))throw new Error("invalid encapsulation key");const i=t.subarray(this._skSize),a=this._sampleMatrix(i,!0),u=this._sampleNoise1(r,0,this._k),l=this._sampleNoise2(r,this._k,this._k),d=this._sampleNoise2(r,this._k*2,1)[0];for(let m=0;m<this._k;m++)u[m]=gc(u[m]),u[m]=Js(u[m]);const g=new Array(this._k);for(let m=0;m<this._k;m++)g[m]=Ac(a[m],u),g[m]=qf(g[m]),g[m]=xa(g[m],l[m]),g[m]=Js(g[m]);const h=j4(n);let A=Ac(s,u);A=qf(A),A=xa(A,d),A=xa(A,h),A=Js(A);const f=new Uint8Array(this._compressedUSize+this._compressedVSize);return this._compressU(f.subarray(0,this._compressedUSize),g),this._compressV(f.subarray(this._compressedUSize),A),f}_decap(t,n){const r=this._decompressU(t.subarray(0,this._compressedUSize)),s=this._decompressV(t.subarray(this._compressedUSize)),o=this._polyvecFromBytes(n);for(let a=0;a<this._k;a++)r[a]=gc(r[a]);let i=Ac(o,r);return i=qf(i),i=O4(s,i),i=Js(i),F4(i)}_sampleMatrix(t,n){const r=new Array(this._k),s=new Uint8Array(2);for(let o=0,i=0;i<this._k;i++){r[i]=new Array(this._k);for(let a=0;a<this._k;a++){n?(s[0]=i,s[1]=a):(s[0]=a,s[1]=i);const u=Q4(t,s),l=ty(u.subarray(0,504),504,Ve);for(r[i][a]=l[0],o=l[1];o<Ve;){const d=u.subarray(504,672),g=ty(d,168,Ve-o),h=g[0],A=g[1];for(let f=o;f<Ve;f++)r[i][a][f]=h[f-o];o=o+A}}}return r}_sampleNoise1(t,n,r){const s=new Array(r);for(let o=0;o<r;o++)s[o]=ny(q0(this._eta1*Ve/4,t,n),this._eta1),n++;return s}_sampleNoise2(t,n,r){const s=new Array(r);for(let o=0;o<r;o++)s[o]=ny(q0(this._eta2*Ve/4,t,n),this._eta2),n++;return s}_polyvecFromBytes(t){const n=new Array(this._k);for(let r=0;r<this._k;r++)n[r]=ey(t.subarray(r*384,(r+1)*384));return n}_compressU(t,n){const r=new Array(4);for(let s=0,o=0;o<this._k;o++)for(let i=0;i<Ve/4;i++){for(let a=0;a<4;a++)r[a]=((n[o][4*i+a]<<10)+gt/2)/gt&1023;t[s++]=Yn(r[0]>>0),t[s++]=Yn(r[0]>>8|r[1]<<2),t[s++]=Yn(r[1]>>6|r[2]<<4),t[s++]=Yn(r[2]>>4|r[3]<<6),t[s++]=Yn(r[3]>>2)}return t}_compressV(t,n){const r=new Uint8Array(8);for(let s=0,o=0;o<Ve/8;o++){for(let i=0;i<8;i++)r[i]=Yn(((n[8*o+i]<<4)+gt/2)/gt)&15;t[s++]=r[0]|r[1]<<4,t[s++]=r[2]|r[3]<<4,t[s++]=r[4]|r[5]<<4,t[s++]=r[6]|r[7]<<4}return t}_decompressU(t){const n=new Array(this._k);for(let s=0;s<this._k;s++)n[s]=new Array(384);const r=new Array(4);for(let s=0,o=0;o<this._k;o++)for(let i=0;i<Ve/4;i++){r[0]=ze(t[s+0])>>0|ze(t[s+1])<<8,r[1]=ze(t[s+1])>>2|ze(t[s+2])<<6,r[2]=ze(t[s+2])>>4|ze(t[s+3])<<4,r[3]=ze(t[s+3])>>6|ze(t[s+4])<<2,s=s+5;for(let a=0;a<4;a++)n[o][4*i+a]=qn(eo(r[a]&1023)*eo(gt)+512>>10)}return n}_decompressV(t){const n=new Array(384);for(let r=0,s=0;s<Ve/2;s++,r++)n[2*s+0]=qn(ze(t[r]&15)*ze(gt)+8>>4),n[2*s+1]=qn(ze(t[r]>>4)*ze(gt)+8>>4);return n}}function Xf(e,t){const n=I4.create().update(e);t!==void 0&&n.update(t);const r=n.digest();return[r.subarray(0,32),r.subarray(32,64)]}function Z0(e){return b4.create().update(e).digest()}function M4(e,t){const n=sC.create({dkLen:32}).update(e);return t!==void 0&&n.update(t),n.digest()}function Q4(e,t){return S4.create({dkLen:672}).update(e).update(t).digest()}function Jf(e){let t=0,n=0;const r=new Uint8Array(384),s=aC(e);for(let o=0;o<Ve/2;o++)t=ze(s[2*o]),n=ze(s[2*o+1]),r[3*o+0]=Yn(t>>0),r[3*o+1]=Yn(t>>8)|Yn(n<<4),r[3*o+2]=Yn(n>>4);return r}function ey(e){const t=new Array(384).fill(0);for(let n=0;n<Ve/2;n++)t[2*n]=qn((ze(e[3*n+0])>>0|ze(e[3*n+1])<<8)&4095),t[2*n+1]=qn((ze(e[3*n+1])>>4|ze(e[3*n+2])<<4)&4095);return t}function F4(e){const t=new Uint8Array(32);let n;const r=aC(e);for(let s=0;s<Ve/8;s++){t[s]=0;for(let o=0;o<8;o++)n=((ze(r[8*s+o])<<1)+ze(gt/2))/ze(gt)&1,t[s]|=Yn(n<<o)}return t}function j4(e){const t=new Array(384).fill(0);let n;for(let r=0;r<Ve/8;r++)for(let s=0;s<8;s++)n=-1*qn(e[r]>>s&1),t[8*r+s]=n&qn((gt+1)/2);return t}function ty(e,t,n){const r=new Array(384).fill(0);let s=0,o,i;for(let a=0;s<n&&a+3<=t;)o=(ze(e[a]>>0)|ze(e[a+1])<<8)&4095,i=(ze(e[a+1]>>4)|ze(e[a+2])<<4)&4095,a=a+3,o<gt&&(r[s]=o,s=s+1),s<n&&i<gt&&(r[s]=i,s=s+1);return[r,s]}function ny(e,t){let n,r,s,o;const i=new Array(384).fill(0);for(let a=0;a<Ve/8;a++){n=D4(e.subarray(4*a,e.length)),r=n&1431655765,r=r+(n>>1&1431655765);for(let u=0;u<8;u++)s=qn(r>>4*u+0&3),o=qn(r>>4*u+t&3),i[8*a+u]=s-o}return i}function gc(e){for(let t=0,n=1,r=128;r>=2;r>>=1)for(let s=0;s<256;s=t+r){const o=kg[n];for(n=n+1,t=s;t<s+r;t++){const i=ys(o,e[t+r]);e[t+r]=e[t]-i,e[t]=e[t]+i}}return e}function ys(e,t){return iC(e*t)}function Js(e){for(let t=0;t<Ve;t++)e[t]=oC(e[t]);return e}function oC(e){let n=(16777216+gt/2)/gt*e>>24;return n=n*gt,e-n}function iC(e){let n=qn(Tg(e)*r4)*gt;return n=e-n,n>>=16,qn(n)}function L4(e){for(let n=0;n<Ve;n++)e[n]=iC(Tg(e[n])*Tg(1353));return e}function Ac(e,t){let n=ry(e[0],t[0]),r;for(let s=1;s<e.length;s++)r=ry(e[s],t[s]),n=xa(n,r);return Js(n)}function ry(e,t){let n,r;for(let s=0;s<Ve/4;s++)n=sy(e[4*s+0],e[4*s+1],t[4*s+0],t[4*s+1],kg[64+s]),r=sy(e[4*s+2],e[4*s+3],t[4*s+2],t[4*s+3],-kg[64+s]),e[4*s+0]=n[0],e[4*s+1]=n[1],e[4*s+2]=r[0],e[4*s+3]=r[1];return e}function sy(e,t,n,r,s){const o=new Array(2);return o[0]=ys(t,r),o[0]=ys(o[0],s),o[0]+=ys(e,n),o[1]=ys(e,r),o[1]+=ys(t,n),o}function xa(e,t){const n=new Array(384);for(let r=0;r<Ve;r++)n[r]=e[r]+t[r];return n}function O4(e,t){for(let n=0;n<Ve;n++)e[n]-=t[n];return e}function qf(e){let t=0;for(let n=0,r=2;r<=128;r<<=1)for(let s=0;s<256;s=t+r){const o=K0[n];for(n=n+1,t=s;t<s+r;t++){const i=e[t];e[t]=oC(i+e[t+r]),e[t+r]=i-e[t+r],e[t+r]=ys(o,e[t+r])}}for(t=0;t<256;t++)e[t]=ys(e[t],K0[127]);return e}function aC(e){for(let t=0;t<Ve;t++)e[t]-=gt,e[t]+=e[t]>>31&gt;return e}class U4 extends P4{constructor(){super(),Object.defineProperty(this,"_k",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"_du",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"_dv",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"_eta1",{enumerable:!0,configurable:!0,writable:!0,value:2}),Object.defineProperty(this,"_eta2",{enumerable:!0,configurable:!0,writable:!0,value:2}),this._skSize=12*this._k*Ve/8,this._pkSize=this._skSize+32,this._compressedUSize=this._k*this._du*Ve/8,this._compressedVSize=this._dv*Ve/8}}const zo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function H4(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function fl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function sr(e,...t){if(!H4(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Io(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Hd(e,t){sr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function z4(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function hl(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Zn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Zf(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Xt(e,t){return e<<32-t|e>>>t}const lC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cC(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const G4=lC?e=>e:e=>cC(e);function K4(e){for(let t=0;t<e.length;t++)e[t]=cC(e[t]);return e}const Ot=lC?e=>e:K4,uC=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",$4=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function sQ(e){if(sr(e),uC)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=$4[e[n]];return t}const Dr={_0:48,_9:57,A:65,F:70,a:97,f:102};function oy(e){if(e>=Dr._0&&e<=Dr._9)return e-Dr._0;if(e>=Dr.A&&e<=Dr.F)return e-(Dr.A-10);if(e>=Dr.a&&e<=Dr.f)return e-(Dr.a-10)}function Sn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(uC)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=oy(e.charCodeAt(o)),a=oy(e.charCodeAt(o+1));if(i===void 0||a===void 0){const u=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}r[s]=i*16+a}return r}function V4(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function So(e){return typeof e=="string"&&(e=V4(e)),sr(e),e}function dC(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];sr(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}class gp{}function Do(e){const t=r=>e().update(So(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function fC(e){const t=(r,s)=>e(s).update(So(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function W4(e=32){if(zo&&typeof zo.getRandomValues=="function")return zo.getRandomValues(new Uint8Array(e));if(zo&&typeof zo.randomBytes=="function")return Uint8Array.from(zo.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Y4(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),u=r?4:0,l=r?0:4;e.setUint32(t+u,i,r),e.setUint32(t+l,a,r)}function X4(e,t,n){return e&t^~e&n}function J4(e,t,n){return e&t^e&n^t&n}class hC extends gp{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Zf(this.buffer)}update(t){Io(this),t=So(t),sr(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const u=Zf(t);for(;s<=o-i;i+=s)this.process(u,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Io(this),Hd(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,Zn(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let g=i;g<s;g++)n[g]=0;Y4(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=Zf(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<l;g++)a.setUint32(4*g,d[g],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=o,t.length=s,t.pos=a,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const jr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),os=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),kt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Rt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),pc=BigInt(2**32-1),iy=BigInt(32);function _g(e,t=!1){return t?{h:Number(e&pc),l:Number(e>>iy&pc)}:{h:Number(e>>iy&pc)|0,l:Number(e&pc)|0}}function gC(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:i,l:a}=_g(e[o],t);[r[o],s[o]]=[i,a]}return[r,s]}const ay=(e,t,n)=>e>>>n,ly=(e,t,n)=>e<<32-n|t>>>n,Go=(e,t,n)=>e>>>n|t<<32-n,Ko=(e,t,n)=>e<<32-n|t>>>n,mc=(e,t,n)=>e<<64-n|t>>>n-32,yc=(e,t,n)=>e>>>n-32|t<<64-n,q4=(e,t,n)=>e<<n|t>>>32-n,Z4=(e,t,n)=>t<<n|e>>>32-n,e5=(e,t,n)=>t<<n-32|e>>>64-n,t5=(e,t,n)=>e<<n-32|t>>>64-n;function Pr(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const n5=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),r5=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,s5=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),o5=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,i5=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),a5=(e,t,n,r,s,o)=>t+n+r+s+o+(e/2**32|0)|0;function is(e,t,n,r,s){return e=e+t+s|0,r=Xt(r^e,16),n=n+r|0,t=Xt(t^n,12),{a:e,b:t,c:n,d:r}}function as(e,t,n,r,s){return e=e+t+s|0,r=Xt(r^e,8),n=n+r|0,t=Xt(t^n,7),{a:e,b:t,c:n,d:r}}class l5 extends gp{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,fl(t),fl(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=hl(this.buffer)}update(t){Io(this),t=So(t),sr(t);const{blockLen:n,buffer:r,buffer32:s}=this,o=t.length,i=t.byteOffset,a=t.buffer;for(let u=0;u<o;){this.pos===n&&(Ot(s),this.compress(s,0,!1),Ot(s),this.pos=0);const l=Math.min(n-this.pos,o-u),d=i+u;if(l===n&&!(d%4)&&u+l<o){const g=new Uint32Array(a,d,Math.floor((o-u)/4));Ot(g);for(let h=0;u+n<o;h+=s.length,u+=n)this.length+=n,this.compress(g,h,!1);Ot(g);continue}r.set(t.subarray(u,u+l),this.pos),this.pos+=l,this.length+=l,u+=l}return this}digestInto(t){Io(this),Hd(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Zn(this.buffer.subarray(n)),Ot(r),this.compress(r,0,!0),Ot(r);const s=hl(t);this.get().forEach((o,i)=>s[i]=G4(o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:s,destroyed:o,outputLen:i,pos:a}=this;return t||(t=new this.constructor({dkLen:i})),t.set(...this.get()),t.buffer.set(n),t.destroyed=o,t.finished=s,t.length=r,t.pos=a,t.outputLen=i,t}clone(){return this._cloneInto()}}function cy(e,t,n,r,s,o,i,a,u,l,d,g,h,A,f,m,v,p,y,x){let E=0;for(let C=0;C<r;C++)({a:s,b:u,c:h,d:v}=is(s,u,h,v,n[t+e[E++]])),{a:s,b:u,c:h,d:v}=as(s,u,h,v,n[t+e[E++]]),{a:o,b:l,c:A,d:p}=is(o,l,A,p,n[t+e[E++]]),{a:o,b:l,c:A,d:p}=as(o,l,A,p,n[t+e[E++]]),{a:i,b:d,c:f,d:y}=is(i,d,f,y,n[t+e[E++]]),{a:i,b:d,c:f,d:y}=as(i,d,f,y,n[t+e[E++]]),{a,b:g,c:m,d:x}=is(a,g,m,x,n[t+e[E++]]),{a,b:g,c:m,d:x}=as(a,g,m,x,n[t+e[E++]]),{a:s,b:l,c:f,d:x}=is(s,l,f,x,n[t+e[E++]]),{a:s,b:l,c:f,d:x}=as(s,l,f,x,n[t+e[E++]]),{a:o,b:d,c:m,d:v}=is(o,d,m,v,n[t+e[E++]]),{a:o,b:d,c:m,d:v}=as(o,d,m,v,n[t+e[E++]]),{a:i,b:g,c:h,d:p}=is(i,g,h,p,n[t+e[E++]]),{a:i,b:g,c:h,d:p}=as(i,g,h,p,n[t+e[E++]]),{a,b:u,c:A,d:y}=is(a,u,A,y,n[t+e[E++]]),{a,b:u,c:A,d:y}=as(a,u,A,y,n[t+e[E++]]);return{v0:s,v1:o,v2:i,v3:a,v4:u,v5:l,v6:d,v7:g,v8:h,v9:A,v10:f,v11:m,v12:v,v13:p,v14:y,v15:x}}const lr={CHUNK_START:1,CHUNK_END:2,PARENT:4,ROOT:8,KEYED_HASH:16,DERIVE_KEY_CONTEXT:32,DERIVE_KEY_MATERIAL:64},Mr=jr.slice(),uy=(()=>{const e=Array.from({length:16},(r,s)=>s),t=r=>[2,6,3,10,7,0,4,13,1,11,12,5,9,14,15,8].map(s=>r[s]),n=[];for(let r=0,s=e;r<7;r++,s=t(s))n.push(...s);return Uint8Array.from(n)})();class Ap extends l5{constructor(t={},n=0){super(64,t.dkLen===void 0?32:t.dkLen),this.chunkPos=0,this.chunksDone=0,this.flags=0,this.stack=[],this.posOut=0,this.bufferOut32=new Uint32Array(16),this.chunkOut=0,this.enableXOF=!0;const{key:r,context:s}=t,o=s!==void 0;if(r!==void 0){if(o)throw new Error('Only "key" or "context" can be specified at same time');const i=So(r).slice();sr(i,32),this.IV=hl(i),Ot(this.IV),this.flags=n|lr.KEYED_HASH}else if(o){const i=So(s),a=new Ap({dkLen:32},lr.DERIVE_KEY_CONTEXT).update(i).digest();this.IV=hl(a),Ot(this.IV),this.flags=n|lr.DERIVE_KEY_MATERIAL}else this.IV=Mr.slice(),this.flags=n;this.state=this.IV.slice(),this.bufferOut=z4(this.bufferOut32)}get(){return[]}set(){}b2Compress(t,n,r,s=0){const{state:o,pos:i}=this,{h:a,l:u}=_g(BigInt(t),!0),{v0:l,v1:d,v2:g,v3:h,v4:A,v5:f,v6:m,v7:v,v8:p,v9:y,v10:x,v11:E,v12:C,v13:I,v14:b,v15:S}=cy(uy,s,r,7,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],Mr[0],Mr[1],Mr[2],Mr[3],a,u,i,n);o[0]=l^p,o[1]=d^y,o[2]=g^x,o[3]=h^E,o[4]=A^C,o[5]=f^I,o[6]=m^b,o[7]=v^S}compress(t,n=0,r=!1){let s=this.flags;if(this.chunkPos||(s|=lr.CHUNK_START),(this.chunkPos===15||r)&&(s|=lr.CHUNK_END),r||(this.pos=this.blockLen),this.b2Compress(this.chunksDone,s,t,n),this.chunkPos+=1,this.chunkPos===16||r){let o=this.state;this.state=this.IV.slice();for(let i,a=this.chunksDone+1;(r||!(a&1))&&(i=this.stack.pop());a>>=1)this.buffer32.set(i,0),this.buffer32.set(o,8),this.pos=this.blockLen,this.b2Compress(0,this.flags|lr.PARENT,this.buffer32,0),o=this.state,this.state=this.IV.slice();this.chunksDone++,this.chunkPos=0,this.stack.push(o)}this.pos=0}_cloneInto(t){t=super._cloneInto(t);const{IV:n,flags:r,state:s,chunkPos:o,posOut:i,chunkOut:a,stack:u,chunksDone:l}=this;return t.state.set(s.slice()),t.stack=u.map(d=>Uint32Array.from(d)),t.IV.set(n),t.flags=r,t.chunkPos=o,t.chunksDone=l,t.posOut=i,t.chunkOut=a,t.enableXOF=this.enableXOF,t.bufferOut32.set(this.bufferOut32),t}destroy(){this.destroyed=!0,Zn(this.state,this.buffer32,this.IV,this.bufferOut32),Zn(...this.stack)}b2CompressOut(){const{state:t,pos:n,flags:r,buffer32:s,bufferOut32:o}=this,{h:i,l:a}=_g(BigInt(this.chunkOut++));Ot(s);const{v0:u,v1:l,v2:d,v3:g,v4:h,v5:A,v6:f,v7:m,v8:v,v9:p,v10:y,v11:x,v12:E,v13:C,v14:I,v15:b}=cy(uy,0,s,7,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],Mr[0],Mr[1],Mr[2],Mr[3],a,i,n,r);o[0]=u^v,o[1]=l^p,o[2]=d^y,o[3]=g^x,o[4]=h^E,o[5]=A^C,o[6]=f^I,o[7]=m^b,o[8]=t[0]^v,o[9]=t[1]^p,o[10]=t[2]^y,o[11]=t[3]^x,o[12]=t[4]^E,o[13]=t[5]^C,o[14]=t[6]^I,o[15]=t[7]^b,Ot(s),Ot(o),this.posOut=0}finish(){if(this.finished)return;this.finished=!0,Zn(this.buffer.subarray(this.pos));let t=this.flags|lr.ROOT;this.stack.length?(t|=lr.PARENT,Ot(this.buffer32),this.compress(this.buffer32,0,!0),Ot(this.buffer32),this.chunksDone=0,this.pos=this.blockLen):t|=(this.chunkPos?0:lr.CHUNK_START)|lr.CHUNK_END,this.flags=t,this.b2CompressOut()}writeInto(t){Io(this,!1),sr(t),this.finish();const{blockLen:n,bufferOut:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=n&&this.b2CompressOut();const i=Math.min(n-this.posOut,o-s);t.set(r.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible after digest call");return this.writeInto(t)}xof(t){return fl(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Hd(t,this),this.finished)throw new Error("digest() was already called");return this.enableXOF=!1,this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}}const c5=fC(e=>new Ap(e)),u5=BigInt(0),fa=BigInt(1),d5=BigInt(2),f5=BigInt(7),h5=BigInt(256),g5=BigInt(113),AC=[],pC=[],mC=[];for(let e=0,t=fa,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],AC.push(2*(5*r+n)),pC.push((e+1)*(e+2)/2%64);let s=u5;for(let o=0;o<7;o++)t=(t<<fa^(t>>f5)*g5)%h5,t&d5&&(s^=fa<<(fa<<BigInt(o))-fa);mC.push(s)}const yC=gC(mC,!0),A5=yC[0],p5=yC[1],dy=(e,t,n)=>n>32?e5(e,t,n):q4(e,t,n),fy=(e,t,n)=>n>32?t5(e,t,n):Z4(e,t,n);function m5(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,u=(i+2)%10,l=n[u],d=n[u+1],g=dy(l,d,1)^n[a],h=fy(l,d,1)^n[a+1];for(let A=0;A<50;A+=10)e[i+A]^=g,e[i+A+1]^=h}let s=e[2],o=e[3];for(let i=0;i<24;i++){const a=pC[i],u=dy(s,o,a),l=fy(s,o,a),d=AC[i];s=e[d],o=e[d+1],e[d]=u,e[d+1]=l}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=A5[r],e[1]^=p5[r]}Zn(n)}class zd extends gp{constructor(t,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,fl(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=hl(this.state)}clone(){return this._cloneInto()}keccak(){Ot(this.state32),m5(this.state32,this.rounds),Ot(this.state32),this.posOut=0,this.pos=0}update(t){Io(this),t=So(t),sr(t);const{blockLen:n,state:r}=this,s=t.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Io(this,!1),sr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return fl(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Hd(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Zn(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return t||(t=new zd(n,r,s,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Gd=(e,t,n)=>Do(()=>new zd(t,e,n)),y5=Gd(6,144,224/8),w5=Gd(6,136,256/8),v5=Gd(6,104,384/8),x5=Gd(6,72,512/8),wC=(e,t,n)=>fC((r={})=>new zd(t,e,r.dkLen===void 0?n:r.dkLen,!0)),vC=wC(31,168,128/8),ln=wC(31,136,256/8),E5=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ls=new Uint32Array(64);class xC extends hC{constructor(t=32){super(64,t,8,!1),this.A=jr[0]|0,this.B=jr[1]|0,this.C=jr[2]|0,this.D=jr[3]|0,this.E=jr[4]|0,this.F=jr[5]|0,this.G=jr[6]|0,this.H=jr[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:u}=this;return[t,n,r,s,o,i,a,u]}set(t,n,r,s,o,i,a,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=u|0}process(t,n){for(let g=0;g<16;g++,n+=4)ls[g]=t.getUint32(n,!1);for(let g=16;g<64;g++){const h=ls[g-15],A=ls[g-2],f=Xt(h,7)^Xt(h,18)^h>>>3,m=Xt(A,17)^Xt(A,19)^A>>>10;ls[g]=m+ls[g-7]+f+ls[g-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:u,G:l,H:d}=this;for(let g=0;g<64;g++){const h=Xt(a,6)^Xt(a,11)^Xt(a,25),A=d+h+X4(a,u,l)+E5[g]+ls[g]|0,m=(Xt(r,2)^Xt(r,13)^Xt(r,22))+J4(r,s,o)|0;d=l,l=u,u=a,a=i+A|0,i=o,o=s,s=r,r=A+m|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,s,o,i,a,u,l,d)}roundClean(){Zn(ls)}destroy(){this.set(0,0,0,0,0,0,0,0),Zn(this.buffer)}}class C5 extends xC{constructor(){super(28),this.A=os[0]|0,this.B=os[1]|0,this.C=os[2]|0,this.D=os[3]|0,this.E=os[4]|0,this.F=os[5]|0,this.G=os[6]|0,this.H=os[7]|0}}const EC=gC(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),b5=EC[0],I5=EC[1],cs=new Uint32Array(80),us=new Uint32Array(80);class Kd extends hC{constructor(t=64){super(128,t,16,!1),this.Ah=Rt[0]|0,this.Al=Rt[1]|0,this.Bh=Rt[2]|0,this.Bl=Rt[3]|0,this.Ch=Rt[4]|0,this.Cl=Rt[5]|0,this.Dh=Rt[6]|0,this.Dl=Rt[7]|0,this.Eh=Rt[8]|0,this.El=Rt[9]|0,this.Fh=Rt[10]|0,this.Fl=Rt[11]|0,this.Gh=Rt[12]|0,this.Gl=Rt[13]|0,this.Hh=Rt[14]|0,this.Hl=Rt[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:o,Cl:i,Dh:a,Dl:u,Eh:l,El:d,Fh:g,Fl:h,Gh:A,Gl:f,Hh:m,Hl:v}=this;return[t,n,r,s,o,i,a,u,l,d,g,h,A,f,m,v]}set(t,n,r,s,o,i,a,u,l,d,g,h,A,f,m,v){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=u|0,this.Eh=l|0,this.El=d|0,this.Fh=g|0,this.Fl=h|0,this.Gh=A|0,this.Gl=f|0,this.Hh=m|0,this.Hl=v|0}process(t,n){for(let x=0;x<16;x++,n+=4)cs[x]=t.getUint32(n),us[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const E=cs[x-15]|0,C=us[x-15]|0,I=Go(E,C,1)^Go(E,C,8)^ay(E,C,7),b=Ko(E,C,1)^Ko(E,C,8)^ly(E,C,7),S=cs[x-2]|0,k=us[x-2]|0,R=Go(S,k,19)^mc(S,k,61)^ay(S,k,6),B=Ko(S,k,19)^yc(S,k,61)^ly(S,k,6),M=s5(b,B,us[x-7],us[x-16]),T=o5(M,I,R,cs[x-7],cs[x-16]);cs[x]=T|0,us[x]=M|0}let{Ah:r,Al:s,Bh:o,Bl:i,Ch:a,Cl:u,Dh:l,Dl:d,Eh:g,El:h,Fh:A,Fl:f,Gh:m,Gl:v,Hh:p,Hl:y}=this;for(let x=0;x<80;x++){const E=Go(g,h,14)^Go(g,h,18)^mc(g,h,41),C=Ko(g,h,14)^Ko(g,h,18)^yc(g,h,41),I=g&A^~g&m,b=h&f^~h&v,S=i5(y,C,b,I5[x],us[x]),k=a5(S,p,E,I,b5[x],cs[x]),R=S|0,B=Go(r,s,28)^mc(r,s,34)^mc(r,s,39),M=Ko(r,s,28)^yc(r,s,34)^yc(r,s,39),T=r&o^r&a^o&a,F=s&i^s&u^i&u;p=m|0,y=v|0,m=A|0,v=f|0,A=g|0,f=h|0,{h:g,l:h}=Pr(l|0,d|0,k|0,R|0),l=a|0,d=u|0,a=o|0,u=i|0,o=r|0,i=s|0;const H=n5(R,M,F);r=r5(H,k,B,T),s=H|0}({h:r,l:s}=Pr(this.Ah|0,this.Al|0,r|0,s|0)),{h:o,l:i}=Pr(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:u}=Pr(this.Ch|0,this.Cl|0,a|0,u|0),{h:l,l:d}=Pr(this.Dh|0,this.Dl|0,l|0,d|0),{h:g,l:h}=Pr(this.Eh|0,this.El|0,g|0,h|0),{h:A,l:f}=Pr(this.Fh|0,this.Fl|0,A|0,f|0),{h:m,l:v}=Pr(this.Gh|0,this.Gl|0,m|0,v|0),{h:p,l:y}=Pr(this.Hh|0,this.Hl|0,p|0,y|0),this.set(r,s,o,i,a,u,l,d,g,h,A,f,m,v,p,y)}roundClean(){Zn(cs,us)}destroy(){Zn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class S5 extends Kd{constructor(){super(48),this.Ah=kt[0]|0,this.Al=kt[1]|0,this.Bh=kt[2]|0,this.Bl=kt[3]|0,this.Ch=kt[4]|0,this.Cl=kt[5]|0,this.Dh=kt[6]|0,this.Dl=kt[7]|0,this.Eh=kt[8]|0,this.El=kt[9]|0,this.Fh=kt[10]|0,this.Fl=kt[11]|0,this.Gh=kt[12]|0,this.Gl=kt[13]|0,this.Hh=kt[14]|0,this.Hl=kt[15]|0}}const Tt=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),_t=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class B5 extends Kd{constructor(){super(28),this.Ah=Tt[0]|0,this.Al=Tt[1]|0,this.Bh=Tt[2]|0,this.Bl=Tt[3]|0,this.Ch=Tt[4]|0,this.Cl=Tt[5]|0,this.Dh=Tt[6]|0,this.Dl=Tt[7]|0,this.Eh=Tt[8]|0,this.El=Tt[9]|0,this.Fh=Tt[10]|0,this.Fl=Tt[11]|0,this.Gh=Tt[12]|0,this.Gl=Tt[13]|0,this.Hh=Tt[14]|0,this.Hl=Tt[15]|0}}class k5 extends Kd{constructor(){super(32),this.Ah=_t[0]|0,this.Al=_t[1]|0,this.Bh=_t[2]|0,this.Bl=_t[3]|0,this.Ch=_t[4]|0,this.Cl=_t[5]|0,this.Dh=_t[6]|0,this.Dl=_t[7]|0,this.Eh=_t[8]|0,this.El=_t[9]|0,this.Fh=_t[10]|0,this.Fl=_t[11]|0,this.Gh=_t[12]|0,this.Gl=_t[13]|0,this.Hh=_t[14]|0,this.Hl=_t[15]|0}}const R5=Do(()=>new xC),T5=Do(()=>new C5),_5=Do(()=>new Kd),N5=Do(()=>new S5),D5=Do(()=>new k5),P5=Do(()=>new B5);/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */const Er=sr,M5=W4;function Q5(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function wc(...e){const t=r=>typeof r=="number"?r:r.bytesLen,n=e.reduce((r,s)=>r+t(s),0);return{bytesLen:n,encode:r=>{const s=new Uint8Array(n);for(let o=0,i=0;o<e.length;o++){const a=e[o],u=t(a),l=typeof a=="number"?r[o]:a.encode(r[o]);Er(l,u),s.set(l,i),typeof a!="number"&&l.fill(0),i+=u}return s},decode:r=>{Er(r,n);const s=[];for(const o of e){const i=t(o),a=r.subarray(0,i);s.push(typeof o=="number"?a:o.decode(a)),r=r.subarray(i)}return s}}}function $o(e,t){const n=t*e.bytesLen;return{bytesLen:n,encode:r=>{if(r.length!==t)throw new Error(`vecCoder.encode: wrong length=${r.length}. Expected: ${t}`);const s=new Uint8Array(n);for(let o=0,i=0;o<r.length;o++){const a=e.encode(r[o]);s.set(a,i),a.fill(0),i+=a.length}return s},decode:r=>{Er(r,n);const s=[];for(let o=0;o<r.length;o+=e.bytesLen)s.push(e.decode(r.subarray(o,o+e.bytesLen)));return s}}}function hy(...e){for(const t of e)if(Array.isArray(t))for(const n of t)n.fill(0);else t.fill(0)}function gy(e){return(1<<e)-1}const ui=new Uint8Array(0);function Ay(e,t=ui){if(Er(e),Er(t),t.length>255)throw new Error("context should be less than 255 bytes");return dC(new Uint8Array([0,t.length]),t,e)}const py={"SHA2-256":{oid:Sn("0609608648016503040201"),hash:R5},"SHA2-384":{oid:Sn("0609608648016503040202"),hash:N5},"SHA2-512":{oid:Sn("0609608648016503040203"),hash:_5},"SHA2-224":{oid:Sn("0609608648016503040204"),hash:T5},"SHA2-512/224":{oid:Sn("0609608648016503040205"),hash:P5},"SHA2-512/256":{oid:Sn("0609608648016503040206"),hash:D5},"SHA3-224":{oid:Sn("0609608648016503040207"),hash:y5},"SHA3-256":{oid:Sn("0609608648016503040208"),hash:w5},"SHA3-384":{oid:Sn("0609608648016503040209"),hash:v5},"SHA3-512":{oid:Sn("060960864801650304020A"),hash:x5},"SHAKE-128":{oid:Sn("060960864801650304020B"),hash:e=>vC(e,{dkLen:32})},"SHAKE-256":{oid:Sn("060960864801650304020C"),hash:e=>ln(e,{dkLen:64})}};function my(e,t,n=ui){if(Er(t),Er(n),n.length>255)throw new Error("context should be less than 255 bytes");if(!py[e])throw new Error("unknown hash: "+e);const{oid:r,hash:s}=py[e],o=s(t);return dC(new Uint8Array([1,n.length]),n,r,o)}/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */function F5(e,t=8){const s=e.toString(2).padStart(8,"0").slice(-t).padStart(7,"0").split("").reverse().join("");return Number.parseInt(s,2)}const j5=e=>{const{newPoly:t,N:n,Q:r,F:s,ROOT_OF_UNITY:o,brvBits:i}=e,a=(m,v=r)=>{const p=m%v|0;return(p>=0?p|0:v+p|0)|0},u=(m,v=r)=>{const p=a(m,v)|0;return(p>v>>1?p-v|0:p)|0};function l(){const m=t(n);for(let v=0;v<n;v++){const p=F5(v,i),y=BigInt(o)**BigInt(p)%BigInt(r);m[v]=Number(y)|0}return m}const d=l(),g=n,h=0;return{mod:a,smod:u,nttZetas:d,NTT:{encode:m=>{for(let v=1,p=128;p>h;p>>=1)for(let y=0;y<n;y+=2*p){const x=d[v++];for(let E=y;E<y+p;E++){const C=a(x*m[E+p]);m[E+p]=a(m[E]-C)|0,m[E]=a(m[E]+C)|0}}return m},decode:m=>{for(let v=g-1,p=1+h;p<g+h;p<<=1)for(let y=0;y<n;y+=2*p){const x=d[v--];for(let E=y;E<y+p;E++){const C=m[E];m[E]=a(C+m[E+p]),m[E+p]=a(x*(m[E+p]-C))}}for(let v=0;v<m.length;v++)m[v]=a(s*m[v]);return m}},bitsCoder:(m,v)=>{const p=gy(m),y=m*(n/8);return{bytesLen:y,encode:x=>{const E=new Uint8Array(y);for(let C=0,I=0,b=0,S=0;C<x.length;C++)for(I|=(v.encode(x[C])&p)<<b,b+=m;b>=8;b-=8,I>>=8)E[S++]=I&gy(b);return E},decode:x=>{const E=t(n);for(let C=0,I=0,b=0,S=0;C<x.length;C++)for(I|=x[C]<<b,b+=8;b>=m;b-=m,I>>=m)E[S++]=v.decode(I&p);return E}}}}},CC=e=>(t,n)=>{n||(n=e.blockLen);const r=new Uint8Array(t.length+2);r.set(t);const s=t.length,o=new Uint8Array(n);let i=e.create({}),a=0,u=0;return{stats:()=>({calls:a,xofs:u}),get:(l,d)=>(r[s+0]=l,r[s+1]=d,i.destroy(),i=e.create({}).update(r),a++,()=>(u++,i.xofInto(o))),clean:()=>{i.destroy(),o.fill(0),r.fill(0)}}},L5=CC(vC),O5=CC(ln);/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */const $e=256,Es=8380417,U5=1753,H5=8347681,La=13,yy=Math.floor((Es-1)/88)|0,bC=Math.floor((Es-1)/32)|0,z5={5:{K:8,L:7,D:La,GAMMA1:2**19,GAMMA2:bC,TAU:60,ETA:2,OMEGA:75}},Rn=e=>new Int32Array(e),{mod:uo,smod:zc,NTT:jt,bitsCoder:G5}=j5({N:$e,Q:Es,F:H5,ROOT_OF_UNITY:U5,newPoly:Rn,brvBits:8}),wy=e=>e,ha=(e,t=wy,n=wy)=>G5(e,{encode:r=>t(n(r)),decode:r=>n(t(r))}),Vo=(e,t)=>{for(let n=0;n<e.length;n++)e[n]=uo(e[n]+t[n]);return e},vy=(e,t)=>{for(let n=0;n<e.length;n++)e[n]=uo(e[n]-t[n]);return e},K5=e=>{for(let t=0;t<$e;t++)e[t]<<=La;return e},ga=(e,t)=>{for(let n=0;n<$e;n++)if(Math.abs(zc(e[n]))>=t)return!0;return!1},Vs=(e,t)=>{const n=Rn($e);for(let r=0;r<e.length;r++)n[r]=uo(e[r]*t[r]);return n};function eh(e){const t=Rn($e);for(let n=0;n<$e;){const r=e();if(r.length%3)throw new Error("RejNTTPoly: unaligned block");for(let s=0;n<$e&&s<=r.length-3;s+=3){const o=(r[s+0]|r[s+1]<<8|r[s+2]<<16)&8388607;o<Es&&(t[n++]=o)}}return t}function $5(e){const{K:t,L:n,GAMMA1:r,GAMMA2:s,TAU:o,ETA:i,OMEGA:a}=e,{CRH_BYTES:u,TR_BYTES:l,C_TILDE_BYTES:d,XOF128:g,XOF256:h}=e;if(![2,4].includes(i))throw new Error("Wrong ETA");if(![1<<17,1<<19].includes(r))throw new Error("Wrong GAMMA1");if(![yy,bC].includes(s))throw new Error("Wrong GAMMA2");const A=o*i,f=K=>{const P=uo(K),j=zc(P,2*s)|0;return P-j===Es-1?{r1:0,r0:j-1|0}:{r1:Math.floor((P-j)/(2*s))|0,r0:j}},m=K=>f(K).r1,v=K=>f(K).r0,p=(K,P)=>K<=s||K>Es-s||K===Es-s&&P===0?0:1,y=(K,P)=>{const j=Math.floor((Es-1)/(2*s)),{r1:U,r0:L}=f(P);return K===1?L>0?uo(U+1,j)|0:uo(U-1,j)|0:U|0},x=K=>{const P=uo(K),j=zc(P,2**La)|0;return{r1:Math.floor((P-j)/2**La)|0,r0:j}},E={bytesLen:a+t,encode:K=>{if(K===!1)throw new Error("hint.encode: hint is false");const P=new Uint8Array(a+t);for(let j=0,U=0;j<t;j++){for(let L=0;L<$e;L++)K[j][L]!==0&&(P[U++]=L);P[a+j]=U}return P},decode:K=>{const P=[];let j=0;for(let U=0;U<t;U++){const L=Rn($e);if(K[a+U]<j||K[a+U]>a)return!1;for(let z=j;z<K[a+U];z++){if(z>j&&K[z]<=K[z-1])return!1;L[K[z]]=1}j=K[a+U],P.push(L)}for(let U=j;U<a;U++)if(K[U]!==0)return!1;return P}},C=ha(i===2?3:4,K=>i-K,K=>{if(!(-i<=K&&K<=i))throw new Error(`malformed key s1/s3 ${K} outside of ETA range [${-i}, ${i}]`);return K}),I=ha(13,K=>(1<<La-1)-K),b=ha(10),S=ha(r===1<<17?18:20,K=>zc(r-K)),k=ha(s===yy?6:4),R=$o(k,t),B=wc(32,$o(b,t)),M=wc(32,32,l,$o(C,n),$o(C,t),$o(I,t)),T=wc(d,$o(S,n),E),F=i===2?K=>K<15?2-K%5:!1:K=>K<9?4-K:!1;function H(K){const P=Rn($e);for(let j=0;j<$e;){const U=K();for(let L=0;j<$e&&L<U.length;L+=1){const z=F(U[L]&15),$=F(U[L]>>4&15);z!==!1&&(P[j++]=z),j<$e&&$!==!1&&(P[j++]=$)}}return P}const O=K=>{const P=Rn($e),j=ln.create({}).update(K),U=new Uint8Array(ln.blockLen);j.xofInto(U);const L=U.slice(0,8);for(let z=$e-o,$=8,ee=0,ce=0;z<$e;z++){let se=z+1;for(;se>z;)se=U[$++],!($<ln.blockLen)&&(j.xofInto(U),$=0);P[z]=P[se],P[se]=1-((L[ee]>>ce++&1)<<1),ce>=8&&(ee++,ce=0)}return P},X=K=>{const P=Rn($e),j=Rn($e);for(let U=0;U<K.length;U++){const{r0:L,r1:z}=x(K[U]);P[U]=L,j[U]=z}return{r0:P,r1:j}},N=(K,P)=>{for(let j=0;j<$e;j++)K[j]=y(P[j],K[j]);return K},D=(K,P)=>{const j=Rn($e);let U=0;for(let L=0;L<$e;L++){const z=p(K[L],P[L]);j[L]=z,U+=z}return{v:j,cnt:U}},V=32,J=wc(32,64,32),te={signRandBytes:V,keygen:K=>{const P=new Uint8Array(34),j=K===void 0;j&&(K=M5(32)),Er(K,32),P.set(K),j&&K.fill(0),P[32]=t,P[33]=n;const[U,L,z]=J.decode(ln(P,{dkLen:J.bytesLen})),$=h(L),ee=[];for(let ue=0;ue<n;ue++)ee.push(H($.get(ue&255,ue>>8&255)));const ce=[];for(let ue=n;ue<n+t;ue++)ce.push(H($.get(ue&255,ue>>8&255)));const se=ee.map(ue=>jt.encode(ue.slice())),be=[],Ce=[],Be=g(U),ye=Rn($e);for(let ue=0;ue<t;ue++){ye.fill(0);for(let ge=0;ge<n;ge++){const Te=eh(Be.get(ge,ue));Vo(ye,Vs(Te,se[ge]))}jt.decode(ye);const{r0:le,r1:Me}=X(Vo(ye,ce[ue]));be.push(le),Ce.push(Me)}const Re=B.encode([U,Ce]),Qe=ln(Re,{dkLen:l}),ne=M.encode([U,z,Qe,ee,ce,be]);return Be.clean(),$.clean(),hy(U,L,z,ee,ce,se,ye,be,Ce,Qe,P),{publicKey:Re,secretKey:ne}},sign:(K,P,j,U=!1)=>{const[L,z,$,ee,ce,se]=M.decode(K),be=[],Ce=g(L);for(let ne=0;ne<t;ne++){const ue=[];for(let le=0;le<n;le++)ue.push(eh(Ce.get(le,ne)));be.push(ue)}Ce.clean();for(let ne=0;ne<n;ne++)jt.encode(ee[ne]);for(let ne=0;ne<t;ne++)jt.encode(ce[ne]),jt.encode(se[ne]);const Be=U?P:ln.create({dkLen:u}).update($).update(P).digest(),ye=j||new Uint8Array(32);Er(ye);const Re=ln.create({dkLen:u}).update(z).update(ye).update(Be).digest();Er(Re,u);const Qe=h(Re,S.bytesLen);e:for(let ne=0;;){const ue=[];for(let _e=0;_e<n;_e++,ne++)ue.push(S.decode(Qe.get(ne&255,ne>>8)()));const le=ue.map(_e=>jt.encode(_e.slice())),Me=[];for(let _e=0;_e<t;_e++){const Vt=Rn($e);for(let It=0;It<n;It++)Vo(Vt,Vs(be[_e][It],le[It]));jt.decode(Vt),Me.push(Vt)}const ge=Me.map(_e=>_e.map(m)),Te=ln.create({dkLen:d}).update(Be).update(R.encode(ge)).digest(),Ye=jt.encode(O(Te)),$t=ee.map(_e=>Vs(_e,Ye));for(let _e=0;_e<n;_e++)if(Vo(jt.decode($t[_e]),ue[_e]),ga($t[_e],r-A))continue e;let bt=0;const kr=[];for(let _e=0;_e<t;_e++){const Vt=jt.decode(Vs(ce[_e],Ye)),It=vy(Me[_e],Vt).map(v);if(ga(It,s-A))continue e;const Mo=jt.decode(Vs(se[_e],Ye));if(ga(Mo,s))continue e;Vo(It,Mo);const dt=D(It,ge[_e]);kr.push(dt.v),bt+=dt.cnt}if(bt>a)continue;Qe.clean();const or=T.encode([Te,$t,kr]);return hy(Te,$t,kr,Ye,ge,Me,le,ue,Re,Be,ee,ce,se,...be),or}throw new Error("Unreachable code path reached, report this error")},verify:(K,P,j,U=!1)=>{const[L,z]=B.decode(K),$=ln(K,{dkLen:l});if(j.length!==T.bytesLen)return!1;const[ee,ce,se]=T.decode(j);if(se===!1)return!1;for(let ne=0;ne<n;ne++)if(ga(ce[ne],r-A))return!1;const be=U?P:ln.create({dkLen:u}).update($).update(P).digest(),Ce=jt.encode(O(ee)),Be=ce.map(ne=>ne.slice());for(let ne=0;ne<n;ne++)jt.encode(Be[ne]);const ye=[],Re=g(L);for(let ne=0;ne<t;ne++){const ue=Vs(jt.encode(K5(z[ne])),Ce),le=Rn($e);for(let ge=0;ge<n;ge++){const Te=eh(Re.get(ge,ne));Vo(le,Vs(Te,Be[ge]))}const Me=jt.decode(vy(le,ue));ye.push(N(Me,se[ne]))}Re.clean();const Qe=ln.create({dkLen:d}).update(be).update(R.encode(ye)).digest();for(const ne of se)if(!(ne.reduce((le,Me)=>le+Me,0)<=a))return!1;for(const ne of ce)if(ga(ne,r-A))return!1;return Q5(ee,Qe)}};return{internal:te,keygen:te.keygen,signRandBytes:te.signRandBytes,sign:(K,P,j=ui,U)=>{const L=Ay(P,j),z=te.sign(K,L,U);return L.fill(0),z},verify:(K,P,j,U=ui)=>te.verify(K,Ay(P,U),j),prehash:K=>({sign:(P,j,U=ui,L)=>{const z=my(K,j,U),$=te.sign(P,z,L);return z.fill(0),$},verify:(P,j,U,L=ui)=>te.verify(P,my(K,j,L),U)})}}const th=$5({...z5[5],CRH_BYTES:64,TR_BYTES:64,C_TILDE_BYTES:64,XOF128:L5,XOF256:O5});/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function V5(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ng(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function nh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ut(e,t,n=""){const r=V5(e),s=e==null?void 0:e.length,o=t!==void 0;if(!r||o&&s!==t){const i=n&&`"${n}" `,a=o?` of length ${t}`:"",u=r?`length=${s}`:`type=${typeof e}`;throw new Error(i+"expected Uint8Array"+a+", got "+u)}return e}function xy(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function W5(e,t){Ut(e,void 0,"output");const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ns(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Mi(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Y5(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const X5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function J5(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function q5(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const IC=(e,t)=>{function n(r,...s){if(Ut(r,void 0,"key"),!X5)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const d=s[0];Ut(d,e.varSizeNonce?void 0:e.nonceLength,"nonce")}const o=e.tagLength;o&&s[1]!==void 0&&Ut(s[1],void 0,"AAD");const i=t(r,...s),a=(d,g)=>{if(g!==void 0){if(d!==2)throw new Error("cipher output not supported");Ut(g,void 0,"output")}};let u=!1;return{encrypt(d,g){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,Ut(d),a(i.encrypt.length,g),i.encrypt(d,g)},decrypt(d,g){if(Ut(d),o&&d.length<o)throw new Error('"ciphertext" expected length bigger than tagLength='+o);return a(i.decrypt.length,g),i.decrypt(d,g)}}}return Object.assign(n,e),n};function Ey(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error('"output" expected Uint8Array of length '+e+", got: "+t.length);if(n&&!eD(t))throw new Error("invalid output, must be aligned");return t}function Z5(e,t,n){Ng(n);const r=new Uint8Array(16),s=Y5(r);return s.setBigUint64(0,BigInt(t),n),s.setBigUint64(8,BigInt(e),n),r}function eD(e){return e.byteOffset%4===0}function od(e){return Uint8Array.from(e)}const SC=e=>Uint8Array.from(e.split(""),t=>t.charCodeAt(0)),tD=SC("expand 16-byte k"),nD=SC("expand 32-byte k"),rD=Ns(tD),sD=Ns(nD);function ae(e,t){return e<<t|e>>>32-t}function Dg(e){return e.byteOffset%4===0}const vc=64,oD=16,BC=2**32-1,Cy=Uint32Array.of();function iD(e,t,n,r,s,o,i,a){const u=s.length,l=new Uint8Array(vc),d=Ns(l),g=Dg(s)&&Dg(o),h=g?Ns(s):Cy,A=g?Ns(o):Cy;for(let f=0;f<u;i++){if(e(t,n,r,d,i,a),i>=BC)throw new Error("arx: counter overflow");const m=Math.min(vc,u-f);if(g&&m===vc){const v=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let p=0,y;p<oD;p++)y=v+p,A[y]=h[y]^d[p];f+=vc;continue}for(let v=0,p;v<m;v++)p=f+v,o[p]=s[p]^l[v];f+=m}}function kC(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:i}=J5({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return nh(s),nh(i),Ng(o),Ng(n),(a,u,l,d,g=0)=>{Ut(a,void 0,"key"),Ut(u,void 0,"nonce"),Ut(l,void 0,"data");const h=l.length;if(d===void 0&&(d=new Uint8Array(h)),Ut(d,void 0,"output"),nh(g),g<0||g>=BC)throw new Error("arx: counter overflow");if(d.length<h)throw new Error(`arx: output (${d.length}) is shorter than data (${h})`);const A=[];let f=a.length,m,v;if(f===32)A.push(m=od(a)),v=sD;else if(f===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),v=rD,A.push(m);else throw Ut(a,32,"arx key"),new Error("invalid key size");Dg(u)||A.push(u=od(u));const p=Ns(m);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(v,p,Ns(u.subarray(0,16)),p),u=u.subarray(16)}const y=16-s;if(y!==u.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(y!==12){const E=new Uint8Array(12);E.set(u,o?0:12-u.length),u=E,A.push(u)}const x=Ns(u);return iD(e,v,p,x,l,d,g,i),Mi(...A),d}}function pt(e,t){return e[t++]&255|(e[t++]&255)<<8}class aD{constructor(t){Z(this,"blockLen",16);Z(this,"outputLen",16);Z(this,"buffer",new Uint8Array(16));Z(this,"r",new Uint16Array(10));Z(this,"h",new Uint16Array(10));Z(this,"pad",new Uint16Array(8));Z(this,"pos",0);Z(this,"finished",!1);t=od(Ut(t,32,"key"));const n=pt(t,0),r=pt(t,2),s=pt(t,4),o=pt(t,6),i=pt(t,8),a=pt(t,10),u=pt(t,12),l=pt(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|o<<9)&8191,this.r[4]=(o>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let d=0;d<8;d++)this.pad[d]=pt(t,16+2*d)}process(t,n,r=!1){const s=r?0:2048,{h:o,r:i}=this,a=i[0],u=i[1],l=i[2],d=i[3],g=i[4],h=i[5],A=i[6],f=i[7],m=i[8],v=i[9],p=pt(t,n+0),y=pt(t,n+2),x=pt(t,n+4),E=pt(t,n+6),C=pt(t,n+8),I=pt(t,n+10),b=pt(t,n+12),S=pt(t,n+14);let k=o[0]+(p&8191),R=o[1]+((p>>>13|y<<3)&8191),B=o[2]+((y>>>10|x<<6)&8191),M=o[3]+((x>>>7|E<<9)&8191),T=o[4]+((E>>>4|C<<12)&8191),F=o[5]+(C>>>1&8191),H=o[6]+((C>>>14|I<<2)&8191),O=o[7]+((I>>>11|b<<5)&8191),X=o[8]+((b>>>8|S<<8)&8191),N=o[9]+(S>>>5|s),D=0,V=D+k*a+R*(5*v)+B*(5*m)+M*(5*f)+T*(5*A);D=V>>>13,V&=8191,V+=F*(5*h)+H*(5*g)+O*(5*d)+X*(5*l)+N*(5*u),D+=V>>>13,V&=8191;let J=D+k*u+R*a+B*(5*v)+M*(5*m)+T*(5*f);D=J>>>13,J&=8191,J+=F*(5*A)+H*(5*h)+O*(5*g)+X*(5*d)+N*(5*l),D+=J>>>13,J&=8191;let te=D+k*l+R*u+B*a+M*(5*v)+T*(5*m);D=te>>>13,te&=8191,te+=F*(5*f)+H*(5*A)+O*(5*h)+X*(5*g)+N*(5*d),D+=te>>>13,te&=8191;let K=D+k*d+R*l+B*u+M*a+T*(5*v);D=K>>>13,K&=8191,K+=F*(5*m)+H*(5*f)+O*(5*A)+X*(5*h)+N*(5*g),D+=K>>>13,K&=8191;let P=D+k*g+R*d+B*l+M*u+T*a;D=P>>>13,P&=8191,P+=F*(5*v)+H*(5*m)+O*(5*f)+X*(5*A)+N*(5*h),D+=P>>>13,P&=8191;let j=D+k*h+R*g+B*d+M*l+T*u;D=j>>>13,j&=8191,j+=F*a+H*(5*v)+O*(5*m)+X*(5*f)+N*(5*A),D+=j>>>13,j&=8191;let U=D+k*A+R*h+B*g+M*d+T*l;D=U>>>13,U&=8191,U+=F*u+H*a+O*(5*v)+X*(5*m)+N*(5*f),D+=U>>>13,U&=8191;let L=D+k*f+R*A+B*h+M*g+T*d;D=L>>>13,L&=8191,L+=F*l+H*u+O*a+X*(5*v)+N*(5*m),D+=L>>>13,L&=8191;let z=D+k*m+R*f+B*A+M*h+T*g;D=z>>>13,z&=8191,z+=F*d+H*l+O*u+X*a+N*(5*v),D+=z>>>13,z&=8191;let $=D+k*v+R*m+B*f+M*A+T*h;D=$>>>13,$&=8191,$+=F*g+H*d+O*l+X*u+N*a,D+=$>>>13,$&=8191,D=(D<<2)+D|0,D=D+V|0,V=D&8191,D=D>>>13,J+=D,o[0]=V,o[1]=J,o[2]=te,o[3]=K,o[4]=P,o[5]=j,o[6]=U,o[7]=L,o[8]=z,o[9]=$}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=s,s=t[a]>>>13,t[a]&=8191;t[0]+=s*5,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,r[0]=t[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let o=(s^1)-1;for(let a=0;a<10;a++)r[a]&=o;o=~o;for(let a=0;a<10;a++)t[a]=t[a]&o|r[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let i=t[0]+n[0];t[0]=i&65535;for(let a=1;a<8;a++)i=(t[a]+n[a]|0)+(i>>>16)|0,t[a]=i&65535;Mi(r)}update(t){xy(this),Ut(t),t=od(t);const{buffer:n,blockLen:r}=this,s=t.length;for(let o=0;o<s;){const i=Math.min(r-this.pos,s-o);if(i===r){for(;r<=s-o;o+=r)this.process(t,o);continue}n.set(t.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Mi(this.h,this.r,this.buffer,this.pad)}digestInto(t){xy(this),W5(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)t[o++]=r[i]>>>0,t[o++]=r[i]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function lD(e){const t=(r,s)=>e(s).update(r).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const cD=lD(e=>new aD(e));function RC(e,t,n,r,s,o=20){let i=e[0],a=e[1],u=e[2],l=e[3],d=t[0],g=t[1],h=t[2],A=t[3],f=t[4],m=t[5],v=t[6],p=t[7],y=s,x=n[0],E=n[1],C=n[2],I=i,b=a,S=u,k=l,R=d,B=g,M=h,T=A,F=f,H=m,O=v,X=p,N=y,D=x,V=E,J=C;for(let K=0;K<o;K+=2)I=I+R|0,N=ae(N^I,16),F=F+N|0,R=ae(R^F,12),I=I+R|0,N=ae(N^I,8),F=F+N|0,R=ae(R^F,7),b=b+B|0,D=ae(D^b,16),H=H+D|0,B=ae(B^H,12),b=b+B|0,D=ae(D^b,8),H=H+D|0,B=ae(B^H,7),S=S+M|0,V=ae(V^S,16),O=O+V|0,M=ae(M^O,12),S=S+M|0,V=ae(V^S,8),O=O+V|0,M=ae(M^O,7),k=k+T|0,J=ae(J^k,16),X=X+J|0,T=ae(T^X,12),k=k+T|0,J=ae(J^k,8),X=X+J|0,T=ae(T^X,7),I=I+B|0,J=ae(J^I,16),O=O+J|0,B=ae(B^O,12),I=I+B|0,J=ae(J^I,8),O=O+J|0,B=ae(B^O,7),b=b+M|0,N=ae(N^b,16),X=X+N|0,M=ae(M^X,12),b=b+M|0,N=ae(N^b,8),X=X+N|0,M=ae(M^X,7),S=S+T|0,D=ae(D^S,16),F=F+D|0,T=ae(T^F,12),S=S+T|0,D=ae(D^S,8),F=F+D|0,T=ae(T^F,7),k=k+R|0,V=ae(V^k,16),H=H+V|0,R=ae(R^H,12),k=k+R|0,V=ae(V^k,8),H=H+V|0,R=ae(R^H,7);let te=0;r[te++]=i+I|0,r[te++]=a+b|0,r[te++]=u+S|0,r[te++]=l+k|0,r[te++]=d+R|0,r[te++]=g+B|0,r[te++]=h+M|0,r[te++]=A+T|0,r[te++]=f+F|0,r[te++]=m+H|0,r[te++]=v+O|0,r[te++]=p+X|0,r[te++]=y+N|0,r[te++]=x+D|0,r[te++]=E+V|0,r[te++]=C+J|0}function uD(e,t,n,r){let s=e[0],o=e[1],i=e[2],a=e[3],u=t[0],l=t[1],d=t[2],g=t[3],h=t[4],A=t[5],f=t[6],m=t[7],v=n[0],p=n[1],y=n[2],x=n[3];for(let C=0;C<20;C+=2)s=s+u|0,v=ae(v^s,16),h=h+v|0,u=ae(u^h,12),s=s+u|0,v=ae(v^s,8),h=h+v|0,u=ae(u^h,7),o=o+l|0,p=ae(p^o,16),A=A+p|0,l=ae(l^A,12),o=o+l|0,p=ae(p^o,8),A=A+p|0,l=ae(l^A,7),i=i+d|0,y=ae(y^i,16),f=f+y|0,d=ae(d^f,12),i=i+d|0,y=ae(y^i,8),f=f+y|0,d=ae(d^f,7),a=a+g|0,x=ae(x^a,16),m=m+x|0,g=ae(g^m,12),a=a+g|0,x=ae(x^a,8),m=m+x|0,g=ae(g^m,7),s=s+l|0,x=ae(x^s,16),f=f+x|0,l=ae(l^f,12),s=s+l|0,x=ae(x^s,8),f=f+x|0,l=ae(l^f,7),o=o+d|0,v=ae(v^o,16),m=m+v|0,d=ae(d^m,12),o=o+d|0,v=ae(v^o,8),m=m+v|0,d=ae(d^m,7),i=i+g|0,p=ae(p^i,16),h=h+p|0,g=ae(g^h,12),i=i+g|0,p=ae(p^i,8),h=h+p|0,g=ae(g^h,7),a=a+u|0,y=ae(y^a,16),A=A+y|0,u=ae(u^A,12),a=a+u|0,y=ae(y^a,8),A=A+y|0,u=ae(u^A,7);let E=0;r[E++]=s,r[E++]=o,r[E++]=i,r[E++]=a,r[E++]=v,r[E++]=p,r[E++]=y,r[E++]=x}const dD=kC(RC,{counterRight:!1,counterLength:4,allowShortKeys:!1}),fD=kC(RC,{counterRight:!1,counterLength:8,extendNonceFn:uD,allowShortKeys:!1}),hD=new Uint8Array(16),by=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(hD.subarray(n))},gD=new Uint8Array(32);function Iy(e,t,n,r,s){s!==void 0&&Ut(s,void 0,"AAD");const o=e(t,n,gD),i=Z5(r.length,s?s.length:0,!0),a=cD.create(o);s&&by(a,s),by(a,r),a.update(i);const u=a.digest();return Mi(o,i),u}const TC=e=>(t,n,r)=>({encrypt(o,i){const a=o.length;i=Ey(a+16,i,!1),i.set(o);const u=i.subarray(0,-16);e(t,n,u,u,1);const l=Iy(e,t,n,u,r);return i.set(l,a),Mi(l),i},decrypt(o,i){i=Ey(o.length-16,i,!1);const a=o.subarray(0,-16),u=o.subarray(-16),l=Iy(e,t,n,a,r);if(!q5(u,l))throw new Error("invalid tag");return i.set(o.subarray(0,-16)),e(t,n,i,i,1),Mi(l),i}}),Sy=IC({blockSize:64,nonceLength:12,tagLength:16},TC(dD)),By=IC({blockSize:64,nonceLength:24,tagLength:16},TC(fD));class er{static createSecureBuffer(t){if(!Number.isInteger(t)||t<0)throw new Error("CRITICAL: Invalid buffer size - must be non-negative integer");if(t>this.MAX_BUFFER_SIZE)throw new Error(`CRITICAL: Buffer size too large - maximum ${this.MAX_BUFFER_SIZE} bytes`);const n=new Uint8Array(t);return this.allocatedBuffers.add(n),n}static zeroBuffer(t){if(t&&t.length>0){const n=[0,255,170,85,51,204,150,105];for(let s=0;s<7;s++)if(s<n.length?t.fill(n[s]):crypto.getRandomValues(t),t[0]!==void 0){const o=crypto.getRandomValues(new Uint32Array(1))[0]%t.length;t[o]}t.fill(0);const r=new Uint8Array(Math.min(t.length,64));crypto.getRandomValues(r);for(let s=0;s<r.length;s++)t[s%t.length]^=r[s];t.fill(0)}}static createSecureString(t){if(!t||typeof t!="string")throw new Error("CRITICAL: Invalid string data for secure storage");if(t.length>1048576)throw new Error("CRITICAL: String too large for secure storage");return t}static stringToSecureBuffer(t){const r=new TextEncoder().encode(t),s=this.createSecureBuffer(r.length);return s.set(r),this.zeroBuffer(r),s}static secureBufferToString(t){const r=new TextDecoder().decode(t);return this.zeroBuffer(t),r}static secureBufferCopy(t){const n=this.createSecureBuffer(t.length);return n.set(t),n}static constantTimeCompare(t,n){const r=Math.max(t.length,n.length);let s=t.length^n.length;for(let o=0;o<r;o++){const i=o<t.length?t[o]:0,a=o<n.length?n[o]:0;s|=i^a}return s===0}static generateSecureRandom(t){const n=this.createSecureBuffer(t);return crypto.getRandomValues(n),n}static periodicCleanup(){if(this.stringReferences.size>this.MAX_STRING_REFERENCES/2){const t=this.stringReferences.size;this.stringReferences.clear(),console.log(`[SecureMemory] Periodic cleanup: cleared ${t} string references`)}}static shutdown(){this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null),this.stringReferences.clear(),console.log("[SecureMemory] Shutdown complete")}static forceCleanup(){this.stringReferences.clear(),this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null),globalThis.gc&&globalThis.gc(),"memory"in performance&&performance.memory&&console.log("[SecureMemory] Memory usage:",performance.memory)}static getMemoryStats(){const t={trackedStrings:this.stringReferences.size,heapUsed:void 0,heapTotal:void 0};if("memory"in performance&&performance.memory){const n=performance.memory;t.heapUsed=n.usedJSHeapSize,t.heapTotal=n.totalJSHeapSize}return t}}Z(er,"allocatedBuffers",new WeakSet),Z(er,"MAX_BUFFER_SIZE",1048576),Z(er,"cleanupTimer",null);var xw;const Tn=(xw=globalThis.crypto)==null?void 0:xw.subtle;class qt{}Z(qt,"AES_KEY_SIZE",256),Z(qt,"IV_LENGTH",16),Z(qt,"AUTH_TAG_LENGTH",16),Z(qt,"HKDF_HASH","SHA-512"),Z(qt,"HKDF_INFO",new TextEncoder().encode("endtoend-chat hybrid key v1")),Z(qt,"X25519_DERIVE_BITS",256);class De{static arrayBufferToBase64(t){const n=t instanceof Uint8Array?t:new Uint8Array(t);let r="";for(let s=0;s<n.byteLength;s++)r+=String.fromCharCode(n[s]);return btoa(r)}static base64ToUint8Array(t){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}static base64ToArrayBuffer(t){return this.base64ToUint8Array(t).buffer}static stringToArrayBuffer(t){return new TextEncoder().encode(t).buffer}}class _C{static encrypt(t,n,r,s){if(!t||t.length!==32)throw new Error("CRITICAL: Invalid ChaCha20 key length (must be 32 bytes)");if(!n||n.length!==12)throw new Error("CRITICAL: Invalid ChaCha20 nonce length (must be 12 bytes)");if(!r||r.length===0)throw new Error("CRITICAL: No data provided for encryption");if(n.every(a=>a===0))throw new Error("CRITICAL: All-zero nonce detected in ChaCha20-Poly1305 encryption");if(n.slice(0,8).every(a=>a===n[0]))throw new Error("CRITICAL: Weak nonce pattern detected in ChaCha20-Poly1305 encryption");const i=Sy(t,n,s).encrypt(r);return er.zeroBuffer(r),i}static decrypt(t,n,r,s){return Sy(t,n,s).decrypt(r)}static generateNonce(){return er.generateSecureRandom(12)}static encryptWithNonce(t,n,r){const s=this.generateNonce(),o=this.encrypt(t,s,er.secureBufferCopy(n),r);return{nonce:s,ciphertext:o}}static decryptWithNonce(t,n,r,s){return this.decrypt(t,n,r,s)}}Z(_C,"NONCE_ENTROPY_BITS",96);class NC{static encrypt(t,n,r,s){if(n.every(a=>a===0))throw new Error("CRITICAL: All-zero nonce detected in XChaCha20-Poly1305 encryption");if(n.every(a=>a===n[0]))throw new Error("CRITICAL: Weak nonce pattern detected in XChaCha20-Poly1305 encryption");const i=By(t,n,s).encrypt(r);return er.zeroBuffer(r),i}static decrypt(t,n,r,s){return By(t,n,s).decrypt(r)}static generateNonce(){return er.generateSecureRandom(24)}static encryptWithNonce(t,n,r){const s=this.generateNonce(),o=this.encrypt(t,s,er.secureBufferCopy(n),r);return{nonce:s,ciphertext:o}}static decryptWithNonce(t,n,r,s){return this.decrypt(t,n,r,s)}}Z(NC,"NONCE_ENTROPY_BITS",192);class Ur{static async generateKeyPair(){const t=await th.keygen(void 0);return{publicKey:new Uint8Array(t.publicKey),secretKey:new Uint8Array(t.secretKey)}}static async sign(t,n){const r=await th.sign(t,n);return new Uint8Array(r)}static async verify(t,n,r){return await th.verify(t,n,r)}static serializePublicKey(t){return De.arrayBufferToBase64(t)}static deserializePublicKey(t){return De.base64ToUint8Array(t)}static serializeSecretKey(t){return De.arrayBufferToBase64(t)}static deserializeSecretKey(t){return De.base64ToUint8Array(t)}}class gl{static parseArgon2Hash(t){if(!t||typeof t!="string")throw new Error("CRITICAL: Encoded hash must be a non-empty string");if(t.length>512)throw new Error("CRITICAL: Hash too long - potential DoS attack");const n=t.split("$");if(n.length!==6)throw new Error("CRITICAL: Invalid Argon2 encoded hash format - wrong number of parts");const[,r,s,o,i,a]=n;if(!r||!["argon2i","argon2d","argon2id"].includes(r))throw new Error("CRITICAL: Invalid Argon2 algorithm type");if(!s||!s.includes("="))throw new Error("CRITICAL: Invalid version format");const u=parseInt(s.split("=")[1],10);if(isNaN(u)||u<16||u>19)throw new Error("CRITICAL: Invalid Argon2 version");if(!o)throw new Error("CRITICAL: Missing parameters");const l={};if(o.split(",").forEach(g=>{const h=g.indexOf("=");if(h===-1)throw new Error("CRITICAL: Invalid parameter format");const A=g.substring(0,h),f=g.substring(h+1);if(!["m","t","p"].includes(A))throw new Error(`CRITICAL: Invalid parameter key: ${A}`);const m=Number(f);if(isNaN(m)||m<1||m>2**30)throw new Error(`CRITICAL: Invalid parameter value for ${A}: ${f}`);l[A]=m}),!l.m||!l.t||!l.p)throw new Error("CRITICAL: Missing required parameters (m, t, p)");if(!i||!a)throw new Error("CRITICAL: Missing salt or hash");let d;try{d=Uint8Array.from(atob(a),g=>g.charCodeAt(0))}catch{throw new Error("CRITICAL: Invalid base64 encoding in hash")}if(d.length<16||d.length>128)throw new Error("CRITICAL: Invalid hash length");return{version:u,algorithm:r,salt:i,memoryCost:l.m,timeCost:l.t,parallelism:l.p,hash:d}}static async hashDataUsingInfo(t,n){if(!(n!=null&&n.salt))throw new Error("Salt is required");const r=De.base64ToUint8Array(n.salt),o={argon2d:0,argon2i:1,argon2id:2}[(n.algorithm??"argon2id").toLowerCase()]??2,i={pass:t,salt:r,time:n.timeCost??3,mem:n.memoryCost??65536,parallelism:n.parallelism??1,type:o,version:n.version??19,hashLen:32};return(await ci.hash(i)).encoded}static async hashData(t,n=3e4){if(!t||typeof t!="string")throw new Error("CRITICAL: Invalid data for hashing - must be non-empty string");if(t.length>1e6)throw new Error("CRITICAL: Data too large for hashing (max 1MB)");if(n<1e3||n>3e5)throw new Error("CRITICAL: Invalid timeout value (must be 1-300 seconds)");const r=crypto.getRandomValues(new Uint8Array(32)),s={pass:t,salt:r,time:5,mem:2**17,parallelism:4,type:2,version:19,hashLen:32};return Promise.race([ci.hash(s).then(o=>{if(!o||!o.encoded)throw new Error("CRITICAL: Argon2 hash operation failed");return o.encoded}),new Promise((o,i)=>setTimeout(()=>i(new Error("Argon2 hash operation timed out")),n))])}static async verifyHash(t,n){return(await ci.verify({pass:n,encoded:t})).verified}static async generateBlake3Mac(t,n){const r=c5.create({key:n});return r.update(t),r.digest()}static async verifyBlake3Mac(t,n,r){const s=await this.generateBlake3Mac(t,n),o=er.constantTimeCompare(s,r),i=crypto.getRandomValues(new Uint8Array(1))[0]%5+1,a=performance.now();for(;performance.now()-a<i;){const u=new Uint8Array(64);crypto.getRandomValues(u);const l=crypto.getRandomValues(new Uint8Array(64));for(let d=0;d<u.length;d++)u[d]^=l[d]}return er.zeroBuffer(s),o}static async deriveKeyFromPassphrase(t,n){const r=n!=null&&n.salt?De.base64ToUint8Array(n.salt):crypto.getRandomValues(new Uint8Array(16));let{time:s=5,memoryCost:o=2**17,parallelism:i=4,algorithm:a=2,version:u=19,hashLen:l=32}=n||{};if(typeof a=="string")switch(a.toLowerCase()){case"argon2d":a=0;break;case"argon2i":a=1;break;case"argon2id":a=2;break;default:throw new Error(`Unknown Argon2 algorithm: ${a}`)}const d={pass:t,salt:r,time:s,mem:o,parallelism:i,type:a,version:u,hashLen:l};return(await ci.hash(d)).hash}}class AD{static async generateAESKey(){return await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}static async importAESKey(t){const n=t instanceof Uint8Array?t.buffer:t;return await crypto.subtle.importKey("raw",n,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}static async exportAESKey(t){return await crypto.subtle.exportKey("raw",t)}static async deriveAESKeyFromPassphrase(t,n){const r=n!=null&&n.saltBase64?De.base64ToUint8Array(n.saltBase64):crypto.getRandomValues(new Uint8Array(16));let{time:s=5,memoryCost:o=2**17,parallelism:i=4,algorithm:a=2,version:u=19,hashLen:l=32}=n||{};if(typeof a=="string")switch(a.toLowerCase()){case"argon2d":a=0;break;case"argon2i":a=1;break;case"argon2id":a=2;break;default:throw new Error(`Unknown Argon2 algorithm: ${a}`)}const d={pass:t,salt:r,time:s,mem:o,parallelism:i,type:a,version:u,hashLen:l},g=await ci.hash(d),h=g.hash;return{aesKey:await this.importAESKey(h),encodedHash:g.encoded}}static async importRawAesKey(t){return await this.importAESKey(t)}}class Vn{static async _loadNobleIfNeeded(){if(this.nobleX)return this.nobleX;try{const t=await Bg(()=>import("./ed25519-DeflBzUb.js"),[]),n=t.x25519||t.x25519;return this.nobleX=n,n}catch(t){try{const r=(await Bg(()=>import("./index-BQzrUxzF.js"),[])).x25519;if(!r)throw t;return this.nobleX=r,r}catch(n){throw console.warn("Noble x25519 dynamic import failed:",n),new Error("No X25519 implementation available in this environment")}}}static supportsWebCryptoX25519(){try{return!(!Tn||typeof Tn.generateKey!="function")}catch{return!1}}static async generateKeyPair(){if(!crypto||!crypto.getRandomValues)throw new Error("CRITICAL: No secure random number generator available");if(!Tn)throw new Error("CRITICAL: SubtleCrypto API not available");if(this.supportsWebCryptoX25519())try{const s=await Tn.generateKey({name:"X25519"},!0,["deriveBits"]);if(!s||!s.privateKey||!s.publicKey)throw new Error("Invalid key pair generated");return s}catch(s){console.warn("WebCrypto X25519 failed; falling back to noble",s)}const t=await this._loadNobleIfNeeded();if(!t)throw new Error("CRITICAL: Failed to load X25519 implementation");const n=t.utils.randomPrivateKey(),r=t.getPublicKey(n);if(!n||n.length!==32||!r||r.length!==32)throw new Error("CRITICAL: Invalid X25519 key generation");return{privateKeyBytes:n,publicKeyBytes:r}}static async generateKeyPairFromPrivateKey(t){return{publicKeyBytes:(await this._loadNobleIfNeeded()).getPublicKey(t),privateKeyBytes:t}}static async exportPublicRaw(t){if(t.type){const n=await Tn.exportKey("raw",t);return new Uint8Array(n)}else return t.publicKeyBytes}static async importPublicRaw(t){if(this.supportsWebCryptoX25519())try{return await Tn.importKey("raw",t,{name:"X25519"},!0,[])}catch(n){console.warn("WebCrypto importKey raw failed; using raw bytes",n)}return t}static async deriveSharedSecret(t,n){if(this.supportsWebCryptoX25519()&&t.type){const i=await Tn.deriveBits({name:"X25519",public:await this.importPublicRaw(n)},t,qt.X25519_DERIVE_BITS);return new Uint8Array(i)}const r=await this._loadNobleIfNeeded(),s=t.privateKeyBytes??t,o=r.getSharedSecret(s,n);return new Uint8Array(o.slice(0,32))}}Z(Vn,"nobleX",null);class di{static kyberInstance(){return new U4}static async generateKeyPair(){const n=await this.kyberInstance().generateKeyPair();if(Array.isArray(n)){const[r,s]=n;return{publicKey:new Uint8Array(r),secretKey:new Uint8Array(s)}}else{if(n.publicKey&&n.secretKey)return{publicKey:new Uint8Array(n.publicKey),secretKey:new Uint8Array(n.secretKey)};throw new Error("Unexpected Kyber generateKeyPair result")}}static async generateKeyPairFromSeed(t){const r=await this.kyberInstance().generateKeyPair();if(Array.isArray(r)){const[s,o]=r;return{publicKey:new Uint8Array(s),secretKey:new Uint8Array(o)}}else{if(r.publicKey&&r.secretKey)return{publicKey:new Uint8Array(r.publicKey),secretKey:new Uint8Array(r.secretKey)};throw new Error("Unexpected Kyber generateKeyPair result")}}static async encapsulate(t){const r=await this.kyberInstance().encap(t);if(Array.isArray(r)){const[s,o]=r;return{ciphertext:new Uint8Array(s),sharedSecret:new Uint8Array(o)}}else{if(r.ciphertext&&r.sharedSecret)return{ciphertext:new Uint8Array(r.ciphertext),sharedSecret:new Uint8Array(r.sharedSecret)};throw new Error("Unexpected Kyber encap shape")}}static async decapsulate(t,n){const s=await this.kyberInstance().decap(t,n);return new Uint8Array(s)}}class Pg{static async blake3Hkdf(t,n,r,s){const o=await gl.generateBlake3Mac(t,n),i=new Uint8Array(s),a=32,u=Math.ceil(s/a);let l=new Uint8Array(0),d=0;for(let g=1;g<=u;g++){const h=new Uint8Array(l.length+r.length+1);h.set(l,0),h.set(r,l.length),h[h.length-1]=g,l=await gl.generateBlake3Mac(h,o);const A=Math.min(a,s-d);i.set(l.slice(0,A),d),d+=A}return i}static async deriveAesCryptoKeyFromIkm(t,n,r){const s=r?new TextEncoder().encode(`endtoend-chat hybrid key v2:${r}`):qt.HKDF_INFO,o=await this.blake3Hkdf(t,n,s,32);return await Tn.importKey("raw",o,{name:"AES-GCM",length:qt.AES_KEY_SIZE},!0,["encrypt","decrypt"])}static async hkdfDerive(t,n,r,s){const o=await Tn.importKey("raw",t,{name:"HKDF"},!1,["deriveBits"]),i=await Tn.deriveBits({name:"HKDF",hash:qt.HKDF_HASH,salt:n,info:r},o,s*8);return new Uint8Array(i)}static async deriveSessionKey(t,n,r){const s=new TextEncoder().encode(`session-key-v2:${r}`);return await this.blake3Hkdf(t,n,s,32)}}class yr{static async encryptWithAesGcmRaw(t,n){let r;typeof t=="string"?r=new TextEncoder().encode(t):r=t instanceof Uint8Array?t:new Uint8Array(t);const s=crypto.getRandomValues(new Uint8Array(qt.IV_LENGTH)),o=await Tn.encrypt({name:"AES-GCM",iv:s,tagLength:qt.AUTH_TAG_LENGTH*8},n,r),i=new Uint8Array(o),a=i.slice(0,-16),u=i.slice(-16);return{iv:s,authTag:u,encrypted:a}}static async decryptWithAesGcmRaw(t,n,r,s){const o=new Uint8Array(r.length+n.length);o.set(r,0),o.set(n,r.length);const i=await Tn.decrypt({name:"AES-GCM",iv:t,tagLength:qt.AUTH_TAG_LENGTH*8},s,o);return new TextDecoder().decode(i)}static serializeEncryptedData(t,n,r){const o=2+t.length+1+n.length+4+r.length,i=new Uint8Array(o);let a=0;i[a++]=1,i[a++]=t.length,i.set(t,a),a+=t.length,i[a++]=n.length,i.set(n,a),a+=n.length;const u=r.length;return i[a++]=u>>>24&255,i[a++]=u>>>16&255,i[a++]=u>>>8&255,i[a++]=u&255,i.set(r,a),De.arrayBufferToBase64(i)}static deserializeEncryptedData(t){const n=new Uint8Array(De.base64ToUint8Array(t));let r=0;if(n[r++]!==1)throw new Error("Unsupported version");const o=n[r++],i=n.slice(r,r+o);r+=o;const a=n[r++],u=n.slice(r,r+a);r+=a;const l=n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3];r+=4;const d=n.slice(r,r+l);return{iv:i,authTag:u,encrypted:d}}}class pD{static async encryptWithAES(t,n){const{iv:r,authTag:s,encrypted:o}=await yr.encryptWithAesGcmRaw(t,n);return yr.serializeEncryptedData(r,s,o)}static async encryptBinaryWithAES(t,n){return await yr.encryptWithAesGcmRaw(t,n)}static serializeEncryptedData(t,n,r){return yr.serializeEncryptedData(t,n,r)}static async encryptAndFormatPayload(t){const{recipientHybridKeys:n,from:r,to:s,type:o,...i}=t;if(!n)return JSON.stringify(t);const a=await fe.Hybrid.encryptHybridPayload(i,n);return JSON.stringify({...r&&{from:r},...s&&{to:s},...o&&{type:o},...a})}}class mD{static deserializeEncryptedDataFromUint8Array(t){const n=new Uint8Array(t);let r=0;if(n[r++]!==1)throw new Error("Unsupported version");const o=n[r++],i=n.slice(r,r+o);r+=o;const a=n[r++],u=n.slice(r,r+a);r+=a;const l=n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3];r+=4;const d=n.slice(r,r+l);return{iv:i,authTag:u,encrypted:d}}static async decryptWithAESRaw(t,n,r,s){return await yr.decryptWithAesGcmRaw(t,n,r,s)}}class yD{static async generateHybridKeyPair(){const t=await Vn.generateKeyPair(),n=await di.generateKeyPair(),r=await Ur.generateKeyPair();let s;if(t.publicKey)s=await Vn.exportPublicRaw(t.publicKey);else if(t.publicKeyBytes)s=t.publicKeyBytes;else throw new Error("Unexpected xkp shape");return{x25519:{private:t.privateKey??t.privateKeyBytes,publicKeyBase64:De.arrayBufferToBase64(s)},kyber:{publicKeyBase64:De.arrayBufferToBase64(n.publicKey),secretKey:n.secretKey},dilithium:{publicKeyBase64:De.arrayBufferToBase64(r.publicKey),secretKey:r.secretKey}}}static async generateHybridKeyPairFromSeed(t){const n=await Vn._loadNobleIfNeeded(),s=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-512",s),i=new Uint8Array(o),a=n.utils.randomPrivateKey();for(let h=0;h<32;h++)a[h]=i[h];a[0]&=248,a[31]&=127,a[31]|=64;const u=n.getPublicKey(a),l=i.slice(32,64),d=await di.generateKeyPairFromSeed(l),g=await Ur.generateKeyPair();return{x25519:{private:a,publicKeyBase64:De.arrayBufferToBase64(u)},kyber:{publicKeyBase64:De.arrayBufferToBase64(d.publicKey),secretKey:d.secretKey},dilithium:{publicKeyBase64:De.arrayBufferToBase64(g.publicKey),secretKey:g.secretKey}}}static async encryptHybridPayload(t,n){if(!(n!=null&&n.x25519PublicBase64)||!(n!=null&&n.kyberPublicBase64))throw new Error("recipient must include x25519PublicBase64 and kyberPublicBase64");const r=await Vn.generateKeyPair();let s;r.publicKey?s=await Vn.exportPublicRaw(r.publicKey):s=r.publicKeyBytes;const o=De.base64ToUint8Array(n.kyberPublicBase64),{ciphertext:i,sharedSecret:a}=await di.encapsulate(o),u=De.base64ToUint8Array(n.x25519PublicBase64),l=await Vn.deriveSharedSecret(r.privateKey??r.privateKeyBytes,u),d=new Uint8Array(l.length+a.length);d.set(l,0),d.set(a,l.length);const g=await crypto.subtle.digest("SHA-512",(()=>{const b=new Uint8Array(s.length+i.length);return b.set(s,0),b.set(i,s.length),b})()),h=new Uint8Array(g).slice(0,32),A=await Pg.deriveAesCryptoKeyFromIkm(d,h,"message-encryption"),f=JSON.stringify(t),{iv:m,authTag:v,encrypted:p}=await yr.encryptWithAesGcmRaw(f,A),y=yr.serializeEncryptedData(m,v,p),x=new TextEncoder().encode(f),E=d.slice(0,32),C=await gl.generateBlake3Mac(x,E),I=De.arrayBufferToBase64(C);return{version:"hybrid-v1",ephemeralX25519Public:De.arrayBufferToBase64(s),kyberCiphertext:De.arrayBufferToBase64(i),encryptedMessage:y,blake3Mac:I}}static async decryptHybridPayload(t,n){var E,C;if(!t||typeof t!="object")throw new Error("Invalid payload structure");if(t.version!=="hybrid-v1")throw new Error("Invalid payload version");const{ephemeralX25519Public:r,kyberCiphertext:s,encryptedMessage:o,blake3Mac:i}=t;if(!r||typeof r!="string"||!s||typeof s!="string"||!o||typeof o!="string")throw new Error("Missing or invalid required fields");const a=/^[A-Za-z0-9+/]*={0,2}$/;if(!a.test(r)||!a.test(s)||!a.test(o))throw new Error("Invalid base64 encoding in payload");if(!i||typeof i!="string"||!a.test(i))throw new Error("Missing or invalid BLAKE3 MAC - unauthenticated payload rejected");const u=De.base64ToUint8Array(r),l=De.base64ToUint8Array(s),d=(E=n==null?void 0:n.kyber)==null?void 0:E.secretKey;if(!d)throw new Error("localHybridKeys.kyber.secretKey required");const g=await di.decapsulate(l,d),h=(C=n==null?void 0:n.x25519)==null?void 0:C.private;if(!h)throw new Error("localHybridKeys.x25519.private required");const A=await Vn.deriveSharedSecret(h,u),f=new Uint8Array(A.length+g.length);f.set(A,0),f.set(g,A.length);const m=await crypto.subtle.digest("SHA-512",(()=>{const I=new Uint8Array(u.length+l.length);return I.set(u,0),I.set(l,u.length),I})()),v=new Uint8Array(m).slice(0,32),p=await Pg.deriveAesCryptoKeyFromIkm(f,v,"message-encryption"),y=yr.deserializeEncryptedData(o),x=await yr.decryptWithAesGcmRaw(y.iv,y.authTag,y.encrypted,p);if(t.blake3Mac){const I=new TextEncoder().encode(x),b=De.base64ToUint8Array(t.blake3Mac),S=f.slice(0,32);if(!await gl.verifyBlake3Mac(I,S,b))throw new Error("BLAKE3 MAC verification failed - hybrid payload integrity compromised")}return JSON.parse(x)}}class wD{static async generateHybridKeyPair(){const t=await Vn.generateKeyPair(),n=await di.generateKeyPair(),r=await Ur.generateKeyPair();return{x25519:t,kyber:n,dilithium:r}}static async exportPublicKeys(t){return{x25519PublicBase64:await Vn.exportPublicKeyBase64(t.x25519.publicKey),kyberPublicBase64:De.arrayBufferToBase64(t.kyber.publicKey),dilithiumPublicBase64:Ur.serializePublicKey(t.dilithium.publicKey)}}static async signMessage(t,n){return await Ur.sign(n,t)}static async verifySignature(t,n,r){return await Ur.verify(t,n,r)}static async createHybridSignature(t,n,r){const s=n.sign?n.sign(t):await crypto.subtle.sign("Ed25519",n,t),o=await Ur.sign(r,t);return{ed25519:De.arrayBufferToBase64(s),dilithium:De.arrayBufferToBase64(o)}}static async verifyHybridSignature(t,n,r,s){try{const o=De.base64ToUint8Array(t.ed25519),i=r.verify?r.verify(n,o):await crypto.subtle.verify("Ed25519",r,o,n),a=De.base64ToUint8Array(t.dilithium),u=await Ur.verify(a,n,s);return i&&u}catch(o){return console.error("Hybrid signature verification failed:",o),!1}}}const fe={Config:qt,Base64:De,Hash:gl,Keys:AD,Encrypt:pD,Decrypt:mD,Hybrid:yD,X25519:Vn,Kyber:di,Dilithium:Ur,ChaCha20Poly1305:_C,XChaCha20Poly1305:NC,PostQuantum:wD,AES:yr,KDF:Pg},ky={get(){try{return JSON.parse(localStorage.getItem("securechat_server_pin_v1")||"null")}catch{return null}},set(e){try{localStorage.setItem("securechat_server_pin_v1",JSON.stringify(e))}catch{}}};var we=(e=>(e.PUBLICKEYS="public-keys",e.FILE_MESSAGE="file-message",e.FILE_MESSAGE_CHUNK="file-message-chunk",e.ENCRYPTED_MESSAGE="encrypted-message",e.USER_DISCONNECT="user-disconnect",e.SERVERLIMIT="server-limit",e.ERROR="ERROR",e.SERVERMESSAGE="server-message",e.NAMEEXISTSERROR="name-exists-error",e.INVALIDNAMELENGTH="invalid-name-length",e.INVALIDNAME="invalid-name",e.SERVER_PASSWORD_ENCRYPTED="server-password-encrypted",e.SERVER_PUBLIC_KEY="server-public-key",e.SERVER_LOGIN="server-login",e.ACCOUNT_SIGN_IN="account-sign-in",e.ACCOUNT_SIGN_UP="account-sign-up",e.IN_ACCOUNT="in-account",e.DELETE_MESSAGE="delete-message",e.EDIT_MESSAGE="edit-message",e.AUTH_ERROR="AUTH_ERROR",e.AUTH_SUCCESS="AUTH_SUCCESS",e.PASSPHRASE_HASH="passphrase-hash",e.PASSPHRASE_HASH_NEW="passphrase-hash-new",e.PASSPHRASE_SUCCESS="passphrase-success",e.UPDATE_DB="update-db",e.HYBRID_KEYS="hybrid-keys",e.HYBRID_KEYS_UPDATE="hybrid-keys-update",e.DR_SEND="dr-send",e.LIBSIGNAL_PUBLISH_BUNDLE="libsignal-publish-bundle",e.LIBSIGNAL_REQUEST_BUNDLE="libsignal-request-bundle",e.LIBSIGNAL_DELIVER_BUNDLE="libsignal-deliver-bundle",e.REQUEST_MESSAGE_HISTORY="request-message-history",e.MESSAGE_HISTORY_RESPONSE="message-history-response",e.CHECK_USER_EXISTS="check-user-exists",e.USER_EXISTS_RESPONSE="user-exists-response",e))(we||{});async function vD(e,t){var I,b,S,k,R,B,M;const{Authentication:n,Database:r,handleFileMessageChunk:s,handleEncryptedMessagePayload:o}=t,{type:i,message:a}=e,{setUsers:u}=r,{setServerHybridPublic:l,handleAuthSuccess:d,handlePassphraseSuccess:g,loginUsernameRef:h,aesKeyRef:A,setAccountAuthenticated:f,setIsLoggedIn:m,setLoginError:v,setPassphraseHashParams:p,passphrasePlaintextRef:y,passphraseRef:x,setShowPassphrasePrompt:E,passwordRef:C}=n;try{switch(i){case"public-keys":{const T=JSON.parse(a);u(Object.entries(T).map(([F,H])=>({id:co(),username:F,isTyping:!1,isOnline:!0,hybridPublicKeys:H})));break}case"server-public-key":{console.log("[Signals] Processing SERVER_PUBLIC_KEY message:",e);const T=e.hybridKeys;if(console.log("Received server hybrid keys: ",{x25519PublicBase64:((I=T==null?void 0:T.x25519PublicBase64)==null?void 0:I.substring(0,20))+"...",kyberPublicBase64:((b=T==null?void 0:T.kyberPublicBase64)==null?void 0:b.substring(0,20))+"...",fullX25519:T==null?void 0:T.x25519PublicBase64,fullKyber:T==null?void 0:T.kyberPublicBase64}),T!=null&&T.x25519PublicBase64&&(T!=null&&T.kyberPublicBase64)){const F=ky.get();if(!F)ky.set({x25519PublicBase64:T.x25519PublicBase64,kyberPublicBase64:T.kyberPublicBase64}),l(T),console.log("Server hybrid keys stored (pinned)");else if(F.x25519PublicBase64!==T.x25519PublicBase64||F.kyberPublicBase64!==T.kyberPublicBase64){console.error("[Signals] Server hybrid keys changed! Prompting user to trust new server keys."),(k=(S=t.Authentication).setServerTrustRequest)==null||k.call(S,{newKeys:{x25519PublicBase64:T.x25519PublicBase64,kyberPublicBase64:T.kyberPublicBase64},pinned:F});break}else l(T);try{console.debug("[Signals] Server hybrid keys set",{x25519Len:((T==null?void 0:T.x25519PublicBase64)||"").length,kyberLen:((T==null?void 0:T.kyberPublicBase64)||"").length})}catch{}}else console.error("Invalid server hybrid keys format");break}case"hybrid-keys":{const{username:T,hybridKeys:F}=e;T&&F&&u(H=>H.map(O=>O.username===T?{...O,hybridPublicKeys:F}:O));break}case"AUTH_SUCCESS":{d(h.current);break}case"passphrase-hash":{const{version:T,algorithm:F,salt:H,memoryCost:O,timeCost:X,parallelism:N,message:D}=e||{};T!==void 0&&F!==void 0&&H!==void 0&&O!==void 0&&X!==void 0&&N!==void 0&&D!==void 0&&p({version:T,algorithm:F,salt:H,memoryCost:O,timeCost:X,parallelism:N,message:D}),E(!0);break}case"passphrase-success":{const T=fe.Hash.parseArgon2Hash(x.current),{aesKey:F}=await fe.Keys.deriveAESKeyFromPassphrase(y.current,{saltBase64:T.salt,time:T.timeCost,memoryCost:T.memoryCost,parallelism:T.parallelism,algorithm:T.algorithm,version:T.version});A.current=F,E(!1),g();break}case"encrypted-message":case"dr-send":case"user-disconnect":case"edit-message":case"delete-message":{if(t.handleEncryptedMessagePayload){try{console.debug("[Signals] Dispatching to encrypted handler",{type:i,keys:Object.keys(e||{}),isSignalProtocol:((R=e==null?void 0:e.encryptedPayload)==null?void 0:R.type)===1||((B=e==null?void 0:e.encryptedPayload)==null?void 0:B.type)===3,hasSessionId:!!((M=e==null?void 0:e.encryptedPayload)!=null&&M.sessionId)})}catch{}await t.handleEncryptedMessagePayload(e)}break}case"libsignal-deliver-bundle":{try{const T=n.loginUsernameRef.current,F=e.username,H=e.bundle;await window.edgeApi.processPreKeyBundle({selfUsername:T,peerUsername:F,bundle:H});try{const O=new CustomEvent("libsignal-session-ready",{detail:{peer:F}});window.dispatchEvent(O)}catch{}}catch(T){console.error("[Signals] Failed to process libsignal bundle:",T)}break}case"in-account":{f(!0),C.current="";break}case"file-message-chunk":{await s(e,{from:e.from});break}case"message-history-response":{if(console.log("[Signals] Processing MESSAGE_HISTORY_RESPONSE:",e),t.handleMessageHistory)try{await t.handleMessageHistory(e)}catch(T){console.error("[Signals] Error processing message history:",T)}break}case"user-exists-response":{console.log("[Signals] Processing USER_EXISTS_RESPONSE:",e);try{const T=new CustomEvent("user-exists-response",{detail:{username:e.username,exists:e.exists,error:e.error}});window.dispatchEvent(T)}catch(T){console.error("[Signals] Error dispatching user exists event:",T)}break}case"name-exists-error":case"invalid-name-length":case"invalid-name":case"AUTH_ERROR":case"server-limit":{m(!1),v(`Login error: ${a}`);break}default:console.warn("Unhandled signal type: ",i)}}catch(T){console.error("Error handling server message:",T),v("Error processing server message")}}function xD({onCancelEdit:e}){return c.jsx("div",{className:"px-4 pt-3 pb-0",children:c.jsxs("div",{className:oe("flex items-center justify-between p-3 border-l-4 rounded-lg shadow-sm","bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-400 text-yellow-900"),children:[c.jsx("span",{className:"text-sm font-medium",children:"Editing message"}),c.jsx(he,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-yellow-600 hover:text-yellow-800",onClick:e,children:c.jsx(Vv,{className:"h-4 w-4"})})]})})}function ED({replyTo:e,onCancelReply:t}){return c.jsx("div",{className:"px-4 pt-3 pb-0",children:c.jsxs("div",{className:oe("flex items-start gap-3 p-3 border-l-4 rounded-lg shadow-sm transition-colors duration-200","bg-gradient-to-r from-slate-50 to-slate-100 border-slate-400 text-slate-900"),children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("svg",{className:oe("w-4 h-4","text-slate-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),c.jsx("span",{className:"text-sm font-semibold text-slate-700",children:e.sender})]}),c.jsxs("p",{className:"text-sm line-clamp-2 text-slate-600",children:[e.content.slice(0,100),e.content.length>100&&"..."]})]}),c.jsx(he,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 transition-colors hover:bg-slate-200 text-slate-500 hover:text-slate-700",onClick:t,children:c.jsx(Vv,{className:"h-4 w-4"})})]})})}function CD({onSendVoiceNote:e,onCancel:t,disabled:n}){const[r,s]=w.useState(!1),[o,i]=w.useState(!1),[a,u]=w.useState(null),[l,d]=w.useState(0),[g,h]=w.useState(0),[A,f]=w.useState(0),[m,v]=w.useState(null),p=w.useRef(null),y=w.useRef(null),x=w.useRef(null),E=w.useRef([]),C=w.useRef(null),I=w.useRef(null),b=w.useRef(null),S=w.useRef(null),k=w.useRef(null),R=()=>{p.current&&p.current.state==="recording"&&p.current.stop(),x.current&&(x.current.getTracks().forEach(D=>D.stop()),x.current=null),C.current&&(clearInterval(C.current),C.current=null),I.current&&(cancelAnimationFrame(I.current),I.current=null),S.current&&(S.current.close(),S.current=null),k.current&&(URL.revokeObjectURL(k.current),k.current=null),y.current&&(y.current.pause(),y.current.src="",y.current=null),s(!1),i(!1),f(0)};w.useEffect(()=>R,[]);const B=()=>{if(!b.current)return;const D=new Uint8Array(b.current.frequencyBinCount);b.current.getByteFrequencyData(D);const V=D.reduce((J,te)=>J+te,0)/D.length;f(V/255),r&&(I.current=requestAnimationFrame(B))},M=async()=>{try{if(v(null),console.log("[VoiceRecorder] Starting recording..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Media devices not supported in this environment");console.log("[VoiceRecorder] Requesting microphone access...");const D=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3,channelCount:1}});console.log("[VoiceRecorder] Microphone access granted, stream:",D),x.current=D;const V=new(window.AudioContext||window.webkitAudioContext),J=V.createAnalyser();V.createMediaStreamSource(D).connect(J),J.fftSize=256,S.current=V,b.current=J;let K;const P=["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/mp4","audio/mpeg"];console.log("[VoiceRecorder] Checking supported MIME types...");for(const L of P){const z=MediaRecorder.isTypeSupported(L);console.log(`[VoiceRecorder] ${L}: ${z}`),z&&!K&&(K=L)}if(!K)throw console.error("[VoiceRecorder] No supported audio recording format found"),new Error("No supported audio recording format found");console.log("[VoiceRecorder] Using MIME type:",K),console.log("[VoiceRecorder] Creating MediaRecorder...");const j={mimeType:K,audioBitsPerSecond:32e3},U=new MediaRecorder(D,j);p.current=U,E.current=[],U.ondataavailable=L=>{console.log("[VoiceRecorder] Data available, size:",L.data.size),L.data.size>0&&E.current.push(L.data)},U.onstop=()=>{console.log("[VoiceRecorder] Recording stopped, chunks:",E.current.length);const L=new Blob(E.current,{type:K});console.log("[VoiceRecorder] Created blob, size:",L.size),u(L),R()},U.onerror=L=>{console.error("[VoiceRecorder] MediaRecorder error:",L),v("Recording failed"),R()},U.start(),s(!0),d(0),C.current=setInterval(()=>{d(L=>L+1)},1e3),B()}catch(D){console.error("Failed to start recording:",D),v("Failed to access microphone. Please check permissions."),R()}},T=()=>{p.current&&r&&(p.current.stop(),s(!1),f(0))},F=()=>{if(!a)return;y.current&&(y.current.pause(),y.current=null),k.current&&URL.revokeObjectURL(k.current);const D=URL.createObjectURL(a);k.current=D;const V=new Audio(D);y.current=V,V.onloadedmetadata=()=>{d(Math.floor(V.duration))},V.ontimeupdate=()=>{h(Math.floor(V.currentTime))},V.onended=()=>{i(!1),h(0),k.current&&(URL.revokeObjectURL(k.current),k.current=null)},V.play(),i(!0)},H=()=>{y.current&&(y.current.pause(),i(!1))},O=()=>{if(k.current&&(URL.revokeObjectURL(k.current),k.current=null),y.current){if(y.current.pause(),y.current.src&&y.current.src.startsWith("blob:"))try{URL.revokeObjectURL(y.current.src)}catch{}y.current.src="",y.current=null}u(null),d(0),h(0),i(!1)},X=()=>{console.log("[VoiceRecorder] Sending voice note, blob:",a),a?(console.log("[VoiceRecorder] Blob size:",a.size,"type:",a.type),e(a)):console.error("[VoiceRecorder] No recorded blob to send")},N=D=>{const V=Math.floor(D/60),J=D%60;return`${V}:${J.toString().padStart(2,"0")}`};return c.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-lg",children:[m&&c.jsx("div",{className:"text-red-500 text-sm mb-3 p-2 bg-red-50 dark:bg-red-900/20 rounded",children:m}),c.jsxs("div",{className:"flex items-center gap-3",children:[a?c.jsxs(c.Fragment,{children:[c.jsxs(he,{onClick:o?H:F,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o?c.jsx(Xx,{className:"w-4 h-4"}):c.jsx(Dd,{className:"w-4 h-4"}),o?"Pause":"Play"]}),c.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[c.jsxs("div",{className:"text-sm font-mono",children:[N(g)," / ",N(l)]}),c.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-blue-500 transition-all duration-100",style:{width:`${l>0?g/l*100:0}%`}})})]}),c.jsx(he,{onClick:O,variant:"outline",size:"sm",className:"flex items-center gap-2 text-red-500 hover:text-red-700",children:c.jsx(mg,{className:"w-4 h-4"})}),c.jsxs(he,{onClick:X,disabled:n,size:"sm",className:"flex items-center gap-2",children:[c.jsx(a_,{className:"w-4 h-4"}),"Send"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs(he,{onClick:r?T:M,disabled:n,variant:r?"destructive":"default",size:"sm",className:oe("flex items-center gap-2",r&&"animate-pulse"),children:[r?c.jsx(ku,{className:"w-4 h-4"}):c.jsx(Iu,{className:"w-4 h-4"}),r?"Stop":"Record"]}),r&&c.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[c.jsx("div",{className:"text-sm font-mono text-red-500",children:N(l)}),c.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-red-500 transition-all duration-100",style:{width:`${A*100}%`}})})]})]}),c.jsx(he,{onClick:t,variant:"outline",size:"sm",children:"Cancel"})]})]})}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const bD=4,Ry=0,Ty=1,ID=2;function Ki(e){let t=e.length;for(;--t>=0;)e[t]=0}const SD=0,DC=1,BD=2,kD=3,RD=258,pp=29,_l=256,Al=_l+1+pp,xi=30,mp=19,PC=2*Al+1,fo=15,rh=16,TD=7,yp=256,MC=16,QC=17,FC=18,Mg=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Gc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),_D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),jC=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ND=512,Hr=new Array((Al+2)*2);Ki(Hr);const Oa=new Array(xi*2);Ki(Oa);const pl=new Array(ND);Ki(pl);const ml=new Array(RD-kD+1);Ki(ml);const wp=new Array(pp);Ki(wp);const id=new Array(xi);Ki(id);function sh(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}let LC,OC,UC;function oh(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const HC=e=>e<256?pl[e]:pl[256+(e>>>7)],yl=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},nn=(e,t,n)=>{e.bi_valid>rh-n?(e.bi_buf|=t<<e.bi_valid&65535,yl(e,e.bi_buf),e.bi_buf=t>>rh-e.bi_valid,e.bi_valid+=n-rh):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},pr=(e,t,n)=>{nn(e,n[t*2],n[t*2+1])},zC=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},DD=e=>{e.bi_valid===16?(yl(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},PD=(e,t)=>{const n=t.dyn_tree,r=t.max_code,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,u=t.stat_desc.max_length;let l,d,g,h,A,f,m=0;for(h=0;h<=fo;h++)e.bl_count[h]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<PC;l++)d=e.heap[l],h=n[n[d*2+1]*2+1]+1,h>u&&(h=u,m++),n[d*2+1]=h,!(d>r)&&(e.bl_count[h]++,A=0,d>=a&&(A=i[d-a]),f=n[d*2],e.opt_len+=f*(h+A),o&&(e.static_len+=f*(s[d*2+1]+A)));if(m!==0){do{for(h=u-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[u]--,m-=2}while(m>0);for(h=u;h!==0;h--)for(d=e.bl_count[h];d!==0;)g=e.heap[--l],!(g>r)&&(n[g*2+1]!==h&&(e.opt_len+=(h-n[g*2+1])*n[g*2],n[g*2+1]=h),d--)}},GC=(e,t,n)=>{const r=new Array(fo+1);let s=0,o,i;for(o=1;o<=fo;o++)s=s+n[o-1]<<1,r[o]=s;for(i=0;i<=t;i++){let a=e[i*2+1];a!==0&&(e[i*2]=zC(r[a]++,a))}},MD=()=>{let e,t,n,r,s;const o=new Array(fo+1);for(n=0,r=0;r<pp-1;r++)for(wp[r]=n,e=0;e<1<<Mg[r];e++)ml[n++]=r;for(ml[n-1]=r,s=0,r=0;r<16;r++)for(id[r]=s,e=0;e<1<<Gc[r];e++)pl[s++]=r;for(s>>=7;r<xi;r++)for(id[r]=s<<7,e=0;e<1<<Gc[r]-7;e++)pl[256+s++]=r;for(t=0;t<=fo;t++)o[t]=0;for(e=0;e<=143;)Hr[e*2+1]=8,e++,o[8]++;for(;e<=255;)Hr[e*2+1]=9,e++,o[9]++;for(;e<=279;)Hr[e*2+1]=7,e++,o[7]++;for(;e<=287;)Hr[e*2+1]=8,e++,o[8]++;for(GC(Hr,Al+1,o),e=0;e<xi;e++)Oa[e*2+1]=5,Oa[e*2]=zC(e,5);LC=new sh(Hr,Mg,_l+1,Al,fo),OC=new sh(Oa,Gc,0,xi,fo),UC=new sh(new Array(0),_D,0,mp,TD)},KC=e=>{let t;for(t=0;t<Al;t++)e.dyn_ltree[t*2]=0;for(t=0;t<xi;t++)e.dyn_dtree[t*2]=0;for(t=0;t<mp;t++)e.bl_tree[t*2]=0;e.dyn_ltree[yp*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},$C=e=>{e.bi_valid>8?yl(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},_y=(e,t,n,r)=>{const s=t*2,o=n*2;return e[s]<e[o]||e[s]===e[o]&&r[t]<=r[n]},ih=(e,t,n)=>{const r=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&_y(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!_y(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r},Ny=(e,t,n)=>{let r,s,o=0,i,a;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+o++]&255,r+=(e.pending_buf[e.sym_buf+o++]&255)<<8,s=e.pending_buf[e.sym_buf+o++],r===0?pr(e,s,t):(i=ml[s],pr(e,i+_l+1,t),a=Mg[i],a!==0&&(s-=wp[i],nn(e,s,a)),r--,i=HC(r),pr(e,i,n),a=Gc[i],a!==0&&(r-=id[i],nn(e,r,a)));while(o<e.sym_next);pr(e,yp,t)},Qg=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.elems;let i,a,u=-1,l;for(e.heap_len=0,e.heap_max=PC,i=0;i<o;i++)n[i*2]!==0?(e.heap[++e.heap_len]=u=i,e.depth[i]=0):n[i*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=r[l*2+1]);for(t.max_code=u,i=e.heap_len>>1;i>=1;i--)ih(e,n,i);l=o;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ih(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=a,n[l*2]=n[i*2]+n[a*2],e.depth[l]=(e.depth[i]>=e.depth[a]?e.depth[i]:e.depth[a])+1,n[i*2+1]=n[a*2+1]=l,e.heap[1]=l++,ih(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],PD(e,t),GC(n,u,e.bl_count)},Dy=(e,t,n)=>{let r,s=-1,o,i=t[1],a=0,u=7,l=4;for(i===0&&(u=138,l=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=i,i=t[(r+1)*2+1],!(++a<u&&o===i)&&(a<l?e.bl_tree[o*2]+=a:o!==0?(o!==s&&e.bl_tree[o*2]++,e.bl_tree[MC*2]++):a<=10?e.bl_tree[QC*2]++:e.bl_tree[FC*2]++,a=0,s=o,i===0?(u=138,l=3):o===i?(u=6,l=3):(u=7,l=4))},Py=(e,t,n)=>{let r,s=-1,o,i=t[1],a=0,u=7,l=4;for(i===0&&(u=138,l=3),r=0;r<=n;r++)if(o=i,i=t[(r+1)*2+1],!(++a<u&&o===i)){if(a<l)do pr(e,o,e.bl_tree);while(--a!==0);else o!==0?(o!==s&&(pr(e,o,e.bl_tree),a--),pr(e,MC,e.bl_tree),nn(e,a-3,2)):a<=10?(pr(e,QC,e.bl_tree),nn(e,a-3,3)):(pr(e,FC,e.bl_tree),nn(e,a-11,7));a=0,s=o,i===0?(u=138,l=3):o===i?(u=6,l=3):(u=7,l=4)}},QD=e=>{let t;for(Dy(e,e.dyn_ltree,e.l_desc.max_code),Dy(e,e.dyn_dtree,e.d_desc.max_code),Qg(e,e.bl_desc),t=mp-1;t>=3&&e.bl_tree[jC[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},FD=(e,t,n,r)=>{let s;for(nn(e,t-257,5),nn(e,n-1,5),nn(e,r-4,4),s=0;s<r;s++)nn(e,e.bl_tree[jC[s]*2+1],3);Py(e,e.dyn_ltree,t-1),Py(e,e.dyn_dtree,n-1)},jD=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Ry;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return Ty;for(n=32;n<_l;n++)if(e.dyn_ltree[n*2]!==0)return Ty;return Ry};let My=!1;const LD=e=>{My||(MD(),My=!0),e.l_desc=new oh(e.dyn_ltree,LC),e.d_desc=new oh(e.dyn_dtree,OC),e.bl_desc=new oh(e.bl_tree,UC),e.bi_buf=0,e.bi_valid=0,KC(e)},VC=(e,t,n,r)=>{nn(e,(SD<<1)+(r?1:0),3),$C(e),yl(e,n),yl(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},OD=e=>{nn(e,DC<<1,3),pr(e,yp,Hr),DD(e)},UD=(e,t,n,r)=>{let s,o,i=0;e.level>0?(e.strm.data_type===ID&&(e.strm.data_type=jD(e)),Qg(e,e.l_desc),Qg(e,e.d_desc),i=QD(e),s=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=s&&(s=o)):s=o=n+5,n+4<=s&&t!==-1?VC(e,t,n,r):e.strategy===bD||o===s?(nn(e,(DC<<1)+(r?1:0),3),Ny(e,Hr,Oa)):(nn(e,(BD<<1)+(r?1:0),3),FD(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Ny(e,e.dyn_ltree,e.dyn_dtree)),KC(e),r&&$C(e)},HD=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(ml[n]+_l+1)*2]++,e.dyn_dtree[HC(t)*2]++),e.sym_next===e.sym_end);var zD=LD,GD=VC,KD=UD,$D=HD,VD=OD,WD={_tr_init:zD,_tr_stored_block:GD,_tr_flush_block:KD,_tr_tally:$D,_tr_align:VD};const YD=(e,t,n,r)=>{let s=e&65535|0,o=e>>>16&65535|0,i=0;for(;n!==0;){i=n>2e3?2e3:n,n-=i;do s=s+t[r++]|0,o=o+s|0;while(--i);s%=65521,o%=65521}return s|o<<16|0};var wl=YD;const XD=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},JD=new Uint32Array(XD()),qD=(e,t,n,r)=>{const s=JD,o=r+n;e^=-1;for(let i=r;i<o;i++)e=e>>>8^s[(e^t[i])&255];return e^-1};var ft=qD,Bo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$d={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ZD,_tr_stored_block:Fg,_tr_flush_block:eP,_tr_tally:Ds,_tr_align:tP}=WD,{Z_NO_FLUSH:Ps,Z_PARTIAL_FLUSH:nP,Z_FULL_FLUSH:rP,Z_FINISH:Pn,Z_BLOCK:Qy,Z_OK:vt,Z_STREAM_END:Fy,Z_STREAM_ERROR:Cr,Z_DATA_ERROR:sP,Z_BUF_ERROR:ah,Z_DEFAULT_COMPRESSION:oP,Z_FILTERED:iP,Z_HUFFMAN_ONLY:xc,Z_RLE:aP,Z_FIXED:lP,Z_DEFAULT_STRATEGY:cP,Z_UNKNOWN:uP,Z_DEFLATED:Vd}=$d,dP=9,fP=15,hP=8,gP=29,AP=256,jg=AP+1+gP,pP=30,mP=19,yP=2*jg+1,wP=15,Ee=3,Cs=258,br=Cs+Ee+1,vP=32,Qi=42,vp=57,Lg=69,Og=73,Ug=91,Hg=103,ho=113,Ea=666,Ht=1,$i=2,ko=3,Vi=4,xP=3,go=(e,t)=>(e.msg=Bo[t],t),jy=e=>e*2-(e>4?9:0),ws=e=>{let t=e.length;for(;--t>=0;)e[t]=0},EP=e=>{let t,n,r,s=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=s?n-s:0;while(--t);t=s,r=t;do n=e.prev[--r],e.prev[r]=n>=s?n-s:0;while(--t)};let CP=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Ms=CP;const cn=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},mn=(e,t)=>{eP(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,cn(e.strm)},ke=(e,t)=>{e.pending_buf[e.pending++]=t},Aa=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},zg=(e,t,n,r)=>{let s=e.avail_in;return s>r&&(s=r),s===0?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),e.state.wrap===1?e.adler=wl(e.adler,t,s,n):e.state.wrap===2&&(e.adler=ft(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},WC=(e,t)=>{let n=e.max_chain_length,r=e.strstart,s,o,i=e.prev_length,a=e.nice_match;const u=e.strstart>e.w_size-br?e.strstart-(e.w_size-br):0,l=e.window,d=e.w_mask,g=e.prev,h=e.strstart+Cs;let A=l[r+i-1],f=l[r+i];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(s=t,!(l[s+i]!==f||l[s+i-1]!==A||l[s]!==l[r]||l[++s]!==l[r+1])){r+=2,s++;do;while(l[++r]===l[++s]&&l[++r]===l[++s]&&l[++r]===l[++s]&&l[++r]===l[++s]&&l[++r]===l[++s]&&l[++r]===l[++s]&&l[++r]===l[++s]&&l[++r]===l[++s]&&r<h);if(o=Cs-(h-r),r=h-Cs,o>i){if(e.match_start=t,i=o,o>=a)break;A=l[r+i-1],f=l[r+i]}}while((t=g[t&d])>u&&--n!==0);return i<=e.lookahead?i:e.lookahead},Fi=e=>{const t=e.w_size;let n,r,s;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-br)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),EP(e),r+=t),e.strm.avail_in===0)break;if(n=zg(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=Ee)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Ms(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Ms(e,e.ins_h,e.window[s+Ee-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<Ee)););}while(e.lookahead<br&&e.strm.avail_in!==0)},YC=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,s,o,i=0,a=e.strm.avail_in;do{if(r=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,s=e.strstart-e.block_start,r>s+e.strm.avail_in&&(r=s+e.strm.avail_in),r>o&&(r=o),r<n&&(r===0&&t!==Pn||t===Ps||r!==s+e.strm.avail_in)))break;i=t===Pn&&r===s+e.strm.avail_in?1:0,Fg(e,0,0,i),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,cn(e.strm),s&&(s>r&&(s=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,r-=s),r&&(zg(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(i===0);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?Vi:t!==Ps&&t!==Pn&&e.strm.avail_in===0&&e.strstart===e.block_start?$i:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(zg(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,n=o>e.w_size?e.w_size:o,s=e.strstart-e.block_start,(s>=n||(s||t===Pn)&&t!==Ps&&e.strm.avail_in===0&&s<=o)&&(r=s>o?o:s,i=t===Pn&&e.strm.avail_in===0&&r===s?1:0,Fg(e,e.block_start,r,i),e.block_start+=r,cn(e.strm)),i?ko:Ht)},lh=(e,t)=>{let n,r;for(;;){if(e.lookahead<br){if(Fi(e),e.lookahead<br&&t===Ps)return Ht;if(e.lookahead===0)break}if(n=0,e.lookahead>=Ee&&(e.ins_h=Ms(e,e.ins_h,e.window[e.strstart+Ee-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-br&&(e.match_length=WC(e,n)),e.match_length>=Ee)if(r=Ds(e,e.strstart-e.match_start,e.match_length-Ee),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Ee){e.match_length--;do e.strstart++,e.ins_h=Ms(e,e.ins_h,e.window[e.strstart+Ee-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ms(e,e.ins_h,e.window[e.strstart+1]);else r=Ds(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(mn(e,!1),e.strm.avail_out===0))return Ht}return e.insert=e.strstart<Ee-1?e.strstart:Ee-1,t===Pn?(mn(e,!0),e.strm.avail_out===0?ko:Vi):e.sym_next&&(mn(e,!1),e.strm.avail_out===0)?Ht:$i},Wo=(e,t)=>{let n,r,s;for(;;){if(e.lookahead<br){if(Fi(e),e.lookahead<br&&t===Ps)return Ht;if(e.lookahead===0)break}if(n=0,e.lookahead>=Ee&&(e.ins_h=Ms(e,e.ins_h,e.window[e.strstart+Ee-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Ee-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-br&&(e.match_length=WC(e,n),e.match_length<=5&&(e.strategy===iP||e.match_length===Ee&&e.strstart-e.match_start>4096)&&(e.match_length=Ee-1)),e.prev_length>=Ee&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-Ee,r=Ds(e,e.strstart-1-e.prev_match,e.prev_length-Ee),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=Ms(e,e.ins_h,e.window[e.strstart+Ee-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Ee-1,e.strstart++,r&&(mn(e,!1),e.strm.avail_out===0))return Ht}else if(e.match_available){if(r=Ds(e,0,e.window[e.strstart-1]),r&&mn(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ht}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ds(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Ee-1?e.strstart:Ee-1,t===Pn?(mn(e,!0),e.strm.avail_out===0?ko:Vi):e.sym_next&&(mn(e,!1),e.strm.avail_out===0)?Ht:$i},bP=(e,t)=>{let n,r,s,o;const i=e.window;for(;;){if(e.lookahead<=Cs){if(Fi(e),e.lookahead<=Cs&&t===Ps)return Ht;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Ee&&e.strstart>0&&(s=e.strstart-1,r=i[s],r===i[++s]&&r===i[++s]&&r===i[++s])){o=e.strstart+Cs;do;while(r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&s<o);e.match_length=Cs-(o-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Ee?(n=Ds(e,1,e.match_length-Ee),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ds(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(mn(e,!1),e.strm.avail_out===0))return Ht}return e.insert=0,t===Pn?(mn(e,!0),e.strm.avail_out===0?ko:Vi):e.sym_next&&(mn(e,!1),e.strm.avail_out===0)?Ht:$i},IP=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Fi(e),e.lookahead===0)){if(t===Ps)return Ht;break}if(e.match_length=0,n=Ds(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(mn(e,!1),e.strm.avail_out===0))return Ht}return e.insert=0,t===Pn?(mn(e,!0),e.strm.avail_out===0?ko:Vi):e.sym_next&&(mn(e,!1),e.strm.avail_out===0)?Ht:$i};function cr(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}const Ca=[new cr(0,0,0,0,YC),new cr(4,4,8,4,lh),new cr(4,5,16,8,lh),new cr(4,6,32,32,lh),new cr(4,4,16,16,Wo),new cr(8,16,32,32,Wo),new cr(8,16,128,128,Wo),new cr(8,32,128,256,Wo),new cr(32,128,258,1024,Wo),new cr(32,258,258,4096,Wo)],SP=e=>{e.window_size=2*e.w_size,ws(e.head),e.max_lazy_match=Ca[e.level].max_lazy,e.good_match=Ca[e.level].good_length,e.nice_match=Ca[e.level].nice_length,e.max_chain_length=Ca[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Ee-1,e.match_available=0,e.ins_h=0};function BP(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Vd,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(yP*2),this.dyn_dtree=new Uint16Array((2*pP+1)*2),this.bl_tree=new Uint16Array((2*mP+1)*2),ws(this.dyn_ltree),ws(this.dyn_dtree),ws(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(wP+1),this.heap=new Uint16Array(2*jg+1),ws(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*jg+1),ws(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Nl=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Qi&&t.status!==vp&&t.status!==Lg&&t.status!==Og&&t.status!==Ug&&t.status!==Hg&&t.status!==ho&&t.status!==Ea?1:0},XC=e=>{if(Nl(e))return go(e,Cr);e.total_in=e.total_out=0,e.data_type=uP;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?vp:t.wrap?Qi:ho,e.adler=t.wrap===2?0:1,t.last_flush=-2,ZD(t),vt},JC=e=>{const t=XC(e);return t===vt&&SP(e.state),t},kP=(e,t)=>Nl(e)||e.state.wrap!==2?Cr:(e.state.gzhead=t,vt),qC=(e,t,n,r,s,o)=>{if(!e)return Cr;let i=1;if(t===oP&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),s<1||s>dP||n!==Vd||r<8||r>15||t<0||t>9||o<0||o>lP||r===8&&i!==1)return go(e,Cr);r===8&&(r=9);const a=new BP;return e.state=a,a.strm=e,a.status=Qi,a.wrap=i,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Ee-1)/Ee),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=o,a.method=n,JC(e)},RP=(e,t)=>qC(e,t,Vd,fP,hP,cP),TP=(e,t)=>{if(Nl(e)||t>Qy||t<0)return e?go(e,Cr):Cr;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===Ea&&t!==Pn)return go(e,e.avail_out===0?ah:Cr);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(cn(e),e.avail_out===0)return n.last_flush=-1,vt}else if(e.avail_in===0&&jy(t)<=jy(r)&&t!==Pn)return go(e,ah);if(n.status===Ea&&e.avail_in!==0)return go(e,ah);if(n.status===Qi&&n.wrap===0&&(n.status=ho),n.status===Qi){let s=Vd+(n.w_bits-8<<4)<<8,o=-1;if(n.strategy>=xc||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,s|=o<<6,n.strstart!==0&&(s|=vP),s+=31-s%31,Aa(n,s),n.strstart!==0&&(Aa(n,e.adler>>>16),Aa(n,e.adler&65535)),e.adler=1,n.status=ho,cn(e),n.pending!==0)return n.last_flush=-1,vt}if(n.status===vp){if(e.adler=0,ke(n,31),ke(n,139),ke(n,8),n.gzhead)ke(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ke(n,n.gzhead.time&255),ke(n,n.gzhead.time>>8&255),ke(n,n.gzhead.time>>16&255),ke(n,n.gzhead.time>>24&255),ke(n,n.level===9?2:n.strategy>=xc||n.level<2?4:0),ke(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ke(n,n.gzhead.extra.length&255),ke(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ft(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Lg;else if(ke(n,0),ke(n,0),ke(n,0),ke(n,0),ke(n,0),ke(n,n.level===9?2:n.strategy>=xc||n.level<2?4:0),ke(n,xP),n.status=ho,cn(e),n.pending!==0)return n.last_flush=-1,vt}if(n.status===Lg){if(n.gzhead.extra){let s=n.pending,o=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+o>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>s&&(e.adler=ft(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex+=a,cn(e),n.pending!==0)return n.last_flush=-1,vt;s=0,o-=a}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>s&&(e.adler=ft(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex=0}n.status=Og}if(n.status===Og){if(n.gzhead.name){let s=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>s&&(e.adler=ft(e.adler,n.pending_buf,n.pending-s,s)),cn(e),n.pending!==0)return n.last_flush=-1,vt;s=0}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,ke(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=ft(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex=0}n.status=Ug}if(n.status===Ug){if(n.gzhead.comment){let s=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>s&&(e.adler=ft(e.adler,n.pending_buf,n.pending-s,s)),cn(e),n.pending!==0)return n.last_flush=-1,vt;s=0}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,ke(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=ft(e.adler,n.pending_buf,n.pending-s,s))}n.status=Hg}if(n.status===Hg){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(cn(e),n.pending!==0))return n.last_flush=-1,vt;ke(n,e.adler&255),ke(n,e.adler>>8&255),e.adler=0}if(n.status=ho,cn(e),n.pending!==0)return n.last_flush=-1,vt}if(e.avail_in!==0||n.lookahead!==0||t!==Ps&&n.status!==Ea){let s=n.level===0?YC(n,t):n.strategy===xc?IP(n,t):n.strategy===aP?bP(n,t):Ca[n.level].func(n,t);if((s===ko||s===Vi)&&(n.status=Ea),s===Ht||s===ko)return e.avail_out===0&&(n.last_flush=-1),vt;if(s===$i&&(t===nP?tP(n):t!==Qy&&(Fg(n,0,0,!1),t===rP&&(ws(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),cn(e),e.avail_out===0))return n.last_flush=-1,vt}return t!==Pn?vt:n.wrap<=0?Fy:(n.wrap===2?(ke(n,e.adler&255),ke(n,e.adler>>8&255),ke(n,e.adler>>16&255),ke(n,e.adler>>24&255),ke(n,e.total_in&255),ke(n,e.total_in>>8&255),ke(n,e.total_in>>16&255),ke(n,e.total_in>>24&255)):(Aa(n,e.adler>>>16),Aa(n,e.adler&65535)),cn(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?vt:Fy)},_P=e=>{if(Nl(e))return Cr;const t=e.state.status;return e.state=null,t===ho?go(e,sP):vt},NP=(e,t)=>{let n=t.length;if(Nl(e))return Cr;const r=e.state,s=r.wrap;if(s===2||s===1&&r.status!==Qi||r.lookahead)return Cr;if(s===1&&(e.adler=wl(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){s===0&&(ws(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(t.subarray(n-r.w_size,n),0),t=u,n=r.w_size}const o=e.avail_in,i=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Fi(r);r.lookahead>=Ee;){let u=r.strstart,l=r.lookahead-(Ee-1);do r.ins_h=Ms(r,r.ins_h,r.window[u+Ee-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--l);r.strstart=u,r.lookahead=Ee-1,Fi(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Ee-1,r.match_available=0,e.next_in=i,e.input=a,e.avail_in=o,r.wrap=s,vt};var DP=RP,PP=qC,MP=JC,QP=XC,FP=kP,jP=TP,LP=_P,OP=NP,UP="pako deflate (from Nodeca project)",Ua={deflateInit:DP,deflateInit2:PP,deflateReset:MP,deflateResetKeep:QP,deflateSetHeader:FP,deflate:jP,deflateEnd:LP,deflateSetDictionary:OP,deflateInfo:UP};const HP=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var zP=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)HP(n,r)&&(e[r]=n[r])}}return e},GP=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,o=e.length;r<o;r++){let i=e[r];n.set(i,s),s+=i.length}return n},Wd={assign:zP,flattenChunks:GP};let ZC=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ZC=!1}const vl=new Uint8Array(256);for(let e=0;e<256;e++)vl[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;vl[254]=vl[254]=1;var KP=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,s,o,i=e.length,a=0;for(s=0;s<i;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<i&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,s=0;o<a;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<i&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};const $P=(e,t)=>{if(t<65534&&e.subarray&&ZC)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var VP=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,s;const o=new Array(n*2);for(s=0,r=0;r<n;){let i=e[r++];if(i<128){o[s++]=i;continue}let a=vl[i];if(a>4){o[s++]=65533,r+=a-1;continue}for(i&=a===2?31:a===3?15:7;a>1&&r<n;)i=i<<6|e[r++]&63,a--;if(a>1){o[s++]=65533;continue}i<65536?o[s++]=i:(i-=65536,o[s++]=55296|i>>10&1023,o[s++]=56320|i&1023)}return $P(o,s)},WP=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+vl[e[n]]>t?n:t},xl={string2buf:KP,buf2string:VP,utf8border:WP};function YP(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var e2=YP;const t2=Object.prototype.toString,{Z_NO_FLUSH:XP,Z_SYNC_FLUSH:JP,Z_FULL_FLUSH:qP,Z_FINISH:ZP,Z_OK:ad,Z_STREAM_END:e6,Z_DEFAULT_COMPRESSION:t6,Z_DEFAULT_STRATEGY:n6,Z_DEFLATED:r6}=$d;function Yd(e){this.options=Wd.assign({level:t6,method:r6,chunkSize:16384,windowBits:15,memLevel:8,strategy:n6},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e2,this.strm.avail_out=0;let n=Ua.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ad)throw new Error(Bo[n]);if(t.header&&Ua.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=xl.string2buf(t.dictionary):t2.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Ua.deflateSetDictionary(this.strm,r),n!==ad)throw new Error(Bo[n]);this._dict_set=!0}}Yd.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let s,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?ZP:XP,typeof e=="string"?n.input=xl.string2buf(e):t2.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===JP||o===qP)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(s=Ua.deflate(n,o),s===e6)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=Ua.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===ad;if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Yd.prototype.onData=function(e){this.chunks.push(e)};Yd.prototype.onEnd=function(e){e===ad&&(this.result=Wd.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function s6(e,t){const n=new Yd(t);if(n.push(e,!0),n.err)throw n.msg||Bo[n.err];return n.result}var o6=s6,i6={deflate:o6};const Ec=16209,a6=16191;var l6=function(t,n){let r,s,o,i,a,u,l,d,g,h,A,f,m,v,p,y,x,E,C,I,b,S,k,R;const B=t.state;r=t.next_in,k=t.input,s=r+(t.avail_in-5),o=t.next_out,R=t.output,i=o-(n-t.avail_out),a=o+(t.avail_out-257),u=B.dmax,l=B.wsize,d=B.whave,g=B.wnext,h=B.window,A=B.hold,f=B.bits,m=B.lencode,v=B.distcode,p=(1<<B.lenbits)-1,y=(1<<B.distbits)-1;e:do{f<15&&(A+=k[r++]<<f,f+=8,A+=k[r++]<<f,f+=8),x=m[A&p];t:for(;;){if(E=x>>>24,A>>>=E,f-=E,E=x>>>16&255,E===0)R[o++]=x&65535;else if(E&16){C=x&65535,E&=15,E&&(f<E&&(A+=k[r++]<<f,f+=8),C+=A&(1<<E)-1,A>>>=E,f-=E),f<15&&(A+=k[r++]<<f,f+=8,A+=k[r++]<<f,f+=8),x=v[A&y];n:for(;;){if(E=x>>>24,A>>>=E,f-=E,E=x>>>16&255,E&16){if(I=x&65535,E&=15,f<E&&(A+=k[r++]<<f,f+=8,f<E&&(A+=k[r++]<<f,f+=8)),I+=A&(1<<E)-1,I>u){t.msg="invalid distance too far back",B.mode=Ec;break e}if(A>>>=E,f-=E,E=o-i,I>E){if(E=I-E,E>d&&B.sane){t.msg="invalid distance too far back",B.mode=Ec;break e}if(b=0,S=h,g===0){if(b+=l-E,E<C){C-=E;do R[o++]=h[b++];while(--E);b=o-I,S=R}}else if(g<E){if(b+=l+g-E,E-=g,E<C){C-=E;do R[o++]=h[b++];while(--E);if(b=0,g<C){E=g,C-=E;do R[o++]=h[b++];while(--E);b=o-I,S=R}}}else if(b+=g-E,E<C){C-=E;do R[o++]=h[b++];while(--E);b=o-I,S=R}for(;C>2;)R[o++]=S[b++],R[o++]=S[b++],R[o++]=S[b++],C-=3;C&&(R[o++]=S[b++],C>1&&(R[o++]=S[b++]))}else{b=o-I;do R[o++]=R[b++],R[o++]=R[b++],R[o++]=R[b++],C-=3;while(C>2);C&&(R[o++]=R[b++],C>1&&(R[o++]=R[b++]))}}else if((E&64)===0){x=v[(x&65535)+(A&(1<<E)-1)];continue n}else{t.msg="invalid distance code",B.mode=Ec;break e}break}}else if((E&64)===0){x=m[(x&65535)+(A&(1<<E)-1)];continue t}else if(E&32){B.mode=a6;break e}else{t.msg="invalid literal/length code",B.mode=Ec;break e}break}}while(r<s&&o<a);C=f>>3,r-=C,f-=C<<3,A&=(1<<f)-1,t.next_in=r,t.next_out=o,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=o<a?257+(a-o):257-(o-a),B.hold=A,B.bits=f};const Yo=15,Ly=852,Oy=592,Uy=0,ch=1,Hy=2,c6=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),u6=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),d6=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),f6=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),h6=(e,t,n,r,s,o,i,a)=>{const u=a.bits;let l=0,d=0,g=0,h=0,A=0,f=0,m=0,v=0,p=0,y=0,x,E,C,I,b,S=null,k;const R=new Uint16Array(Yo+1),B=new Uint16Array(Yo+1);let M=null,T,F,H;for(l=0;l<=Yo;l++)R[l]=0;for(d=0;d<r;d++)R[t[n+d]]++;for(A=u,h=Yo;h>=1&&R[h]===0;h--);if(A>h&&(A=h),h===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<h&&R[g]===0;g++);for(A<g&&(A=g),v=1,l=1;l<=Yo;l++)if(v<<=1,v-=R[l],v<0)return-1;if(v>0&&(e===Uy||h!==1))return-1;for(B[1]=0,l=1;l<Yo;l++)B[l+1]=B[l]+R[l];for(d=0;d<r;d++)t[n+d]!==0&&(i[B[t[n+d]]++]=d);if(e===Uy?(S=M=i,k=20):e===ch?(S=c6,M=u6,k=257):(S=d6,M=f6,k=0),y=0,d=0,l=g,b=o,f=A,m=0,C=-1,p=1<<A,I=p-1,e===ch&&p>Ly||e===Hy&&p>Oy)return 1;for(;;){T=l-m,i[d]+1<k?(F=0,H=i[d]):i[d]>=k?(F=M[i[d]-k],H=S[i[d]-k]):(F=96,H=0),x=1<<l-m,E=1<<f,g=E;do E-=x,s[b+(y>>m)+E]=T<<24|F<<16|H|0;while(E!==0);for(x=1<<l-1;y&x;)x>>=1;if(x!==0?(y&=x-1,y+=x):y=0,d++,--R[l]===0){if(l===h)break;l=t[n+i[d]]}if(l>A&&(y&I)!==C){for(m===0&&(m=A),b+=g,f=l-m,v=1<<f;f+m<h&&(v-=R[f+m],!(v<=0));)f++,v<<=1;if(p+=1<<f,e===ch&&p>Ly||e===Hy&&p>Oy)return 1;C=y&I,s[C]=A<<24|f<<16|b-o|0}}return y!==0&&(s[b+y]=l-m<<24|64<<16|0),a.bits=A,0};var Ha=h6;const g6=0,n2=1,r2=2,{Z_FINISH:zy,Z_BLOCK:A6,Z_TREES:Cc,Z_OK:Ro,Z_STREAM_END:p6,Z_NEED_DICT:m6,Z_STREAM_ERROR:Un,Z_DATA_ERROR:s2,Z_MEM_ERROR:o2,Z_BUF_ERROR:y6,Z_DEFLATED:Gy}=$d,Xd=16180,Ky=16181,$y=16182,Vy=16183,Wy=16184,Yy=16185,Xy=16186,Jy=16187,qy=16188,Zy=16189,ld=16190,Qr=16191,uh=16192,ew=16193,dh=16194,tw=16195,nw=16196,rw=16197,sw=16198,bc=16199,Ic=16200,ow=16201,iw=16202,aw=16203,lw=16204,cw=16205,fh=16206,uw=16207,dw=16208,Ke=16209,i2=16210,a2=16211,w6=852,v6=592,x6=15,E6=x6,fw=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function C6(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Po=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Xd||t.mode>a2?1:0},l2=e=>{if(Po(e))return Un;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Xd,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(w6),t.distcode=t.distdyn=new Int32Array(v6),t.sane=1,t.back=-1,Ro},c2=e=>{if(Po(e))return Un;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,l2(e)},u2=(e,t)=>{let n;if(Po(e))return Un;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Un:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,c2(e))},d2=(e,t)=>{if(!e)return Un;const n=new C6;e.state=n,n.strm=e,n.window=null,n.mode=Xd;const r=u2(e,t);return r!==Ro&&(e.state=null),r},b6=e=>d2(e,E6);let hw=!0,hh,gh;const I6=e=>{if(hw){hh=new Int32Array(512),gh=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ha(n2,e.lens,0,288,hh,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ha(r2,e.lens,0,32,gh,0,e.work,{bits:5}),hw=!1}e.lencode=hh,e.lenbits=9,e.distcode=gh,e.distbits=5},f2=(e,t,n,r)=>{let s;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(s=o.wsize-o.wnext,s>r&&(s=r),o.window.set(t.subarray(n-r,n-r+s),o.wnext),r-=s,r?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0},S6=(e,t)=>{let n,r,s,o,i,a,u,l,d,g,h,A,f,m,v=0,p,y,x,E,C,I,b,S;const k=new Uint8Array(4);let R,B;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Po(e)||!e.output||!e.input&&e.avail_in!==0)return Un;n=e.state,n.mode===Qr&&(n.mode=uh),i=e.next_out,s=e.output,u=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,g=a,h=u,S=Ro;e:for(;;)switch(n.mode){case Xd:if(n.wrap===0){n.mode=uh;break}for(;d<16;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,k[0]=l&255,k[1]=l>>>8&255,n.check=ft(n.check,k,2,0),l=0,d=0,n.mode=Ky;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=Ke;break}if((l&15)!==Gy){e.msg="unknown compression method",n.mode=Ke;break}if(l>>>=4,d-=4,b=(l&15)+8,n.wbits===0&&(n.wbits=b),b>15||b>n.wbits){e.msg="invalid window size",n.mode=Ke;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=l&512?Zy:Qr,l=0,d=0;break;case Ky:for(;d<16;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(n.flags=l,(n.flags&255)!==Gy){e.msg="unknown compression method",n.mode=Ke;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Ke;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,n.check=ft(n.check,k,2,0)),l=0,d=0,n.mode=$y;case $y:for(;d<32;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,k[2]=l>>>16&255,k[3]=l>>>24&255,n.check=ft(n.check,k,4,0)),l=0,d=0,n.mode=Vy;case Vy:for(;d<16;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,n.check=ft(n.check,k,2,0)),l=0,d=0,n.mode=Wy;case Wy:if(n.flags&1024){for(;d<16;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,n.check=ft(n.check,k,2,0)),l=0,d=0}else n.head&&(n.head.extra=null);n.mode=Yy;case Yy:if(n.flags&1024&&(A=n.length,A>a&&(A=a),A&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+A),b)),n.flags&512&&n.wrap&4&&(n.check=ft(n.check,r,A,o)),a-=A,o+=A,n.length-=A),n.length))break e;n.length=0,n.mode=Xy;case Xy:if(n.flags&2048){if(a===0)break e;A=0;do b=r[o+A++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b));while(b&&A<a);if(n.flags&512&&n.wrap&4&&(n.check=ft(n.check,r,A,o)),a-=A,o+=A,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Jy;case Jy:if(n.flags&4096){if(a===0)break e;A=0;do b=r[o+A++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b));while(b&&A<a);if(n.flags&512&&n.wrap&4&&(n.check=ft(n.check,r,A,o)),a-=A,o+=A,b)break e}else n.head&&(n.head.comment=null);n.mode=qy;case qy:if(n.flags&512){for(;d<16;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Ke;break}l=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Qr;break;case Zy:for(;d<32;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}e.adler=n.check=fw(l),l=0,d=0,n.mode=ld;case ld:if(n.havedict===0)return e.next_out=i,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,m6;e.adler=n.check=1,n.mode=Qr;case Qr:if(t===A6||t===Cc)break e;case uh:if(n.last){l>>>=d&7,d-=d&7,n.mode=fh;break}for(;d<3;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}switch(n.last=l&1,l>>>=1,d-=1,l&3){case 0:n.mode=ew;break;case 1:if(I6(n),n.mode=bc,t===Cc){l>>>=2,d-=2;break e}break;case 2:n.mode=nw;break;case 3:e.msg="invalid block type",n.mode=Ke}l>>>=2,d-=2;break;case ew:for(l>>>=d&7,d-=d&7;d<32;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Ke;break}if(n.length=l&65535,l=0,d=0,n.mode=dh,t===Cc)break e;case dh:n.mode=tw;case tw:if(A=n.length,A){if(A>a&&(A=a),A>u&&(A=u),A===0)break e;s.set(r.subarray(o,o+A),i),a-=A,o+=A,u-=A,i+=A,n.length-=A;break}n.mode=Qr;break;case nw:for(;d<14;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(n.nlen=(l&31)+257,l>>>=5,d-=5,n.ndist=(l&31)+1,l>>>=5,d-=5,n.ncode=(l&15)+4,l>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Ke;break}n.have=0,n.mode=rw;case rw:for(;n.have<n.ncode;){for(;d<3;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}n.lens[M[n.have++]]=l&7,l>>>=3,d-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},S=Ha(g6,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,S){e.msg="invalid code lengths set",n.mode=Ke;break}n.have=0,n.mode=sw;case sw:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[l&(1<<n.lenbits)-1],p=v>>>24,y=v>>>16&255,x=v&65535,!(p<=d);){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(x<16)l>>>=p,d-=p,n.lens[n.have++]=x;else{if(x===16){for(B=p+2;d<B;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(l>>>=p,d-=p,n.have===0){e.msg="invalid bit length repeat",n.mode=Ke;break}b=n.lens[n.have-1],A=3+(l&3),l>>>=2,d-=2}else if(x===17){for(B=p+3;d<B;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}l>>>=p,d-=p,b=0,A=3+(l&7),l>>>=3,d-=3}else{for(B=p+7;d<B;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}l>>>=p,d-=p,b=0,A=11+(l&127),l>>>=7,d-=7}if(n.have+A>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Ke;break}for(;A--;)n.lens[n.have++]=b}}if(n.mode===Ke)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Ke;break}if(n.lenbits=9,R={bits:n.lenbits},S=Ha(n2,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,S){e.msg="invalid literal/lengths set",n.mode=Ke;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},S=Ha(r2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,S){e.msg="invalid distances set",n.mode=Ke;break}if(n.mode=bc,t===Cc)break e;case bc:n.mode=Ic;case Ic:if(a>=6&&u>=258){e.next_out=i,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,l6(e,h),i=e.next_out,s=e.output,u=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,n.mode===Qr&&(n.back=-1);break}for(n.back=0;v=n.lencode[l&(1<<n.lenbits)-1],p=v>>>24,y=v>>>16&255,x=v&65535,!(p<=d);){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(y&&(y&240)===0){for(E=p,C=y,I=x;v=n.lencode[I+((l&(1<<E+C)-1)>>E)],p=v>>>24,y=v>>>16&255,x=v&65535,!(E+p<=d);){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}l>>>=E,d-=E,n.back+=E}if(l>>>=p,d-=p,n.back+=p,n.length=x,y===0){n.mode=cw;break}if(y&32){n.back=-1,n.mode=Qr;break}if(y&64){e.msg="invalid literal/length code",n.mode=Ke;break}n.extra=y&15,n.mode=ow;case ow:if(n.extra){for(B=n.extra;d<B;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=iw;case iw:for(;v=n.distcode[l&(1<<n.distbits)-1],p=v>>>24,y=v>>>16&255,x=v&65535,!(p<=d);){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if((y&240)===0){for(E=p,C=y,I=x;v=n.distcode[I+((l&(1<<E+C)-1)>>E)],p=v>>>24,y=v>>>16&255,x=v&65535,!(E+p<=d);){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}l>>>=E,d-=E,n.back+=E}if(l>>>=p,d-=p,n.back+=p,y&64){e.msg="invalid distance code",n.mode=Ke;break}n.offset=x,n.extra=y&15,n.mode=aw;case aw:if(n.extra){for(B=n.extra;d<B;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Ke;break}n.mode=lw;case lw:if(u===0)break e;if(A=h-u,n.offset>A){if(A=n.offset-A,A>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Ke;break}A>n.wnext?(A-=n.wnext,f=n.wsize-A):f=n.wnext-A,A>n.length&&(A=n.length),m=n.window}else m=s,f=i-n.offset,A=n.length;A>u&&(A=u),u-=A,n.length-=A;do s[i++]=m[f++];while(--A);n.length===0&&(n.mode=Ic);break;case cw:if(u===0)break e;s[i++]=n.length,u--,n.mode=Ic;break;case fh:if(n.wrap){for(;d<32;){if(a===0)break e;a--,l|=r[o++]<<d,d+=8}if(h-=u,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?ft(n.check,s,h,i-h):wl(n.check,s,h,i-h)),h=u,n.wrap&4&&(n.flags?l:fw(l))!==n.check){e.msg="incorrect data check",n.mode=Ke;break}l=0,d=0}n.mode=uw;case uw:if(n.wrap&&n.flags){for(;d<32;){if(a===0)break e;a--,l+=r[o++]<<d,d+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Ke;break}l=0,d=0}n.mode=dw;case dw:S=p6;break e;case Ke:S=s2;break e;case i2:return o2;case a2:default:return Un}return e.next_out=i,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<Ke&&(n.mode<fh||t!==zy))&&f2(e,e.output,e.next_out,h-e.avail_out),g-=e.avail_in,h-=e.avail_out,e.total_in+=g,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?ft(n.check,s,h,e.next_out-h):wl(n.check,s,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Qr?128:0)+(n.mode===bc||n.mode===dh?256:0),(g===0&&h===0||t===zy)&&S===Ro&&(S=y6),S},B6=e=>{if(Po(e))return Un;let t=e.state;return t.window&&(t.window=null),e.state=null,Ro},k6=(e,t)=>{if(Po(e))return Un;const n=e.state;return(n.wrap&2)===0?Un:(n.head=t,t.done=!1,Ro)},R6=(e,t)=>{const n=t.length;let r,s,o;return Po(e)||(r=e.state,r.wrap!==0&&r.mode!==ld)?Un:r.mode===ld&&(s=1,s=wl(s,t,n,0),s!==r.check)?s2:(o=f2(e,t,n,n),o?(r.mode=i2,o2):(r.havedict=1,Ro))};var T6=c2,_6=u2,N6=l2,D6=b6,P6=d2,M6=S6,Q6=B6,F6=k6,j6=R6,L6="pako inflate (from Nodeca project)",zr={inflateReset:T6,inflateReset2:_6,inflateResetKeep:N6,inflateInit:D6,inflateInit2:P6,inflate:M6,inflateEnd:Q6,inflateGetHeader:F6,inflateSetDictionary:j6,inflateInfo:L6};function O6(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var U6=O6;const h2=Object.prototype.toString,{Z_NO_FLUSH:H6,Z_FINISH:z6,Z_OK:El,Z_STREAM_END:Ah,Z_NEED_DICT:ph,Z_STREAM_ERROR:G6,Z_DATA_ERROR:gw,Z_MEM_ERROR:K6}=$d;function Jd(e){this.options=Wd.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e2,this.strm.avail_out=0;let n=zr.inflateInit2(this.strm,t.windowBits);if(n!==El)throw new Error(Bo[n]);if(this.header=new U6,zr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=xl.string2buf(t.dictionary):h2.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=zr.inflateSetDictionary(this.strm,t.dictionary),n!==El)))throw new Error(Bo[n])}Jd.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let o,i,a;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?z6:H6,h2.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=zr.inflate(n,i),o===ph&&s&&(o=zr.inflateSetDictionary(n,s),o===El?o=zr.inflate(n,i):o===gw&&(o=ph));n.avail_in>0&&o===Ah&&n.state.wrap>0&&e[n.next_in]!==0;)zr.inflateReset(n),o=zr.inflate(n,i);switch(o){case G6:case gw:case ph:case K6:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||o===Ah))if(this.options.to==="string"){let u=xl.utf8border(n.output,n.next_out),l=n.next_out-u,d=xl.buf2string(n.output,u);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(u,u+l),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===El&&a===0)){if(o===Ah)return o=zr.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Jd.prototype.onData=function(e){this.chunks.push(e)};Jd.prototype.onEnd=function(e){e===El&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Wd.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function $6(e,t){const n=new Jd(t);if(n.push(e),n.err)throw n.msg||Bo[n.err];return n.result}var V6=$6,W6={inflate:V6};const{deflate:Y6}=i6,{inflate:X6}=W6;var J6=Y6,q6=X6;class Z6{constructor(){Z(this,"messageHandlers",new Map);Z(this,"setLoginError");Z(this,"globalRateLimitUntil",0);Z(this,"ws");Z(this,"reconnectAttempts",0);Z(this,"maxReconnectAttempts",5);Z(this,"reconnectTimeout",1e3)}setLoginErrorCallback(t){this.setLoginError=t}async login(t,n){return(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&await this.connect(),new Promise((r,s)=>{const o=i=>{var a;i.type===we.AUTH_SUCCESS?(this.unregisterMessageHandler(we.AUTH_SUCCESS),this.unregisterMessageHandler(we.AUTH_ERROR),this.send(t),r()):i.type===we.AUTH_ERROR&&(this.unregisterMessageHandler(we.AUTH_SUCCESS),this.unregisterMessageHandler(we.AUTH_ERROR),(a=this.ws)==null||a.close(1008,"Auth failed"),s(new Error(i.message||"Authentication failed")))};this.registerMessageHandler(we.AUTH_SUCCESS,o),this.registerMessageHandler(we.AUTH_ERROR,o),this.send(n)})}connect(){return Promise.resolve()}attemptReconnect(){this.reconnectAttempts>=this.maxReconnectAttempts||(this.reconnectAttempts++,setTimeout(()=>{this.connect().catch(t=>{this.setLoginError("Failed to connect to server")})},this.reconnectTimeout*this.reconnectAttempts))}send(t){if(this.isGloballyRateLimited()){try{console.warn("[WS] send suppressed due to global rate limit")}catch{}return}try{if(t==null){console.error("[WS] Cannot send null or undefined data");return}const n=typeof t=="object"?JSON.stringify(t):String(t);if(n.length>1048576){console.error("[WS] Message too large, dropping");return}try{const s=(()=>{try{const o=typeof t=="object"?JSON.parse(n):n.slice(0,200);if(typeof o=="object"&&o!==null){const i={...o};return i.passwordData&&(i.passwordData="[REDACTED]"),i.passphraseHash&&(i.passphraseHash="[REDACTED]"),i.encryptedMessage&&(i.encryptedMessage="[REDACTED]"),i.userData&&(i.userData="[REDACTED]"),i}return o}catch{return n.slice(0,200)}})();console.debug("[WS] send ->",s)}catch{}const r=window.edgeApi;r!=null&&r.wsSend?r.wsSend(n):console.error("[WS] edgeApi.wsSend not available")}catch(n){console.error("Error sending message:",n)}}setGlobalRateLimit(t){const n=Math.max(0,Math.floor(t*1e3)),r=Date.now()+n;this.globalRateLimitUntil=Math.max(this.globalRateLimitUntil,r);try{console.warn("[WS] Global rate limit set for seconds:",t)}catch{}}isGloballyRateLimited(){return Date.now()<this.globalRateLimitUntil}registerMessageHandler(t,n){this.messageHandlers.set(t,n)}unregisterMessageHandler(t){this.messageHandlers.delete(t)}handleMessage(t){try{if(t==null){console.error("[WS] Received null or undefined message");return}const n=String(t);if(n.length>1048576){console.error("[WS] Received message too large, dropping");return}let r;try{r=JSON.parse(n)}catch{if(n.length>1e4){console.error("[WS] Raw message too large, dropping");return}r={type:"raw",data:n}}if(typeof r!="object"||r===null){console.error("[WS] Invalid message structure received");return}try{const s={...r};s.passwordData&&(s.passwordData="[REDACTED]"),s.passphraseHash&&(s.passphraseHash="[REDACTED]"),s.encryptedMessage&&(s.encryptedMessage="[REDACTED]"),s.userData&&(s.userData="[REDACTED]"),s.encryptedPayload&&(s.encryptedPayload="[REDACTED]");const o=typeof s=="object"?{type:s.type,keys:Object.keys(s)}:{raw:String(s).slice(0,200)};console.debug("[WS] recv <-",o)}catch{}if(typeof r=="object"&&r.type){if(typeof r.type!="string"||r.type.length>100){console.error("[WS] Invalid message type received");return}const s=this.messageHandlers.get(r.type);if(s)try{s(r)}catch(o){console.error(`[WS] Handler error for message type ${r.type}:`,o)}}else{const s=this.messageHandlers.get("raw");if(s)try{s(t)}catch(o){console.error("[WS] Raw handler error:",o)}else{const o=this.messageHandlers.get("chat");if(o)try{o({id:co(),type:"raw",content:n.slice(0,1e3),timestamp:new Date})}catch(i){console.error("[WS] Chat handler error:",i)}}}}catch(n){console.error("[WS] Error handling message:",n)}}close(){this.messageHandlers.clear(),this.setLoginError=void 0,this.globalRateLimitUntil=0}isConnectedToServer(){return!0}}const Je=new Z6,mh=256*1024;function eM(e,t,n){const[r,s]=w.useState(0),[o,i]=w.useState(!1);async function a(u){var l,d,g,h,A;if(console.log("[useFileSender] Starting file send:",{filename:u.name,size:u.size,targetUsername:t,currentUsername:e,usersCount:n.length,users:n.map(f=>f.username)}),n.length===0)throw console.error("[useFileSender] No users provided for file sending"),new Error("No users available for file sending");i(!0),s(0);try{const f=new Uint8Array(await u.arrayBuffer()),m=await fe.Keys.generateAESKey();if(!((l=window==null?void 0:window.crypto)!=null&&l.subtle))throw new Error("WebCrypto API not available");const v=await window.crypto.subtle.exportKey("raw",m),p=fe.Base64.arrayBufferToBase64(v),y=n.filter(b=>b.username===t&&b.username!==e&&b.hybridPublicKeys);if(console.log("[useFileSender] Filtered users for encryption:",{targetUsername:t,totalUsers:n.length,filteredCount:y.length,filteredUsers:y.map(b=>({username:b.username,hasKeys:!!b.hybridPublicKeys}))}),y.length===0){console.warn("[useFileSender] No hybrid keys for target; attempting Signal Protocol fallback");const b=5*1024*1024;if(f.length>b)throw console.error("[useFileSender] File too large for inline Signal message"),new Error(`No valid recipient found for user: ${t}`);try{const S=await((g=(d=window.edgeApi)==null?void 0:d.hasSession)==null?void 0:g.call(d,{selfUsername:e,peerUsername:t,deviceId:1}));S!=null&&S.hasSession||(Je.send(JSON.stringify({type:we.LIBSIGNAL_REQUEST_BUNDLE,username:t})),await new Promise(M=>setTimeout(M,500)));let k;if(typeof window<"u"&&typeof Buffer>"u")if(f.length>65536){const M=new Blob([f]),T=new FileReader;k=await new Promise((F,H)=>{T.onload=()=>{const X=T.result.split(",")[1];F(X)},T.onerror=H,T.readAsDataURL(M)})}else{let M="";for(let F=0;F<f.length;F+=8192){const H=f.slice(F,F+8192);M+=btoa(String.fromCharCode(...H))}k=M}else k=Buffer.from(f).toString("base64");const R={type:"file-message",messageId:crypto.randomUUID(),from:e,to:t,timestamp:Date.now(),fileName:u.name,fileType:u.type||"application/octet-stream",fileSize:u.size,content:JSON.stringify({messageId:crypto.randomUUID(),fileName:u.name,fileType:u.type||"application/octet-stream",fileSize:u.size,dataBase64:k})},B=await((A=(h=window.edgeApi)==null?void 0:h.encrypt)==null?void 0:A.call(h,{fromUsername:e,toUsername:t,plaintext:JSON.stringify(R)}));if(!(B!=null&&B.ciphertextBase64))throw new Error("Failed to encrypt inline file");Je.send(JSON.stringify({type:we.ENCRYPTED_MESSAGE,to:t,encryptedPayload:{from:e,to:t,content:B.ciphertextBase64,messageId:R.messageId,type:B.type,sessionId:B.sessionId}})),s(1),i(!1);return}catch(S){throw console.error("[useFileSender] Signal Protocol inline fallback failed:",S),new Error(`No valid recipient found for user: ${t}`)}}const x=await Promise.all(y.map(async b=>{const S={aesKey:p},k=await fe.Hybrid.encryptHybridPayload(S,b.hybridPublicKeys);return{username:b.username,encryptedAESKey:k.encryptedMessage,ephemeralX25519Public:k.ephemeralX25519Public,kyberCiphertext:k.kyberCiphertext}})),E=Math.ceil(f.length/mh),C=f.length*x.length;let I=0;for(let b=0;b<E;b++){const S=b*mh,k=Math.min(S+mh,f.length),R=f.slice(S,k),B=J6(R),{iv:M,authTag:T,encrypted:F}=await fe.Encrypt.encryptBinaryWithAES(B.buffer,m),H=fe.Encrypt.serializeEncryptedData(M,T,F),O=btoa(H);for(const X of x){const N={type:we.FILE_MESSAGE_CHUNK,from:e,to:X.username,encryptedAESKey:X.encryptedAESKey,ephemeralX25519Public:X.ephemeralX25519Public,kyberCiphertext:X.kyberCiphertext,chunkIndex:b,totalChunks:E,chunkData:O,filename:u.name,isLastChunk:b===E-1};Je.send(JSON.stringify(N))}I+=R.length*x.length,s(I/C)}s(1),console.log("[useFileSender] File sending completed successfully")}catch(f){throw console.error("[useFileSender] Failed to process and send file:",f),s(0),f}finally{i(!1)}}return{sendFile:a,progress:r,isSendingFile:o}}function tM({progress:e}){return c.jsx("div",{className:"w-full bg-gray-300 rounded h-1.5 overflow-hidden",style:{marginBottom:2},children:c.jsx("div",{className:"bg-blue-500 h-1.5 rounded transition-all duration-300",style:{width:`${(e*100).toFixed(2)}%`}})})}function nM({onFileSelected:e,disabled:t}){const n=w.useRef(null),r=s=>{var i;const o=(i=s.target.files)==null?void 0:i[0];o&&e(o),s.target.value=""};return c.jsxs(c.Fragment,{children:[c.jsx(he,{variant:"ghost",size:"sm",className:oe("h-10 w-10 rounded-full transition-all duration-200",t&&"opacity-50 cursor-not-allowed","hover:bg-slate-200 text-slate-500 hover:text-slate-700"),onClick:()=>{var s;return!t&&((s=n.current)==null?void 0:s.click())},disabled:t,type:"button",children:c.jsx(Wv,{className:"h-5 w-5"})}),c.jsx("input",{ref:n,type:"file",className:"hidden",onChange:r})]})}const xp=w.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{className:oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));xp.displayName="Textarea";function rM({value:e,onChange:t,onKeyDown:n,textareaRef:r}){return w.useEffect(()=>{r.current&&(r.current.style.height="auto",r.current.style.height=Math.min(r.current.scrollHeight,120)+"px")},[e]),c.jsx(xp,{ref:r,value:e,onChange:t,onKeyDown:n,placeholder:"Type a message...",className:oe("min-h-[39px] max-h-[100px] resize-none border-0 bg-transparent px-0 py-2 text-sm","focus-visible:ring-0 focus-visible:ring-offset-0","text-slate-900 placeholder:text-slate-500"),rows:1})}function sM({disabled:e,isSending:t,editingMessage:n,onClick:r}){return c.jsx(he,{onClick:r,size:"sm",disabled:e,className:oe("h-10 w-10 rounded-full text-white shadow-md transition-all duration-200",e?"opacity-50 cursor-not-allowed bg-gray-400":n?"bg-yellow-500 hover:bg-yellow-600":"bg-slate-600 hover:bg-slate-700"),children:t?c.jsxs("svg",{className:"h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):n?c.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):c.jsx(PB,{className:"h-5 w-5"})})}function oM({onClick:e,disabled:t}){return c.jsx(he,{variant:"ghost",size:"sm",className:oe("h-10 w-10 rounded-full transition-all duration-200",t&&"opacity-50 cursor-not-allowed","hover:bg-slate-200 text-slate-500 hover:text-slate-700"),onClick:e,disabled:t,type:"button",title:"Record voice note",children:c.jsx(Iu,{className:"h-5 w-5"})})}function iM({onSendMessage:e,onSendFile:t,currentUsername:n,users:r,replyTo:s,onCancelReply:o,editingMessage:i,onCancelEdit:a,onEditMessage:u,onTyping:l,selectedConversation:d}){const[g,h]=w.useState(""),[A,f]=w.useState(!1),[m,v]=w.useState(!1),p=w.useRef(null),{sendFile:y,progress:x,isSendingFile:E}=eM(n,d,r);w.useEffect(()=>{var B;i&&(h(i.content),(B=p.current)==null||B.focus())},[i]);const C=B=>{let T=B.normalize("NFC").trim().slice(0,1e4);T=T.replace(/[\u0000-\u001F\u007F-\u009F\u2000-\u200F\u2028-\u202F\u205F-\u206F\uFEFF\uFFF0-\uFFFF]/g,""),T=T.replace(/[\u200B-\u200D\u2060\uFEFF]/g,""),T=T.replace(/[\u202A-\u202E\u2066-\u2069]/g,"");const F=[/[\u0300-\u036F]{5,}/g,/[\uD800-\uDFFF]/g,/[\uFDD0-\uFDEF]/g,/[\u0001-\u0008\u000E-\u001F\u007F]/g];for(const H of F)T=T.replace(H,"");return T=T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),T.length>1e4&&(T=T.slice(0,1e4)),T};async function I(){if(!g.trim()||A||!d)return;const B=C(g);if(B){console.log("[ChatInput] Attempting to send message:",{contentLength:B.length,selectedConversation:d,editingMessage:!!i,replyTo:!!s});try{f(!0),i&&u?(console.log("[ChatInput] Sending edit message"),await e(i.id,B,we.EDIT_MESSAGE,i.replyTo),a==null||a()):(console.log("[ChatInput] Sending new message"),await e("",B,"chat",s??null),o==null||o()),console.log("[ChatInput] Message sent successfully"),h("")}catch(M){console.error("[ChatInput] Failed to send message:",M)}finally{f(!1)}}}const b=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),I())},S=B=>{const T=["image/jpeg","image/png","image/gif","image/webp","text/plain","application/pdf","application/zip","application/x-zip-compressed","audio/mpeg","audio/wav","audio/ogg","audio/webm","video/mp4","video/webm","video/ogg"];if(B.size>104857600)return{valid:!1,error:"File size exceeds 100MB limit"};if(B.size===0)return{valid:!1,error:"Empty files are not allowed"};if(!T.includes(B.type))return{valid:!1,error:"File type not allowed"};const F=B.name.toLowerCase().split(".").pop()||"",O={"image/jpeg":["jpg","jpeg"],"image/png":["png"],"image/gif":["gif"],"image/webp":["webp"],"text/plain":["txt"],"application/pdf":["pdf"],"application/zip":["zip"],"application/x-zip-compressed":["zip"],"audio/mpeg":["mp3"],"audio/wav":["wav"],"audio/ogg":["ogg"],"audio/webm":["webm"],"video/mp4":["mp4"],"video/webm":["webm"],"video/ogg":["ogv"]}[B.type];if(O&&!O.includes(F))return{valid:!1,error:`File extension '${F}' does not match MIME type '${B.type}'`};if(["exe","bat","cmd","com","pif","scr","vbs","js","jar","app","deb","pkg","dmg","msi","msp","dll","sys","drv","bin","run","action","workflow","sh","bash","zsh","ps1","psm1","psd1","ps1xml","psc1","psc2","msh","msh1","msh2","mshxml","msh1xml","msh2xml"].includes(F))return{valid:!1,error:`Dangerous file extension '${F}' not allowed`};const N=B.name.normalize("NFC").replace(/[<>:"/\\|?*\x00-\x1f\x7f-\x9f]/g,"_").replace(/\.{2,}/g,".").replace(/^\.+|\.+$/g,"").slice(0,255);return N!==B.name&&console.warn("[ChatInput] Filename sanitized:",B.name,"->",N),N.length===0?{valid:!1,error:"Invalid filename after sanitization"}:{valid:!0}},k=async B=>{const M=S(B);if(!M.valid){console.error("[ChatInput] File validation failed:",M.error);return}try{await y(B);const T=URL.createObjectURL(B),F=B.name.replace(/[<>:"/\\|?*\x00-\x1f]/g,"_").slice(0,255);t({id:crypto.randomUUID(),content:T,timestamp:new Date,isCurrentUser:!0,isSystemMessage:!1,type:we.FILE_MESSAGE,filename:F,fileSize:B.size,mimeType:B.type,sender:n})}catch{}},R=async B=>{if(!d){console.error("[ChatInput] No conversation selected for voice note");return}try{f(!0);const T=`voice-note-${new Date().toISOString().replace(/[:.]/g,"-")}.webm`,F=new File([B],T,{type:"audio/webm"}),H=S(F);if(!H.valid){console.error("[ChatInput] Voice note validation failed:",H.error),alert("Voice note too large: "+H.error),f(!1);return}console.log("[ChatInput] Sending voice note file:",{filename:T,size:F.size,type:F.type,selectedConversation:d,usersCount:r.length,users:r.map(X=>X.username)});try{await y(F),console.log("[ChatInput] Voice note file sent successfully")}catch(X){console.error("[ChatInput] Failed to send voice note:",X),alert("Failed to send voice note: "+(X instanceof Error?X.message:"Unknown error")),f(!1),v(!1);return}const O=URL.createObjectURL(F);console.log("[ChatInput] Created blob URL for voice note:",O),t({id:crypto.randomUUID(),content:O,timestamp:new Date,isCurrentUser:!0,isSystemMessage:!1,type:"file",filename:T,fileSize:F.size,mimeType:F.type,sender:n}),console.log("[ChatInput] Voice note added to UI"),v(!1),console.log("[ChatInput] Voice note sent successfully")}catch(M){console.error("[ChatInput] Failed to send voice note:",M),alert("Failed to send voice note: "+M.message)}finally{f(!1)}};return c.jsxs("div",{className:oe("relative border-t","bg-white border-slate-200"),children:[i&&c.jsx(xD,{onCancelEdit:a}),s&&c.jsx(ED,{replyTo:s,onCancelReply:o}),x>0&&x<1&&c.jsx("div",{className:"px-4 pt-2",children:c.jsx(tM,{progress:x})}),m&&c.jsx("div",{className:"px-4 pt-2",children:c.jsx(CD,{onSendVoiceNote:R,onCancel:()=>v(!1),disabled:A||E})}),c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:oe("flex items-end gap-3 rounded-2xl border shadow-sm transition-all duration-200","bg-slate-50 border-slate-200 focus-within:border-slate-400"),children:[c.jsx(nM,{onFileSelected:k,disabled:E}),c.jsx(oM,{onClick:()=>v(!0),disabled:E||m}),c.jsx(rM,{value:g,onChange:B=>{h(B.target.value),l()},onKeyDown:b,textareaRef:p}),c.jsx(sM,{disabled:!g.trim()||A||!d,isSending:A,editingMessage:i,onClick:I})]})})]})}var aM="Separator",Aw="horizontal",lM=["horizontal","vertical"],g2=w.forwardRef((e,t)=>{const{decorative:n,orientation:r=Aw,...s}=e,o=cM(r)?r:Aw,a=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return c.jsx(tt.div,{"data-orientation":o,...a,...s,ref:t})});g2.displayName=aM;function cM(e){return lM.includes(e)}var A2=g2;const Ei=w.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>c.jsx(A2,{ref:s,decorative:n,orientation:t,className:oe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Ei.displayName=A2.displayName;function uM(e,t,n){const r=w.useRef(null),s=w.useRef(null),o=w.useRef(0),i=w.useRef(!1),a=w.useRef(!1),u=w.useRef(0),l=w.useRef(!1),d=w.useRef(null),g=1500,h=3e3,A=100,f=w.useCallback(async()=>{if(console.log("[Typing] sendTypingStart called",{isTyping:i.current,pendingTyping:a.current,isProcessingTyping:l.current,hasSendEncryptedMessage:!!n}),l.current){console.log("[Typing] Typing start already in progress, skipping");return}const x=Date.now();if(!i.current&&x-u.current>h)try{if(l.current=!0,console.debug("[Typing] Sending typing-start signal"),n){console.debug("[Typing] Sending typing-start as encrypted message");const E=crypto.getRandomValues(new Uint8Array(6)),C=Array.from(E,b=>b.toString(36)).join(""),I=`typing-start-${x}-${C}`;await n(I,JSON.stringify({type:"typing-start",timestamp:x}),"typing-start")}o.current=x,u.current=x,i.current=!0,a.current=!1,console.log("[Typing] Typing started successfully")}catch(E){console.error("[Typing] Failed to send typing start:",E),i.current=!1}finally{l.current=!1}else i.current?console.log("[Typing] Typing start skipped - already typing"):(console.log("[Typing] Typing start throttled, marking as pending",{timeSinceLastTypingStart:x-u.current,minInterval:h}),a.current=!0)},[e,n,t]),m=w.useCallback(async()=>{if(console.log("[Typing] sendTypingStop called",{isTyping:i.current,pendingTyping:a.current,hasSendEncryptedMessage:!!n}),i.current)try{if(console.debug("[Typing] Sending typing-stop signal"),n){console.debug("[Typing] Sending typing-stop as encrypted message");const x=crypto.getRandomValues(new Uint8Array(6)),E=Array.from(x,I=>I.toString(36)).join(""),C=`typing-stop-${Date.now()}-${E}`;await n(C,JSON.stringify({type:"typing-stop",timestamp:Date.now()}),"typing-stop")}i.current=!1,a.current=!1,console.log("[Typing] Typing stopped successfully")}catch(x){console.error("[Typing] Failed to send typing stop:",x),i.current=!1,a.current=!1}else console.log("[Typing] sendTypingStop called but not currently typing, skipping")},[e,n,t]),v=w.useCallback(()=>{console.log("[Typing] handleLocalTyping called",{isTyping:i.current,pendingTyping:a.current,lastTypingStartSent:u.current,timeSinceLastTypingStart:Date.now()-u.current,minInterval:h,isProcessingTyping:l.current}),s.current&&clearTimeout(s.current);const x=Date.now();!i.current&&!l.current&&x-u.current>h?(console.log("[Typing] Sending typing start - conditions met"),f()):console.log("[Typing] Skipping typing start - conditions not met",{isTyping:i.current,isProcessingTyping:l.current,timeSinceLastTypingStart:x-u.current,minInterval:h}),s.current=setTimeout(()=>{console.log("[Typing] Debounce timeout expired, sending typing stop",{isTyping:i.current,pendingTyping:a.current}),m()},g)},[f,m]),p=w.useCallback(()=>{console.log("[Typing] handleConversationChange called",{isTyping:i.current,pendingTyping:a.current,hasDebounceTimeout:!!s.current,hasTypingTimeout:!!r.current,hasConversationChangeTimeout:!!d.current}),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{console.log("[Typing] Processing conversation change after debounce",{isTyping:i.current,pendingTyping:a.current,hasDebounceTimeout:!!s.current,hasTypingTimeout:!!r.current}),s.current&&(console.log("[Typing] Clearing debounce timeout"),clearTimeout(s.current),s.current=null),r.current&&(console.log("[Typing] Clearing typing timeout"),clearTimeout(r.current),r.current=null),i.current?(console.log("[Typing] Sending typing stop due to conversation change"),m()):console.log("[Typing] No typing stop needed - not currently typing")},A)},[m]);w.useEffect(()=>()=>{s.current&&clearTimeout(s.current),r.current&&clearTimeout(r.current),d.current&&clearTimeout(d.current),i.current&&m()},[m]);const y=w.useCallback(()=>{try{s.current&&(clearTimeout(s.current),s.current=null),r.current&&(clearTimeout(r.current),r.current=null),u.current=0,o.current=0,a.current=!1,l.current=!1,i.current=!1,console.log("[Typing] Reset typing throttle after message send")}catch{}},[]);return w.useEffect(()=>{if(a.current&&!i.current){const x=Date.now(),E=h-(x-u.current);if(E>0){const C=setTimeout(()=>{a.current&&!i.current&&f()},E);return()=>clearTimeout(C)}}},[f]),{handleLocalTyping:v,handleConversationChange:p,resetTypingAfterSend:y,isTyping:i.current}}const dM=w.memo(function({username:t,className:n}){return c.jsxs("div",{className:oe("flex items-center gap-2 text-sm text-muted-foreground animate-in fade-in duration-200",n),children:[c.jsx("span",{className:"font-medium text-foreground",children:t}),c.jsx("span",{children:"is typing"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1s"}}),c.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"1s"}}),c.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"1s"}})]})]})}),p2=w.createContext(void 0);function fM(){const e=w.useContext(p2);if(!e)throw new Error("useTypingIndicatorContext must be used within a TypingIndicatorProvider");return e}function hM({children:e,currentUsername:t}){const[n,r]=w.useState(new Set),s=w.useRef(new Map),o=w.useCallback((u,l)=>{r(d=>{const g=new Set(d);return(l?!d.has(u):d.has(u))?(l?g.add(u):g.delete(u),g):d})},[]),i=w.useCallback(u=>{console.log("[TypingIndicator] clearTypingUser called for:",u);const l=s.current.get(u);l&&(clearTimeout(l),s.current.delete(u)),r(d=>{const g=new Set(d);return g.has(u)?(g.delete(u),console.log("[TypingIndicator] Removed user from typing list:",u,"New list:",Array.from(g)),g):(console.log("[TypingIndicator] User not in typing list, returning new reference:",u),g)})},[]);w.useEffect(()=>{const u=l=>{const{from:d,indicatorType:g}=l.detail;if(console.log("[TypingIndicator] Received typing indicator event:",l.detail),console.log("[TypingIndicator] Event details:",{from:d,indicatorType:g,currentUsername:t}),d&&g){const m=d;if(t&&m===t){console.log("[TypingIndicator] Skipping typing indicator from current user:",m);return}if(console.log("[TypingIndicator] Processing typing indicator:",{indicatorType:g,username:m}),g==="typing-start"){const v=s.current.get(m);v&&clearTimeout(v),r(y=>{const x=new Set(y);return x.has(m)?(console.log("[TypingIndicator] User already typing, returning new reference:",m),x):(x.add(m),console.log("[TypingIndicator] Added user to typing list:",m,"New list:",Array.from(x)),x)});const p=setTimeout(()=>{i(m)},5e3);s.current.set(m,p)}else g==="typing-stop"&&(console.log("[TypingIndicator] Clearing typing user:",m),i(m));return}const{type:h,username:A,fromUsername:f}=l.detail;if(h==="typing-start"&&(A||f)){const m=A||f;if(t&&m===t){console.log("[TypingIndicator] Skipping legacy typing indicator from current user:",m);return}console.log("[TypingIndicator] Processing legacy typing indicator:",{type:h,actualUsername:m});const v=s.current.get(m);v&&clearTimeout(v),r(y=>{const x=new Set(y);return x.has(m)||x.add(m),x});const p=setTimeout(()=>{i(m)},5e3);s.current.set(m,p)}else h==="typing-stop"&&(A||f)&&i(A||f)};return window.addEventListener("typing-indicator",u),()=>{window.removeEventListener("typing-indicator",u),s.current.forEach(l=>clearTimeout(l)),s.current.clear()}},[i]);const a={typingUsers:Array.from(n),setTypingUser:o,clearTypingUser:i};return w.useEffect(()=>{console.log("[TypingIndicator] typingUsers state changed:",Array.from(n))},[n]),c.jsx(p2.Provider,{value:a,children:e})}function gM(e,t,n,r){const s=w.useRef(new Set);w.useEffect(()=>{const l=localStorage.getItem(`sentReadReceipts_${n}`);if(l)try{if(l.length>1e5){console.error("[Receipt] Stored receipts data too large, clearing"),localStorage.removeItem(key);return}const d=JSON.parse(l),g=Date.now()-1440*60*1e3,h=d.filter(A=>A.timestamp&&A.timestamp>g);s.current=new Set(h.map(A=>A.messageId))}catch(d){console.error("Failed to load sent read receipts:",d)}},[n]);const o=w.useCallback(()=>{try{const l=Array.from(s.current).map(d=>({messageId:d,timestamp:Date.now()}));localStorage.setItem(`sentReadReceipts_${n}`,JSON.stringify(l))}catch(l){console.error("Failed to save sent read receipts:",l)}},[n]),i=w.useCallback(async(l,d)=>{var g,h,A,f;if(console.log("[Receipt] sendReadReceipt called:",{messageId:l,sender:d,currentUsername:n}),d===n){console.log("[Receipt] Skipping read receipt for own message");return}if(s.current.has(l)){console.debug("[Receipt] Read receipt already sent for message in current session:",l);return}console.log("[Receipt] Sending read receipt for message:",l);try{const m=await((h=(g=window.edgeApi)==null?void 0:g.hasSession)==null?void 0:h.call(g,{selfUsername:n,peerUsername:d,deviceId:1}));m!=null&&m.hasSession||(console.log("[Receipt] No session with sender, requesting bundle for read receipt"),Je.send(JSON.stringify({type:we.LIBSIGNAL_REQUEST_BUNDLE,username:d})),await new Promise(x=>setTimeout(x,500)));const v={messageId:`read-receipt-${l}`,from:n,to:d,content:"read-receipt",timestamp:Date.now(),messageType:"signal-protocol",signalType:"signal-protocol",protocolType:"signal",type:"read-receipt"},p=await((f=(A=window.edgeApi)==null?void 0:A.encrypt)==null?void 0:f.call(A,{fromUsername:n,toUsername:d,plaintext:JSON.stringify(v)}));if(!(p!=null&&p.ciphertextBase64)){console.error("[Receipt] Failed to encrypt read receipt");return}const y={type:we.ENCRYPTED_MESSAGE,to:d,encryptedPayload:{from:n,to:d,content:p.ciphertextBase64,messageId:`read-receipt-${l}`,type:p.type,sessionId:p.sessionId}};Je.send(JSON.stringify(y)),s.current.add(l),o(),console.debug("[Receipt] Read receipt sent for message:",l)}catch(m){console.error("Failed to send read receipt:",m)}},[n,o]),a=w.useCallback(async l=>{console.log("[Receipt] markMessageAsRead called for message:",l);let d=null;if(t(g=>g.map(h=>{var A;return h.id===l&&!((A=h.receipt)!=null&&A.read)&&h.sender!==n?(console.log("[Receipt] Marking message as read:",l),d={...h,receipt:{...h.receipt,read:!0,readAt:new Date}},d):h})),d)try{await r(d),console.debug("[Receipt] Message marked as read and persisted:",l)}catch(g){console.error("[Receipt] Failed to persist read status:",g)}else console.log("[Receipt] Message already marked as read or not found:",l)},[t,n,r]),u=w.useCallback(l=>{var h,A;if(!l.receipt||l.sender!==n)return;let d,g;for(let f=e.length-1;f>=0;f--){const m=e[f];if(m.sender===n&&(!d&&((h=m.receipt)!=null&&h.read)&&(d=m.id),!g&&((A=m.receipt)!=null&&A.delivered)&&!m.receipt.read&&(g=m.id),d&&g))break}if(l.id===d)return{...l.receipt,read:!0};if(l.id===g)return{...l.receipt,delivered:!0}},[e,n]);return w.useEffect(()=>{const l=async d=>{const{messageId:g,from:h}=d.detail;console.log("[Receipt] Received delivery receipt event:",{messageId:g,from:h,currentUsername:n});const A=g.replace(/^delivery-receipt-/,"");console.log("[Receipt] Extracted original message ID from delivery receipt:",{receiptMessageId:g,originalMessageId:A});let f=null;if(t(m=>(console.log("[Receipt] Current messages before delivery receipt update:",m.map(v=>({id:v.id,sender:v.sender,receipt:v.receipt}))),m.map(v=>v.id===A&&v.sender===n?(console.log("[Receipt] Updating message with delivery status:",A),f={...v,receipt:{...v.receipt,delivered:!0,deliveredAt:new Date}},f):v))),f)try{await r(f),console.debug("[Receipt] Delivery status persisted for message:",A)}catch(m){console.error("[Receipt] Failed to persist delivery status:",m)}else console.log("[Receipt] Message not found or not from current user for delivery receipt:",A)};return window.addEventListener("message-delivered",l),()=>{window.removeEventListener("message-delivered",l)}},[n,t,r]),w.useEffect(()=>{const l=async d=>{const{messageId:g,from:h}=d.detail;console.log("[Receipt] Received read receipt event:",{messageId:g,from:h,currentUsername:n});const A=g.replace(/^read-receipt-/,"");console.log("[Receipt] Extracted original message ID from receipt:",{receiptMessageId:g,originalMessageId:A});let f=null;if(t(m=>(console.log("[Receipt] Current messages before read receipt update:",m.map(v=>({id:v.id,sender:v.sender,receipt:v.receipt}))),m.map(v=>v.id===A&&v.sender===n?(console.log("[Receipt] Updating message with read status:",A),f={...v,receipt:{...v.receipt,read:!0,readAt:new Date}},f):v))),f)try{await r(f),console.debug("[Receipt] Read receipt status persisted for message:",A)}catch(m){console.error("[Receipt] Failed to persist read receipt status:",m)}else console.log("[Receipt] Message not found or not from current user for read receipt:",A)};return window.addEventListener("message-read",l),()=>{window.removeEventListener("message-read",l)}},[n,t,r]),w.useEffect(()=>{const l=()=>{try{const g=Date.now()-864e5,h=e.filter(f=>new Date(f.timestamp).getTime()<g).map(f=>f.id);let A=!1;h.forEach(f=>{s.current.has(f)&&(s.current.delete(f),A=!0)}),A&&(o(),console.debug("[Receipt] Cleaned up old read receipt tracking data"))}catch(g){console.error("Failed to cleanup old read receipts:",g)}};l();const d=setInterval(l,1440*60*1e3);return()=>clearInterval(d)},[e,o]),{sendReadReceipt:i,markMessageAsRead:a,getSmartReceiptStatus:u}}const pw="screen_sharing_settings_v1",ro=class ro{constructor(){Z(this,"settings",null);Z(this,"listeners",new Set)}static getInstance(){return ro.instance||(ro.instance=new ro),ro.instance}loadSettings(){try{const t=localStorage.getItem(pw);if(!t)return{resolution:yt.find(o=>o.id==="1080p")||yt[0],frameRate:30,quality:"medium"};const n=JSON.parse(t);if(!this.isValidSettings(n))return console.warn("[ScreenSharingSettings] Invalid stored settings, using defaults"),{resolution:yt.find(o=>o.id==="1080p")||yt[0],frameRate:30,quality:"medium"};const r=yt.find(s=>{var o;return s.id===((o=n.resolution)==null?void 0:o.id)});return r?{resolution:r,frameRate:n.frameRate,quality:n.quality}:(console.warn("[ScreenSharingSettings] Stored resolution not found, using default"),{resolution:yt.find(o=>o.id==="1080p")||yt[0],frameRate:30,quality:"medium"})}catch(t){return console.error("[ScreenSharingSettings] Failed to load settings:",t),{resolution:yt.find(r=>r.id==="1080p")||yt[0],frameRate:30,quality:"medium"}}}isValidSettings(t){return!(!t||typeof t!="object"||!t.resolution||typeof t.resolution!="object"||typeof t.resolution.id!="string"||typeof t.frameRate!="number"||!to.includes(t.frameRate)||!["low","medium","high"].includes(t.quality))}saveSettings(){if(this.settings!==null)try{localStorage.setItem(pw,JSON.stringify(this.settings))}catch(t){console.error("[ScreenSharingSettings] Failed to save settings:",t)}}ensureSettingsLoaded(){this.settings===null&&(this.settings=this.loadSettings())}getSettings(){return this.ensureSettingsLoaded(),{...this.settings}}setResolution(t){this.ensureSettingsLoaded();const n=yt.find(r=>r.id===t.id||r.name===t.name);if(!n)throw new Error(`Invalid resolution: ${t.id||t.name}. Must be one of: ${yt.map(r=>r.id).join(", ")}.`);console.log("[ScreenSharingSettings] Resolution changed to:",n.name),this.settings.resolution=n,this.saveSettings(),this.notifyListeners()}setFrameRate(t){if(!to.includes(t))throw new Error(`Invalid framerate: ${t}. Must be one of: ${to.join(", ")}.`);this.ensureSettingsLoaded(),console.log("[ScreenSharingSettings] Frame rate changed to:",t,"FPS"),this.settings.frameRate=t,this.saveSettings(),this.notifyListeners()}setQuality(t){this.ensureSettingsLoaded(),console.log("[ScreenSharingSettings] Quality changed to:",t),this.settings.quality=t,this.saveSettings(),this.notifyListeners()}updateSettings(t){if(this.ensureSettingsLoaded(),t.resolution){const n=yt.find(r=>r.id===t.resolution.id||r.name===t.resolution.name);if(!n)throw new Error(`Invalid resolution: ${t.resolution.id||t.resolution.name}. Must be one of: ${yt.map(r=>r.id).join(", ")}.`);this.settings.resolution=n}if(t.frameRate!==void 0){if(!to.includes(t.frameRate))throw new Error(`Invalid framerate: ${t.frameRate}. Must be one of: ${to.join(", ")}.`);this.settings.frameRate=t.frameRate}if(t.quality){if(!["low","medium","high"].includes(t.quality))throw new Error(`Invalid quality: ${t.quality}. Must be one of: low, medium, high.`);this.settings.quality=t.quality}this.saveSettings(),this.notifyListeners()}resetToDefaults(){const t=yt.find(n=>n.id==="1080p")||yt[0];this.settings={resolution:t,frameRate:30,quality:"medium"},this.saveSettings(),this.notifyListeners()}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}notifyListeners(){this.listeners.forEach(t=>{try{t(this.getSettings())}catch(n){console.error("[ScreenSharingSettings] Error in settings listener:",n)}})}getVideoConstraints(){this.ensureSettingsLoaded();const{resolution:t,frameRate:n,quality:r}=this.settings,s={frameRate:{ideal:n,max:n,min:Math.max(1,n-5)}};t.isNative?(s.width={ideal:1920},s.height={ideal:1080}):(s.width={ideal:t.width,max:t.width,min:Math.max(640,t.width-100)},s.height={ideal:t.height,max:t.height,min:Math.max(480,t.height-100)});const o=this.getQualityConstraints(r);return Object.assign(s,o),console.log("[ScreenSharingSettings] Generated video constraints:",s),s}getQualityConstraints(t){switch(t){case"low":return{advanced:[{width:{max:1280},height:{max:720}}]};case"medium":return{advanced:[{width:{max:1920},height:{max:1080}}]};case"high":return{advanced:[{width:{max:3840},height:{max:2160}}]};default:return{}}}getElectronVideoConstraints(){this.ensureSettingsLoaded();const{resolution:t,frameRate:n,quality:r}=this.settings;return console.log("[ScreenSharingSettings] Generating Electron constraints for:",{resolution:t.name,frameRate:n,quality:r}),t.isNative?{mandatory:{chromeMediaSource:"desktop",minWidth:1280,maxWidth:3840,minHeight:720,maxHeight:2160,minFrameRate:Math.max(1,n-2),maxFrameRate:n}}:{mandatory:{chromeMediaSource:"desktop",minWidth:t.width,maxWidth:t.width,minHeight:t.height,maxHeight:t.height,minFrameRate:Math.max(1,n-2),maxFrameRate:n}}}};Z(ro,"instance",null);let Gg=ro;const xt=Gg.getInstance(),yt=[{id:"native",name:"Native Resolution",width:0,height:0,isNative:!0},{id:"720p",name:"720p (1280720)",width:1280,height:720},{id:"1080p",name:"1080p (19201080)",width:1920,height:1080},{id:"1440p",name:"1440p (25601440)",width:2560,height:1440},{id:"4k",name:"4K (38402160)",width:3840,height:2160}],to=[15,30,60];class m2{constructor(t){Z(this,"localStream",null);Z(this,"remoteStream",null);Z(this,"remoteScreenStream",null);Z(this,"screenStream",null);Z(this,"peerConnection",null);Z(this,"currentCall",null);Z(this,"isScreenSharing",!1);Z(this,"isTogglingScreenShare",!1);Z(this,"isRenegotiating",!1);Z(this,"iceConnectionFailureTimeoutId",null);Z(this,"localUsername","");Z(this,"preferredCameraDeviceId",null);Z(this,"onIncomingCallCallback",null);Z(this,"onCallStateChangeCallback",null);Z(this,"onRemoteStreamCallback",null);Z(this,"onRemoteScreenStreamCallback",null);Z(this,"onLocalStreamCallback",null);Z(this,"rtcConfig",{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}],iceCandidatePoolSize:10,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});Z(this,"CALL_TIMEOUT",6e4);Z(this,"RING_TIMEOUT",3e4);Z(this,"callTimeoutId",null);this.localUsername=t;try{const n=localStorage.getItem("preferred_camera_deviceId_v1");n&&typeof n=="string"&&n.length<256&&(this.preferredCameraDeviceId=n)}catch{}}initialize(){console.log("[Calling] Initializing WebRTC calling service"),this.setupSignalHandlers()}async startCall(t,n="audio"){var s;if(this.currentCall)throw new Error("Another call is already in progress");const r=this.generateCallId();console.log(`[Calling] Starting ${n} call to ${t}`,{callId:r}),this.currentCall={id:r,type:n,direction:"outgoing",status:"connecting",peer:t,startTime:Date.now()};try{await this.setupLocalMedia(n),await this.createPeerConnection(),this.localStream&&this.localStream.getTracks().forEach(i=>{this.peerConnection.addTrack(i,this.localStream)});const o=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:n==="video"});return await this.peerConnection.setLocalDescription(o),await this.sendCallSignal({type:"offer",callId:r,from:this.localUsername,to:t,data:o,timestamp:Date.now()}),this.currentCall.status="ringing",(s=this.onCallStateChangeCallback)==null||s.call(this,this.currentCall),this.callTimeoutId=setTimeout(()=>{var i;((i=this.currentCall)==null?void 0:i.status)==="ringing"&&this.endCall("timeout")},this.CALL_TIMEOUT),r}catch(o){throw console.error("[Calling] Failed to start call:",o),this.endCall("failed"),o}}async answerCall(t){var r;if(!this.currentCall||this.currentCall.id!==t)throw new Error("No matching incoming call found");if(console.log("[Calling] Answering call:",t),!this.peerConnection){console.warn("[Calling] No peer connection present when answering");return}if(this.currentCall.status!=="ringing"){console.warn("[Calling] Ignoring answer: call status is",this.currentCall.status);return}const n=this.peerConnection.signalingState;if(n!=="have-remote-offer"&&n!=="have-local-pranswer"){console.warn("[Calling] Ignoring answer: invalid signalingState",n);return}try{await this.setupLocalMedia(this.currentCall.type),this.localStream&&this.peerConnection&&this.localStream.getTracks().forEach(o=>{this.peerConnection.addTrack(o,this.localStream)});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s),await this.sendCallSignal({type:"answer",callId:t,from:this.localUsername,to:this.currentCall.peer,data:{sdp:s,accepted:!0},timestamp:Date.now()}),this.currentCall.status="connecting",(r=this.onCallStateChangeCallback)==null||r.call(this,this.currentCall)}catch(s){console.error("[Calling] Failed to answer call:",s);return}}async declineCall(t){var n;!this.currentCall||this.currentCall.id!==t||(console.log("[Calling] Declining call:",t),await this.sendCallSignal({type:"decline-call",callId:t,from:this.localUsername,to:this.currentCall.peer,timestamp:Date.now()}),this.currentCall.status="declined",this.currentCall.endTime=Date.now(),(n=this.onCallStateChangeCallback)==null||n.call(this,this.currentCall),this.cleanup())}async endCall(t="user"){var n;this.currentCall&&(console.log("[Calling] Ending call:",this.currentCall.id,"reason:",t),this.currentCall.status!=="ended"&&await this.sendCallSignal({type:"end-call",callId:this.currentCall.id,from:this.localUsername,to:this.currentCall.peer,data:{reason:t},timestamp:Date.now()}),this.currentCall.status="ended",this.currentCall.endTime=Date.now(),this.currentCall.startTime&&(this.currentCall.duration=this.currentCall.endTime-this.currentCall.startTime),(n=this.onCallStateChangeCallback)==null||n.call(this,this.currentCall),this.cleanup())}toggleMute(){if(!this.localStream)return!1;const t=this.localStream.getAudioTracks()[0];return t?(t.enabled=!t.enabled,!t.enabled):!1}toggleVideo(){if(!this.localStream)return!1;const t=this.localStream.getVideoTracks()[0];return t?(t.enabled=!t.enabled,t.enabled):!1}async switchCamera(){var n;if(!this.localStream)return;const t=this.localStream.getVideoTracks()[0];if(t)try{const o=t.getConstraints().facingMode==="user"?"environment":"user";t.stop();const a=(await navigator.mediaDevices.getUserMedia({video:{facingMode:o},audio:!1})).getVideoTracks()[0];if(this.peerConnection){const u=this.peerConnection.getSenders().find(l=>l.track&&l.track.kind==="video");u&&await u.replaceTrack(a)}this.localStream.removeTrack(t),this.localStream.addTrack(a),(n=this.onLocalStreamCallback)==null||n.call(this,this.localStream)}catch(r){console.error("[Calling] Failed to switch camera:",r)}}async startScreenShare(t){var n,r,s,o;if(!this.peerConnection)throw new Error("No active call to share screen");if(((n=this.currentCall)==null?void 0:n.status)==="ringing")throw new Error("Cannot start screen sharing during ringing call. Please answer the call first.");if(this.isScreenSharing)throw new Error("Screen sharing is already active");if(this.isTogglingScreenShare)throw new Error("Screen sharing operation already in progress");this.isTogglingScreenShare=!0;try{const i=window.electronAPI||null,a=window.edgeApi||null,u=!!i||!!a,l=(i==null?void 0:i.getScreenSources)||(a==null?void 0:a.getScreenSources)||null;if(console.log("[Calling] Screen share - isElectron:",u),console.log("[Calling] electronAPI available:",!!i),console.log("[Calling] edgeApi available:",!!a),console.log("[Calling] getScreenSources available:",!!l),console.log("[Calling] electronAPI keys:",i?Object.keys(i):"none"),u&&!l){if(console.warn("[Calling] getScreenSources not found in electronAPI"),console.warn("[Calling] Available electronAPI functions:",Object.keys(i||{})),a!=null&&a.debugElectronAPI){const m=a.debugElectronAPI();console.log("[Calling] Debug info:",m)}const h=typeof l=="function",A=typeof(a==null?void 0:a.testFunction)=="function"||typeof(i==null?void 0:i.testFunction)=="function",f=i?Object.keys(i):[];if(console.log("[Calling] Renderer context API check:",{hasGetScreenSources:h,hasTestFunction:A,electronAPIKeys:f}),i!=null&&i.send){console.log("[Calling] Attempting manual IPC test...");try{i.send("test-screen-sources",{})}catch(m){console.log("[Calling] Manual IPC test failed:",m)}}console.warn("[Calling] This usually means the app needs to be restarted after permission changes"),console.log("[Calling] Attempting to use browser getDisplayMedia API as fallback");try{i!=null&&i.send&&console.log("[Calling] Attempting manual IPC call for screen sources")}catch(m){console.log("[Calling] Manual IPC attempt failed:",m)}}if(u&&l)try{console.log("[Calling] Using Electron desktopCapturer API");const h=await l();if(console.log("[Calling] Got screen sources:",(h==null?void 0:h.length)||0),!h||h.length===0)throw new Error("No screen sources available");let A;if(t){if(A=h.find(v=>v.id===t.id),!A)throw new Error(`Selected screen source "${t.name}" not found`)}else A=h.find(v=>v.id.startsWith("screen:"))||h[0];console.log("[Calling] Selected screen source:",A.name);const f=xt.getElectronVideoConstraints();f.mandatory||(f.mandatory={}),f.mandatory.chromeMediaSource="desktop",f.mandatory.chromeMediaSourceId=A.id,console.log("[Calling] Using Electron constraints:",JSON.stringify(f,null,2)),this.screenStream=await navigator.mediaDevices.getUserMedia({audio:!1,video:f});const m=this.screenStream.getVideoTracks()[0];if(m){const v=m.getSettings();console.log("[Calling] Actual Electron stream settings:",v),console.log("[Calling] Resolution verification: requested vs actual:",{requested:f.mandatory,actual:{width:v.width,height:v.height,frameRate:v.frameRate}})}}catch(h){console.warn("[Calling] Electron screen capture failed, falling back to browser API:",h);const A=xt.getVideoConstraints();console.log("[Calling] Using browser constraints (fallback):",JSON.stringify(A,null,2)),this.screenStream=await navigator.mediaDevices.getDisplayMedia({video:A,audio:!0});const f=this.screenStream.getVideoTracks()[0];if(f){const m=f.getSettings();console.log("[Calling] Actual browser stream settings (fallback):",m),console.log("[Calling] Resolution verification (fallback): requested vs actual:",{requested:A,actual:{width:m.width,height:m.height,frameRate:m.frameRate}})}}else{if(console.log("[Calling] Using browser getDisplayMedia API"),!((r=navigator.mediaDevices)!=null&&r.getDisplayMedia))throw new Error("Screen sharing not supported in this environment. Please restart the Electron app to enable screen sharing permissions.");console.log("[Calling] Attempting browser screen capture...");const h=xt.getVideoConstraints();console.log("[Calling] Using browser constraints:",JSON.stringify(h,null,2)),this.screenStream=await navigator.mediaDevices.getDisplayMedia({video:h,audio:!0});const A=this.screenStream.getVideoTracks()[0];if(A){const f=A.getSettings();console.log("[Calling] Actual browser stream settings:",f),console.log("[Calling] Resolution verification: requested vs actual:",{requested:h,actual:{width:f.width,height:f.height,frameRate:f.frameRate}})}}const d=this.screenStream.getVideoTracks()[0];d.onended=()=>{console.log("[Calling] Screen share track ended by user or system"),this.stopScreenShare()};const g=this.peerConnection.getSenders().find(h=>h.track&&h.track.kind==="video");if(g?(console.log("[Calling] Replacing existing video track with screen share"),await g.replaceTrack(d),console.log("[Calling] Triggering renegotiation for screen share"),await this.renegotiateConnection()):(console.log("[Calling] Adding screen share track to peer connection"),this.peerConnection.addTrack(d,this.screenStream),console.log("[Calling] Triggering renegotiation for new screen share track"),await this.renegotiateConnection()),this.isScreenSharing=!0,console.log("[Calling] Screen sharing started successfully"),this.localStream){const h=this.localStream.getAudioTracks(),A=new MediaStream([d,...h]);(s=this.onLocalStreamCallback)==null||s.call(this,A)}else(o=this.onLocalStreamCallback)==null||o.call(this,this.screenStream)}catch(i){throw console.error("[Calling] Failed to start screen sharing:",i),this.screenStream&&(this.screenStream.getTracks().forEach(a=>a.stop()),this.screenStream=null),this.isScreenSharing=!1,i}finally{this.isTogglingScreenShare=!1}}async stopScreenShare(){var s;if(!this.isScreenSharing&&!this.screenStream)return;if(this.isTogglingScreenShare){console.log("[Calling] Screen share stop already in progress, waiting...");let o=0;for(;this.isTogglingScreenShare&&o<50;)await new Promise(i=>setTimeout(i,100)),o++;return}this.isTogglingScreenShare=!0;const t=this.screenStream,n=this.peerConnection,r=this.localStream;try{if(t&&t.getTracks().forEach(o=>o.stop()),r&&n){const o=r.getVideoTracks()[0];if(o){const i=n.getSenders().find(a=>a.track&&a.track.kind==="video");if(i)try{console.log("[Calling] Replacing screen share track with camera"),await i.replaceTrack(o),console.log("[Calling] Triggering renegotiation to restore camera"),await this.renegotiateConnection()}catch(a){console.warn("[Calling] Failed to replace track during screen share stop:",a)}}else console.log("[Calling] No camera video track available to restore")}console.log("[Calling] Screen sharing stopped successfully"),r&&((s=this.onLocalStreamCallback)==null||s.call(this,r))}catch(o){console.error("[Calling] Failed to stop screen sharing:",o)}finally{if(this.screenStream){try{this.screenStream.getTracks().forEach(o=>{o.readyState!=="ended"&&o.stop()})}catch(o){console.warn("[Calling] Error stopping screen stream tracks:",o)}this.screenStream=null}this.isScreenSharing=!1,this.isTogglingScreenShare=!1,console.log("[Calling] Screen sharing cleanup completed")}}getScreenSharingStatus(){return this.isScreenSharing}async renegotiateConnection(){if(!(!this.peerConnection||!this.currentCall))try{if(this.isRenegotiating=!0,this.currentCall.direction==="outgoing"){console.log("[Calling] Creating new offer for renegotiation");const t=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(t),await this.sendCallSignal({type:"offer",callId:this.currentCall.id,from:this.localUsername,to:this.currentCall.peer,data:t,timestamp:Date.now(),isRenegotiation:!0}),setTimeout(()=>{this.isRenegotiating=!1},5e3)}}catch(t){console.error("[Calling] Failed to renegotiate connection:",t),this.isRenegotiating=!1}}async getAvailableScreenSources(){try{const t=window.electronAPI||null,n=window.edgeApi||null,r=(t==null?void 0:t.getScreenSources)||(n==null?void 0:n.getScreenSources)||null;if(!r)throw new Error("Screen source selection not available in this environment");const s=await r();if(!s||s.length===0)throw new Error("No screen sources available");return s.map(o=>({id:o.id,name:o.name,type:o.id.startsWith("screen:")?"screen":"window"}))}catch(t){throw console.error("[Calling] Failed to get screen sources:",t),t}}getCurrentCall(){return this.currentCall}getRemoteScreenStream(){return this.remoteScreenStream}getPeerConnection(){return this.peerConnection}async setupLocalMedia(t){var n,r;try{if(t==="video")try{const i=await navigator.mediaDevices.enumerateDevices(),a=i.filter(l=>l.kind==="videoinput"),u=i.filter(l=>l.kind==="audioinput");console.log("[Calling] Available devices:",{video:a.length,audio:u.length}),a.length===0&&(console.warn("[Calling] No video devices found, falling back to audio-only"),t="audio")}catch(i){console.warn("[Calling] Failed to enumerate devices, proceeding with original call type:",i)}let s=!1;if(t==="video"){const i={width:{ideal:1280,max:1920},height:{ideal:720,max:1080},frameRate:{ideal:30,max:60},facingMode:"user"};this.preferredCameraDeviceId&&(i.deviceId={exact:this.preferredCameraDeviceId}),s=i}const o={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3,channelCount:1},video:s};this.localStream=await navigator.mediaDevices.getUserMedia(o),console.log("[Calling] Local media stream obtained:",{audio:this.localStream.getAudioTracks().length>0,video:this.localStream.getVideoTracks().length>0}),(n=this.onLocalStreamCallback)==null||n.call(this,this.localStream)}catch(s){console.error("[Calling] Failed to get user media:",s);let o="Failed to access camera/microphone";if(s.name==="NotFoundError"?o=t==="video"?"No camera found. Please connect a camera or try audio-only mode.":"No microphone found. Please connect a microphone to make calls.":s.name==="NotAllowedError"?o="Camera/microphone access denied. Please click the camera/microphone icon in your browser's address bar and allow access.":s.name==="NotReadableError"?o="Camera/microphone is already in use. Please close other applications using your camera/microphone and try again.":s.name==="OverconstrainedError"?o="Camera/microphone settings are not supported. Trying with default settings...":s.name==="AbortError"&&(o="Camera/microphone access was interrupted. Please try again."),t==="video")try{console.warn("[Calling] Video device not found or inaccessible. Falling back to audio-only.");const i={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3,channelCount:1},video:!1};this.localStream=await navigator.mediaDevices.getUserMedia(i),console.log("[Calling] Local media stream obtained (audio-only fallback):",{audio:this.localStream.getAudioTracks().length>0,video:this.localStream.getVideoTracks().length>0}),(r=this.onLocalStreamCallback)==null||r.call(this,this.localStream);return}catch(i){console.error("[Calling] Audio-only fallback failed:",i),i.name==="NotFoundError"?o="No camera or microphone found. Please check your device connections.":i.name==="NotAllowedError"&&(o="Microphone access denied. Please allow permissions to make calls.")}throw new Error(o)}}clearRemoteScreenStream(){var t;this.remoteScreenStream&&(console.log("[Calling] Clearing remote screen stream"),this.remoteScreenStream=null,(t=this.onRemoteScreenStreamCallback)==null||t.call(this,null))}clearRemoteStream(){var t;this.remoteStream&&(console.log("[Calling] Clearing remote camera stream"),this.remoteStream=null,(t=this.onRemoteStreamCallback)==null||t.call(this,null))}isScreenShareTrack(t){const n=!t.facingMode,r=(t.width||0)>=1280||(t.height||0)>=720,s=t.width&&t.height?t.width/t.height>1.5:!1,o=n&&(r||s);return console.log("[Calling] Screen share detection:",{hasNoFacingMode:n,isLargeResolution:r,isWideAspectRatio:s,isLikelyScreenShare:o,settings:t}),o}async createPeerConnection(){this.peerConnection=new RTCPeerConnection(this.rtcConfig),this.peerConnection.ontrack=t=>{var s,o,i,a;console.log("[Calling] Received remote track:",t.track.kind,"from stream:",(s=t.streams[0])==null?void 0:s.id);let n;t.streams&&t.streams[0]?n=t.streams[0]:(n=new MediaStream([t.track]),console.log("[Calling] Created new MediaStream from track:",t.track.kind));const r=n.getVideoTracks()[0];if(r){const u=r.getSettings(),l=this.isScreenShareTrack(u);console.log("[Calling] Track analysis:",{isScreenShare:l,width:u.width,height:u.height,frameRate:u.frameRate,facingMode:u.facingMode}),l?(console.log("[Calling] Detected remote screen share stream"),this.remoteScreenStream&&this.clearRemoteScreenStream(),this.remoteScreenStream=n,r.onended=()=>{console.log("[Calling] Remote screen share track ended"),this.clearRemoteScreenStream()},(o=this.onRemoteScreenStreamCallback)==null||o.call(this,this.remoteScreenStream)):(console.log("[Calling] Detected remote camera stream"),this.remoteStream&&this.clearRemoteStream(),this.remoteStream=n,r.onended=()=>{console.log("[Calling] Remote camera track ended"),this.clearRemoteStream()},(i=this.onRemoteStreamCallback)==null||i.call(this,this.remoteStream))}else{console.log("[Calling] Audio-only or fallback stream"),this.remoteStream&&this.clearRemoteStream(),this.remoteStream=n;const u=n.getAudioTracks()[0];u&&(u.onended=()=>{console.log("[Calling] Remote audio track ended"),this.clearRemoteStream()}),(a=this.onRemoteStreamCallback)==null||a.call(this,this.remoteStream)}},this.peerConnection.onconnectionstatechange=()=>{var n,r;const t=(n=this.peerConnection)==null?void 0:n.connectionState;if(console.log("[Calling] Connection state changed:",t),this.currentCall){switch(t){case"connected":this.currentCall.status="connected",this.callTimeoutId&&(clearTimeout(this.callTimeoutId),this.callTimeoutId=null),this.iceConnectionFailureTimeoutId&&(clearTimeout(this.iceConnectionFailureTimeoutId),this.iceConnectionFailureTimeoutId=null),this.isRenegotiating&&(console.log("[Calling] ICE connection restored after renegotiation"),this.isRenegotiating=!1);break;case"disconnected":this.isRenegotiating?(console.log("[Calling] ICE disconnected during renegotiation, waiting for reconnection..."),this.iceConnectionFailureTimeoutId&&clearTimeout(this.iceConnectionFailureTimeoutId),this.iceConnectionFailureTimeoutId=setTimeout(()=>{var s,o;((s=this.currentCall)==null?void 0:s.status)!=="ended"&&((o=this.peerConnection)==null?void 0:o.iceConnectionState)==="disconnected"&&(console.log("[Calling] ICE connection failed to recover after renegotiation"),this.endCall("connection-lost"))},1e4)):this.currentCall.status!=="ended"&&this.endCall("connection-lost");break;case"failed":case"closed":this.currentCall.status!=="ended"&&this.endCall("connection-lost");break}(r=this.onCallStateChangeCallback)==null||r.call(this,this.currentCall)}},this.peerConnection.onicecandidate=async t=>{t.candidate&&this.currentCall&&await this.sendCallSignal({type:"ice-candidate",callId:this.currentCall.id,from:this.localUsername,to:this.currentCall.peer,data:t.candidate,timestamp:Date.now()})},this.peerConnection.oniceconnectionstatechange=()=>{var n;const t=(n=this.peerConnection)==null?void 0:n.iceConnectionState;console.log("[Calling] ICE connection state:",t)}}async sendCallSignal(t){var n,r;try{const s={messageId:this.generateCallId(),from:this.localUsername,to:t.to,content:JSON.stringify(t),timestamp:Date.now(),messageType:"signal-protocol",type:"call-signal"},o=await((r=(n=window.edgeApi)==null?void 0:n.encrypt)==null?void 0:r.call(n,{fromUsername:this.localUsername,toUsername:t.to,plaintext:JSON.stringify(s)}));if(!(o!=null&&o.ciphertextBase64))throw new Error("Failed to encrypt call signal");const i={type:we.ENCRYPTED_MESSAGE,to:t.to,encryptedPayload:{from:this.localUsername,to:t.to,content:o.ciphertextBase64,messageId:s.messageId,type:o.type,sessionId:o.sessionId}};Je.send(JSON.stringify(i)),console.log("[Calling] Encrypted call signal sent:",t.type)}catch(s){throw console.error("[Calling] Failed to send call signal:",s),s}}setupSignalHandlers(){window.addEventListener("call-signal",(t=>{const n=t.detail;this.handleCallSignal(n)}))}async handleCallSignal(t){console.log("[Calling] Received call signal:",t.type,t.callId);try{switch(t.type){case"offer":await this.handleCallOffer(t);break;case"answer":await this.handleCallAnswer(t);break;case"ice-candidate":await this.handleIceCandidate(t);break;case"decline-call":this.handleCallDeclined(t);break;case"end-call":this.handleCallEnded(t);break}}catch(n){console.error("[Calling] Error handling call signal:",n)}}async handleCallOffer(t){var o,i,a,u,l,d;if(this.currentCall){if(t.isRenegotiation&&t.callId===this.currentCall.id){if(console.log("[Calling] Handling renegotiation offer"),this.currentCall.status==="ringing"){console.log("[Calling] Ignoring renegotiation offer - call not yet answered by user");return}try{await((o=this.peerConnection)==null?void 0:o.setRemoteDescription(t.data));const g=await((i=this.peerConnection)==null?void 0:i.createAnswer());g&&(await((a=this.peerConnection)==null?void 0:a.setLocalDescription(g)),await this.sendCallSignal({type:"answer",callId:t.callId,from:this.localUsername,to:t.from,data:g,timestamp:Date.now(),isRenegotiation:!0}))}catch(g){console.error("[Calling] Failed to handle renegotiation offer:",g)}return}await this.sendCallSignal({type:"decline-call",callId:t.callId,from:this.localUsername,to:t.from,data:{reason:"busy"},timestamp:Date.now()});return}const n=t.data,s=((u=n.sdp)==null?void 0:u.includes("m=video"))||!1?"video":"audio";this.currentCall={id:t.callId,type:s,direction:"incoming",status:"ringing",peer:t.from,startTime:Date.now()},await this.createPeerConnection(),await this.peerConnection.setRemoteDescription(n),(l=this.onIncomingCallCallback)==null||l.call(this,this.currentCall),(d=this.onCallStateChangeCallback)==null||d.call(this,this.currentCall),this.callTimeoutId=setTimeout(()=>{var g,h;((g=this.currentCall)==null?void 0:g.status)==="ringing"&&(this.currentCall.status="missed",(h=this.onCallStateChangeCallback)==null||h.call(this,this.currentCall),this.cleanup())},this.RING_TIMEOUT)}async handleCallAnswer(t){var r,s;if(!this.currentCall||this.currentCall.id!==t.callId)return;if(t.isRenegotiation){if(console.log("[Calling] Handling renegotiation answer"),this.peerConnection)try{const o=t.data;await this.peerConnection.setRemoteDescription(o),console.log("[Calling] Renegotiation answer processed successfully"),this.isRenegotiating=!1}catch(o){console.error("[Calling] Failed to process renegotiation answer:",o)}return}const n=t.data;n.accepted&&this.peerConnection?(await this.peerConnection.setRemoteDescription(n.sdp),this.currentCall.status="connecting",(r=this.onCallStateChangeCallback)==null||r.call(this,this.currentCall)):(this.currentCall.status="declined",this.currentCall.endTime=Date.now(),(s=this.onCallStateChangeCallback)==null||s.call(this,this.currentCall),this.cleanup())}async handleIceCandidate(t){if(!this.currentCall||this.currentCall.id!==t.callId||!this.peerConnection)return;const n=t.data;await this.peerConnection.addIceCandidate(n)}handleCallDeclined(t){var n;!this.currentCall||this.currentCall.id!==t.callId||(this.currentCall.status="declined",this.currentCall.endTime=Date.now(),(n=this.onCallStateChangeCallback)==null||n.call(this,this.currentCall),this.cleanup())}handleCallEnded(t){var n;!this.currentCall||this.currentCall.id!==t.callId||(this.currentCall.status="ended",this.currentCall.endTime=Date.now(),this.currentCall.startTime&&(this.currentCall.duration=this.currentCall.endTime-this.currentCall.startTime),(n=this.onCallStateChangeCallback)==null||n.call(this,this.currentCall),this.cleanup())}generateCallId(){return`call_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}cleanup(){console.log("[Calling] Cleaning up call resources"),this.callTimeoutId&&(clearTimeout(this.callTimeoutId),this.callTimeoutId=null),this.iceConnectionFailureTimeoutId&&(clearTimeout(this.iceConnectionFailureTimeoutId),this.iceConnectionFailureTimeoutId=null),this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.screenStream&&(this.screenStream.getTracks().forEach(t=>t.stop()),this.screenStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.remoteStream=null,this.remoteScreenStream=null,this.isScreenSharing=!1,this.isTogglingScreenShare=!1,this.currentCall=null}onIncomingCall(t){this.onIncomingCallCallback=t}onCallStateChange(t){this.onCallStateChangeCallback=t}onRemoteStream(t){this.onRemoteStreamCallback=t}onRemoteScreenStream(t){this.onRemoteScreenStreamCallback=t}onLocalStream(t){this.onLocalStreamCallback=t}static async getVideoInputDevices(){try{return(await navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="videoinput")}catch(t){return console.warn("[Calling] enumerateDevices failed:",t),[]}}getPreferredCameraDeviceId(){return this.preferredCameraDeviceId}async setPreferredCameraDeviceId(t){var n;this.preferredCameraDeviceId=t||null;try{localStorage.setItem("preferred_camera_deviceId_v1",t||"")}catch{}if(this.peerConnection)try{const s=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t}},audio:!1})).getVideoTracks()[0];if(s){const o=this.peerConnection.getSenders().find(i=>i.track&&i.track.kind==="video");if(o&&await o.replaceTrack(s),!this.localStream)this.localStream=new MediaStream([s]);else{const i=this.localStream.getVideoTracks()[0];i&&(i.stop(),this.localStream.removeTrack(i)),this.localStream.addTrack(s)}(n=this.onLocalStreamCallback)==null||n.call(this,this.localStream)}}catch(r){console.error("[Calling] Failed to apply selected camera:",r)}}destroy(){console.log("[Calling] Destroying calling service"),this.currentCall&&this.endCall("shutdown"),this.cleanup()}}class AM{constructor(t){Z(this,"dbName");Z(this,"storeName","encryptedKeys");Z(this,"masterKey",null);Z(this,"username");Z(this,"memoryMode",!1);Z(this,"memory",{});this.username=t,this.dbName=`SecureKeyDB_${t}`}async initialize(t,n,r){if(this.masterKey)return;let s,o,i;n?(s=fe.Base64.base64ToUint8Array(n),o=crypto.getRandomValues(new Uint8Array(12))):(s=crypto.getRandomValues(new Uint8Array(16)),o=crypto.getRandomValues(new Uint8Array(12)));let a=null;try{a=await this.getKeyMetadata()}catch{this.memoryMode=!0,a=this.memory.metadata||null}const u=!a||a.argon2Params;if(u){r?i=r:a!=null&&a.argon2Params?i=a.argon2Params:i={version:19,algorithm:"argon2id",memoryCost:131072,timeCost:3,parallelism:1};const l=performance.now(),d=await ci.hash({pass:t,salt:s,time:i.timeCost,mem:i.memoryCost,parallelism:i.parallelism,type:2,version:i.version,hashLen:32}),g=performance.now()-l,h=100;if(g<h&&await new Promise(f=>setTimeout(f,h-g)),!d||!d.hash||d.hash.length!==32)throw new Error("CRITICAL: Invalid Argon2 key derivation result");const A=await crypto.subtle.importKey("raw",d.hash,{name:"AES-GCM"},!0,["encrypt","decrypt"]);this.masterKey=A}else{const l=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:"PBKDF2"},!1,["deriveKey"]),d=await crypto.subtle.deriveKey({name:"PBKDF2",salt:s,iterations:1e5,hash:"SHA-256"},l,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);this.masterKey=d}if(!n){await this.storeKeyMetadata({salt:fe.Base64.arrayBufferToBase64(s),iv:fe.Base64.arrayBufferToBase64(o),argon2Params:u?i:void 0});let l=null;try{l=await this.getKeyMetadata()}catch{l=this.memory.metadata||null}if(!l)throw new Error("Failed to store key metadata")}}async storeKeys(t){if(!this.masterKey)throw new Error("Key manager not initialized");const n=await this.getKeyMetadata();if(!n)throw new Error("Key metadata not found");fe.Base64.base64ToUint8Array(n.iv);let r;try{const f=await crypto.subtle.exportKey("raw",this.masterKey);r=new Uint8Array(f)}catch{throw new Error("Legacy key format detected. Please clear your data and re-register for enhanced security.")}const s=new TextEncoder().encode(JSON.stringify(Array.from(t.x25519.private))),{nonce:o,ciphertext:i}=fe.XChaCha20Poly1305.encryptWithNonce(r,s),a=new TextEncoder().encode(JSON.stringify(Array.from(t.kyber.secretKey))),{nonce:u,ciphertext:l}=fe.XChaCha20Poly1305.encryptWithNonce(r,a);let d,g,h;if(t.dilithium){const f=new TextEncoder().encode(JSON.stringify(Array.from(t.dilithium.secretKey))),{nonce:m,ciphertext:v}=fe.XChaCha20Poly1305.encryptWithNonce(r,f);d=fe.Base64.arrayBufferToBase64(v),g=fe.Base64.arrayBufferToBase64(m),h=t.dilithium.publicKeyBase64}const A={encryptedX25519Private:fe.Base64.arrayBufferToBase64(i),encryptedKyberSecret:fe.Base64.arrayBufferToBase64(l),encryptedDilithiumSecret:d,x25519Nonce:fe.Base64.arrayBufferToBase64(o),kyberNonce:fe.Base64.arrayBufferToBase64(u),dilithiumNonce:g,x25519PublicBase64:t.x25519.publicKeyBase64,kyberPublicBase64:t.kyber.publicKeyBase64,dilithiumPublicBase64:h,salt:n.salt,iv:n.iv,argon2Params:n.argon2Params};await this.storeEncryptedKeys(A)}async getKeys(){if(!this.masterKey)throw new Error("Key manager not initialized");const t=await this.getEncryptedKeys();if(!t)return null;let n;try{const l=await crypto.subtle.exportKey("raw",this.masterKey);n=new Uint8Array(l)}catch{throw new Error("Legacy key format detected. Please clear your data and re-register for enhanced security.")}const r=fe.Base64.base64ToUint8Array(t.encryptedX25519Private);let s;try{let l;if(t.x25519Nonce){const h=fe.Base64.base64ToUint8Array(t.x25519Nonce);l=fe.XChaCha20Poly1305.decryptWithNonce(n,h,r)}else{const h=fe.Base64.base64ToUint8Array(t.iv),A=await crypto.subtle.decrypt({name:"AES-GCM",iv:h},this.masterKey,r);l=new Uint8Array(A)}const d=new TextDecoder().decode(l),g=JSON.parse(d);if(!Array.isArray(g)||g.length!==32)throw new Error(`Invalid X25519 private key length: ${g==null?void 0:g.length}, expected 32`);s=new Uint8Array(g)}catch(l){throw console.error("X25519 decryption failed:",l),l}const o=fe.Base64.base64ToUint8Array(t.encryptedKyberSecret);let i;try{let l;if(t.kyberNonce){const h=fe.Base64.base64ToUint8Array(t.kyberNonce);l=fe.XChaCha20Poly1305.decryptWithNonce(n,h,o)}else{const h=fe.Base64.base64ToUint8Array(t.iv),A=await crypto.subtle.decrypt({name:"AES-GCM",iv:h},this.masterKey,o);l=new Uint8Array(A)}const d=new TextDecoder().decode(l),g=JSON.parse(d);if(!Array.isArray(g)||g.length!==2400)throw new Error(`Invalid Kyber secret key length: ${g==null?void 0:g.length}, expected 2400`);i=new Uint8Array(g)}catch(l){throw console.error("Kyber decryption failed:",l),l}let a;if(t.encryptedDilithiumSecret&&t.dilithiumPublicBase64)try{const l=fe.Base64.base64ToUint8Array(t.encryptedDilithiumSecret);let d;if(t.dilithiumNonce){const A=fe.Base64.base64ToUint8Array(t.dilithiumNonce);d=fe.XChaCha20Poly1305.decryptWithNonce(n,A,l)}else{const A=fe.Base64.base64ToUint8Array(t.iv),f=await crypto.subtle.decrypt({name:"AES-GCM",iv:A},this.masterKey,l);d=new Uint8Array(f)}const g=new TextDecoder().decode(d),h=JSON.parse(g);if(!Array.isArray(h))throw new Error("Invalid Dilithium secret key format");a={publicKeyBase64:t.dilithiumPublicBase64,secretKey:new Uint8Array(h)}}catch(l){console.error("Dilithium decryption failed:",l)}const u={x25519:{private:s,publicKeyBase64:t.x25519PublicBase64},kyber:{publicKeyBase64:t.kyberPublicBase64,secretKey:i}};return a&&(u.dilithium=a),u}async getPublicKeys(){const t=await this.getEncryptedKeys();if(!t)return null;const n={x25519PublicBase64:t.x25519PublicBase64,kyberPublicBase64:t.kyberPublicBase64};return t.dilithiumPublicBase64&&(n.dilithiumPublicBase64=t.dilithiumPublicBase64),n}clearKeys(){this.masterKey=null}async hasKeys(){return await this.getEncryptedKeys()!==null}async migrateToArgon2(t){const n=await this.getKeyMetadata();if(!n||n.argon2Params)return!1;const r=await this.getKeys();return r?(await this.storeKeys(r),!0):!1}async deleteKeys(){const t=await this.openDB();return new Promise((n,r)=>{const s=t.transaction(this.storeName,"readwrite"),o=s.objectStore(this.storeName),i=o.delete("metadata"),a=o.delete("keys");i.onsuccess=()=>{a.onsuccess=()=>{s.oncomplete=()=>n(),s.onerror=()=>r(s.error)},a.onerror=()=>r(a.error)},i.onerror=()=>r(i.error)})}async deleteDatabase(){return new Promise((t,n)=>{const r=indexedDB.deleteDatabase(this.dbName);r.onsuccess=()=>{t()},r.onerror=()=>{n(r.error)}})}async openDB(){return new Promise((t,n)=>{const r=indexedDB.open(this.dbName,1);r.onerror=()=>n(r.error),r.onsuccess=()=>t(r.result),r.onupgradeneeded=s=>{const o=s.target.result;o.objectStoreNames.contains(this.storeName)||o.createObjectStore(this.storeName,{keyPath:"username"})}})}async storeKeyMetadata(t){try{const n=await this.openDB();return new Promise((r,s)=>{const o=n.transaction(this.storeName,"readwrite"),a=o.objectStore(this.storeName).put({username:"metadata",type:"metadata",...t});a.onsuccess=()=>{o.oncomplete=()=>r(),o.onerror=()=>s(o.error)},a.onerror=()=>s(a.error)})}catch{this.memoryMode=!0,this.memory.metadata=t}}async getKeyMetadata(){try{const t=await this.openDB();return new Promise((n,r)=>{const i=t.transaction(this.storeName,"readonly").objectStore(this.storeName).get("metadata");i.onsuccess=()=>{const a=i.result;a&&a.type==="metadata"?n({salt:a.salt,iv:a.iv,argon2Params:a.argon2Params}):n(null)},i.onerror=()=>r(i.error)})}catch{return this.memoryMode=!0,this.memory.metadata||null}}async storeEncryptedKeys(t){try{const n=await this.openDB();return new Promise((r,s)=>{const o=n.transaction(this.storeName,"readwrite"),a=o.objectStore(this.storeName).put({username:"keys",type:"keys",...t});a.onsuccess=()=>{o.oncomplete=()=>r(),o.onerror=()=>s(o.error)},a.onerror=()=>s(a.error)})}catch{this.memoryMode=!0,this.memory.keys=t}}async getEncryptedKeys(){try{const t=await this.openDB();return new Promise((n,r)=>{const i=t.transaction(this.storeName,"readonly").objectStore(this.storeName).get("keys");i.onsuccess=()=>{const a=i.result;a&&a.type==="keys"?n({encryptedX25519Private:a.encryptedX25519Private,encryptedKyberSecret:a.encryptedKyberSecret,x25519PublicBase64:a.x25519PublicBase64,kyberPublicBase64:a.kyberPublicBase64,salt:a.salt,iv:a.iv}):n(null)},i.onerror=()=>r(i.error)})}catch{return this.memoryMode=!0,this.memory.keys||null}}}const pM={get(){try{const e=localStorage.getItem("securechat_server_pin_v1");if(!e||e.length>1e4)return null;const t=JSON.parse(e);return!t||typeof t!="object"||!t.x25519PublicBase64||!t.kyberPublicBase64||typeof t.x25519PublicBase64!="string"||typeof t.kyberPublicBase64!="string"?null:t}catch{return null}},set(e){try{if(!e||typeof e!="object"||!e.x25519PublicBase64||!e.kyberPublicBase64||typeof e.x25519PublicBase64!="string"||typeof e.kyberPublicBase64!="string")return;localStorage.setItem("securechat_server_pin_v1",JSON.stringify(e))}catch{}}},y2=()=>{const[e,t]=w.useState(""),[n,r]=w.useState(!1),[s,o]=w.useState(!1),[i,a]=w.useState(""),[u,l]=w.useState(""),[d,g]=w.useState(!1),[h,A]=w.useState(!1),f=w.useRef(""),m=w.useRef(""),v=w.useRef(null),[p,y]=w.useState(null),[x,E]=w.useState(null),C=w.useCallback(()=>{if(!x)return;const{newKeys:P}=x;try{pM.set(P)}catch{}y(P),E(null),l("")},[x]),I=w.useCallback(()=>{E(null),l("Server key changed. Trust not granted.")},[]),b=w.useRef(null),S=w.useRef(null),k=w.useRef(""),R=w.useCallback(async()=>{var P,j,U,L,z,$,ee,ce;if(console.log("[AUTH] Getting keys on demand"),!S.current)return console.error("[AUTH] Key manager not initialized"),null;if(!m.current)return console.error("[AUTH] Passphrase not available"),null;try{if(b.current)return console.debug("[AUTH] Using cached keys from memory"),b.current;let se=await S.current.getKeys().catch(()=>null);if(!se){console.log("[AUTH] Keys not available, initializing key manager");const be=await S.current.getKeyMetadata();be?await S.current.initialize(m.current,be.salt):await S.current.initialize(m.current),se=await S.current.getKeys()}return console.log("[AUTH] Keys retrieved successfully"),se?!se.x25519||!se.kyber?(console.error("[AUTH] Invalid key structure:",{hasX25519:!!se.x25519,hasKyber:!!se.kyber}),null):(console.debug("[AUTH] Keys validation passed",{x25519PublicLen:(P=se.x25519.publicKeyBase64)==null?void 0:P.length,kyberPublicLen:(j=se.kyber.publicKeyBase64)==null?void 0:j.length,x25519PrivateLen:(U=se.x25519.private)==null?void 0:U.byteLength,kyberSecretLen:(L=se.kyber.secretKey)==null?void 0:L.byteLength,hasDilithium:!!se.dilithium,dilithiumPublicLen:($=(z=se.dilithium)==null?void 0:z.publicKeyBase64)==null?void 0:$.length,dilithiumSecretLen:(ce=(ee=se.dilithium)==null?void 0:ee.secretKey)==null?void 0:ce.byteLength}),b.current=se,se):(console.error("[AUTH] Keys are null after retrieval"),null)}catch(se){return console.error("[AUTH] Error loading keys on demand:",se),null}},[]),B=w.useRef(""),[M,T]=w.useState(null),[F,H]=w.useState(!1),O=w.useCallback(async()=>{var P,j,U,L,z,$,ee,ce,se,be,Ce,Be,ye,Re,Qe,ne;console.log("[AUTH] Starting key initialization process"),o(!0),a("Initializing secure key manager...");try{const ue=m.current;if(!ue)throw console.error("[AUTH] Passphrase not available for key generation"),new Error("Passphrase not available for key generation");const le=k.current;if(!le)throw console.error("[AUTH] Username not available for key generation"),new Error("Username not available for key generation");if(console.log(`[AUTH] Initializing key manager for user: ${le}`),S.current||(S.current=new AM(le)),await S.current.hasKeys()){console.log("[AUTH] Loading existing keys"),a("Loading existing encryption keys..."),await S.current.initialize(ue);const ge=await S.current.getKeys();if(ge){console.log("[AUTH] Existing keys loaded successfully"),a("Verifying key integrity...");try{console.debug("[AUTH] Existing keys summary",{x25519PublicBase64:((P=ge.x25519.publicKeyBase64)==null?void 0:P.slice(0,28))+"...",kyberPublicBase64:((j=ge.kyber.publicKeyBase64)==null?void 0:j.slice(0,28))+"...",x25519PrivateLen:(U=ge.x25519.private)==null?void 0:U.length,kyberSecretLen:(L=ge.kyber.secretKey)==null?void 0:L.length,hasDilithium:!!ge.dilithium,dilithiumPublicBase64:(($=(z=ge.dilithium)==null?void 0:z.publicKeyBase64)==null?void 0:$.slice(0,28))+"...",dilithiumSecretLen:(ce=(ee=ge.dilithium)==null?void 0:ee.secretKey)==null?void 0:ce.length})}catch{}b.current=ge}}else{console.log("[AUTH] Generating new hybrid key pair"),a("Generating post-quantum encryption keys...");const ge=await fe.Hash.hashData(ue+le);a("Creating hybrid cryptographic key pair...");const Te=await fe.Hybrid.generateHybridKeyPairFromSeed(ge);a("Securing keys with passphrase..."),await S.current.initialize(ue),a("Storing encrypted keys securely..."),await S.current.storeKeys(Te),console.log("[AUTH] New keys generated and stored successfully");try{console.debug("[AUTH] New keys summary",{x25519PublicBase64:((se=Te.x25519.publicKeyBase64)==null?void 0:se.slice(0,28))+"...",kyberPublicBase64:((be=Te.kyber.publicKeyBase64)==null?void 0:be.slice(0,28))+"...",x25519PrivateLen:(Ce=Te.x25519.private)==null?void 0:Ce.length,kyberSecretLen:(Be=Te.kyber.secretKey)==null?void 0:Be.length,hasDilithium:!!Te.dilithium,dilithiumPublicBase64:((Re=(ye=Te.dilithium)==null?void 0:ye.publicKeyBase64)==null?void 0:Re.slice(0,28))+"...",dilithiumSecretLen:(ne=(Qe=Te.dilithium)==null?void 0:Qe.secretKey)==null?void 0:ne.length})}catch{}b.current=Te}}catch(ue){console.error("[AUTH] Error generating keys: ",ue),l("Key generation failed")}finally{o(!1),a("")}},[]),X=async(P,j,U,L)=>{console.log(`[AUTH] Starting ${P} process for user: ${j}`),l(""),A(P==="register"),a(P==="register"?"Creating new account...":"Authenticating account..."),k.current=j,t(j),B.current=U,f.current=L||"";try{if(!p)throw console.error("[AUTH] Server public keys not available"),new Error("Server public keys not available");Je.isConnectedToServer()||(console.log("[AUTH] Connecting to WebSocket server"),a("Connecting to secure server..."),await Je.connect()),L&&(console.log("[AUTH] Passphrase provided, initializing keys"),m.current=L,await O());const z={usernameSent:j,hybridPublicKeys:{x25519PublicBase64:"",kyberPublicBase64:""}};a("Encrypting user data with hybrid cryptography...");const $=await fe.Hybrid.encryptHybridPayload(z,p);a("Encrypting password with post-quantum security...");const ee=await fe.Hybrid.encryptHybridPayload({content:U},p),ce={type:P==="register"?we.ACCOUNT_SIGN_UP:we.ACCOUNT_SIGN_IN,userData:$,passwordData:ee};console.log(`[AUTH] Sending ${P} request to server`),a(`Sending secure ${P} request to server...`),Je.send(JSON.stringify(ce))}catch(z){console.error(`[AUTH] ${P} submission failed:`,z),a(""),l("Submission error: Authentication request failed")}},N=async P=>{if(console.log("[AUTH] Submitting server password"),l(""),a("Verifying server access credentials..."),!p){l("Server keys not available");return}try{if(!Je.isConnectedToServer())try{await Je.connect()}catch{a(""),l("Failed to connect to server: Connection error");return}a("Encrypting server password with hybrid cryptography...");const j=await fe.Hybrid.encryptHybridPayload({content:P},p);try{console.debug("[AUTH] Password payload encrypted (hybrid-v1)",{hasEphemeralX25519Public:!!j.ephemeralX25519Public,kyberCiphertextLen:(j.kyberCiphertext||"").length,encryptedMessageLen:(j.encryptedMessage||"").length})}catch{}const U={type:we.SERVER_LOGIN,passwordData:j};console.log("[AUTH] Sending server password to server"),a("Authenticating with server..."),Je.send(JSON.stringify(U)),k.current=e}catch(j){console.error("Login failed: ",j),l("Password encryption failed")}},D=async(P,j)=>{console.log(`[AUTH] Submitting passphrase for ${j} mode`),m.current=P,a("Processing secure passphrase...");try{await O();let U;if(j==="login"){if(!M)throw a("Retrieving secure hash parameters..."),new Error("Missing passphrase parameters");a("Computing secure passphrase hash with Argon2..."),U=await fe.Hash.hashDataUsingInfo(P,M)}else a("Generating secure passphrase hash..."),U=await fe.Hash.hashData(P);if(f.current=U,console.log("[AUTH] Sending passphrase hash to server"),a("Sending secure hash to server..."),Je.send(JSON.stringify({type:j==="register"?we.PASSPHRASE_HASH_NEW:we.PASSPHRASE_HASH,passphraseHash:U})),S.current){try{a("Generating Signal Protocol identity...");const L=await window.edgeApi.generateIdentity({username:k.current});a("Creating Signal Protocol prekeys...");const z=await window.edgeApi.generatePreKeys({username:k.current});a("Publishing Signal Protocol bundle...");const $=await window.edgeApi.getPreKeyBundle({username:k.current});Je.send(JSON.stringify({type:we.LIBSIGNAL_PUBLISH_BUNDLE,bundle:{...$}}))}catch(L){console.error("[AUTH] Failed to publish libsignal bundle:",L)}if(S.current&&p){const L=await S.current.getPublicKeys();if(L){const z={usernameSent:k.current,hybridPublicKeys:{x25519PublicBase64:L.x25519PublicBase64,kyberPublicBase64:L.kyberPublicBase64,dilithiumPublicBase64:L.dilithiumPublicBase64}},$=await fe.Hybrid.encryptHybridPayload(z,p);Je.send(JSON.stringify({type:we.HYBRID_KEYS_UPDATE,userData:$}))}}}}catch(U){console.error("Passphrase hashing failed:",U),l("Passphrase processing failed")}},V=P=>{console.log(`[AUTH] Authentication success for user: ${P}`),console.log(`[AUTH] Setting authentication flags - isLoggedIn: true, accountAuthenticated: ${d}`),a("Authentication successful! Logging in..."),t(P),console.log(`[AUTH] About to call setIsLoggedIn(true) - current value: ${n}`),r(!0),console.log("[AUTH] Called setIsLoggedIn(true)"),setTimeout(()=>a(""),1e3),l(""),S.current&&m.current&&S.current.initialize(m.current).catch(j=>{console.error("Failed to initialize key manager after auth success:",j)})},J=()=>{console.log(`[AUTH] Passphrase success - registration mode: ${h}`)},te=async(P,j="")=>{console.log("[AUTH] Logging out user");try{B.current="",f.current="",m.current="",v.current=null,b.current=null,typeof window<"u"&&window.gc&&window.gc()}catch(L){console.error("[AUTH] Failed to clear sensitive data from memory:",L)}if(P!=null&&P.current){try{console.log("[AUTH] Clearing SecureDB database"),await P.current.clearDatabase(),console.log("[AUTH] SecureDB database cleared successfully")}catch(L){console.error("[AUTH] Failed to clear SecureDB database:",L)}P.current=null}try{if(typeof window<"u"&&window.localStorage){const L=[],z=k.current||"";for(let $=0;$<window.localStorage.length;$++){const ee=window.localStorage.key($);ee&&z&&(ee.includes("session")&&ee.includes(z)||ee.includes("securechat")&&ee.includes(z)||ee.includes("keystore")&&ee.includes(z)||ee.includes("identity")&&ee.includes(z))&&L.push(ee)}L.forEach($=>{try{window.localStorage.removeItem($)}catch(ee){console.error(`[AUTH] Failed to remove localStorage key ${$}:`,ee)}}),console.log(`[AUTH] Cleared ${L.length} localStorage keys`)}}catch(L){console.error("[AUTH] Failed to clear session data:",L)}if(k.current)try{console.log("[AUTH] Clearing localStorage data for user"),[`securechat_sessions_${k.current}`,`securechat_pins_${k.current}`,`sentReadReceipts_${k.current}`,`keystore_${k.current}`,`identity_${k.current}`,`prekeys_${k.current}`,`signedprekey_${k.current}`,`registrationid_${k.current}`].forEach(z=>{try{localStorage.removeItem(z)}catch($){console.error(`[AUTH] Failed to remove key ${z}:`,$)}}),console.log("[AUTH] localStorage data cleared successfully")}catch(L){console.error("[AUTH] Failed to clear localStorage data:",L)}try{localStorage.removeItem("securechat_server_pin_v1")}catch(L){console.error("[AUTH] Failed to clear server pin:",L)}if(S.current)try{S.current.clearKeys(),await S.current.deleteDatabase(),S.current=null}catch(L){console.error("[AUTH] Failed to delete user database:",L)}const U=k.current;k.current="",r(!1),l(j),g(!1),A(!1),t(""),console.log(`[AUTH] Logout completed for user: ${U}`)},K=P=>async()=>await te(P.secureDBRef,"Logged out");return w.useEffect(()=>{const P=()=>{if(n&&k.current)try{localStorage.setItem("securechat_pending_cleanup",JSON.stringify({username:k.current,timestamp:Date.now()})),localStorage.removeItem(`securechat_sessions_${k.current}`),localStorage.removeItem(`securechat_pins_${k.current}`),localStorage.removeItem("securechat_server_pin_v1"),console.log("[AUTH] Emergency cleanup on page unload completed")}catch(j){console.error("[AUTH] Emergency cleanup failed:",j)}};return window.addEventListener("beforeunload",P),()=>{window.removeEventListener("beforeunload",P)}},[n]),{username:e,serverHybridPublic:p,setServerHybridPublic:y,serverTrustRequest:x,setServerTrustRequest:E,acceptServerTrust:C,rejectServerTrust:I,isLoggedIn:n,setIsLoggedIn:r,isGeneratingKeys:s,authStatus:i,loginError:u,accountAuthenticated:d,isRegistrationMode:h,loginUsernameRef:k,initializeKeys:O,handleAccountSubmit:X,handlePassphraseSubmit:D,handleServerPasswordSubmit:N,handleAuthSuccess:V,handlePassphraseSuccess:J,setAccountAuthenticated:g,passwordRef:B,setLoginError:l,passphraseHashParams:M,setPassphraseHashParams:T,passphrasePlaintextRef:m,passphraseRef:f,aesKeyRef:v,setShowPassphrasePrompt:H,showPassphrasePrompt:F,logout:te,useLogout:K,hybridKeysRef:b,keyManagerRef:S,getKeysOnDemand:R}},mM=e=>{const t=y2(),n=w.useRef(!1),r=w.useRef(""),s=w.useRef(null);e&&e.username&&e.isLoggedIn&&!s.current&&(console.log("[useCalling] Storing original auth context for user:",e.username),s.current=e),!s.current&&t.username&&t.isLoggedIn&&(console.log("[useCalling] Storing fallback auth context as original for user:",t.username),s.current=t);const o=s.current||e||t,{username:i,loginUsernameRef:a,isLoggedIn:u,accountAuthenticated:l}=o,[d,g]=w.useState(null),[h,A]=w.useState(null),[f,m]=w.useState(null),[v,p]=w.useState(null),[y,x]=w.useState(null),[E,C]=w.useState(!1),I=w.useRef(null),b=w.useRef(""),S=w.useRef(!1),k=w.useRef(!1);i&&i.trim()!==""&&!b.current&&(b.current=i),u&&!S.current&&(S.current=u),l&&!k.current&&(k.current=l);const R=b.current||i,B=S.current||u,M=k.current||l;w.useEffect(()=>{if(I.current){console.log("[useCalling] Service exists - preserving service regardless of auth state");return}const P=R||(a==null?void 0:a.current),j=P&&P.trim()!=="",U=B&&M;if(console.log("[useCalling] useEffect triggered:",{currentUsername:P,hasValidUsername:j,isLoggedIn:u,accountAuthenticated:l,isAuthenticated:U,stableUsername:R,stableIsLoggedIn:B,stableAccountAuthenticated:M,hasExistingService:!!I.current,hasBeenAuthenticated:n.current,authenticatedUsername:r.current,usingOriginalContext:!!s.current,passedAuthContext:!!e,fallbackAuthContext:!!t}),n.current&&(!j||!U)){console.log("[useCalling] Ignoring authentication reset - service already initialized for:",r.current);return}if(!u&&!l&&!n.current&&!I.current){console.log("[useCalling] No service to clean up on logout");return}if(!(!U||!j)&&j&&U&&!I.current){console.log("[useCalling] All conditions met - Initializing calling service for user:",P);const L=new m2(P);I.current=L,L.onIncomingCall(z=>{console.log("[useCalling] Incoming call:",z),A({...z})}),L.onCallStateChange(z=>{console.log("[useCalling] Call state changed:",z.status);try{const $={peer:z.peer,status:z.status,type:z.type,direction:z.direction,startTime:z.startTime,endTime:z.endTime};window.dispatchEvent(new CustomEvent("ui-call-status",{detail:$}))}catch{}if(z.status==="ended"||z.status==="declined"||z.status==="missed"){if(z.status==="ended")try{const $=z.startTime&&z.endTime?z.endTime-z.startTime:0,ee={peer:z.peer,type:z.type,startTime:z.startTime,endTime:z.endTime,durationMs:$};window.dispatchEvent(new CustomEvent("ui-call-ended",{detail:ee}))}catch{}A(null),m(null),p(null),x(null)}else A({...z})}),L.onLocalStream(z=>{console.log("[useCalling] Local stream received"),m(z)}),L.onRemoteStream(z=>{console.log("[useCalling] Remote stream received"),p(z)}),L.onRemoteScreenStream(z=>{console.log("[useCalling] Remote screen stream received:",!!z),x(z)});try{L.initialize(),console.log("[useCalling] Calling service initialized successfully"),n.current=!0,r.current=P,g(L),C(!0),console.log("[useCalling] State updated - service available for calls")}catch(z){console.error("[useCalling] Failed to initialize calling service:",z),I.current=null,g(null),C(!1),n.current=!1,r.current=""}}},[R,B,M]);const T=w.useCallback(async(P,j="audio")=>{if(console.log("[useCalling] startCall called:",{targetUser:P,callType:j,hasServiceRef:!!I.current,hasServiceState:!!d,isInitializedState:E,currentAuthState:{username:i,loginUsernameRef:a==null?void 0:a.current,isLoggedIn:u,accountAuthenticated:l,hasBeenAuthenticated:n.current,authenticatedUsername:r.current,usingOriginalContext:!!s.current}}),!I.current)throw console.log("[useCalling] No calling service available - detailed state:",{serviceRef:I.current,callingService:d,isInitialized:E,hasBeenAuthenticatedRef:n.current,authenticatedUsernameRef:r.current,originalAuthContextRef:!!s.current}),new Error("Calling service not available");try{const U=await I.current.startCall(P,j);return console.log("[useCalling] Call started:",U),U}catch(U){throw console.error("[useCalling] Failed to start call:",U),U}},[d,E]),F=w.useCallback(async P=>{if(!d)throw new Error("Calling service not available");try{await d.answerCall(P),console.log("[useCalling] Call answered:",P)}catch(j){throw console.error("[useCalling] Failed to answer call:",j),j}},[d]),H=w.useCallback(async P=>{if(!d)throw new Error("Calling service not available");try{await d.declineCall(P),console.log("[useCalling] Call declined:",P)}catch(j){throw console.error("[useCalling] Failed to decline call:",j),j}},[d]),O=w.useCallback(async()=>{if(!d)throw new Error("Calling service not available");try{await d.endCall(),console.log("[useCalling] Call ended")}catch(P){throw console.error("[useCalling] Failed to end call:",P),P}},[d]),X=w.useCallback(()=>{if(!d)return!1;const P=d.toggleMute();return console.log("[useCalling] Mute toggled:",P),P},[d]),N=w.useCallback(()=>{if(!d)return!1;const P=d.toggleVideo();return console.log("[useCalling] Video toggled:",P),P},[d]),D=w.useCallback(async()=>{if(d)try{await d.switchCamera(),console.log("[useCalling] Camera switched")}catch(P){console.error("[useCalling] Failed to switch camera:",P)}},[d]),V=w.useCallback(async P=>{if(!d)throw new Error("Calling service not available");try{await d.startScreenShare(P),console.log("[useCalling] Screen sharing started")}catch(j){throw console.error("[useCalling] Failed to start screen sharing:",j),j}},[d]),J=w.useCallback(async()=>{if(!d)throw new Error("Calling service not available");try{return await d.getAvailableScreenSources()}catch(P){throw console.error("[useCalling] Failed to get screen sources:",P),P}},[d]),te=w.useCallback(async()=>{if(d)try{await d.stopScreenShare(),console.log("[useCalling] Screen sharing stopped")}catch(P){console.error("[useCalling] Failed to stop screen sharing:",P)}},[d]),K=(d==null?void 0:d.getScreenSharingStatus())||!1;return{currentCall:h,localStream:f,remoteStream:v,remoteScreenStream:y,peerConnection:(d==null?void 0:d.getPeerConnection())||null,isInitialized:E,isScreenSharing:K,startCall:T,answerCall:F,declineCall:H,endCall:O,toggleMute:X,toggleVideo:N,switchCamera:D,startScreenShare:V,stopScreenShare:te,getAvailableScreenSources:J,callingService:d}},yM=({isOpen:e,onClose:t,onSelect:n,onCancel:r,onGetAvailableScreenSources:s})=>{const[o,i]=w.useState([]),[a,u]=w.useState(!1),[l,d]=w.useState(null),g=w.useRef(!1);w.useEffect(()=>(g.current=!0,e&&h(),()=>{g.current=!1}),[e]);const h=async()=>{if(g.current){u(!0),d(null);try{if(s){console.log("[ScreenSourceSelector] Loading screen sources...");const m=await s();if(!m||m.length===0)throw new Error("No screen sources available");const v=m.map(p=>({id:p.id,name:p.name,thumbnail:void 0,type:p.type}));g.current&&(i(v),console.log("[ScreenSourceSelector] Loaded sources:",v.length))}else{const m=window.electronAPI,v=window.edgeApi,p=(typeof(m==null?void 0:m.getScreenSources)=="function"?m.getScreenSources:null)||(typeof(v==null?void 0:v.getScreenSources)=="function"?v.getScreenSources:null);if(p){console.log("[ScreenSourceSelector] Loading screen sources via fallback...");const y=await p();if(!y||y.length===0)throw new Error("No screen sources available");const x=y.map(E=>{let C;if(E.thumbnail&&typeof E.thumbnail.toDataURL=="function")try{C=E.thumbnail.toDataURL()}catch(I){console.warn("[ScreenSourceSelector] Failed to convert thumbnail for source:",E.name,I),C=void 0}return{id:E.id,name:E.name,thumbnail:C,type:E.id.startsWith("screen:")?"screen":"window"}});g.current&&(i(x),console.log("[ScreenSourceSelector] Loaded sources:",x.length))}else throw new Error("Screen source selection not available in this environment")}}catch(m){console.error("[ScreenSourceSelector] Failed to load screen sources:",m),g.current&&d(m instanceof Error?m.message:"Failed to load screen sources")}finally{g.current&&u(!1)}}},A=m=>{console.log("[ScreenSourceSelector] Selected source:",m.name),n(m),t()},f=()=>{r(),t()};return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Choose what to share"}),c.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(f_,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"p-4",children:[a&&c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading screen sources..."})]}),l&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-red-600 mb-4",children:l}),c.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Try Again"})]}),!a&&!l&&o.length>0&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:o.map(m=>c.jsxs("div",{onClick:()=>A(m),className:"border rounded-lg p-3 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition-colors",children:[c.jsx("div",{className:"aspect-video bg-gray-100 rounded mb-2 flex items-center justify-center overflow-hidden",children:m.thumbnail?c.jsx("img",{src:m.thumbnail,alt:m.name,className:"w-full h-full object-cover"}):c.jsx("div",{className:"text-gray-400",children:m.type==="screen"?c.jsx(Ni,{className:"w-8 h-8"}):c.jsx(ku,{className:"w-8 h-8"})})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[m.type==="screen"?c.jsx(Ni,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}):c.jsx(ku,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:m.name})]}),c.jsx("div",{className:"text-xs text-gray-500 mt-1 capitalize",children:m.type==="screen"?"Entire Screen":"Application Window"})]},m.id))})]}),c.jsx("div",{className:"flex justify-end space-x-3 p-4 border-t bg-gray-50",children:c.jsx("button",{onClick:f,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded hover:bg-gray-100 transition-colors",children:"Cancel"})})]})}):null};function w2(){const[e,t]=w.useState(xt.getSettings());w.useEffect(()=>xt.subscribe(u=>{console.log("[ScreenSharingSettings UI] Settings updated:",u),t(u)}),[]);const n=a=>{const u=yt.find(l=>l.id===a);u&&(console.log("[ScreenSharingSettings UI] Resolution changing to:",u.name),xt.setResolution(u))},r=a=>{const u=Number.parseInt(a,10);Number.isFinite(u)&&to.includes(u)&&(console.log("[ScreenSharingSettings UI] Frame rate changing to:",u,"FPS"),xt.setFrameRate(u))},s=a=>{console.log("[ScreenSharingSettings UI] Quality changing to:",a),xt.setQuality(a)},o=()=>{console.log("[ScreenSharingSettings UI] Resetting to defaults"),xt.resetToDefaults()},i=a=>{switch(a){case"low":return"Lower bandwidth usage, suitable for slow connections";case"medium":return"Balanced quality and bandwidth usage";case"high":return"Best quality, higher bandwidth usage";default:return""}};return c.jsxs(Zt,{children:[c.jsxs(hn,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ni,{className:"h-5 w-5"}),c.jsx(gn,{children:"Screen Sharing"})]}),c.jsx(Dn,{children:"Configure resolution and framerate for screen sharing"})]}),c.jsxs(An,{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"resolution-select",children:"Resolution"}),c.jsx("select",{id:"resolution-select",value:e.resolution.id,onChange:a=>n(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:yt.map(a=>c.jsxs("option",{value:a.id,children:[a.name,!a.isNative&&` (${a.width}  ${a.height})`]},a.id))}),c.jsx("div",{className:"text-sm text-muted-foreground",children:e.resolution.isNative?"Uses your display's native resolution for best quality":`Fixed resolution: ${e.resolution.width}  ${e.resolution.height}`})]}),c.jsx(Ei,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"framerate-select",children:"Frame Rate"}),c.jsx("select",{id:"framerate-select",value:e.frameRate.toString(),onChange:a=>r(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:to.map(a=>c.jsxs("option",{value:a.toString(),children:[a," FPS"]},a))}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Higher frame rates provide smoother motion but use more bandwidth"})]}),c.jsx(Ei,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{htmlFor:"quality-select",children:"Quality"}),c.jsxs("select",{id:"quality-select",value:e.quality,onChange:a=>s(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"low",children:"Low"}),c.jsx("option",{value:"medium",children:"Medium"}),c.jsx("option",{value:"high",children:"High"})]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:i(e.quality)})]}),c.jsx(Ei,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{children:"Current Settings"}),c.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsxs("div",{children:["Resolution: ",e.resolution.name]}),c.jsxs("div",{children:["Frame Rate: ",e.frameRate," FPS"]}),c.jsxs("div",{children:["Quality: ",e.quality.charAt(0).toUpperCase()+e.quality.slice(1)]})]})]}),c.jsx("div",{className:"flex gap-2 pt-4",children:c.jsx(he,{onClick:o,variant:"outline",size:"sm",children:"Reset to Defaults"})})]})]})}function wM({peerConnection:e,remoteStream:t,isVisible:n=!0}){const[r,s]=w.useState(null),[o,i]=w.useState(!1),a=w.useRef(null),u=w.useRef(null),l=()=>{if(!e||o)return;console.log("[VideoQualityMonitor] Starting quality monitoring..."),i(!0);const v=async()=>{try{const p=await e.getStats(),y=g(p);y&&(s(y),console.log("[VideoQualityMonitor] Current video quality:",y))}catch(p){console.error("[VideoQualityMonitor] Failed to get stats:",p)}};a.current=setInterval(v,1e3),v()},d=()=>{console.log("[VideoQualityMonitor] Stopping quality monitoring..."),i(!1),a.current&&(clearInterval(a.current),a.current=null),s(null),u.current=null},g=v=>{let p=null,y=null;if(v.forEach(E=>{E.type==="inbound-rtp"&&E.kind==="video"?p=E:E.type==="track"&&E.kind==="video"&&!E.remoteSource&&(y=E)}),!p)return null;let x=0;if(u.current){const E=Array.from(u.current.values()).find(C=>C.type==="inbound-rtp"&&C.kind==="video");if(E){const C=(p.timestamp-E.timestamp)/1e3,I=p.bytesReceived-E.bytesReceived;x=C>0?Math.round(I*8/C):0}}return u.current=v,{resolution:{width:(y==null?void 0:y.frameWidth)||p.frameWidth||0,height:(y==null?void 0:y.frameHeight)||p.frameHeight||0},frameRate:(y==null?void 0:y.framesPerSecond)||p.framesPerSecond||0,bitrate:x,packetsLost:p.packetsLost||0,packetsReceived:p.packetsReceived||0,bytesReceived:p.bytesReceived||0,timestamp:p.timestamp||Date.now(),codecName:p.codecId?"Unknown":void 0,jitter:p.jitter}};if(w.useEffect(()=>(e&&t&&!o?l():(!e||!t)&&o&&d(),()=>{d()}),[e,t]),w.useEffect(()=>()=>d(),[]),!n||!r)return null;const h=v=>v>=1e6?`${(v/1e6).toFixed(1)} Mbps`:v>=1e3?`${(v/1e3).toFixed(0)} Kbps`:`${v} bps`,A=v=>v>=1e6?`${(v/1e6).toFixed(1)} MB`:v>=1e3?`${(v/1e3).toFixed(0)} KB`:`${v} B`,m=r.frameRate>=25&&r.bitrate>=1e6?{color:"text-green-600",label:"Excellent"}:r.frameRate>=15&&r.bitrate>=5e5?{color:"text-yellow-600",label:"Good"}:r.frameRate>=10&&r.bitrate>=2e5?{color:"text-orange-600",label:"Fair"}:{color:"text-red-600",label:"Poor"};return c.jsxs(Zt,{className:"w-full",children:[c.jsxs(hn,{className:"pb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Yx,{className:"h-4 w-4"}),c.jsx(gn,{className:"text-sm",children:"Received Video Quality"}),c.jsx("div",{className:`ml-auto text-xs font-medium ${m.color}`,children:m.label})]}),c.jsx(Dn,{className:"text-xs",children:"Real-time stats from the viewer's perspective"})]}),c.jsxs(An,{className:"pt-0",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Resolution:"}),c.jsxs("span",{className:"font-mono font-medium",children:[r.resolution.width,"",r.resolution.height]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Frame Rate:"}),c.jsxs("span",{className:"font-mono font-medium",children:[r.frameRate.toFixed(1)," FPS"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Bitrate:"}),c.jsx("span",{className:"font-mono font-medium",children:h(r.bitrate)})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Packets Lost:"}),c.jsx("span",{className:`font-mono font-medium ${r.packetsLost>0?"text-red-600":"text-green-600"}`,children:r.packetsLost})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Data Received:"}),c.jsx("span",{className:"font-mono font-medium",children:A(r.bytesReceived)})]}),r.jitter!==void 0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Jitter:"}),c.jsxs("span",{className:"font-mono font-medium",children:[(r.jitter*1e3).toFixed(1),"ms"]})]})]})]}),c.jsx("div",{className:"mt-3 pt-3 border-t",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx(YT,{className:"h-3 w-3"}),c.jsx("span",{className:"text-gray-600",children:"Quality:"}),c.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${m.label==="Excellent"?"bg-green-500 w-full":m.label==="Good"?"bg-yellow-500 w-3/4":m.label==="Fair"?"bg-orange-500 w-1/2":"bg-red-500 w-1/4"}`})}),c.jsx("span",{className:`font-medium ${m.color}`,children:m.label})]})})]})]})}const vM=({call:e,localStream:t,remoteStream:n,remoteScreenStream:r,peerConnection:s,onAnswer:o,onDecline:i,onEndCall:a,onToggleMute:u,onToggleVideo:l,onSwitchCamera:d,onStartScreenShare:g,onStopScreenShare:h,onGetAvailableScreenSources:A,isScreenSharing:f=!1})=>{const[m,v]=w.useState(!1),[p,y]=w.useState(!0),[x,E]=w.useState(0),[C,I]=w.useState(!1),[b,S]=w.useState(0),[k,R]=w.useState(!1),[B,M]=w.useState(!1),T=w.useRef(null),F=w.useRef(null),H=w.useRef(null),[O,X]=w.useState([]),[N,D]=w.useState(!1),[V,J]=w.useState(null);w.useEffect(()=>{let le=!0;const Me=async()=>{const Te=await m2.getVideoInputDevices();if(le){X(Te);try{const Ye=localStorage.getItem("preferred_camera_deviceId_v1");Ye&&Ye.length<256&&(Te.some(bt=>bt.deviceId===Ye)?J(Ye):(J(null),localStorage.removeItem("preferred_camera_deviceId_v1")))}catch{}}};Me();const ge=()=>{le&&Me()};return navigator.mediaDevices.addEventListener("devicechange",ge),()=>{le=!1,navigator.mediaDevices.removeEventListener("devicechange",ge)}},[]);const te=async le=>{try{localStorage.setItem("preferred_camera_deviceId_v1",le||"")}catch{}J(le||null),D(!1)};w.useEffect(()=>{if(!t){if(H.current&&cancelAnimationFrame(H.current),T.current)try{T.current.close()}catch{}T.current=null,F.current=null,S(0);return}if(t.getAudioTracks().length===0){console.log("[CallModal] No audio tracks in stream, skipping mic analyser setup"),S(0);return}try{const Me=window.AudioContext||window.webkitAudioContext,ge=new Me,Te=ge.createAnalyser();Te.fftSize=1024,ge.createMediaStreamSource(t).connect(Te),T.current=ge,F.current=Te;const $t=new Uint8Array(Te.frequencyBinCount),bt=()=>{Te.getByteTimeDomainData($t);let kr=128,or=128;for(let Vt=0;Vt<$t.length;Vt++){const It=$t[Vt];It<kr&&(kr=It),It>or&&(or=It)}const _e=Math.min(1,(or-kr)/128);S(Vt=>Vt*.8+_e*.2),H.current=requestAnimationFrame(bt)};H.current=requestAnimationFrame(bt)}catch(Me){console.warn("[CallModal] Failed to initialize mic analyser",Me),S(0)}return()=>{if(H.current&&cancelAnimationFrame(H.current),T.current)try{T.current.close()}catch{}T.current=null,F.current=null}},[t]);const K=async()=>{if(!C){I(!0);try{await o()}finally{setTimeout(()=>I(!1),300)}}},P=async()=>{if(!C){I(!0);try{await i()}finally{setTimeout(()=>I(!1),300)}}},j=async()=>{if(!C){I(!0);try{await Promise.resolve(a())}finally{setTimeout(()=>I(!1),300)}}},U=w.useRef(null),L=w.useRef(null),z=w.useRef(null),$=w.useRef(null);w.useEffect(()=>{U.current&&t&&(U.current.srcObject=t)},[t]),w.useEffect(()=>{L.current&&n&&(L.current.srcObject=n)},[n]),w.useEffect(()=>{z.current&&r&&(z.current.srcObject=r,console.log("[CallModal] Remote screen stream connected to video element"))},[r]),w.useEffect(()=>((e==null?void 0:e.status)==="connected"?$.current=setInterval(()=>{e.startTime&&E(Math.floor((Date.now()-e.startTime)/1e3))},1e3):($.current&&(clearInterval($.current),$.current=null),E(0)),()=>{$.current&&clearInterval($.current)}),[e==null?void 0:e.status,e==null?void 0:e.startTime]);const ee=()=>{const le=u();v(le)},ce=()=>{const le=l();y(le)},se=async()=>{if(!C)if(f){I(!0);try{await(h==null?void 0:h())}catch(le){console.error("Screen sharing error:",le),alert("Failed to stop screen sharing: "+le.message)}finally{I(!1)}}else if(A)R(!0);else{I(!0);try{await(g==null?void 0:g())}catch(le){console.error("Screen sharing error:",le),alert("Failed to start screen sharing: "+le.message)}finally{I(!1)}}},be=async le=>{I(!0);try{await(g==null?void 0:g(le))}catch(Me){console.error("Screen sharing error:",Me),alert("Failed to start screen sharing: "+Me.message)}finally{I(!1),R(!1)}},Ce=()=>{R(!1)},Be=le=>{const Me=Math.floor(le/60),ge=le%60;return`${Me.toString().padStart(2,"0")}:${ge.toString().padStart(2,"0")}`};if(!e)return null;const ye=e.type==="video",Re=e.direction==="incoming",Qe=e.status==="connected",ne=e.status==="ringing",ue=e.status==="connecting";return c.jsxs("div",{className:"fixed bottom-4 right-4 z-50 w-[380px] sm:w-[420px]",children:[c.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-2xl border border-gray-700 overflow-hidden flex flex-col",children:[c.jsx("div",{className:"p-5 border-b border-gray-700 bg-gradient-to-r from-gray-900 to-gray-800",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-white",children:Re?"Incoming Call":"Calling"}),c.jsx("p",{className:"text-gray-300",children:e.peer}),Qe&&c.jsx("p",{className:"text-sm text-green-400",children:Be(x)}),ue&&c.jsx("p",{className:"text-sm text-blue-400",children:"Connecting..."}),ne&&c.jsx("p",{className:"text-sm text-yellow-400",children:Re?"Ringing...":"Calling..."}),c.jsxs("div",{className:"mt-2",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-300 mb-1",children:c.jsxs("span",{className:"inline-flex items-center gap-1",children:[m?c.jsx(w0,{className:"w-3.5 h-3.5 text-red-400"}):c.jsx(Iu,{className:"w-3.5 h-3.5 text-emerald-400"}),c.jsx("span",{children:"Mic"})]})}),c.jsx("div",{className:"h-2 w-40 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full ${m?"bg-red-500":"bg-emerald-400"}`,style:{width:`${Math.min(100,Math.round(b*100))}%`}})})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ye?"bg-blue-600 text-white":"bg-green-600 text-white"}`,children:ye?"Video":"Audio"}),c.jsx("span",{className:`w-3 h-3 rounded-full ${Qe?"bg-green-500":ne?"bg-yellow-500 animate-pulse":ue?"bg-blue-500 animate-pulse":"bg-red-500"}`})]})]})}),ye&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"relative bg-black h-56",children:[c.jsx("video",{ref:r?z:L,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-3 right-3 w-28 h-20 bg-gray-800 rounded-md overflow-hidden border border-gray-600 shadow-md",children:c.jsx("video",{ref:U,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),r&&c.jsx("div",{className:"absolute top-3 left-3 bg-blue-600 text-white px-2 py-1 rounded text-xs font-medium",children:"Screen Share"}),!n&&!r&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-gray-400",children:[c.jsx("div",{className:"w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-2xl font-bold",children:e.peer.charAt(0).toUpperCase()})}),c.jsx("p",{children:"Waiting for video..."})]})})]}),r&&n&&c.jsxs("div",{className:"relative bg-black h-32 rounded-md overflow-hidden",children:[c.jsx("video",{ref:L,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-2 left-2 bg-gray-800 text-white px-2 py-1 rounded text-xs",children:"Camera"})]}),(n||r)&&c.jsx(wM,{peerConnection:s||null,remoteStream:r||n,isVisible:!0})]}),!ye&&c.jsx("div",{className:"py-6 flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx("div",{className:"w-32 h-32 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx("span",{className:"text-4xl font-bold",children:e.peer.charAt(0).toUpperCase()})}),c.jsx("h3",{className:"text-2xl font-semibold mb-2",children:e.peer}),Qe&&c.jsx("p",{className:"text-lg text-green-400",children:Be(x)}),ue&&c.jsx("p",{className:"text-lg text-blue-400",children:"Connecting..."}),ne&&c.jsx("p",{className:"text-lg text-yellow-400",children:Re?"Incoming call...":"Calling..."})]})}),c.jsxs("div",{className:"p-6 border-t border-gray-700",children:[Re&&ne&&c.jsxs("div",{className:"flex justify-center space-x-8",children:[c.jsx("button",{onClick:P,disabled:C,className:"w-16 h-16 bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:c.jsx(v0,{className:"w-8 h-8 text-white"})}),c.jsx("button",{onClick:K,disabled:C,className:"w-16 h-16 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:c.jsx(Jx,{className:"w-8 h-8 text-white"})})]}),(Qe||ue||!Re&&ne)&&c.jsxs("div",{className:"flex justify-center items-center space-x-6",children:[c.jsx("button",{onClick:ee,className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${m?"bg-red-600 hover:bg-red-700":"bg-gray-600 hover:bg-gray-700"}`,children:m?c.jsx(w0,{className:"w-6 h-6 text-white"}):c.jsx(Iu,{className:"w-6 h-6 text-white"})}),ye&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"relative inline-flex items-center",children:[c.jsx("button",{onClick:ce,disabled:O.length===0,title:O.length===0?"No camera detected":"",className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${O.length===0?"bg-gray-500 opacity-60 cursor-not-allowed":p?"bg-gray-600 hover:bg-gray-700":"bg-red-600 hover:bg-red-700"}`,children:p?c.jsx(Zx,{className:"w-6 h-6 text-white"}):c.jsx(u_,{className:"w-6 h-6 text-white"})}),c.jsx("button",{type:"button",onClick:d,disabled:O.length<=1,"aria-label":O.length<=1?"No other cameras available":"Switch camera","aria-disabled":O.length<=1,title:O.length<=1?"No other cameras available":"Switch camera","data-testid":"switch-camera-button",className:`ml-1 w-8 h-8 rounded-full flex items-center justify-center transition-colors ${O.length<=1?"bg-gray-500 opacity-60 cursor-not-allowed":"bg-gray-600 hover:bg-gray-700"}`,children:c.jsx(qx,{className:"w-4 h-4 text-white"})}),c.jsx("button",{onClick:()=>D(le=>!le),disabled:O.length===0,title:O.length===0?"No camera detected":"Select camera",className:`ml-1 w-8 h-8 rounded-full flex items-center justify-center transition-colors ${O.length===0?"bg-gray-500 opacity-60 cursor-not-allowed":"bg-gray-600 hover:bg-gray-700"}`,children:c.jsx("span",{className:"text-white text-xs",children:""})}),N&&O.length>0&&c.jsxs("div",{className:"absolute top-12 left-0 bg-gray-800 text-white text-sm rounded-md shadow-lg border border-gray-700 min-w-[220px] z-50",children:[c.jsx("div",{className:"px-3 py-2 border-b border-gray-700 text-gray-300",children:"Select camera"}),c.jsxs("ul",{className:"max-h-60 overflow-auto",children:[O.map(le=>c.jsx("li",{children:c.jsx("button",{onClick:()=>te(le.deviceId),className:`w-full text-left px-3 py-2 hover:bg-gray-700 ${V===le.deviceId?"bg-gray-700":""}`,children:le.label||`Camera (${le.deviceId.slice(0,6)})`})},le.deviceId)),O.length===0&&c.jsx("li",{className:"px-3 py-2 text-gray-400",children:"No cameras found"})]}),c.jsx("div",{className:"px-3 py-2 border-t border-gray-700 text-xs text-gray-400",children:"Selection applies to the next video call."})]})]})}),ye&&g&&h&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:se,disabled:C,className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${f?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 hover:bg-gray-700"}`,title:f?"Stop screen sharing":"Start screen sharing",children:f?c.jsx(n_,{className:"w-6 h-6 text-white"}):c.jsx(Ni,{className:"w-6 h-6 text-white"})}),c.jsx("button",{onClick:()=>M(!0),className:"w-8 h-8 rounded-full bg-gray-700 hover:bg-gray-600 flex items-center justify-center transition-colors",title:"Screen sharing settings",children:c.jsx(Su,{className:"w-4 h-4 text-white"})})]}),c.jsx("button",{onClick:j,disabled:C,className:"w-16 h-16 bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:c.jsx(v0,{className:"w-8 h-8 text-white"})})]})]})]}),c.jsx(yM,{isOpen:k,onClose:()=>R(!1),onSelect:be,onCancel:Ce,onGetAvailableScreenSources:A}),B&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Screen Sharing Settings"}),c.jsx("button",{onClick:()=>M(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),c.jsx(w2,{}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Done"})})]})})]})};function xM({onSendMessage:e,onSendFile:t,messages:n,setMessages:r,isEncrypted:s=!0,currentUsername:o,users:i,selectedConversation:a,saveMessageToLocalDB:u,callingAuthContext:l}){var L,z;const d=w.useRef(null),[g,h]=w.useState(null),[A,f]=w.useState(null),m=mM(l),{currentCall:v,localStream:p,remoteStream:y,remoteScreenStream:x,peerConnection:E,startCall:C,answerCall:I,declineCall:b,endCall:S,toggleMute:k,toggleVideo:R,switchCamera:B,startScreenShare:M,stopScreenShare:T,getAvailableScreenSources:F,isScreenSharing:H}=m,O=w.useRef(new Set),X=w.useRef(0),{handleLocalTyping:N,handleConversationChange:D,resetTypingAfterSend:V}=uM(o,a,e),{typingUsers:J}=fM();w.useEffect(()=>{console.log("[ChatInterface] typingUsers changed:",J)},[J]),w.useEffect(()=>{D(),O.current.clear(),X.current=0},[a,D]);const{sendReadReceipt:te,markMessageAsRead:K,getSmartReceiptStatus:P}=gM(n,r,o,u);w.useEffect(()=>{if(d.current){const $=d.current.querySelector("[data-radix-scroll-area-viewport]");$&&($.scrollTop=$.scrollHeight)}},[n]),w.useEffect(()=>{var Ce;const $=(Ce=d.current)==null?void 0:Ce.querySelector("[data-radix-scroll-area-viewport]");if(!$)return;const ee=()=>document.visibilityState==="visible"&&document.hasFocus(),ce=()=>{if(!ee())return;const Be=Date.now();if(Be-X.current<500)return;X.current=Be,O.current.clear();const ye=$.getBoundingClientRect(),Re=ye.bottom,Qe=[];n.forEach(ne=>{var le;if(ne.sender===o||(le=ne.receipt)!=null&&le.read||O.current.has(ne.id))return;const ue=document.getElementById(`message-${ne.id}`);if(ue){const ge=ue.getBoundingClientRect().bottom;ge<=Re&&ge>=ye.top&&(Qe.push(ne),O.current.add(ne.id))}}),Qe.sort((ne,ue)=>new Date(ne.timestamp).getTime()-new Date(ue.timestamp).getTime()),Qe.forEach(ne=>{K(ne.id),te(ne.id,ne.sender)})};let se;const be=()=>{clearTimeout(se),se=setTimeout(ce,100)};return $.addEventListener("scroll",be),window.addEventListener("visibilitychange",ce),window.addEventListener("focus",ce),window.addEventListener("blur",ce),setTimeout(ce,100),()=>{clearTimeout(se),$.removeEventListener("scroll",be),window.removeEventListener("visibilitychange",ce),window.removeEventListener("focus",ce),window.removeEventListener("blur",ce)}},[n,o,K,te,i]),w.useEffect(()=>{const ee=setInterval(()=>{var ce;if(document.visibilityState==="visible"&&document.hasFocus()&&n.length>0){console.debug("[ChatInterface] Periodic check for missed read receipts");const se=(ce=d.current)==null?void 0:ce.querySelector("[data-radix-scroll-area-viewport]");if(se){const be=se.getBoundingClientRect(),Ce=be.bottom,Be=[];n.forEach(ye=>{var Qe;if(ye.sender===o||(Qe=ye.receipt)!=null&&Qe.read)return;const Re=document.getElementById(`message-${ye.id}`);if(Re){const ue=Re.getBoundingClientRect().bottom;ue<=Ce&&ue>=be.top&&Be.push(ye)}}),Be.sort((ye,Re)=>new Date(ye.timestamp).getTime()-new Date(Re.timestamp).getTime()).forEach(ye=>te(ye.id,ye.sender))}}},3e4);return()=>clearInterval(ee)},[n,te]);const j=(L=[...n].reverse().find($=>{var ee;return $.isCurrentUser&&((ee=P($)||$.receipt)==null?void 0:ee.read)}))==null?void 0:L.id,U=(z=[...n].reverse().find($=>{var ee,ce;return $.isCurrentUser&&((ee=P($)||$.receipt)==null?void 0:ee.delivered)&&!((ce=P($)||$.receipt)!=null&&ce.read)}))==null?void 0:z.id;return c.jsxs(Zt,{className:"flex flex-col h-full border border-gray-300 shadow-lg rounded-lg",children:[c.jsxs("div",{className:"p-4 border-b bg-gray-100 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold",children:a?`Chat with ${a}`:"Chat"}),c.jsx("p",{className:"text-sm text-gray-500",children:a?"Secure end-to-end encrypted messaging":"Select a conversation to start chatting"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[a&&c.jsxs(c.Fragment,{children:[c.jsxs(he,{size:"sm",variant:"outline",onClick:async()=>{try{await C(a,"audio")}catch($){console.error("[ChatInterface] Failed to start audio call:",$),alert("Failed to start call: "+$.message)}},disabled:!!v,className:"flex items-center space-x-1",children:[c.jsx(Jx,{className:"w-4 h-4"}),c.jsx("span",{children:"Call"})]}),c.jsxs(he,{size:"sm",variant:"outline",onClick:async()=>{try{await C(a,"video")}catch($){console.error("[ChatInterface] Failed to start video call:",$),alert("Failed to start video call: "+$.message)}},disabled:!!v,className:"flex items-center space-x-1",children:[c.jsx(Zx,{className:"w-4 h-4"}),c.jsx("span",{children:"Video"})]})]}),c.jsx(rE,{})]})]}),c.jsx(op,{className:"flex-1 p-4 bg-white",ref:d,children:c.jsx("div",{className:"space-y-4",children:n.length===0?c.jsx("div",{className:"flex items-center justify-center h-full min-h-[200px] text-gray-400 text-sm",children:a?"No messages yet. Start the conversation!":"Select a conversation to view messages"}):n.map(($,ee)=>{const ce=P($)||$.receipt,se=$.isCurrentUser&&ce&&($.id===j||$.id===U);return c.jsx("div",{id:`message-${$.id}`,children:c.jsx(D3,{message:{...$,receipt:se?ce:void 0},previousMessage:ee>0?n[ee-1]:void 0,onReply:()=>h($),onDelete:()=>e($.id,"",we.DELETE_MESSAGE,null),onEdit:()=>f($)})},$.id)})})}),c.jsx(Ei,{}),J.length>0&&c.jsx("div",{className:"px-4 py-3 bg-muted/30 border-t border-border/50 animate-in slide-in-from-bottom duration-200",children:c.jsx("div",{className:"flex flex-col gap-1",children:J.map($=>c.jsx(dM,{username:$},$))})}),c.jsx("div",{className:"p-4 bg-gray-50",children:c.jsx(iM,{onSendMessage:async($,ee,ce,se)=>{if(ce==="typing-start"||ce==="typing-stop"){await e($??"",ee,ce,se);return}await e($??"",ee,ce,se),V(),h(null)},onSendFile:t,isEncrypted:s,currentUsername:o,users:i,replyTo:g,onCancelReply:()=>h(null),editingMessage:A,onCancelEdit:()=>f(null),onEditMessage:async $=>{A&&(await e(A.id,$,we.EDIT_MESSAGE,A.replyTo),f(null))},onTyping:N,selectedConversation:a})}),v&&c.jsx(vM,{call:v,localStream:p,remoteStream:y,remoteScreenStream:x,peerConnection:E,onAnswer:()=>v&&I(v.id),onDecline:()=>v&&b(v.id),onEndCall:S,onToggleMute:k,onToggleVideo:R,onSwitchCamera:B,onStartScreenShare:M,onStopScreenShare:T,onGetAvailableScreenSources:F,isScreenSharing:H})]})}function EM(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var qd="Switch",[CM,oQ]=Hi(qd),[bM,IM]=CM(qd),v2=w.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:u="on",onCheckedChange:l,form:d,...g}=e,[h,A]=w.useState(null),f=Ft(t,x=>A(x)),m=w.useRef(!1),v=h?d||!!h.closest("form"):!0,[p,y]=Sx({prop:s,defaultProp:o??!1,onChange:l,caller:qd});return c.jsxs(bM,{scope:n,checked:p,disabled:a,children:[c.jsx(tt.button,{type:"button",role:"switch","aria-checked":p,"aria-required":i,"data-state":b2(p),"data-disabled":a?"":void 0,disabled:a,value:u,...g,ref:f,onClick:Mt(e.onClick,x=>{y(E=>!E),v&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})}),v&&c.jsx(C2,{control:h,bubbles:!m.current,name:r,value:u,checked:p,required:i,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});v2.displayName=qd;var x2="SwitchThumb",E2=w.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=IM(x2,n);return c.jsx(tt.span,{"data-state":b2(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});E2.displayName=x2;var SM="SwitchBubbleInput",C2=w.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const i=w.useRef(null),a=Ft(i,o),u=EM(n),l=hx(t);return w.useEffect(()=>{const d=i.current;if(!d)return;const g=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(g,"checked").set;if(u!==n&&A){const f=new Event("click",{bubbles:r});A.call(d,n),d.dispatchEvent(f)}},[u,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});C2.displayName=SM;function b2(e){return e?"checked":"unchecked"}var I2=v2,BM=E2;const qs=w.forwardRef(({className:e,...t},n)=>c.jsx(I2,{className:oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:c.jsx(BM,{className:oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));qs.displayName=I2.displayName;function kM(){var A;const[e,t]=w.useState(!1),[n,r]=w.useState(null),[s,o]=w.useState(null),[i,a]=w.useState(null),[u,l]=w.useState(null);w.useEffect(()=>{const f=()=>{const v=xt.getSettings(),p=xt.getVideoConstraints(),y=xt.getElectronVideoConstraints();console.log("[ScreenSharingDebug] Constraints updated:",{settings:v,browserConstraints:p,electronConstraints:y}),a({browser:p,electron:y,settings:v})};return f(),xt.subscribe(()=>{console.log("[ScreenSharingDebug] Settings changed, updating constraints..."),f()})},[]);const d=async()=>{l(null),t(!0);try{const f=xt.getVideoConstraints();console.log("[ScreenSharingDebug] Using constraints:",f);const m=await navigator.mediaDevices.getDisplayMedia({video:f,audio:!1});r(m);const v=m.getVideoTracks()[0];if(v){const p=v.getSettings();console.log("[ScreenSharingDebug] Actual track settings:",p),o({width:p.width||0,height:p.height||0,frameRate:p.frameRate||0,aspectRatio:p.aspectRatio||0,facingMode:p.facingMode,deviceId:p.deviceId});const y=v.getCapabilities();console.log("[ScreenSharingDebug] Track capabilities:",y)}}catch(f){console.error("[ScreenSharingDebug] Capture failed:",f),l(f instanceof Error?f.message:"Failed to start screen capture"),t(!1)}},g=()=>{n&&(n.getTracks().forEach(f=>f.stop()),r(null),o(null)),t(!1)},h=()=>{const f=xt.getSettings(),m=xt.getVideoConstraints(),v=xt.getElectronVideoConstraints();a({browser:m,electron:v,settings:f})};return c.jsxs(Zt,{className:"w-full max-w-4xl",children:[c.jsxs(hn,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ni,{className:"h-5 w-5"}),c.jsx(gn,{children:"Screen Sharing Debug Tool"})]}),c.jsx(Dn,{children:"Verify that resolution and framerate settings are actually being applied"})]}),c.jsxs(An,{className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-2",children:[e?c.jsxs(he,{onClick:g,variant:"destructive",className:"flex items-center gap-2",children:[c.jsx(ku,{className:"h-4 w-4"}),"Stop Capture"]}):c.jsxs(he,{onClick:d,className:"flex items-center gap-2",children:[c.jsx(Dd,{className:"h-4 w-4"}),"Start Test Capture"]}),c.jsx(he,{onClick:h,variant:"outline",children:"Refresh Constraints"})]}),u&&c.jsxs("div",{className:"p-3 bg-red-100 border border-red-300 rounded text-red-700",children:[c.jsx("strong",{children:"Error:"})," ",u]}),i&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[c.jsx(ep,{className:"h-4 w-4"}),"Current Settings"]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm font-mono",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Resolution:"})," ",i.settings.resolution.name]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Frame Rate:"})," ",i.settings.frameRate," FPS"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Quality:"})," ",i.settings.quality]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-semibold",children:"Generated Constraints"}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm font-mono",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Width:"})," ",JSON.stringify(i.browser.width)]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Height:"})," ",JSON.stringify(i.browser.height)]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Frame Rate:"})," ",JSON.stringify(i.browser.frameRate)]})]})]})]}),s&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-semibold text-green-600",children:" Actual Stream Properties (PROOF)"}),c.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Actual Width:"}),c.jsxs("div",{className:"text-lg font-mono",children:[s.width,"px"]})]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Actual Height:"}),c.jsxs("div",{className:"text-lg font-mono",children:[s.height,"px"]})]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Actual Frame Rate:"}),c.jsxs("div",{className:"text-lg font-mono",children:[s.frameRate," FPS"]})]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Aspect Ratio:"}),c.jsx("div",{className:"text-lg font-mono",children:(A=s.aspectRatio)==null?void 0:A.toFixed(2)})]})]}),c.jsxs("div",{className:"mt-4 p-3 bg-white rounded border",children:[c.jsx("strong",{children:"Verification:"}),c.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[c.jsxs("div",{className:`${i!=null&&i.settings.resolution.isNative||s.width===(i==null?void 0:i.settings.resolution.width)&&s.height===(i==null?void 0:i.settings.resolution.height)?"text-green-600":"text-red-600"}`,children:["Resolution: ",i!=null&&i.settings.resolution.isNative?" Native resolution (as expected)":s.width===(i==null?void 0:i.settings.resolution.width)&&s.height===(i==null?void 0:i.settings.resolution.height)?" Matches configured resolution":" Does not match configured resolution"]}),c.jsxs("div",{className:`${Math.abs(s.frameRate-((i==null?void 0:i.settings.frameRate)||0))<1?"text-green-600":"text-red-600"}`,children:["Frame Rate: ",Math.abs(s.frameRate-((i==null?void 0:i.settings.frameRate)||0))<1?" Matches configured frame rate":" Does not match configured frame rate"]})]})]})]})]}),i&&c.jsxs("details",{className:"space-y-3",children:[c.jsx("summary",{className:"font-semibold cursor-pointer",children:"Raw Constraint Data (for debugging)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-2",children:"Browser Constraints"}),c.jsx("pre",{className:"bg-gray-100 p-3 rounded text-xs overflow-auto",children:JSON.stringify(i.browser,null,2)})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-2",children:"Electron Constraints"}),c.jsx("pre",{className:"bg-gray-100 p-3 rounded text-xs overflow-auto",children:JSON.stringify(i.electron,null,2)})]})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded",children:[c.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"How to Test:"}),c.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Go to Settings  Audio & Video  Screen Sharing and change the resolution/framerate"}),c.jsx("li",{children:'Come back here and click "Refresh Constraints" to see the new settings'}),c.jsx("li",{children:'Click "Start Test Capture" to actually capture your screen'}),c.jsx("li",{children:'Check the "Actual Stream Properties" section to see if the settings were applied'}),c.jsx("li",{children:"The verification section will tell you if the settings match what you configured"})]})]})]})]})}function RM(){const{theme:e,setTheme:t}=$S(),n=()=>{confirm("Are you sure you want to clear all local data? This will log you out and remove all stored messages.")&&(localStorage.clear(),sessionStorage.clear(),window.location.reload())};return c.jsxs("div",{className:"space-y-6 p-6 max-w-2xl",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage your application preferences and privacy settings."})]}),c.jsxs(Zt,{children:[c.jsxs(hn,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(s_,{className:"h-5 w-5"}),c.jsx(gn,{children:"Appearance"})]}),c.jsx(Dn,{children:"Customize the look and feel of the application"})]}),c.jsx(An,{className:"space-y-4",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx(Le,{className:"text-sm font-medium",children:"Theme"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(he,{variant:e==="light"?"default":"outline",size:"sm",onClick:()=>t("light"),className:"flex items-center gap-2",children:[c.jsx(l_,{className:"h-4 w-4"}),"Light"]}),c.jsxs(he,{variant:e==="dark"?"default":"outline",size:"sm",onClick:()=>t("dark"),className:"flex items-center gap-2",children:[c.jsx(r_,{className:"h-4 w-4"}),"Dark"]}),c.jsxs(he,{variant:e==="system"?"default":"outline",size:"sm",onClick:()=>t("system"),className:"flex items-center gap-2",children:[c.jsx(Ni,{className:"h-4 w-4"}),"System"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose your preferred theme or follow your system setting"})]})})]}),c.jsxs(Zt,{children:[c.jsxs(hn,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Bu,{className:"h-5 w-5"}),c.jsx(gn,{children:"Privacy & Security"})]}),c.jsx(Dn,{children:"Control your privacy and security preferences"})]}),c.jsxs(An,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Le,{children:"End-to-End Encryption"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"All messages are encrypted using X25519 + Kyber768 hybrid encryption"})]}),c.jsx(qs,{checked:!0,disabled:!0})]}),c.jsx(Ei,{}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Le,{children:"Message Persistence"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Store encrypted messages locally for offline access"})]}),c.jsx(qs,{checked:!0})]})]})]}),c.jsxs(Zt,{children:[c.jsxs(hn,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(XT,{className:"h-5 w-5"}),c.jsx(gn,{children:"Notifications"})]}),c.jsx(Dn,{children:"Configure how you receive notifications"})]}),c.jsxs(An,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Le,{children:"Desktop Notifications"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Show notifications when the app is in the background"})]}),c.jsx(qs,{defaultChecked:!0})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Le,{children:"Sound Notifications"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Play sound when receiving new messages"})]}),c.jsx(qs,{defaultChecked:!0})]})]})]}),c.jsxs(Zt,{children:[c.jsxs(hn,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(d_,{className:"h-5 w-5"}),c.jsx(gn,{children:"Audio & Video"})]}),c.jsx(Dn,{children:"Configure audio and video call settings"})]}),c.jsxs(An,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Le,{children:"Noise Suppression"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Reduce background noise during calls"})]}),c.jsx(qs,{defaultChecked:!0})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Le,{children:"Echo Cancellation"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Prevent audio feedback during calls"})]}),c.jsx(qs,{defaultChecked:!0})]})]})]}),c.jsx(w2,{}),c.jsx(kM,{}),c.jsxs(Zt,{children:[c.jsxs(hn,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(mg,{className:"h-5 w-5"}),c.jsx(gn,{children:"Data Management"})]}),c.jsx(Dn,{children:"Manage your local data and storage"})]}),c.jsx(An,{className:"space-y-4",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx(Le,{children:"Clear All Data"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"This will remove all stored messages, settings, and log you out. This action cannot be undone."}),c.jsxs(he,{variant:"destructive",size:"sm",onClick:n,className:"flex items-center gap-2",children:[c.jsx(mg,{className:"h-4 w-4"}),"Clear All Data"]})]})})]})]})}class za{constructor(t,n){Z(this,"dbName");Z(this,"username");Z(this,"encryptionKey",null);Z(this,"memoryMode",!1);Z(this,"memoryStore",new Map);Z(this,"MAX_MEMORY_ENTRIES",1e3);Z(this,"EPHEMERAL_PREFIX","ephemeral:");Z(this,"ephemeralConfig");Z(this,"cleanupInterval",null);this.username=t,this.dbName=za.getStableDbNameForUsername(t),console.log(`[SecureDB] Using database (stable): ${this.dbName}`),this.ephemeralConfig={enabled:!0,defaultTTL:1440*60*1e3,maxTTL:10080*60*1e3,cleanupInterval:3600*1e3,...n}}createCompositeKey(t,n){return JSON.stringify([t,n])}parseCompositeKey(t){try{const n=JSON.parse(t);if(Array.isArray(n)&&n.length===2)return[n[0],n[1]]}catch{const r=t.indexOf(":");if(r!==-1)return[t.substring(0,r),t.substring(r+1)]}throw new Error("Invalid composite key format: [REDACTED]")}async smartMemoryEviction(){const t=Date.now();let n=0;const r=Math.floor(this.MAX_MEMORY_ENTRIES*.1),s=[],o=[],i=[];for(const[a,u]of this.memoryStore.entries())try{const[l]=this.parseCompositeKey(a);if(l.startsWith(this.EPHEMERAL_PREFIX)){o.push(a);try{const d=await this.decryptData(u);d.expiresAt&&t>d.expiresAt&&d.autoDelete&&s.push(a)}catch{s.push(a)}}else i.push(a)}catch{a.startsWith(this.EPHEMERAL_PREFIX)?o.push(a):i.push(a)}for(const a of s){if(n>=r)break;this.memoryStore.delete(a),n++}if(n<r){const a=o.filter(u=>!s.includes(u));for(const u of a){if(n>=r)break;this.memoryStore.delete(u),n++}}if(n<r)for(const a of i){if(n>=r)break;this.memoryStore.delete(a),n++}console.warn(`[SecureDB] Memory cap reached, smart eviction removed ${n} entries (${s.length} expired, ${n-s.length} others)`)}async initializeWithKey(t){this.encryptionKey=t,this.ephemeralConfig.enabled&&this.startEphemeralCleanup(),await this.migrateFromLegacyDatabases(),console.log("[SecureDB] SecureDB initialized with ephemeral support")}async encryptData(t){if(!this.encryptionKey)throw new Error("Encryption key not initialized");const n=await crypto.subtle.exportKey("raw",this.encryptionKey),r=new Uint8Array(n),o=new TextEncoder().encode(JSON.stringify(t)),{nonce:i,ciphertext:a}=fe.XChaCha20Poly1305.encryptWithNonce(r,o),u=new Uint8Array(i.length+a.length);return u.set(i),u.set(a,i.length),u}async decryptData(t){if(!this.encryptionKey)throw new Error("Encryption key not initialized");const n=await crypto.subtle.exportKey("raw",this.encryptionKey),r=new Uint8Array(n),s=24,o=t.slice(0,s),i=t.slice(s),a=fe.XChaCha20Poly1305.decryptWithNonce(r,o,i);return JSON.parse(new TextDecoder().decode(a))}static getStableDbNameForUsername(t){return`securechat_${za.sanitizeIdentifier(t)}_db`}static sanitizeIdentifier(t){return(t||"unknown").replace(/[^a-zA-Z0-9_-]/g,"_")}openSpecificDB(t){return new Promise((n,r)=>{const s=indexedDB.open(t,1);s.onupgradeneeded=()=>{const o=s.result;o.objectStoreNames.contains("data")||o.createObjectStore("data")},s.onsuccess=()=>n(s.result),s.onerror=()=>r(s.error)})}async migrateFromLegacyDatabases(){var t;try{const n=indexedDB;if(!n||typeof n.databases!="function")return;const r=await n.databases();if(!r||r.length===0)return;const s=this.dbName,i=`securechat_${za.sanitizeIdentifier(this.username)}_`,a=r.map(d=>d.name).filter(d=>!!d).filter(d=>d.startsWith(i)&&d.endsWith("_db")&&d!==s);if(a.length===0)return;console.log("[SecureDB] Found legacy databases to migrate:",a);let u=[],l=[];for(const d of a)try{const g=await this.openSpecificDB(d),h=m=>new Promise((v,p)=>{const E=g.transaction("data","readonly").objectStore("data").get(m);E.onsuccess=()=>v(E.result||null),E.onerror=()=>p(E.error)}),A=await h("messages").catch(()=>null);if(A)try{const m=await this.decryptData(A);Array.isArray(m)&&(u=[...u,...m])}catch{}const f=await h("users").catch(()=>null);if(f)try{const m=await this.decryptData(f);Array.isArray(m)&&(l=[...l,...m])}catch{}try{(t=g.close)==null||t.call(g)}catch{}}catch(g){console.warn("[SecureDB] Failed to read legacy DB during migration:",g)}if(u.length>0)try{const d=await this.loadMessages().catch(()=>[]),g=this.deduplicateMessages([...d,...u]);await this.saveMessages(g),console.log(`[SecureDB] Migrated ${u.length} messages into stable DB`)}catch(d){console.warn("[SecureDB] Failed to migrate messages into stable DB:",d)}if(l.length>0)try{const d=await this.loadUsers().catch(()=>[]),g=new Set,h=[...d,...l].filter(A=>{const f=typeof A=="object"&&A&&(A.username||A.id||JSON.stringify(A));return g.has(f)?!1:(g.add(f),!0)});await this.saveUsers(h),console.log(`[SecureDB] Migrated ${l.length} users into stable DB`)}catch(d){console.warn("[SecureDB] Failed to migrate users into stable DB:",d)}for(const d of a)try{await new Promise((g,h)=>{const A=indexedDB.deleteDatabase(d);A.onsuccess=()=>g(),A.onerror=()=>h(A.error),A.onblocked=()=>{console.warn("[SecureDB] Deletion of legacy DB is blocked (will be removed on next run):",d),g()}}),console.log("[SecureDB] Deleted legacy DB:",d)}catch(g){console.warn("[SecureDB] Failed to delete legacy DB:",d,g)}}catch(n){console.warn("[SecureDB] Legacy DB migration skipped or failed:",n)}}openDB(){return new Promise((t,n)=>{const r=indexedDB.open(this.dbName,1);r.onupgradeneeded=()=>{const s=r.result;s.objectStoreNames.contains("data")||s.createObjectStore("data")},r.onsuccess=()=>t(r.result),r.onerror=()=>n(r.error)})}async saveMessages(t){if(!this.encryptionKey)throw new Error("Encryption key not initialized");const n=this.deduplicateMessages(t),r=await this.encryptData(n);try{const s=await this.openDB();return new Promise((o,i)=>{const a=s.transaction("data","readwrite");a.objectStore("data").put(r,"messages"),a.oncomplete=()=>o(),a.onerror=()=>i(a.error)})}catch{console.warn("[SecureDB] IndexedDB unavailable; using in-memory storage for messages"),this.memoryMode=!0,this.memoryStore.set("messages",r)}}async loadMessages(){if(this.memoryMode){const t=this.memoryStore.get("messages");if(!t)return console.log("[SecureDB] No messages found in memory storage"),[];try{const n=await this.decryptData(t);return console.log(`[SecureDB] Loaded ${n.length} messages from memory storage`),n}catch(n){return console.error("[SecureDB] Failed to decrypt messages from memory storage:",n),[]}}try{const t=await this.openDB();return new Promise((n,r)=>{const s=t.transaction("data","readonly"),i=s.objectStore("data").get("messages");i.onsuccess=async()=>{if(!i.result)return console.log("[SecureDB] No messages found in IndexedDB"),n([]);try{const a=await this.decryptData(i.result);console.log(`[SecureDB] Loaded ${a.length} messages from IndexedDB`),n(a)}catch(a){console.error("[SecureDB] Failed to decrypt messages from IndexedDB:",a),r(a)}},i.onerror=()=>{console.error("[SecureDB] Error loading messages from IndexedDB:",i.error),r(i.error)},s.onerror=()=>{console.error("[SecureDB] Transaction failed while loading messages:",s.error),r(s.error)}})}catch(t){return console.error("[SecureDB] Error opening database for message load:",t),console.log("[SecureDB] Attempting memory fallback for message load"),this.memoryMode=!0,this.loadMessages()}}async saveUsers(t){if(!this.encryptionKey)throw new Error("Encryption key not initialized");const n=await this.encryptData(t);try{const r=await this.openDB();return new Promise((s,o)=>{const i=r.transaction("data","readwrite");i.objectStore("data").put(n,"users"),i.oncomplete=()=>s(),i.onerror=()=>o(i.error)})}catch{console.warn("[SecureDB] IndexedDB unavailable; using in-memory storage for users"),this.memoryMode=!0,this.memoryStore.set("users",n)}}async loadUsers(){if(this.memoryMode){const n=this.memoryStore.get("users");return n?await this.decryptData(n):[]}const t=await this.openDB();return new Promise((n,r)=>{const i=t.transaction("data","readonly").objectStore("data").get("users");i.onsuccess=async()=>{if(!i.result)return n([]);try{const a=await this.decryptData(i.result);n(a)}catch(a){r(a)}},i.onerror=()=>r(i.error)})}async storeEphemeral(t,n,r,s,o=!0){if(!this.ephemeralConfig.enabled)return this.store(t,n,r);let i=s||this.ephemeralConfig.defaultTTL;(typeof i!="number"||isNaN(i)||i<=0)&&(console.warn(`[SecureDB] Invalid TTL ${i}, using default: ${this.ephemeralConfig.defaultTTL}`),i=this.ephemeralConfig.defaultTTL);const a=Math.min(i,this.ephemeralConfig.maxTTL),u=Date.now(),l=u+a;if(l<=u||!Number.isFinite(l))throw new Error("[SecureDB] Invalid expiration time calculated: [REDACTED]");const d={data:r,createdAt:u,expiresAt:l,ttl:a,autoDelete:o};await this.storeWithPrefix(this.EPHEMERAL_PREFIX+t,n,d),console.log(`[SecureDB] Stored ephemeral data: ${n} (expires in ${a}ms)`)}async retrieveEphemeral(t,n){if(!this.ephemeralConfig.enabled)return this.retrieve(t,n);const r=await this.retrieveWithPrefix(this.EPHEMERAL_PREFIX+t,n);return r?r.expiresAt?Date.now()>r.expiresAt?(console.log(`[SecureDB] Ephemeral data expired: ${n}`),r.autoDelete&&await this.deleteWithPrefix(this.EPHEMERAL_PREFIX+t,n),null):r.data:r:null}startEphemeralCleanup(){this.cleanupInterval&&clearInterval(this.cleanupInterval),this.cleanupInterval=setInterval(async()=>{await this.cleanupExpiredData()},this.ephemeralConfig.cleanupInterval),console.log(`[SecureDB] Started ephemeral cleanup (interval: ${this.ephemeralConfig.cleanupInterval}ms)`)}async cleanupExpiredData(){try{const t=Date.now();let n=0;if(this.memoryMode){const r=[];for(const[s,o]of this.memoryStore.entries())try{const[i]=this.parseCompositeKey(s);i.startsWith(this.EPHEMERAL_PREFIX)&&r.push({key:s,encryptedData:o})}catch{s.startsWith(this.EPHEMERAL_PREFIX)&&r.push({key:s,encryptedData:o})}for(const{key:s,encryptedData:o}of r)try{const i=await this.decryptData(o);i.expiresAt&&t>i.expiresAt&&i.autoDelete&&(this.memoryStore.delete(s),n++)}catch{}}else{const r=await this.openDB(),o=r.transaction("data","readwrite").objectStore("data"),i=JSON.stringify([this.EPHEMERAL_PREFIX,""]),a=JSON.stringify([this.EPHEMERAL_PREFIX+"",""]),u=IDBKeyRange.bound(i,a,!1,!0),l=o.openCursor(u),d=[];await new Promise((h,A)=>{l.onsuccess=f=>{const m=f.target.result;m?(d.push({key:m.key,encryptedData:m.value}),m.continue()):h()},l.onerror=()=>{A(l.error)}});const g=[];for(const{key:h,encryptedData:A}of d)try{const f=await this.decryptData(A);f.expiresAt&&t>f.expiresAt&&f.autoDelete&&g.push(h)}catch{}if(g.length>0){const h=r.transaction("data","readwrite"),A=h.objectStore("data");for(const f of g)try{A.delete(f)}catch(m){console.warn("[SecureDB] Failed to delete key during cleanup: [REDACTED]",m)}await new Promise((f,m)=>{h.oncomplete=()=>{n+=g.length,f()},h.onerror=()=>m(h.error)})}}n>0&&console.log(`[SecureDB] Cleaned up ${n} expired ephemeral entries`)}catch(t){console.error("[SecureDB] Error during ephemeral cleanup:",t)}}deduplicateMessages(t){const n=new Set;return t.filter(r=>{if(!r)return!1;const s=r.id||JSON.stringify(r);return n.has(s)?(console.log(`[SecureDB] Skipping duplicate message: ${r.id||"content-based"}`),!1):(n.add(s),!0)})}async appendMessages(t){try{const r=[...await this.loadMessages(),...t].sort((s,o)=>{const i=s.timestamp||0,a=o.timestamp||0;return i-a});await this.saveMessages(r)}catch(n){throw console.error("[SecureDB] Failed to append messages:",n),n}}async clearAllData(){if(this.memoryMode){this.memoryStore.clear(),console.log("[SecureDB] Cleared all data from memory storage");return}try{const t=await this.openDB();return new Promise((n,r)=>{const i=t.transaction("data","readwrite").objectStore("data").clear();i.onsuccess=()=>{console.log("[SecureDB] Cleared all data from IndexedDB"),n()},i.onerror=()=>{console.error("[SecureDB] Failed to clear IndexedDB:",i.error),r(i.error)}})}catch(t){throw console.error("[SecureDB] Error clearing database:",t),t}}async clearDatabase(){return this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null),new Promise((t,n)=>{const r=indexedDB.deleteDatabase(this.dbName);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)})}async store(t,n,r){return this.storeWithPrefix(t,n,r)}async storeWithPrefix(t,n,r){if(!this.encryptionKey)throw new Error("Encryption key not initialized");const s=await this.encryptData(r),o=this.createCompositeKey(t,n);if(this.memoryMode){this.memoryStore.size>=this.MAX_MEMORY_ENTRIES&&await this.smartMemoryEviction(),this.memoryStore.set(o,s);return}try{const i=await this.openDB();return new Promise((a,u)=>{const l=i.transaction("data","readwrite");l.objectStore("data").put(s,o),l.oncomplete=()=>a(),l.onerror=()=>u(l.error)})}catch{console.warn("[SecureDB] IndexedDB unavailable; using in-memory storage for [REDACTED]"),this.memoryMode=!0,this.memoryStore.set(o,s)}}async retrieve(t,n){return this.retrieveWithPrefix(t,n)}async retrieveWithPrefix(t,n){const r=this.createCompositeKey(t,n);if(this.memoryMode){const s=this.memoryStore.get(r);if(!s)return null;try{return await this.decryptData(s)}catch(o){return console.error("[SecureDB] Failed to decrypt data from memory storage: [REDACTED]",o),null}}try{const s=await this.openDB();return new Promise((o,i)=>{const l=s.transaction("data","readonly").objectStore("data").get(r);l.onsuccess=async()=>{if(!l.result)return o(null);try{const d=await this.decryptData(l.result);o(d)}catch(d){console.error("[SecureDB] Failed to decrypt data from IndexedDB: [REDACTED]",d),i(d)}},l.onerror=()=>{console.error("[SecureDB] Error retrieving data from IndexedDB: [REDACTED]",l.error),i(l.error)}})}catch(s){return console.error("[SecureDB] Error opening database for retrieval: [REDACTED]",s),null}}async delete(t,n){return this.deleteWithPrefix(t,n)}async deleteWithPrefix(t,n){const r=this.createCompositeKey(t,n);if(this.memoryMode){this.memoryStore.delete(r);return}try{const s=await this.openDB();return new Promise((o,i)=>{const l=s.transaction("data","readwrite").objectStore("data").delete(r);l.onsuccess=()=>o(),l.onerror=()=>i(l.error)})}catch(s){throw console.error("[SecureDB] Error deleting data: [REDACTED]",s),s}}}const TM=({Authentication:e,setMessages:t})=>{var g,h,A;const n=w.useRef(null),[r,s]=w.useState(!1),[o,i]=w.useState([]),a=w.useRef([]),u=w.useRef(null),l=w.useRef(new Set);w.useEffect(()=>{if(!(e!=null&&e.isLoggedIn)||r||n.current)return;if(!e.loginUsernameRef.current||!e.passphraseRef.current||!e.passphrasePlaintextRef.current){console.error("[useSecureDB] Cannot initialize DB: missing username, passphrase, or hash");return}(async()=>{var m,v,p;try{console.debug("[useSecureDB] Initializing SecureDB with auth context",{username:e.loginUsernameRef.current,hasPassphraseHash:!!e.passphraseRef.current,hasPassphrasePlaintext:!!e.passphrasePlaintextRef.current,hasAesKey:!!e.aesKeyRef.current});const y=fe.Hash.parseArgon2Hash(e.passphraseRef.current),{aesKey:x,encodedHash:E}=await fe.Keys.deriveAESKeyFromPassphrase(e.passphrasePlaintextRef.current,{saltBase64:y.salt,time:y.timeCost,memoryCost:y.memoryCost,parallelism:y.parallelism,algorithm:y.algorithm,version:y.version}),C=await fe.Keys.exportAESKey(e.aesKeyRef.current),I=await fe.Keys.exportAESKey(x);if(!(C.byteLength===I.byteLength&&new Uint8Array(C).every((S,k)=>S===new Uint8Array(I)[k]))){console.error("[useSecureDB] Stored key is not the correct key for this account  aborting initialization"),(m=e.setLoginError)==null||m.call(e,"Stored key is not the correct key for this account, cannot initialize secure storage"),n.current=null,e.logout(n).catch(console.error);return}if(E!==e.passphraseRef.current){console.error("[useSecureDB] Passphrase does not match stored hash  aborting initialization"),(v=e.setLoginError)==null||v.call(e,"Incorrect passphrase, cannot initialize secure storage"),n.current=null,e.logout(n).catch(console.error);return}n.current=new za(e.loginUsernameRef.current),await n.current.initializeWithKey(e.aesKeyRef.current),s(!0),console.debug("[useSecureDB] SecureDB initialized and session context set"),e.passphraseRef.current=""}catch(y){console.error("[useSecureDB] Failed to initialize SecureDB",y),(p=e.setLoginError)==null||p.call(e,"Failed to initialize secure storage")}})()},[e==null?void 0:e.isLoggedIn,e==null?void 0:e.username,(g=e==null?void 0:e.loginUsernameRef)==null?void 0:g.current,(h=e==null?void 0:e.passphraseRef)==null?void 0:h.current,(A=e==null?void 0:e.passphrasePlaintextRef)==null?void 0:A.current]),w.useEffect(()=>{if(!(e!=null&&e.isLoggedIn)||!r||!n.current)return;(async()=>{var m;try{if(!n.current)return;const v=await n.current.loadMessages().catch(()=>[])||[],p=await n.current.loadUsers().catch(()=>[])||[];console.debug("[useSecureDB] Loaded persisted data",{savedMessages:v.length,savedUsers:p.length});const y=v.map(x=>{var E;return{...x,timestamp:new Date(x.timestamp),isCurrentUser:x.sender===(((E=e==null?void 0:e.loginUsernameRef)==null?void 0:E.current)??(e==null?void 0:e.username)),receipt:x.receipt?{...x.receipt,deliveredAt:x.receipt.deliveredAt?new Date(x.receipt.deliveredAt):void 0,readAt:x.receipt.readAt?new Date(x.receipt.readAt):void 0}:void 0}});t(x=>{if(console.debug("[useSecureDB] Merging loaded messages with existing messages",{loadedCount:y.length,existingCount:x.length}),y.length===0)return x;const E=new Set(x.map(b=>b.id)),C=y.filter(b=>!E.has(b.id)),I=[...x,...C];return console.debug("[useSecureDB] Message merge complete",{finalCount:I.length,addedFromDB:C.length,keptExisting:x.length}),I}),p.length&&i(p)}catch(v){console.error("[useSecureDB] Failed to load secure data",v),(m=e.setLoginError)==null||m.call(e,"Failed to load secure data")}})()},[e==null?void 0:e.isLoggedIn,r]),w.useEffect(()=>{if(!r||!n.current||a.current.length===0)return;(async()=>{try{const m=await n.current.loadMessages()||[];await n.current.saveMessages([...m,...a.current]),console.debug("[useSecureDB] Flushed pending messages",{count:a.current.length}),a.current=[]}catch(m){console.error("[useSecureDB] Failed to flush pending messages",m)}})()},[r]),w.useEffect(()=>{!(e!=null&&e.isLoggedIn)||!r||!n.current||o.length===0||n.current.saveUsers(o).catch(f=>console.error("[useSecureDB] saveUsers error:",f))},[o,e==null?void 0:e.isLoggedIn,r]);const d=w.useCallback(async f=>{if(!f.id){console.error("[useSecureDB] No message id provided");return}t(v=>{const p=v.findIndex(y=>y.id===f.id);if(p!==-1){const y=[...v];return y[p]=f,y}else return[...v,f]});const m=()=>{const p=a.current.findIndex(y=>y.id===f.id);p!==-1?a.current[p]=f:(a.current.push(f),a.current.length>100&&(a.current=a.current.slice(-100)))};if(!r||!n.current)return m();l.current.has(f.id)||(l.current.add(f.id),u.current&&clearTimeout(u.current),u.current=setTimeout(async()=>{try{await new Promise(I=>setTimeout(I,0));const v=await n.current.loadMessages().catch(()=>[])||[],p=performance.now(),y=50,x=v.findIndex(I=>performance.now()-p>y?(console.warn("[useSecureDB] Processing time limit reached, deferring save"),setTimeout(()=>{u.current=setTimeout(async()=>{try{await n.current.saveMessages([f]),l.current.delete(f.id)}catch{m()}},10)},10),!1):I.id===f.id);x!==-1?v[x]=f:v.push(f);const E=1e3,C=v.length>E?v.slice(-E):v;await n.current.saveMessages(C).catch(m),l.current.delete(f.id)}catch(v){console.error("[useSecureDB] DB save failed, saving to pending",v),l.current.delete(f.id),m()}},100))},[r,t]);return{users:o,setUsers:i,dbInitialized:r,secureDBRef:n,saveMessageToLocalDB:d}};function _M(e,t,n){const r=w.useRef({});return{handleFileMessageChunk:w.useCallback(async(i,a)=>{try{const{from:u}=a,{chunkIndex:l,totalChunks:d,chunkData:g,encryptedAESKey:h,ephemeralX25519Public:A,kyberCiphertext:f,filename:m}=i,v=`${u}-${m}`;let p=r.current[v];p||(p={decryptedChunks:new Array(d),totalChunks:d,encryptedAESKey:h,ephemeralX25519Public:i.ephemeralX25519Public,kyberCiphertext:i.kyberCiphertext,filename:m,receivedCount:0},r.current[v]=p);const y=Uint8Array.from(atob(g),S=>S.charCodeAt(0)),{iv:x,authTag:E,encrypted:C}=fe.Decrypt.deserializeEncryptedDataFromUint8Array(y);if(!p.aesKey){const S=await e();if(!S)throw new Error("Hybrid keys not available for file decryption");const k={version:"hybrid-v1",ephemeralX25519Public:p.ephemeralX25519Public,kyberCiphertext:p.kyberCiphertext,encryptedMessage:p.encryptedAESKey},R=await fe.Hybrid.decryptHybridPayload(k,S),B=fe.Base64.base64ToUint8Array(R.aesKey);p.aesKey=await fe.Keys.importAESKey(B)}const I=await fe.Decrypt.decryptWithAESRaw(new Uint8Array(x),new Uint8Array(E),new Uint8Array(C),p.aesKey),b=q6(new Uint8Array(I));if(p.decryptedChunks[l]=new Blob([b]),p.receivedCount++,p.receivedCount===d){const S=new Blob(p.decryptedChunks,{type:"application/octet-stream"}),k=URL.createObjectURL(S);t({id:co(),content:k,sender:u,timestamp:new Date,isCurrentUser:!1,isSystemMessage:!1,type:we.FILE_MESSAGE,filename:m,fileSize:S.size}),delete r.current[v]}}catch(u){console.error("Error handling FILE_MESSAGE_CHUNK:",u),n("Failed to process file chunk")}},[e,t,n]),handleSendFile:async(i,a,u)=>{const l={...i,isCurrentUser:!0,sender:a,shouldPersist:!1};u(l)}}}function NM(e,t,n,r,s,o,i,a,u){async function l(h,A,f=5e3,m=100){var E,C;const v=Date.now();let p=0;const y=`${h}-${A}`;if((C=(E=l._pending)==null?void 0:E.has)!=null&&C.call(E,y))return console.log("[MessageSender] Session check already in progress for",y),l._pending.get(y);l._pending||(l._pending=new Map);const x=(async()=>{var I,b,S,k;try{try{const R=await((b=(I=window.edgeApi)==null?void 0:I.hasSession)==null?void 0:b.call(I,{selfUsername:h,peerUsername:A,deviceId:1}));if(R!=null&&R.hasSession)return!0}catch(R){console.error("[MessageSender] Initial session check failed:",R)}return new Promise(R=>{const B=T=>{var F;((F=T.detail)==null?void 0:F.peer)===A&&(window.removeEventListener("libsignal-session-ready",B),R(!0))};window.addEventListener("libsignal-session-ready",B),(async()=>{var T,F;for(;Date.now()-v<f;){try{const H=await((F=(T=window.edgeApi)==null?void 0:T.hasSession)==null?void 0:F.call(T,{selfUsername:h,peerUsername:A,deviceId:1}));if(H!=null&&H.hasSession){window.removeEventListener("libsignal-session-ready",B),R(!0);return}}catch(H){console.error("[MessageSender] Session polling failed:",H)}p++,await new Promise(H=>setTimeout(H,m))}window.removeEventListener("libsignal-session-ready",B),R(!1)})().catch(T=>{console.error("[MessageSender] Session polling error:",T),window.removeEventListener("libsignal-session-ready",B),R(!1)})})}finally{(k=(S=l._pending)==null?void 0:S.delete)==null||k.call(S,y)}})();return l._pending.set(y,x),x}async function d(h){const A=Math.floor(h.timestamp/1e3)*1e3,f=`${h.sender}:${h.content}:${A}${h.replyToId?`:${h.replyToId}`:""}`,v=new TextEncoder().encode(f),p=await crypto.subtle.digest("SHA-256",v),E=Array.from(new Uint8Array(p)).map(C=>C.toString(16).padStart(2,"0")).join("").slice(0,16);return console.log("[MessageSender] Generated message ID:",{originalTimestamp:h.timestamp,stableTimestamp:A,normalized:f,messageId:E}),E}return{handleSendMessage:w.useCallback(async(h,A,f,m,v)=>{var C,I,b;if(!u||!t.current)return;const p=t.current,y=typeof f=="string"?f:f==null?void 0:f.id,x=y?{id:y,...typeof f=="object"?{sender:f.sender,content:f.content}:{}}:void 0;console.log("[MessageSender] Reply processing:",{replyToParam:f,replyToType:typeof f,replyToId:y,replyToData:x,hasReplyToData:!!x});const E=await d({content:A,timestamp:Date.now(),sender:p,replyToId:y});try{const S=await((I=(C=window.edgeApi)==null?void 0:C.hasSession)==null?void 0:I.call(C,{selfUsername:p,peerUsername:h.username,deviceId:1}));if(!(S!=null&&S.hasSession)&&(Je.send(JSON.stringify({type:we.LIBSIGNAL_REQUEST_BUNDLE,username:h.username})),!await l(p,h.username))){console.error("[MessageSender] Session not available after waiting");return}}catch(S){console.error("[MessageSender] Session check failed:",S);return}try{console.log("[MessageSender] Attempting to encrypt message:",{fromUsername:p,toUsername:h.username,contentLength:A.length,messageId:E});const S=v==="typing-start"||v==="typing-stop"?"typing-indicator":m?"file-message":"message";console.log("[MessageSender] Preparing message with type:",{messageType:S,messageSignalType:v,content:A.substring(0,100)});const k=await window.edgeApi.encrypt({fromUsername:p,toUsername:h.username,plaintext:JSON.stringify({messageId:E,from:p,to:h.username,content:A,timestamp:Date.now(),messageType:"signal-protocol",signalType:"signal-protocol",protocolType:"signal",type:S,...x&&{replyTo:x},...m&&{fileData:m}})});if(console.log("[MessageSender] Encryption result details:",{hasResult:!!k,resultType:typeof k,resultKeys:k?Object.keys(k):[],hasCiphertext:!!(k!=null&&k.ciphertextBase64),ciphertextLength:((b=k==null?void 0:k.ciphertextBase64)==null?void 0:b.length)||0,hasType:!!(k!=null&&k.type),typeValue:k==null?void 0:k.type,hasSessionId:!!(k!=null&&k.sessionId)}),k!=null&&k.error){console.error("[MessageSender] Encryption failed:",k.message||"Unknown error"),k.code==="EBADF"&&console.error("[MessageSender] File descriptor error - this should not happen with the new error handling");return}if(!(k!=null&&k.ciphertextBase64)){console.error("[MessageSender] Encryption returned no ciphertext");return}const R={type:we.ENCRYPTED_MESSAGE,to:h.username,encryptedPayload:{from:p,to:h.username,content:k.ciphertextBase64,messageId:E,type:k.type,sessionId:k.sessionId}};if(Je.send(JSON.stringify(R)),v!=="typing-start"&&v!=="typing-stop"){console.log("[MessageSender] Creating local message for UI:",{messageId:E,content:A.substring(0,100)});const B={id:E,content:A,sender:p,recipient:h.username,timestamp:new Date,type:m?"file":"text",isCurrentUser:!0,receipt:{delivered:!1,read:!1},...x&&{replyTo:x},...m&&{fileInfo:{name:m,type:"text/plain",size:0,data:new ArrayBuffer(0)}}};n(B)}else console.log("[MessageSender] Skipping local message creation for typing indicator:",{messageSignalType:v,messageId:E})}catch{return}},[u,n,s])}}function Ao(e,t=1e4){if(!e||typeof e!="string")return null;if(e.length>t)return console.error("[Security] JSON string too large, rejecting:",{actualSize:e.length,maxSize:t,preview:e.substring(0,100)+"..."}),null;const n=e.trim();if(!n.startsWith("{")&&!n.startsWith("["))return null;try{return JSON.parse(e)}catch(r){return console.error("[Security] JSON parse failed:",r),null}}const S2=1e5,DM=1e4,B2=1e6;function mw(e,t){try{let n=e.trim();for(n.includes(",")&&(n=n.split(",")[1]),n=n.replace(/[^A-Za-z0-9+/=]/g,"");n.length%4!==0;)n+="=";if(!/^[A-Za-z0-9+/]*={0,2}$/.test(n))throw new Error("Invalid base64 format after cleaning");const r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);const o=new Blob([s],{type:t||"application/octet-stream"});return URL.createObjectURL(o)}catch(n){return console.warn("[EncryptedMessageHandler] Failed to create blob URL from base64:",n),null}}function PM(e){return Ao(e,S2)}function yh(e){return Ao(e,DM)}function MM(e){const t=Ao(e,B2);if(!t)return null;t.dataBase64&&typeof t.dataBase64=="string"&&(yw(t.dataBase64)||console.warn("[Security] Base64 validation failed for file message, but allowing through for voice notes"));const n=["fileData","data","content"];for(const r of n)if(t[r]&&typeof t[r]=="string"&&t[r].length>100&&QM(t[r])&&!yw(t[r]))return console.error(`[Security] Invalid base64 data in field '${r}' of file message, rejecting payload`),null;return t}function QM(e){return e.length>100&&/^[A-Za-z0-9+/]*={0,2}$/.test(e)}function yw(e){if(!e||typeof e!="string"||!/^[A-Za-z0-9+/]*={0,2}$/.test(e)||e.length%4!==0)return!1;try{if(typeof window<"u"&&typeof Buffer>"u"){const n=atob(e);return btoa(n)===e}else return Buffer.from(e,"base64").toString("base64")===e}catch(n){return console.error("[Security] Base64 decode/encode roundtrip failed:",n),!1}}function FM(e,t,n){return w.useCallback(async r=>{var s,o,i,a,u,l,d,g,h,A;try{if(typeof r!="object"||r===null||Array.isArray(r)||r instanceof Date||r instanceof RegExp||typeof r=="function"){console.warn("[EncryptedMessageHandler] Invalid message type:",typeof r);return}if(r.hasOwnProperty("__proto__")||r.hasOwnProperty("constructor")||r.hasOwnProperty("prototype")){console.error("[EncryptedMessageHandler] Prototype pollution attempt detected");return}let f;if((r==null?void 0:r.p2p)===!0&&(r==null?void 0:r.encrypted)===!0)try{if(!r.from||!r.to||!r.id||typeof r.from!="string"||typeof r.to!="string"||typeof r.id!="string"){console.error("[EncryptedMessageHandler] Invalid P2P message structure");return}const m=/^[a-zA-Z0-9_-]{1,32}$/;if(!m.test(r.from)||!m.test(r.to)){console.error("[EncryptedMessageHandler] Invalid username format in P2P message");return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r.id)){console.error("[EncryptedMessageHandler] Invalid message ID format");return}if(r.to!==e.current){console.error("[EncryptedMessageHandler] P2P message not intended for current user");return}if(typeof r.content!="string"||r.content.length===0||r.content.length>1e4){console.error("[EncryptedMessageHandler] Invalid P2P message content length");return}if([/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,/javascript:/gi,/vbscript:/gi,/data:text\/html/gi,/on\w+\s*=/gi,/<iframe\b/gi,/<object\b/gi,/<embed\b/gi,/<link\b/gi,/<meta\b/gi].some(b=>b.test(r.content))){console.error("[EncryptedMessageHandler] Potentially dangerous content detected in P2P message");return}if(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/.test(r.content)){console.error("[EncryptedMessageHandler] Invalid control characters in P2P message content");return}const x=Date.now(),E=new Date(r.timestamp).getTime(),C=1440*60*1e3,I=300*1e3;if(isNaN(E)||E<x-C||E>x+I){console.error("[EncryptedMessageHandler] Invalid P2P message timestamp");return}console.log("[EncryptedMessageHandler] Processing validated P2P message:",{from:r.from,to:r.to,timestamp:r.timestamp,hasContent:!!r.content}),f={id:r.id,content:r.content,timestamp:r.timestamp,from:r.from,to:r.to,type:"message",p2p:!0},console.log("[EncryptedMessageHandler] P2P message processed successfully")}catch(m){console.error("[EncryptedMessageHandler] Failed to process P2P message:",m);return}else if((r==null?void 0:r.type)===we.ENCRYPTED_MESSAGE&&((s=r==null?void 0:r.encryptedPayload)!=null&&s.content))try{const m=e.current,v=r.encryptedPayload.from,p=r.encryptedPayload.content;console.log("[EncryptedMessageHandler] Processing Signal Protocol message:",{from:v,to:m,hasContent:!!p,messageType:r.encryptedPayload.type,sessionId:r.encryptedPayload.sessionId});const y=await window.edgeApi.decrypt({selfUsername:m,fromUsername:v,ciphertextBase64:p}).catch(()=>({plaintext:atob(p)}));if(y&&y.plaintext){let x=Ao(y.plaintext,B2);(x==null?void 0:x.type)==="file-message"?f=x:(x==null?void 0:x.type)==="call-signal"?f=Ao(y.plaintext,S2):f=Ao(y.plaintext,5e4),console.log("[EncryptedMessageHandler] Message decrypted successfully:",{hasPayload:!!f,payloadType:f==null?void 0:f.type,contentLength:(o=f==null?void 0:f.content)==null?void 0:o.length})}else{console.error("[EncryptedMessageHandler] Decryption returned no plaintext");return}}catch(m){console.error("[EncryptedMessageHandler] Signal Protocol decryption failed:",m);return}else{if((r==null?void 0:r.type)===we.DR_SEND)return;if((r==null?void 0:r.type)===we.LIBSIGNAL_DELIVER_BUNDLE){try{const m=e.current,v=r.bundle,p=r.username;await window.edgeApi.processPreKeyBundle({selfUsername:m,peerUsername:p,bundle:v})}catch(m){console.error("[EncryptedMessageHandler] Bundle processing failed:",m);return}return}else{console.warn("[EncryptedMessageHandler] Unknown message type:",r==null?void 0:r.type);return}}if(f&&typeof f=="object"){if(console.log("[EncryptedMessageHandler] Processing decrypted payload:",{type:f.type,messageId:f.messageId,from:f.from,content:f.content,isReadReceipt:f.type==="read-receipt",isDeliveryReceipt:f.type==="delivery-receipt",contentPreview:f.content?f.content.substring(0,100):"no content",payloadKeys:Object.keys(f),hasReplyTo:!!f.replyTo,replyToKeys:f.replyTo?Object.keys(f.replyTo):null}),f.type==="read-receipt"&&f.messageId){console.log("[EncryptedMessageHandler] Processing read receipt:",f);const v=new CustomEvent("message-read",{detail:{messageId:f.messageId,from:f.from}});window.dispatchEvent(v),console.log("[EncryptedMessageHandler] Read receipt event dispatched for message:",f.messageId);return}if(f.type==="delivery-receipt"&&f.messageId){console.log("[EncryptedMessageHandler] Processing delivery receipt:",f);const v=new CustomEvent("message-delivered",{detail:{messageId:f.messageId,from:f.from}});window.dispatchEvent(v),console.log("[EncryptedMessageHandler] Delivery receipt event dispatched for message:",f.messageId);return}if(f.type==="typing-start"||f.type==="typing-stop"||f.type==="typing-indicator"){console.log("[EncryptedMessageHandler] Processing typing indicator:",f);let v=f.type;if(f.type==="typing-indicator"&&f.content){const y=Ao(f.content);y&&y.type?(v=y.type,console.log("[EncryptedMessageHandler] Extracted indicator type from content:",v)):(console.warn("[EncryptedMessageHandler] Failed to parse typing indicator content"),v="typing-start")}const p=new CustomEvent("typing-indicator",{detail:{from:f.from,indicatorType:v}});window.dispatchEvent(p),console.log("[EncryptedMessageHandler] Dispatched typing indicator event:",{from:f.from,indicatorType:v});return}if(f.content&&typeof f.content=="string"){const v=f.content.trim();if(v.startsWith("{")||v.startsWith("[")){const p=yh(f.content);if(p){if(p.type==="typing-start"||p.type==="typing-stop"){console.log("[EncryptedMessageHandler] Processing typing indicator from content (backward compatibility):",p);const y=new CustomEvent("typing-indicator",{detail:{from:f.from,indicatorType:p.type}});window.dispatchEvent(y);return}if(p.type==="read-receipt"&&p.messageId){console.log("[EncryptedMessageHandler] Processing read receipt from content:",p);const y=new CustomEvent("message-read",{detail:{messageId:p.messageId,from:f.from}});window.dispatchEvent(y);return}if(p.type==="delivery-receipt"&&p.messageId){console.log("[EncryptedMessageHandler] Processing delivery receipt from content:",p);const y=new CustomEvent("message-delivered",{detail:{messageId:p.messageId,from:f.from}});window.dispatchEvent(y);return}}}}if((f.type==="message"||f.type==="text"||!f.type)&&f.content&&typeof f.content=="string"&&f.content.trim().length>0)try{const v=new CustomEvent("typing-indicator",{detail:{from:f.from,indicatorType:"typing-stop"}});window.dispatchEvent(v)}catch{}if((f.type==="message"||f.type==="text"||!f.type)&&f.content&&f.type!=="file-message"){const v=f.content.trim();if(v.startsWith("{")||v.startsWith("[")){const C=yh(f.content);if(C&&(C.type==="typing-start"||C.type==="typing-stop")){console.log("[EncryptedMessageHandler] Skipping typing indicator message that was already processed:",C);return}}let p=f.messageId,y=f.content;if(v.startsWith("{")||v.startsWith("[")){const C=yh(f.content);C&&C.messageId?(p=C.messageId,y=C.content||C.message||f.content,C.replyTo&&(f.replyTo=C.replyTo),console.log("[EncryptedMessageHandler] Extracted message ID from content:",p)):(p=p||co(),console.log("[EncryptedMessageHandler] Using fallback message ID for JSON content:",p))}else p=p||co(),console.log("[EncryptedMessageHandler] Using fallback message ID:",p);let x=!1,E=!1;if(t(C=>{if(x=C.some(k=>k.id===p),x)return console.log("[EncryptedMessageHandler] Message already exists, skipping duplicate:",p),C;E=!0;let I;if(f.replyTo&&typeof f.replyTo=="object"&&f.replyTo.id){let k=f.replyTo.content||"";if(!k){const R=C.find(B=>B.id===f.replyTo.id);R!=null&&R.content&&(k=R.content)}I={id:f.replyTo.id,sender:f.replyTo.sender||f.from,content:k},console.log("[EncryptedMessageHandler] Reply data found and filled:",I)}else console.log("[EncryptedMessageHandler] No replyTo in payload or invalid format:",f.replyTo);const b={id:p,content:y,sender:f.from,recipient:(f==null?void 0:f.to)||e.current,timestamp:new Date(f.timestamp||Date.now()),type:"text",isCurrentUser:!1,p2p:f.p2p||!1,encrypted:!0,...I&&{replyTo:I}};console.log("[EncryptedMessageHandler] Final message object:",{id:b.id,content:b.content,sender:b.sender,hasReplyTo:!!b.replyTo,replyToData:b.replyTo,messageKeys:Object.keys(b),fullMessage:b}),console.log("[EncryptedMessageHandler] Adding message to state:",{id:b.id,sender:b.sender,recipient:b.recipient,contentLength:b.content.length,timestamp:b.timestamp,isCurrentUser:b.isCurrentUser});const S=[...C,b];return console.log("[EncryptedMessageHandler] Updated messages state:",{totalMessages:S.length,lastMessage:S[S.length-1],lastMessageHasReplyTo:!!S[S.length-1].replyTo,lastMessageReplyTo:S[S.length-1].replyTo}),S}),!x&&E)try{await n({id:p,content:y,sender:f.from,recipient:(f==null?void 0:f.to)||e.current,p2p:f.p2p||!1,encrypted:!0,transport:f.p2p?"p2p":"websocket",timestamp:new Date(f.timestamp||Date.now()),type:"text",isCurrentUser:!1})}catch(C){console.error("[EncryptedMessageHandler] Failed to save message to database:",C)}try{const C=e.current,I=f.from,b=await((a=(i=window.edgeApi)==null?void 0:i.hasSession)==null?void 0:a.call(i,{selfUsername:C,peerUsername:I,deviceId:1}));b!=null&&b.hasSession||(console.log("[EncryptedMessageHandler] No session with sender, requesting bundle for delivery receipt"),Je.send(JSON.stringify({type:we.LIBSIGNAL_REQUEST_BUNDLE,username:I})),await new Promise(B=>setTimeout(B,500)));const S={messageId:`delivery-receipt-${p}`,from:e.current,to:f.from,content:"delivery-receipt",timestamp:Date.now(),messageType:"signal-protocol",signalType:"signal-protocol",protocolType:"signal",type:"delivery-receipt"};console.log("[EncryptedMessageHandler] Sending delivery receipt for message:",{messageId:p,originalMessageId:f.messageId,extractedMessageId:p,deliveryReceiptData:S,sender:f.from,recipient:e.current});const k=await((l=(u=window.edgeApi)==null?void 0:u.encrypt)==null?void 0:l.call(u,{fromUsername:e.current,toUsername:f.from,plaintext:JSON.stringify(S)}));if(!(k!=null&&k.ciphertextBase64)){console.error("[EncryptedMessageHandler] Failed to encrypt delivery receipt");return}const R={type:we.ENCRYPTED_MESSAGE,to:f.from,encryptedPayload:{from:e.current,to:f.from,content:k.ciphertextBase64,messageId:`delivery-receipt-${p}`,type:k.type,sessionId:k.sessionId}};Je.send(JSON.stringify(R)),console.log("[EncryptedMessageHandler] Delivery receipt sent for message:",p)}catch(C){console.error("[EncryptedMessageHandler] Failed to send delivery receipt:",C)}}if(f.type==="file-message"){let v=f.messageId,p=f.fileName,y=f.fileType||"application/octet-stream",x=f.fileSize||0,E=null;const C=MM(f.content);C?(v=C.messageId||v||co(),p=C.fileName||C.fileData||f.fileName,y=C.fileType||y,x=C.fileSize||x,E=C.dataBase64||null,console.log("[EncryptedMessageHandler] Extracted file message data:",{messageId:v,fileName:p,fileType:y,fileSize:x,hasDataBase64:!!E})):(v=v||co(),console.log("[EncryptedMessageHandler] Using fallback file message ID:",v));let I=f.content;if(E&&typeof E=="string"){const S=mw(E,y);S&&(I=S)}let b=!1;t(S=>{if(b=S.some(B=>B.id===v),b)return console.log("[EncryptedMessageHandler] File message already exists or skipped, not adding:",v),S;let k=I||p||"File";if(E){const B=mw(E,y);B?(k=B,console.log("[EncryptedMessageHandler] Created blob URL for file:",p,k)):(console.error("[EncryptedMessageHandler] Failed to create blob URL, using fallback content"),(p!=null&&p.includes("voice-note")||y!=null&&y.startsWith("audio/"))&&(console.error("[EncryptedMessageHandler] Skipping voice note with invalid audio data"),b=!0))}const R={id:v,content:k,sender:f.from,recipient:(f==null?void 0:f.to)||e.current,timestamp:new Date(f.timestamp||Date.now()),type:"file",isCurrentUser:!1,filename:p,mimeType:y,fileSize:x,originalBase64Data:E,fileInfo:{name:p||"File",type:y,size:x,data:new ArrayBuffer(0)}};return[...S,R]}),b||await n({id:v,content:I||p||"File",sender:f.from,recipient:(f==null?void 0:f.to)||e.current,timestamp:new Date(f.timestamp||Date.now()),type:"file",isCurrentUser:!1,fileInfo:{name:p||"File",type:y,size:x,data:new ArrayBuffer(0)}});try{const S=e.current,k=f.from,R=await((g=(d=window.edgeApi)==null?void 0:d.hasSession)==null?void 0:g.call(d,{selfUsername:S,peerUsername:k,deviceId:1}));R!=null&&R.hasSession||(console.log("[EncryptedMessageHandler] No session with sender, requesting bundle for file message delivery receipt"),Je.send(JSON.stringify({type:we.LIBSIGNAL_REQUEST_BUNDLE,username:k})),await new Promise(F=>setTimeout(F,500)));const B={messageId:`delivery-receipt-${v}`,from:e.current,to:f.from,content:"delivery-receipt",timestamp:Date.now(),messageType:"signal-protocol",signalType:"signal-protocol",protocolType:"signal",type:"delivery-receipt"};console.log("[EncryptedMessageHandler] Sending delivery receipt for file message:",{messageId:v,originalMessageId:f.messageId,extractedMessageId:v,deliveryReceiptData:B,sender:f.from,recipient:e.current});const M=await((A=(h=window.edgeApi)==null?void 0:h.encrypt)==null?void 0:A.call(h,{fromUsername:e.current,toUsername:f.from,plaintext:JSON.stringify(B)}));if(!(M!=null&&M.ciphertextBase64)){console.error("[EncryptedMessageHandler] Failed to encrypt delivery receipt");return}const T={type:we.ENCRYPTED_MESSAGE,to:f.from,encryptedPayload:{from:e.current,to:f.from,content:M.ciphertextBase64,messageId:`delivery-receipt-${v}`,type:M.type,sessionId:M.sessionId}};Je.send(JSON.stringify(T)),console.log("[EncryptedMessageHandler] Delivery receipt sent for file message:",v)}catch(S){console.error("[EncryptedMessageHandler] Failed to send delivery receipt for file message:",S)}}if(f.type==="call-signal"){console.log("[EncryptedMessageHandler] Received call signal:",f);const v=PM(f.content);if(v){const p=new CustomEvent("call-signal",{detail:v});window.dispatchEvent(p)}else console.error("[EncryptedMessageHandler] Failed to parse call signal content");return}}else console.warn("[EncryptedMessageHandler] No valid payload after decryption")}catch(f){console.error("[EncryptedMessageHandler] Error processing encrypted message:",f)}},[t,n])}const jM=({Authentication:e,Database:t,fileHandler:n,encryptedHandler:r,handleMessageHistory:s})=>w.useCallback(async o=>{await vD(o,{Authentication:e,Database:t,handleFileMessageChunk:n.handleFileMessageChunk,handleEncryptedMessagePayload:r,handleMessageHistory:s})},[e,t,n,r,s]),LM=(e,t,n)=>{w.useEffect(()=>{const r=async o=>{try{if(console.log("[useWebSocket] Received message from main process:",{type:o==null?void 0:o.type,dataType:typeof o,keys:o?Object.keys(o):[],hasEncryptedPayload:!!(o!=null&&o.encryptedPayload),encryptedPayloadKeys:o!=null&&o.encryptedPayload?Object.keys(o.encryptedPayload):[]}),!o||typeof o!="object"||!o.type||o.type==="ok"){console.log("[useWebSocket] Skipping non-server message:",o);return}(o==null?void 0:o.type)==="encrypted-message"||(o==null?void 0:o.type)==="dr-send"||(o==null?void 0:o.type)==="x3dh-deliver-bundle"?(console.log("[useWebSocket] Routing to encrypted handler:",{type:o.type,hasEncryptedPayload:!!o.encryptedPayload,encryptedPayloadKeys:o.encryptedPayload?Object.keys(o.encryptedPayload):[]}),await t(o)):(console.log("[useWebSocket] Routing to server handler:",{type:o.type,keys:Object.keys(o)}),await e(o))}catch(i){console.error("IPC server-message handler error:",i)}},s=o=>r((o==null?void 0:o.detail)??o);return window.addEventListener("edge:server-message",s),()=>window.removeEventListener("edge:server-message",s)},[e,t])};function OM(e,t,n){const[r,s]=w.useState([]),[o,i]=w.useState(null),a=w.useCallback((h,A=!0)=>new Promise((f,m)=>{if(!h||h===e){f(null);return}const v=r.find(x=>x.username===h);if(v){A&&o!==h&&i(h),f(v);return}let p=null;const y=x=>{const{username:E,exists:C,error:I}=x.detail;if(E!==h)return;if(window.removeEventListener("user-exists-response",y),p!==null&&(clearTimeout(p),p=null),I){console.error("[useConversations] Error checking user existence:",I),m(new Error(`Failed to validate user: ${I}`));return}if(!C){console.warn("[useConversations] User does not exist:",h),m(new Error(`User "${h}" does not exist. Please check the username and try again.`));return}const b={id:crypto.randomUUID(),username:h,isOnline:t.some(S=>S.username===h&&S.isOnline),lastMessage:void 0,lastMessageTime:void 0,unreadCount:0};s(S=>[...S,b]),A&&o!==h&&i(h),f(b)};window.addEventListener("user-exists-response",y);try{Je.send(JSON.stringify({type:we.CHECK_USER_EXISTS,username:h}))}catch(x){window.removeEventListener("user-exists-response",y),p!==null&&(clearTimeout(p),p=null),console.error("[useConversations] Failed to send user existence check:",x),m(new Error("Failed to validate user existence. Please try again."));return}p=window.setTimeout(()=>{window.removeEventListener("user-exists-response",y),p=null,m(new Error("User validation timed out. Please try again."))},1e4)}),[r,t,e,o]),u=w.useCallback(h=>{o!==h&&(i(h),s(A=>A.map(f=>f.username===h?{...f,unreadCount:0}:f)))},[o]),l=w.useCallback(h=>h?n.filter(A=>A.sender===h&&A.recipient===e||A.sender===e&&A.recipient===h):[],[n,e]),d=w.useMemo(()=>{const h=new Map;return t.forEach(A=>h.set(A.username,A.isOnline)),h},[t]);w.useEffect(()=>{s(h=>{let A=!1;const f=h.map(m=>{const v=d.get(m.username)||!1;return m.isOnline!==v?(A=!0,{...m,isOnline:v}):m});return A?f:h})},[d]),w.useEffect(()=>{if(!n||n.length===0){s(A=>A);return}const h=new Map;for(const A of n){if(!A.sender||!A.recipient)continue;const f=A.sender===e?A.recipient:A.sender,m=t.some(x=>x.username===f&&x.isOnline),v=new Date(A.timestamp),p=A.sender!==e&&(!A.receipt||!A.receipt.read)?1:0,y=h.get(f);y?((!y.lastMessageTime||v>y.lastMessageTime)&&(y.lastMessage=A.content,y.lastMessageTime=v),y.unreadCount=(y.unreadCount||0)+p,y.isOnline=m):h.set(f,{id:crypto.randomUUID(),username:f,isOnline:m,lastMessage:A.content,lastMessageTime:v,unreadCount:p})}s(A=>{const f=new Map(A.map(v=>[v.username,v]));for(const[v,p]of h.entries()){const y=f.get(v);y?f.set(v,{...y,isOnline:p.isOnline,lastMessage:p.lastMessage,lastMessageTime:p.lastMessageTime,unreadCount:v===o?0:p.unreadCount}):f.set(v,p)}const m=Array.from(f.values());return m.sort((v,p)=>{var y,x;return(((y=p.lastMessageTime)==null?void 0:y.getTime())||0)-(((x=v.lastMessageTime)==null?void 0:x.getTime())||0)}),m})},[n,t,e,o]),w.useEffect(()=>{if(!o&&r.length>0){const h=r[0].username;o!==h&&i(h)}},[r,o]);const g=w.useCallback(()=>{console.log("[useConversations] Current state:",{conversationsCount:r.length,conversations:r.map(h=>{var A;return{username:h.username,lastMessage:(A=h.lastMessage)==null?void 0:A.substring(0,50),unreadCount:h.unreadCount,isOnline:h.isOnline}}),selectedConversation:o,currentUsername:e,usersCount:t.length,messagesCount:n.length})},[r,o,e,t.length,n.length]);return{conversations:r,selectedConversation:o,addConversation:a,selectConversation:u,getConversationMessages:l,debugConversationState:g}}function UM(e,t,n,r){const s=w.useRef(!1),o=w.useRef(!1),i=w.useCallback((u=50,l)=>{if(!t||!e){console.log("[MessageHistory] Cannot request history - not logged in");return}if(s.current&&!l){console.log("[MessageHistory] History already requested for this session");return}try{console.log(`[MessageHistory] Requesting message history for user: ${e}`);const d={type:we.REQUEST_MESSAGE_HISTORY,limit:u,...l?{since:l}:{}};Je.send(JSON.stringify(d)),l||(s.current=!0),console.log(`[MessageHistory] History request sent - limit: ${u}${l?`, since: ${l}`:""}`)}catch(d){console.error("[MessageHistory] Failed to request message history:",d)}},[t,e]),a=w.useCallback(async u=>{if(o.current){console.log("[MessageHistory] Already processing history, skipping duplicate");return}o.current=!0;try{const{messages:l,hasMore:d,timestamp:g}=u;if(!Array.isArray(l)){console.error("[MessageHistory] Invalid message history format");return}console.log(`[MessageHistory] Processing ${l.length} historical messages`);const h=l.map(A=>{let f=A.payload;if(typeof f=="string")try{f=JSON.parse(f)}catch(x){return console.error("[MessageHistory] Failed to parse message payload:",x),null}const m=A.messageId||(f==null?void 0:f.messageId);if(!m)return console.warn("[MessageHistory] Skipping message with missing ID"),null;const v=A.timestamp||(f==null?void 0:f.timestamp);if(!v)return console.warn("[MessageHistory] Skipping message with missing timestamp"),null;const p=new Date(v);if(isNaN(p.getTime()))return console.warn("[MessageHistory] Skipping message with invalid timestamp:",v),null;const y=(f==null?void 0:f.encryptedContent)||(f==null?void 0:f.content);return!y||typeof y=="string"&&y.trim()===""?(console.warn("[MessageHistory] Skipping message with empty/invalid content"),null):{id:m,content:y,sender:A.fromUsername||f.fromUsername,recipient:A.toUsername||f.toUsername,timestamp:p,type:f.messageType||"text",isCurrentUser:(A.fromUsername||f.fromUsername)===e,encrypted:!0,transport:"websocket",p2p:!1,receipt:f.receipt?{...f.receipt,deliveredAt:f.receipt.deliveredAt?new Date(f.receipt.deliveredAt):void 0,readAt:f.receipt.readAt?new Date(f.receipt.readAt):void 0}:void 0,replyTo:f.replyTo?{id:f.replyTo.id,content:f.replyTo.content,sender:f.replyTo.sender}:void 0}}).filter(Boolean);n(A=>{const f=new Set(A.map(p=>p.id)),m=h.filter(p=>!f.has(p.id));if(m.length===0)return console.log("[MessageHistory] No new messages to add (all duplicates)"),A;console.log(`[MessageHistory] Adding ${m.length} new historical messages`);const v=[...A,...m].sort((p,y)=>p.timestamp.getTime()-y.timestamp.getTime());return m.forEach(async p=>{try{await r(p)}catch(y){console.error("[MessageHistory] Failed to save historical message to local DB:",y)}}),v}),console.log(`[MessageHistory] Message history processing complete. Has more: ${d}`)}catch(l){console.error("[MessageHistory] Error processing message history:",l)}finally{o.current=!1}},[e,n,r]);return w.useEffect(()=>{if(t&&e&&!s.current){const u=setTimeout(()=>{i(50)},1e3);return()=>clearTimeout(u)}},[t,e,i]),w.useEffect(()=>{t||(s.current=!1,o.current=!1)},[t]),{requestMessageHistory:i,handleMessageHistory:a}}var Ep="Progress",Cp=100,[HM,iQ]=Hi(Ep),[zM,GM]=HM(Ep),k2=w.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=KM,...i}=e;(s||s===0)&&!ww(s)&&console.error($M(`${s}`,"Progress"));const a=ww(s)?s:Cp;r!==null&&!vw(r,a)&&console.error(VM(`${r}`,"Progress"));const u=vw(r,a)?r:null,l=cd(u)?o(u,a):void 0;return c.jsx(zM,{scope:n,value:u,max:a,children:c.jsx(tt.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":cd(u)?u:void 0,"aria-valuetext":l,role:"progressbar","data-state":_2(u,a),"data-value":u??void 0,"data-max":a,...i,ref:t})})});k2.displayName=Ep;var R2="ProgressIndicator",T2=w.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=GM(R2,n);return c.jsx(tt.div,{"data-state":_2(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});T2.displayName=R2;function KM(e,t){return`${Math.round(e/t*100)}%`}function _2(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function cd(e){return typeof e=="number"}function ww(e){return cd(e)&&!isNaN(e)&&e>0}function vw(e,t){return cd(e)&&!isNaN(e)&&e<=t&&e>=0}function $M(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Cp}\`.`}function VM(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Cp} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var N2=k2,WM=T2;const D2=w.forwardRef(({className:e,value:t,...n},r)=>c.jsx(N2,{ref:r,className:oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:c.jsx(WM,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));D2.displayName=N2.displayName;let YM=class{constructor(){Z(this,"status",{isInstalled:!1,isConfigured:!1,isRunning:!1,setupProgress:0,currentStep:"Initializing..."});Z(this,"progressCallback");this.detectPlatform()}async autoSetup(t={autoStart:!0,enableBridges:!1}){this.progressCallback=t.onProgress;try{if(this.updateStatus(5,"Checking system requirements..."),!this.isElectronEnvironment())return this.updateStatus(0,"Browser mode detected","Tor auto-setup requires the desktop application. Please download the desktop version for automatic Tor setup."),!1;if(this.updateStatus(10,"Preparing Tor Expert Bundle download..."),console.log("[TOR-SETUP] Will download Tor Expert Bundle for maximum compatibility"),this.updateStatus(20,"Downloading Tor Expert Bundle...","Downloading ~15MB from torproject.org"),!await this.downloadTor())return this.updateStatus(0,"Failed to download Tor","Could not download Tor Expert Bundle. Check internet connection."),!1;this.updateStatus(40,"Installing Tor Expert Bundle..."),console.log("[TOR-SETUP] Calling installTor...");const r=await this.installTor();if(console.log("[TOR-SETUP] Install result:",r),!r)return this.updateStatus(0,"Failed to install Tor","Could not complete Tor installation. You may need to install Tor manually."),!1;this.updateStatus(60,"Configuring Tor..."),console.log("[TOR-SETUP] Calling configureTor with options:",t);const s=await this.configureTor(t);if(console.log("[TOR-SETUP] Configuration result:",s),!s)return this.updateStatus(0,"Failed to configure Tor","Could not write Tor configuration."),!1;if(t.autoStart){this.updateStatus(80,"Starting Tor service...");const o=await this.startTor();if(!o.success){const a=o.error||"Tor service could not be started.";return this.updateStatus(0,"Failed to start Tor",a),!1}this.updateStatus(90,"Verifying Tor connection...");let i=await this.verifyTorConnection();if(!i){try{this.updateStatus(85,"Connection failed; enabling Snowflake bridges and retrying...");const a={...t,enableBridges:!0,transport:"snowflake",bridges:[]};await this.configureTor(a)&&(await this.startTor()).success&&(this.updateStatus(90,"Verifying Tor connection (bridges enabled)..."),i=await this.verifyTorConnection())}catch{}if(!i)return this.updateStatus(0,"Tor connection failed","Could not establish Tor connection (even with bridges)."),!1}}return this.updateStatus(100,"Tor setup complete!"),!0}catch(n){return console.error("[TOR-SETUP] Auto setup failed:",n),this.updateStatus(0,"Setup failed",n instanceof Error?n.message:"Unknown error"),h_(n,{context:"tor_auto_setup"}),!1}}async downloadTor(){try{if(typeof window<"u"&&window.electronAPI){console.log("[TOR-SETUP] Requesting Tor Expert Bundle download from main process...");const t=await window.electronAPI.downloadTor();return console.log("[TOR-SETUP] Download result:",t),t.success}return console.error("[TOR-SETUP] No electronAPI available for download"),!1}catch(t){return console.error("[TOR-SETUP] Failed to download Tor Expert Bundle:",t),!1}}async installTor(){try{if(typeof window<"u"&&window.electronAPI){console.log("[TOR-SETUP] Calling electronAPI.installTor...");const t=await window.electronAPI.installTor();return console.log("[TOR-SETUP] Install result from Electron:",t),this.status.isInstalled=t.success,!t.success&&t.error&&console.error("[TOR-SETUP] Install error:",t.error),t.success}return console.error("[TOR-SETUP] No electronAPI available for install"),!1}catch(t){return console.error("[TOR-SETUP] Failed to install Tor:",t),!1}}async configureTor(t){try{console.log("[TOR-SETUP] Generating Tor configuration...");const n=this.generateTorConfig(t);if(console.log("[TOR-SETUP] Generated config length:",n.length),typeof window<"u"&&window.electronAPI){console.log("[TOR-SETUP] Calling electronAPI.configureTor...");const r=await window.electronAPI.configureTor({config:n});return console.log("[TOR-SETUP] Configuration result from Electron:",r),this.status.isConfigured=r.success,r.success}return console.error("[TOR-SETUP] No electronAPI available"),!1}catch(n){return console.error("[TOR-SETUP] Failed to configure Tor:",n),!1}}async startTor(){try{if(typeof window<"u"&&window.electronAPI){const t=await window.electronAPI.startTor();return this.status.isRunning=t.success,t}return{success:!1,error:"electronAPI not available"}}catch(t){return console.error("[TOR-SETUP] Failed to start Tor:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async verifyTorConnection(){try{if(typeof window<"u"&&window.electronAPI){const t=await window.electronAPI.verifyTorConnection();return t.success&&t.isTor}return console.log("[TOR-SETUP] Cannot verify Tor connection in browser environment, assuming success"),!0}catch(t){return console.error("[TOR-SETUP] Failed to verify Tor connection:",t),!1}}generateTorConfig(t){var o,i,a;const n=((o=t.customConfig)==null?void 0:o.socksPort)||9050,r=((i=t.customConfig)==null?void 0:i.controlPort)||9051,s=["# Auto-generated Tor configuration for end2end","# SOCKS proxy port",`SocksPort ${n}`,"","# Control port for circuit management",`ControlPort ${r}`,"CookieAuthentication 1","","# Security settings","SocksPolicy accept 127.0.0.1","SocksPolicy reject *","","# Performance optimizations","NewCircuitPeriod 30","MaxCircuitDirtiness 600","CircuitBuildTimeout 10","LearnCircuitBuildTimeout 1","","# Privacy settings","ExitPolicy reject *:*","ClientOnly 1","","# Logging (minimal for privacy)","Log notice stdout","SafeLogging 1"];if(t.enableBridges){const u=Array.isArray(t.bridges)&&t.bridges.length>0,l=u?t.transport||"obfs4":"snowflake";if(s.push("","# Bridge configuration for censored networks","UseBridges 1"),l==="obfs4"){const d=((a=t.obfs4ProxyPath)==null?void 0:a.trim())||"obfs4proxy";s.push(`ClientTransportPlugin obfs4 exec ${d}`)}else l==="snowflake"&&(s.push("ClientTransportPlugin snowflake exec snowflake-client"),s.push("Bridge snowflake"));if(u)for(const d of t.bridges){const g=(d||"").trim();g&&s.push(g.startsWith("Bridge ")?g:`Bridge ${g}`)}}return t.customConfig&&(s.push("","# Custom configuration"),Object.entries(t.customConfig).forEach(([u,l])=>{s.push(`${u} ${l}`)})),s.join(`
`)}detectPlatform(){if(typeof window<"u"&&window.electronAPI)return window.electronAPI.platform||"unknown";const t=navigator.userAgent.toLowerCase();return t.includes("win")?"win32":t.includes("mac")?"darwin":t.includes("linux")?"linux":"unknown"}isElectronEnvironment(){return typeof window<"u"&&window.electronAPI}updateStatus(t,n,r){this.status.setupProgress=t,this.status.currentStep=n,r&&(this.status.error=r),this.progressCallback&&this.progressCallback({...this.status})}getStatus(){return{...this.status}}async refreshStatus(){try{if(typeof window<"u"&&window.electronAPI){const t=await window.electronAPI.getTorStatus(),n=await window.electronAPI.getTorInfo();this.status.isRunning=t.isRunning||!1,this.status.version=n.systemTorVersion||n.version||void 0,this.status.socksPort=n.socksPort,this.status.controlPort=n.controlPort,this.status.isRunning&&this.status.version&&(this.status.isInstalled=!0,this.status.isConfigured=!0,this.status.setupProgress=100,this.status.currentStep="Tor setup complete!")}}catch(t){console.error("[TOR-SETUP] Failed to refresh status:",t)}return{...this.status}}async stopTor(){try{if(typeof window<"u"&&window.electronAPI){const t=await window.electronAPI.stopTor();return t.success&&(this.status.isRunning=!1,this.status.error=void 0,this.status.setupProgress=0,this.status.currentStep="Ready to setup"),t.success}return!1}catch(t){return console.error("[TOR-SETUP] Failed to stop Tor:",t),!1}}async uninstallTor(){try{if(typeof window<"u"&&window.electronAPI){const t=await window.electronAPI.uninstallTor();return t.success&&(this.status.isInstalled=!1,this.status.isConfigured=!1,this.status.isRunning=!1,this.status.error=void 0,this.status.setupProgress=0,this.status.currentStep="Ready to setup"),t.success}return!1}catch(t){return console.error("[TOR-SETUP] Failed to uninstall Tor:",t),!1}}};const Zs=new YM,XM=({onClose:e})=>{const[t,n]=w.useState(null),[r,s]=w.useState(!1),[o,i]=w.useState(null),a=async()=>{s(!0);try{if(typeof window<"u"&&window.electronAPI){const d=await window.electronAPI.getTorInfo();n(d),console.log("[TOR-VERIFICATION] Tor info:",d)}}catch(d){console.error("[TOR-VERIFICATION] Failed to get Tor info:",d)}finally{s(!1)}},u=async()=>{s(!0);try{if(typeof window<"u"&&window.electronAPI){const d=await window.electronAPI.verifyTorConnection();i(d),console.log("[TOR-VERIFICATION] Connection test:",d)}}catch(d){console.error("[TOR-VERIFICATION] Failed to test connection:",d),i({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{s(!1)}},l=({condition:d,trueText:g,falseText:h})=>c.jsx(yu,{variant:d?"default":"destructive",className:"ml-2",children:d?c.jsxs(c.Fragment,{children:[c.jsx(Cu,{className:"w-3 h-3 mr-1"}),g]}):c.jsxs(c.Fragment,{children:[c.jsx(y0,{className:"w-3 h-3 mr-1"}),h]})});return c.jsxs(Zt,{className:"w-full max-w-2xl mx-auto",children:[c.jsxs(hn,{children:[c.jsxs(gn,{className:"flex items-center",children:[c.jsx(ep,{className:"w-5 h-5 mr-2"}),"Tor Verification"]}),c.jsx(Dn,{children:"Verify that Tor is actually running and working properly"})]}),c.jsxs(An,{className:"space-y-4",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(he,{onClick:a,disabled:r,children:r?c.jsxs(c.Fragment,{children:[c.jsx(i_,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking..."]}):"Check Tor Status"}),c.jsx(he,{onClick:u,disabled:r,variant:"outline",children:"Test Connection"}),e&&c.jsx(he,{onClick:e,variant:"ghost",children:"Close"})]}),t&&c.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h3",{className:"font-semibold",children:"Tor Process Status"}),t.usingSystemTor&&c.jsxs("div",{className:"mb-3 p-2 bg-blue-100 rounded text-sm text-blue-800",children:[c.jsx("strong",{children:"System Tor Detected:"})," Using system-installed Tor service",t.systemTorVersion&&` (v${t.systemTorVersion})`]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[c.jsxs("div",{className:"flex items-center",children:["Process Running:",c.jsx(l,{condition:t.isRunning,trueText:"Yes",falseText:"No"})]}),c.jsxs("div",{className:"flex items-center",children:["Process ID: ",c.jsx("span",{className:"ml-2 font-mono",children:t.processId==="system"?"System Service":t.processId||"N/A"})]}),c.jsxs("div",{className:"flex items-center",children:["Config File:",c.jsx(l,{condition:t.configExists,trueText:"Exists",falseText:"Missing"}),!t.configExists&&t.usingSystemTor&&c.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Using system config)"})]}),c.jsxs("div",{className:"flex items-center",children:["Config Size: ",c.jsxs("span",{className:"ml-2 font-mono",children:[t.configSize," bytes"]})]}),c.jsxs("div",{className:"flex items-center",children:["Tor Binary:",c.jsx(l,{condition:t.binaryExists,trueText:"Found",falseText:t.usingSystemTor?"System":"Missing"})]}),c.jsxs("div",{className:"flex items-center",children:["Data Directory:",c.jsx(l,{condition:t.dataDirExists,trueText:"Exists",falseText:"Missing"}),!t.dataDirExists&&t.usingSystemTor&&c.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Using system data)"})]}),c.jsxs("div",{className:"flex items-center",children:["Platform: ",c.jsx("span",{className:"ml-2 font-mono",children:t.platform})]}),c.jsxs("div",{className:"flex items-center",children:["Architecture: ",c.jsx("span",{className:"ml-2 font-mono",children:t.arch})]}),t.uptime>0&&c.jsxs("div",{className:"flex items-center",children:["Uptime: ",c.jsxs("span",{className:"ml-2 font-mono",children:[Math.floor(t.uptime/1e3),"s"]})]})]}),c.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Tor Directory:"})," ",t.torDirectory]}),t.configPath&&c.jsxs("div",{children:[c.jsx("strong",{children:"Config File:"})," ",t.configPath]}),t.binaryPath&&c.jsxs("div",{children:[c.jsx("strong",{children:"Binary Path:"})," ",t.binaryPath==="system"?"System Tor (via PATH)":t.binaryPath]}),t.dataDirectory&&c.jsxs("div",{children:[c.jsx("strong",{children:"Data Directory:"})," ",t.dataDirectory]})]})]}),o&&c.jsxs("div",{className:"space-y-4 p-6 bg-blue-50 rounded-lg border border-blue-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Connection Test Results"}),c.jsx("div",{className:"space-y-3",children:o.success?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Cu,{className:"w-5 h-5 mt-0.5 text-green-600 flex-shrink-0"}),c.jsx("div",{className:"space-y-2",children:o.isTor?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-green-800 font-medium text-base",children:"SUCCESS: You are connected through Tor!"}),c.jsxs("div",{className:"text-sm text-green-700 bg-green-100 px-3 py-2 rounded-md font-mono",children:["Your Tor IP: ",o.ip]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-orange-800 font-medium text-base",children:"WARNING: Connected but not through Tor"}),c.jsxs("div",{className:"text-sm text-orange-700 bg-orange-100 px-3 py-2 rounded-md font-mono",children:["Your real IP: ",o.ip]})]})})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(y0,{className:"w-5 h-5 mt-0.5 text-red-600 flex-shrink-0"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-red-800 font-medium text-base",children:"FAILED: Connection test failed"}),c.jsx("div",{className:"text-sm text-red-700 bg-red-100 px-3 py-2 rounded-md",children:o.error})]})]})})]}),c.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[c.jsx("p",{children:c.jsx("strong",{children:"How to verify Tor is really working:"})}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[c.jsx("li",{children:'Process Running should be "Yes" with a real Process ID'}),c.jsx("li",{children:"Config File should exist with content (>400 bytes)"}),c.jsx("li",{children:'Connection test should show "You are connected through Tor!"'}),c.jsx("li",{children:"Your IP should be different from your real IP"})]})]})]})]})};function JM({onComplete:e}){const[t,n]=w.useState({isInstalled:!1,isConfigured:!1,isRunning:!1,setupProgress:0,currentStep:"Ready to setup"}),[r,s]=w.useState(!1),[o,i]=w.useState(!1),[a,u]=w.useState(!1),[l,d]=w.useState(!1),[g,h]=w.useState("obfs4"),[A,f]=w.useState(""),[m,v]=w.useState("");w.useEffect(()=>{(async()=>{const C=await Zs.refreshStatus();n(C)})()},[]),w.useEffect(()=>{if(a)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[a]);const p=async()=>{console.log("[TOR-SETUP-UI] Starting auto setup..."),s(!0),n(E=>({...E,error:void 0}));try{console.log("[TOR-SETUP-UI] Calling torAutoSetup.autoSetup()...");const E=A.split(`
`).map(I=>I.trim()).filter(I=>I.length>0),C=await Zs.autoSetup({autoStart:!0,enableBridges:l,transport:g,bridges:E,obfs4ProxyPath:m||void 0,onProgress:I=>{console.log("[TOR-SETUP-UI] Progress update:",I),n(b=>({...b,...I,error:I.error||void 0}))}});console.log("[TOR-SETUP-UI] Setup completed, success:",C)}catch(E){console.error("[TOR-SETUP-UI] Setup failed:",E),n(C=>({...C,error:E instanceof Error?E.message:"Setup failed",setupProgress:0}))}finally{s(!1)}},y=()=>t.setupProgress===100&&!r?"default":r||t.setupProgress>0&&t.setupProgress<100?"secondary":t.error&&!r?"destructive":"outline",x=()=>t.setupProgress===100&&!r?"Complete":r||t.setupProgress>0&&t.setupProgress<100?"Setting Up...":t.error&&!r?"Setup Failed":"Not Configured";return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Zt,{children:[c.jsx(hn,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(gn,{children:"Tor Network Setup"}),c.jsx(Dn,{children:"Automatic installation and configuration of Tor for anonymous networking"})]}),c.jsx(yu,{variant:y(),children:x()})]})}),c.jsxs(An,{className:"space-y-6",children:[t.error&&!r&&t.setupProgress===0&&c.jsxs(pu,{variant:"destructive",children:[c.jsx(c_,{className:"h-4 w-4"}),c.jsxs(mu,{children:[c.jsx("strong",{children:"Setup Error:"})," ",t.error]})]}),(r||t.setupProgress>0)&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:t.currentStep}),c.jsxs("span",{children:[t.setupProgress,"%"]})]}),c.jsx(D2,{value:t.setupProgress,className:"w-full"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${t.isInstalled?"bg-green-500":"bg-gray-300"}`}),c.jsx("span",{children:"Installed"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${t.isConfigured?"bg-green-500":"bg-gray-300"}`}),c.jsx("span",{children:"Configured"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${t.isRunning?"bg-green-500":"bg-gray-300"}`}),c.jsx("span",{children:"Running"})]})]}),t.setupProgress!==100&&c.jsx("div",{className:"space-y-3",children:c.jsx(he,{onClick:p,disabled:r,className:"w-full flex items-center gap-2",size:"lg",children:r?c.jsxs(c.Fragment,{children:[c.jsx(e_,{className:"h-4 w-4 animate-spin"}),"Setting up Tor..."]}):c.jsxs(c.Fragment,{children:[c.jsx(bu,{className:"h-4 w-4"}),"Auto-Setup Tor Network"]})})}),t.setupProgress===100&&!r&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs(pu,{children:[c.jsx(Cu,{className:"h-4 w-4"}),c.jsxs(mu,{children:[c.jsx("strong",{children:"Setup Complete!"})," Tor is now installed, configured, and running. Your connections will be automatically routed through the Tor network for enhanced privacy."]})]}),c.jsx(he,{onClick:()=>e&&e(!0),className:"w-full",size:"lg",children:"Continue to Login"}),c.jsxs(he,{onClick:()=>u(!0),variant:"outline",className:"w-full flex items-center gap-2",children:[c.jsx(ep,{className:"h-4 w-4"}),"Verify Tor is Really Working"]})]}),c.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>i(!o),className:"w-full",children:[c.jsx(Su,{className:"h-4 w-4 mr-2"}),o?"Hide":"Show"," Advanced Options"]}),o&&c.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[c.jsx("h4",{className:"font-semibold text-sm",children:"Advanced Configuration"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Tor Version:"}),c.jsx("span",{className:"font-mono",children:t.version||"Not detected"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"SOCKS Port:"}),c.jsx("span",{className:"font-mono",children:t.socksPort||"Not detected"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Control Port:"}),c.jsx("span",{className:"font-mono",children:t.controlPort||"Not detected"})]})]}),c.jsxs("div",{className:"space-y-3 p-3 bg-white rounded-md border",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Le,{htmlFor:"enableBridges",className:"text-sm font-medium",children:"Use Bridges (for censored networks)"}),c.jsx("input",{id:"enableBridges",type:"checkbox",className:"h-4 w-4",checked:l,onChange:E=>d(E.target.checked)})]}),l&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(Le,{htmlFor:"transport",className:"text-sm",children:"Transport"}),c.jsxs("select",{id:"transport",className:"border rounded px-2 py-1 text-sm w-full bg-white",value:g,onChange:E=>h(E.target.value),children:[c.jsx("option",{value:"obfs4",children:"obfs4 (recommended)"}),c.jsx("option",{value:"snowflake",children:"snowflake"})]})]}),g==="obfs4"&&c.jsxs("div",{className:"space-y-1",children:[c.jsx(Le,{htmlFor:"obfs4path",className:"text-sm",children:"obfs4proxy path (optional)"}),c.jsx(Fn,{id:"obfs4path",placeholder:"e.g. /usr/bin/obfs4proxy",value:m,onChange:E=>v(E.target.value)}),c.jsx("div",{className:"text-xs text-gray-500",children:"Leave empty if obfs4proxy is in PATH"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Le,{htmlFor:"bridges",className:"text-sm",children:"Bridge lines"}),c.jsx(xp,{id:"bridges",placeholder:"Paste your Bridge lines here (one per line).\\nExample: obfs4 1.2.3.4:9001 0123456789ABCDEF cert=... iat-mode=0",value:A,onChange:E=>f(E.target.value),className:"min-h-[120px]"}),c.jsx("div",{className:"text-xs text-gray-500",children:"Get bridges at https://bridges.torproject.org/ or via email to bridges@torproject.org from a Riseup or Gmail address."})]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(he,{variant:"outline",size:"sm",onClick:async()=>{await Zs.stopTor();const E=await Zs.refreshStatus();n({...E,setupProgress:0,currentStep:"Ready to setup"})},disabled:!t.isRunning,children:"Stop Tor"}),c.jsx(he,{variant:"outline",size:"sm",onClick:async()=>{await Zs.uninstallTor();const E=await Zs.refreshStatus();n({...E,setupProgress:0,currentStep:"Ready to setup"})},disabled:r,children:"Uninstall"})]})]})]})]}),c.jsxs(Zt,{children:[c.jsx(hn,{children:c.jsx(gn,{className:"text-lg",children:"What happens during setup?"})}),c.jsx(An,{children:c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(bu,{className:"h-4 w-4 mt-0.5 text-blue-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Download Tor"}),c.jsx("div",{className:"text-muted-foreground",children:"Downloads the latest Tor binary for your operating system"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Su,{className:"h-4 w-4 mt-0.5 text-green-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Configure Settings"}),c.jsx("div",{className:"text-muted-foreground",children:"Creates optimal configuration for secure anonymous networking"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Dd,{className:"h-4 w-4 mt-0.5 text-purple-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Start Service"}),c.jsx("div",{className:"text-muted-foreground",children:"Launches Tor and establishes connection to the network"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Cu,{className:"h-4 w-4 mt-0.5 text-green-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Verify Connection"}),c.jsx("div",{className:"text-muted-foreground",children:"Tests the connection to ensure everything is working properly"})]})]})]})})]}),a&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-hidden",onClick:E=>{E.target===E.currentTarget&&u(!1)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"hidden"},children:c.jsx("div",{className:"max-h-[90vh] overflow-y-auto scrollbar-hide",children:c.jsx(XM,{onClose:()=>u(!1)})})})]})}const qM=()=>{const[e,t]=w.useState([]),[n,r]=w.useState("messages"),[s,o]=w.useState(!1),[,i]=w.useState(!1),a=y2();w.useEffect(()=>((async()=>{if(console.log("[TOR-SETUP] Checking Tor setup requirements..."),console.log("[TOR-SETUP] Window object keys:",Object.keys(window)),console.log("[TOR-SETUP] electronAPI available?",!!window.electronAPI),console.log("[TOR-SETUP] electronAPI object:",window.electronAPI),console.log("[TOR-SETUP] Tor supported?",Dt.isSupported()),!Dt.isSupported()){console.log("[TOR] Browser environment detected - Tor setup not available");return}const b=Zs.getStatus(),S=localStorage.getItem("tor_enabled")!=="false";console.log("[TOR-SETUP] Tor status:",b),console.log("[TOR-SETUP] User wants Tor:",S),Dt.isSupported()?(console.log("[TOR-SETUP] Showing Tor setup screen (forced for testing)"),o(!0)):b.isRunning&&(console.log("[TOR-SETUP] Tor already running, initializing network manager"),i(!0),Dt.updateConfig({enabled:!0}),await Dt.initialize())})(),()=>{Dt.isSupported()&&Dt.shutdown()}),[]);const u=async I=>{I?(o(!1),i(!0),localStorage.setItem("tor_enabled","true"),Dt.updateConfig({enabled:!0}),await Dt.initialize()):localStorage.getItem("tor_setup_skipped")==="true"?(console.log("[TOR-SETUP] User skipped Tor setup, proceeding to login"),o(!1),i(!1),localStorage.setItem("tor_enabled","false")):(console.log("[TOR-SETUP] Setup failed, staying on Tor setup screen"),i(!1),localStorage.setItem("tor_enabled","false"))},l=TM({Authentication:a,setMessages:t}),d=_M(a.getKeysOnDemand,l.saveMessageToLocalDB,a.setLoginError),g=NM([],a.loginUsernameRef,I=>{t(b=>[...b,I])},a.serverHybridPublic,a.getKeysOnDemand,a.aesKeyRef,a.keyManagerRef,a.passphrasePlaintextRef,a.isLoggedIn),h=FM(a.loginUsernameRef,t,l.saveMessageToLocalDB),A=UM(a.loginUsernameRef.current||"",a.isLoggedIn,t,l.saveMessageToLocalDB),f=jM({Authentication:a,Database:l,fileHandler:d,encryptedHandler:h,handleMessageHistory:A.handleMessageHistory}),m=w.useCallback(I=>d.handleSendFile(I,a.loginUsernameRef.current,l.saveMessageToLocalDB),[d,a.loginUsernameRef,l.saveMessageToLocalDB]);w.useEffect(()=>{var I,b;if(!s)try{(b=(I=window.edgeApi)==null?void 0:I.wsConnect)==null||b.call(I)}catch{}},[s]),LM(f,h,a.setLoginError);const{conversations:v,selectedConversation:p,addConversation:y,selectConversation:x,getConversationMessages:E}=OM(a.loginUsernameRef.current||"",l.users,e),C=E(p||"");return console.log("[Index] Conversation state:",{conversationsCount:v.length,selectedConversation:p,usersCount:l.users.length,hasSelectedConversation:!!p}),s?c.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-900 dark:to-slate-900",children:c.jsx("div",{className:"w-full max-w-2xl",children:c.jsx(JM,{onComplete:u,autoStart:!0})})}):a.isLoggedIn?c.jsx(hM,{currentUsername:a.loginUsernameRef.current||"",children:c.jsxs("div",{className:"flex h-screen bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-900 dark:to-slate-900 relative",children:[c.jsx(I_,{currentUsername:a.loginUsernameRef.current||"",onAddConversation:y,onLogout:async()=>await a.logout(l.secureDBRef),onActiveTabChange:r,settingsContent:c.jsx(RM,{}),children:c.jsx(z_,{conversations:v,selectedConversation:p||void 0,onSelectConversation:x,currentUsername:a.loginUsernameRef.current||""})}),c.jsx("div",{className:oe("flex-1 flex flex-col transition-all duration-300",n==="messages"?"ml-80":n==="settings"?"ml-[400px]":"ml-16"),children:p?c.jsx(xM,{messages:C,setMessages:t,callingAuthContext:a,onSendMessage:async(I,b,S,k)=>{if(console.log("[Index] Attempting to send message:",{messageId:I,content:b,messageSignalType:S,selectedConversation:p,usersCount:l.users.length,users:l.users.map(B=>B.username),replyTo:k,replyToType:typeof k,replyToKeys:k?Object.keys(k):null}),!p){console.error("[Index] No conversation selected");return}if(y(p,!1),S==="typing-start"||S==="typing-stop"){let B=l.users.find(M=>M.username===p);return B||(console.log("[Index] User not in Database.users, creating placeholder for:",p),B={id:crypto.randomUUID(),username:p,isOnline:!1,hybridPublicKeys:void 0}),console.log("[Index] Found/created target user for typing indicator:",B),g.handleSendMessage(B,b,k?{id:k.id,sender:k.sender,content:k.content}:void 0,void 0,S)}let R=l.users.find(B=>B.username===p);return R||(console.log("[Index] User not in Database.users, creating placeholder for:",p),R={id:crypto.randomUUID(),username:p,isOnline:!1,hybridPublicKeys:void 0},l.setUsers(B=>[...B,R])),console.log("[Index] Found/created target user:",R),g.handleSendMessage(R,b,k?{id:k.id,sender:k.sender,content:k.content}:void 0,void 0,S)},onSendFile:m,isEncrypted:!0,currentUsername:a.loginUsernameRef.current||"",users:l.users,selectedConversation:p,saveMessageToLocalDB:l.saveMessageToLocalDB}):c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-gray-500",children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Welcome to endtoend"}),c.jsx("p",{children:"Click the messages button to view conversations or add a new chat to begin"})]})})})]})}):c.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-900 dark:to-slate-900",children:c.jsx(b_,{isGeneratingKeys:a.isGeneratingKeys,authStatus:a.authStatus,error:a.loginError,onAccountSubmit:a.handleAccountSubmit,onServerPasswordSubmit:a.handleServerPasswordSubmit,accountAuthenticated:a.accountAuthenticated,isRegistrationMode:a.isRegistrationMode,serverTrustRequest:a.serverTrustRequest,onAcceptServerTrust:a.acceptServerTrust,onRejectServerTrust:a.rejectServerTrust,showPassphrasePrompt:a.showPassphrasePrompt,setShowPassphrasePrompt:a.setShowPassphrasePrompt,onPassphraseSubmit:a.handlePassphraseSubmit})})};function ZM(){return c.jsx("div",{className:"App",children:c.jsx(qM,{onNavigate:()=>{}})})}var Sc,Ew;try{(Ew=(Sc=window==null?void 0:window.edgeApi)==null?void 0:Sc.rendererReady)==null||Ew.call(Sc)}catch{}Fv(document.getElementById("root")).render(c.jsx(VS,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:c.jsx(ZM,{})}));export{sr as a,sQ as b,fl as c,dC as d,Sn as h,H4 as i,W4 as r,_5 as s,V4 as u};